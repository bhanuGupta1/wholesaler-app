import{u as R,a as T,j as e,L as c,d as I}from"./index-DvFbKyhG.js";import{r as p}from"./vendor-DJ1oPbzn.js";import{c as M,q as f,w,l as C,g as h}from"./firebase-DMhjYMbV.js";const U=()=>{var N,j,y,v;const{darkMode:t}=R(),{user:a}=T(),[o,b]=p.useState({myOrders:[],totalOrders:0,totalSpent:0,pendingOrders:0,completedOrders:0}),[E,u]=p.useState(!0),[g,O]=p.useState(null),s={btnPrimary:t?"cyber-btn cyber-btn-primary":"neumorph-btn neumorph-btn-primary neon-border",btnSecondary:t?"cyber-btn cyber-btn-secondary":"neumorph-btn neumorph-btn-secondary neumorph-elevated",btnOutline:t?"cyber-btn cyber-btn-outline":"neumorph-btn neumorph-btn-outline neumorph-subtle",btnGhost:t?"cyber-btn cyber-btn-ghost":"neumorph-btn neumorph-btn-ghost neumorph-breathing",btnSuccess:t?"cyber-btn cyber-btn-success":"neumorph-btn neumorph-btn-success neumorph-elevated",card:t?"cyber-card":"neumorph-card neumorph-breathing",cardGlow:t?"card-glow":"neumorph-card-glow",featureCard:t?"feature-card":"neumorph-feature-card neumorph-elevated",title:t?"cyberpunk-title":"neumorph-title",titleGlow:t?"cyber-glow":"neumorph-text-shadow",titleEmbossed:t?"cyber-glow":"neumorph-embossed",gradientText:t?"holographic-text":"neumorph-gradient-text",description:t?"text-gray-300":"text-gray-600 neumorph-text-shadow",textPrimary:t?"text-cyan-400":"text-blue-600",textSecondary:t?"text-purple-400":"text-purple-600",textAccent:t?"text-yellow-400":"text-green-600",textMuted:t?"text-gray-400":"text-gray-500",textBase:t?"text-gray-200":"text-gray-900",container:"relative z-1",section:"py-12 relative z-1",glassContainer:t?"bg-black/80 backdrop-blur-15":"neumorph-glass-strong neumorph-elevated",premiumContainer:t?"bg-black/90 backdrop-blur-20":"neumorph-holographic neumorph-elevated",statsCard:t?"cyber-card border-cyan-900/30":"neumorph-card neumorph-subtle neumorph-breathing",loadingContainer:t?"bg-black/90 backdrop-blur-20":"neumorph-glass-strong neumorph-breathing",loadingSpinner:t?"cyber-loading-spinner":"neumorph-loading-spinner",dashboardCard:t?"cyber-dashboard-card":"neumorph-dashboard-card neumorph-breathing",mainCard:t?"cyber-card border-cyan-900/30":"neumorph-card neumorph-elevated neumorph-breathing"};return p.useEffect(()=>{async function l(){if(!(a!=null&&a.uid)){u(!1);return}try{u(!0),O(null);const m=M(I,"orders");let i=[];try{const n=f(m,w("userId","==",a.uid),C(50));i=(await h(n)).docs.map(d=>{const r=d.data();return{id:d.id,customerName:r.customerName||a.displayName||"You",total:r.total||0,status:r.status||"pending",items:r.items||[],itemCount:r.itemCount||(r.items?r.items.length:0),createdAt:r.createdAt?r.createdAt.toDate():new Date,userId:r.userId,userEmail:r.userEmail}})}catch{i=[]}if(i.length===0&&a.email)try{const n=f(m,w("userEmail","==",a.email),C(50));i=(await h(n)).docs.map(d=>{const r=d.data();return{id:d.id,customerName:r.customerName||a.displayName||"You",total:r.total||0,status:r.status||"pending",items:r.items||[],itemCount:r.itemCount||(r.items?r.items.length:0),createdAt:r.createdAt?r.createdAt.toDate():new Date,userId:r.userId,userEmail:r.userEmail}})}catch{i=[]}if(i.length===0)try{i=(await h(m)).docs.map(d=>{const r=d.data();return{id:d.id,customerName:r.customerName||"Unknown",total:r.total||0,status:r.status||"pending",items:r.items||[],itemCount:r.itemCount||(r.items?r.items.length:0),createdAt:r.createdAt?r.createdAt.toDate():new Date,userId:r.userId,userEmail:r.userEmail}}).filter(d=>{var r,$;return d.userId===a.uid||d.userEmail===a.email||d.customerName&&d.customerName.toLowerCase().includes((($=(r=a.email)==null?void 0:r.split("@")[0])==null?void 0:$.toLowerCase())||"")})}catch{i=[]}i.sort((n,x)=>x.createdAt-n.createdAt);const S=i.reduce((n,x)=>n+x.total,0),A=i.filter(n=>n.status==="pending").length,P=i.filter(n=>n.status==="completed").length;b({myOrders:i,totalOrders:i.length,totalSpent:S,pendingOrders:A,completedOrders:P}),u(!1)}catch(m){console.error("Error fetching user data:",m),b({myOrders:[],totalOrders:0,totalSpent:0,pendingOrders:0,completedOrders:0}),u(!1)}}l()},[a]),E?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:e.jsxs("div",{className:`relative z-10 text-center max-w-2xl mx-auto px-4 ${t?"":"p-16 rounded-3xl neumorph-glass-strong neumorph-elevated neumorph-breathing"}`,children:[!t&&e.jsx("div",{className:"neumorph-card-glow"}),e.jsx("div",{className:`${s.loadingSpinner} mb-8 mx-auto`}),e.jsxs("h1",{className:`text-4xl font-bold mb-6 ${s.title}`,children:[e.jsx("span",{className:`${s.textPrimary} ${s.titleEmbossed}`,children:"LOADING"}),e.jsx("br",{}),e.jsx("span",{className:`${s.textSecondary} ${s.gradientText}`,children:"DASHBOARD"})]}),e.jsx("div",{className:`${s.gradientText} text-lg`,children:t?"Accessing neural interface...":"Preparing your tactical command center..."})]})}):g?e.jsx("div",{className:`container mx-auto px-4 py-8 ${s.textBase}`,children:e.jsxs("div",{className:`text-center py-12 ${s.mainCard} max-w-2xl mx-auto`,children:[t?e.jsx("div",{className:"card-glow"}):e.jsx("div",{className:"neumorph-card-glow"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"text-6xl mb-6",children:"⚠️"}),e.jsx("h2",{className:`text-2xl font-bold mb-4 ${s.title}`,children:e.jsx("span",{className:`${t?"text-red-400":"text-red-600"} ${s.titleEmbossed}`,children:"SYSTEM ERROR"})}),e.jsx("p",{className:`${t?"text-red-300":"text-red-600"} mb-6`,children:g}),e.jsxs("button",{onClick:()=>window.location.reload(),className:s.btnPrimary,children:[e.jsx("span",{className:t?"btn-text":"neumorph-btn-text",children:"Retry Connection"}),t?e.jsx("div",{className:"btn-glow"}):e.jsx("div",{className:"neumorph-btn-glow"})]})]})]})}):a?e.jsxs("div",{className:`container mx-auto px-4 py-8 max-w-7xl ${s.textBase}`,children:[e.jsxs("div",{className:`mb-12 ${s.premiumContainer} ${t?"":"p-8 rounded-3xl"}`,children:[!t&&e.jsx("div",{className:"neumorph-cta-glow"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("h1",{className:`text-4xl md:text-5xl font-bold mb-4 ${s.title}`,children:[e.jsx("span",{className:`${s.textPrimary} ${s.titleEmbossed}`,children:"WELCOME BACK,"}),e.jsx("br",{}),e.jsx("span",{className:`${s.textSecondary} ${s.gradientText}`,"data-text":(a==null?void 0:a.displayName)||((N=a==null?void 0:a.email)==null?void 0:N.split("@")[0])||"OPERATOR",children:(a==null?void 0:a.displayName)||((j=a==null?void 0:a.email)==null?void 0:j.split("@")[0])||"OPERATOR"})]}),e.jsx("p",{className:`text-xl ${s.description}`,children:t?"Neural interface active. Your personal command center is online.":"Tactical command center operational. Your enhanced dashboard is fully armed and ready for deployment."})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12",children:[{title:"Total Orders",value:o.totalOrders,icon:"📋",color:t?"text-cyan-400":"text-blue-600",bgColor:t?"bg-cyan-900/30":"bg-blue-100",description:t?"Combat missions":"Tactical operations"},{title:"Total Spent",value:`$${o.totalSpent.toFixed(2)}`,icon:"💰",color:t?"text-green-400":"text-green-600",bgColor:t?"bg-green-900/30":"bg-green-100",description:t?"Credits invested":"Capital deployed"},{title:"Pending Orders",value:o.pendingOrders,icon:"⏳",color:t?"text-yellow-400":"text-yellow-600",bgColor:t?"bg-yellow-900/30":"bg-yellow-100",description:t?"In processing":"Active missions"},{title:"Completed",value:o.completedOrders,icon:"✅",color:t?"text-purple-400":"text-purple-600",bgColor:t?"bg-purple-900/30":"bg-purple-100",description:t?"Successful ops":"Mission success"}].map((l,m)=>e.jsxs("div",{className:`${s.statsCard} p-8`,children:[t?e.jsx("div",{className:"card-glow"}):e.jsx("div",{className:"neumorph-card-glow"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`text-4xl p-4 rounded-2xl ${l.bgColor} ${t?"":"neumorph-subtle"}`,children:l.icon}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:`text-3xl font-bold ${l.color} ${s.titleEmbossed}`,children:l.value})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${s.textMuted} uppercase tracking-wider font-semibold ${s.title}`,children:l.title}),e.jsx("p",{className:`text-xs ${s.textMuted} mt-1`,children:l.description})]})]})]},m))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:`${s.mainCard} overflow-hidden`,children:[t?e.jsx("div",{className:"card-glow"}):e.jsx("div",{className:"neumorph-card-glow"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:`px-8 py-6 border-b ${t?"border-cyan-900/30":"border-gray-200"} flex justify-between items-center`,children:[e.jsx("h2",{className:`text-2xl font-bold ${s.title}`,children:e.jsx("span",{className:`${s.textPrimary} ${s.titleEmbossed}`,children:t?"RECENT MISSIONS":"RECENT ORDERS"})}),o.totalOrders>5&&e.jsxs(c,{to:"/orders",className:`text-sm font-medium ${s.textSecondary} hover:${s.textPrimary} transition-colors ${t?"":"neumorph-text-shadow"}`,children:["View All (",o.totalOrders,") →"]})]}),e.jsx("div",{className:`divide-y ${t?"divide-cyan-900/30":"divide-gray-200"}`,children:o.myOrders.length>0?o.myOrders.slice(0,5).map(l=>e.jsx("div",{className:`p-8 ${t?"hover:bg-cyan-900/10":"hover:bg-blue-50/50"} transition-all duration-300`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("h3",{className:`text-lg font-bold ${s.textBase} ${s.title}`,children:[t?"Mission":"Order"," #",l.id.slice(0,8)]}),e.jsx("span",{className:`ml-4 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider ${l.status==="completed"?t?"bg-green-900/30 text-green-400 border border-green-600":"bg-green-100 text-green-800 border border-green-300":l.status==="pending"?t?"bg-yellow-900/30 text-yellow-400 border border-yellow-600":"bg-yellow-100 text-yellow-800 border border-yellow-300":l.status==="processing"?t?"bg-blue-900/30 text-blue-400 border border-blue-600":"bg-blue-100 text-blue-800 border border-blue-300":t?"bg-red-900/30 text-red-400 border border-red-600":"bg-red-100 text-red-800 border border-red-300"}`,children:l.status})]}),e.jsxs("div",{className:`mt-2 text-sm ${s.textMuted} ${t?"":"neumorph-text-shadow"}`,children:[l.createdAt.toLocaleDateString()," • ",l.itemCount," items"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-xl font-bold ${s.textBase} ${s.titleEmbossed}`,children:["$",l.total.toFixed(2)]}),e.jsx(c,{to:`/orders/${l.id}`,className:`text-sm ${s.textSecondary} hover:${s.textPrimary} font-medium transition-colors`,children:"View Details →"})]})]})},l.id)):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:`text-6xl mb-6 ${s.textMuted}`,children:"📦"}),e.jsx("h3",{className:`text-xl font-bold ${s.textBase} mb-3 ${s.title}`,children:t?"NO MISSIONS DEPLOYED":"NO ORDERS YET"}),e.jsx("p",{className:`${s.description} mb-6`,children:t?"You have not initiated any missions yet. Begin operations to see your mission history here.":"You haven't placed any orders yet. Start shopping to see your tactical orders here!"}),e.jsxs(c,{to:"/products",className:s.btnPrimary,children:[e.jsx("span",{className:"text-xl",children:"🛒"}),e.jsx("span",{className:t?"btn-text":"neumorph-btn-text",children:t?"Browse Arsenal":"Browse Products"}),t?e.jsx("div",{className:"btn-glow"}):e.jsx("div",{className:"neumorph-btn-glow"})]})]})})]})]})}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:`${s.mainCard}`,children:[t?e.jsx("div",{className:"card-glow"}):e.jsx("div",{className:"neumorph-card-glow"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:`px-8 py-6 border-b ${t?"border-cyan-900/30":"border-gray-200"}`,children:e.jsx("h2",{className:`text-xl font-bold ${s.title}`,children:e.jsx("span",{className:`${s.textPrimary} ${s.titleEmbossed}`,children:t?"QUICK ACCESS":"QUICK ACTIONS"})})}),e.jsxs("div",{className:"p-8 space-y-4",children:[e.jsxs(c,{to:"/products",className:`${s.btnPrimary} w-full justify-center`,children:[e.jsx("span",{className:"text-xl",children:"🛒"}),e.jsx("span",{className:t?"btn-text":"neumorph-btn-text",children:t?"Browse Arsenal":"Browse Products"}),t?e.jsx("div",{className:"btn-glow"}):e.jsx("div",{className:"neumorph-btn-glow"})]}),e.jsxs(c,{to:"/cart",className:`${s.btnSecondary} w-full justify-center`,children:[e.jsx("span",{className:"text-xl",children:"🛍️"}),e.jsx("span",{className:t?"btn-text":"neumorph-btn-text",children:t?"Command Cart":"View Cart"}),t?e.jsx("div",{className:"btn-glow"}):e.jsx("div",{className:"neumorph-btn-glow"})]}),e.jsxs(c,{to:"/orders",className:`${s.btnSuccess} w-full justify-center`,children:[e.jsx("span",{className:"text-xl",children:"📋"}),e.jsx("span",{className:t?"btn-text":"neumorph-btn-text",children:t?"Mission History":"My Orders"}),t?e.jsx("div",{className:"btn-glow"}):e.jsx("div",{className:"neumorph-btn-glow"})]}),e.jsxs(c,{to:"/create-order",className:`${s.btnOutline} w-full justify-center`,children:[e.jsx("span",{className:"text-xl",children:"➕"}),e.jsx("span",{className:t?"btn-text":"neumorph-btn-text",children:t?"Deploy Mission":"New Order"}),t?e.jsx("div",{className:"btn-glow"}):e.jsx("div",{className:"neumorph-btn-glow"})]})]})]})]}),e.jsxs("div",{className:`${s.mainCard}`,children:[t?e.jsx("div",{className:"card-glow"}):e.jsx("div",{className:"neumorph-card-glow"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:`px-8 py-6 border-b ${t?"border-cyan-900/30":"border-gray-200"}`,children:e.jsx("h2",{className:`text-xl font-bold ${s.title}`,children:e.jsx("span",{className:`${s.textPrimary} ${s.titleEmbossed}`,children:t?"OPERATOR PROFILE":"ACCOUNT SUMMARY"})})}),e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-16 w-16 rounded-full ${t?"bg-cyan-900/30 border-2 border-cyan-600":"bg-blue-100 border-2 border-blue-300 neumorph-subtle"} flex items-center justify-center text-xl font-bold ${s.textPrimary}`,children:((a==null?void 0:a.displayName)||(a==null?void 0:a.email)||"U").charAt(0).toUpperCase()}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:`font-bold text-lg ${s.textBase} ${s.titleEmbossed}`,children:(a==null?void 0:a.displayName)||((y=a==null?void 0:a.email)==null?void 0:y.split("@")[0])||"User"}),e.jsx("div",{className:`text-sm ${s.textMuted}`,children:a==null?void 0:a.email})]})]}),e.jsx("div",{className:`pt-6 border-t ${t?"border-cyan-900/30":"border-gray-200"}`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-sm ${s.textMuted} uppercase tracking-wider font-semibold`,children:t?"Operator Status":"Account Status"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${t?"bg-green-900/30 text-green-400 border border-green-600":"bg-green-100 text-green-800 border border-green-300"}`,children:"ACTIVE"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-sm ${s.textMuted} uppercase tracking-wider font-semibold`,children:t?"Recruit Date":"Member Since"}),e.jsx("span",{className:`text-sm ${s.textBase} font-medium`,children:(v=a==null?void 0:a.metadata)!=null&&v.creationTime?new Date(a.metadata.creationTime).getFullYear():new Date().getFullYear()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-sm ${s.textMuted} uppercase tracking-wider font-semibold`,children:t?"Security Level":"User Role"}),e.jsx("span",{className:`text-sm ${s.textBase} font-medium uppercase`,children:"CUSTOMER"})]})]})})]})})]})]}),e.jsxs("div",{className:`${t?"cyber-cta-card":"neumorph-cta-card neumorph-holographic"} p-8`,children:[t?e.jsx("div",{className:"cta-glow"}):e.jsx("div",{className:"neumorph-cta-glow"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h3",{className:`text-lg font-bold mb-4 ${s.title}`,children:e.jsx("span",{className:`${s.textAccent} ${s.titleEmbossed}`,children:t?"⚡ TACTICAL TIP":"💡 SHOPPING TIP"})}),e.jsx("p",{className:`text-sm ${s.description} mb-6`,children:t?"Maximize your combat efficiency by deploying bulk orders! Many arsenal items offer tactical discounts for large-scale operations.":"Save money by buying in bulk! Many of our products offer quantity discounts for larger orders."}),e.jsx(c,{to:"/products",className:`text-sm font-medium ${s.textSecondary} hover:${s.textPrimary} transition-colors`,children:t?"Explore Arsenal →":"Explore Bulk Pricing →"})]})]})]})]})]}):e.jsx("div",{className:`container mx-auto px-4 py-8 ${s.textBase}`,children:e.jsxs("div",{className:`text-center py-12 ${s.mainCard} max-w-2xl mx-auto`,children:[t?e.jsx("div",{className:"card-glow"}):e.jsx("div",{className:"neumorph-card-glow"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"text-6xl mb-6",children:"🔒"}),e.jsx("h2",{className:`text-2xl font-bold mb-4 ${s.title}`,children:e.jsx("span",{className:`${s.textPrimary} ${s.titleEmbossed}`,children:t?"ACCESS DENIED":"ACCESS REQUIRED"})}),e.jsx("p",{className:`${s.description} mb-6`,children:t?"Neural authentication required to access dashboard.":"Please authenticate to access your tactical command center."}),e.jsxs(c,{to:"/login",className:s.btnPrimary,children:[e.jsx("span",{className:t?"btn-text":"neumorph-btn-text",children:t?"Initialize Login":"Authenticate"}),t?e.jsx("div",{className:"btn-glow"}):e.jsx("div",{className:"neumorph-btn-glow"})]})]})]})})};export{U as default};
