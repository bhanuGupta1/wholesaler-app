const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Inventory-CgdR_eq5.js","assets/useAccessControl-BXrVC6sy.js","assets/ProductModal-BQUGEEpe.js","assets/ImageUploader-CUmbQXB_.js","assets/AddProduct-RHbWA88Y.js","assets/ProductDetail-D24HLyOD.js","assets/CreateOrder-D5SxRfi0.js","assets/orderService-km_3fDDb.js","assets/OrderDetails-B3Ow_0vK.js","assets/format-CBpsKyOP.js","assets/InvoicePage-syehjgvh.js","assets/Checkout-BZ3QZEEo.js","assets/FeedbackPage-DDtpvQXI.js","assets/createLucideIcon-BKg8aoxV.js","assets/SupportCenter-UK08887k.js","assets/index-BT01DE8H.js","assets/OrderProcessing-Dqn6ai43.js","assets/AboutUs-Bj_Yjbmd.js","assets/PrivacyPolicy-CGNQgWTq.js","assets/HelpCenter-B8SBWI5e.js","assets/ContactSupport-0QZTRG8p.js","assets/UserSpecificOrders-DZDJdIlN.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var XO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function V1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cv={exports:{}},qc={},kv={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pa=Symbol.for("react.element"),$1=Symbol.for("react.portal"),U1=Symbol.for("react.fragment"),F1=Symbol.for("react.strict_mode"),z1=Symbol.for("react.profiler"),B1=Symbol.for("react.provider"),q1=Symbol.for("react.context"),H1=Symbol.for("react.forward_ref"),W1=Symbol.for("react.suspense"),G1=Symbol.for("react.memo"),Q1=Symbol.for("react.lazy"),Ng=Symbol.iterator;function K1(t){return t===null||typeof t!="object"?null:(t=Ng&&t[Ng]||t["@@iterator"],typeof t=="function"?t:null)}var Pv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jv=Object.assign,Ov={};function Ri(t,e,n){this.props=t,this.context=e,this.refs=Ov,this.updater=n||Pv}Ri.prototype.isReactComponent={};Ri.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ri.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Dv(){}Dv.prototype=Ri.prototype;function _f(t,e,n){this.props=t,this.context=e,this.refs=Ov,this.updater=n||Pv}var wf=_f.prototype=new Dv;wf.constructor=_f;jv(wf,Ri.prototype);wf.isPureReactComponent=!0;var Sg=Array.isArray,Lv=Object.prototype.hasOwnProperty,Ef={current:null},Mv={key:!0,ref:!0,__self:!0,__source:!0};function Vv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Lv.call(e,r)&&!Mv.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:pa,type:t,key:i,ref:o,props:s,_owner:Ef.current}}function Y1(t,e){return{$$typeof:pa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bf(t){return typeof t=="object"&&t!==null&&t.$$typeof===pa}function X1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rg=/\/+/g;function Ju(t,e){return typeof t=="object"&&t!==null&&t.key!=null?X1(""+t.key):e.toString(36)}function Al(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case pa:case $1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ju(o,0):r,Sg(s)?(n="",t!=null&&(n=t.replace(Rg,"$&/")+"/"),Al(s,e,n,"",function(d){return d})):s!=null&&(bf(s)&&(s=Y1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Rg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Sg(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Ju(i,l);o+=Al(i,e,n,u,s)}else if(u=K1(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Ju(i,l++),o+=Al(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Za(t,e,n){if(t==null)return t;var r=[],s=0;return Al(t,r,"","",function(i){return e.call(n,i,s++)}),r}function J1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var It={current:null},Cl={transition:null},Z1={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:Cl,ReactCurrentOwner:Ef};function $v(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Za,forEach:function(t,e,n){Za(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Za(t,function(){e++}),e},toArray:function(t){return Za(t,function(e){return e})||[]},only:function(t){if(!bf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=Ri;ce.Fragment=U1;ce.Profiler=z1;ce.PureComponent=_f;ce.StrictMode=F1;ce.Suspense=W1;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z1;ce.act=$v;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=jv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ef.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Lv.call(e,u)&&!Mv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:pa,type:t.type,key:s,ref:i,props:r,_owner:o}};ce.createContext=function(t){return t={$$typeof:q1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:B1,_context:t},t.Consumer=t};ce.createElement=Vv;ce.createFactory=function(t){var e=Vv.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:H1,render:t}};ce.isValidElement=bf;ce.lazy=function(t){return{$$typeof:Q1,_payload:{_status:-1,_result:t},_init:J1}};ce.memo=function(t,e){return{$$typeof:G1,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Cl.transition;Cl.transition={};try{t()}finally{Cl.transition=e}};ce.unstable_act=$v;ce.useCallback=function(t,e){return It.current.useCallback(t,e)};ce.useContext=function(t){return It.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return It.current.useDeferredValue(t)};ce.useEffect=function(t,e){return It.current.useEffect(t,e)};ce.useId=function(){return It.current.useId()};ce.useImperativeHandle=function(t,e,n){return It.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return It.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return It.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return It.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return It.current.useReducer(t,e,n)};ce.useRef=function(t){return It.current.useRef(t)};ce.useState=function(t){return It.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return It.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return It.current.useTransition()};ce.version="18.3.1";kv.exports=ce;var A=kv.exports;const eT=V1(A);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT=A,nT=Symbol.for("react.element"),rT=Symbol.for("react.fragment"),sT=Object.prototype.hasOwnProperty,iT=tT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oT={key:!0,ref:!0,__self:!0,__source:!0};function Uv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)sT.call(e,r)&&!oT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:nT,type:t,key:i,ref:o,props:s,_owner:iT.current}}qc.Fragment=rT;qc.jsx=Uv;qc.jsxs=Uv;Cv.exports=qc;var a=Cv.exports,Yd={},Fv={exports:{}},Gt={},zv={exports:{}},Bv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,B){var F=M.length;M.push(B);e:for(;0<F;){var J=F-1>>>1,ne=M[J];if(0<s(ne,B))M[J]=B,M[F]=ne,F=J;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var B=M[0],F=M.pop();if(F!==B){M[0]=F;e:for(var J=0,ne=M.length,H=ne>>>1;J<H;){var Ve=2*(J+1)-1,$e=M[Ve],Q=Ve+1,yt=M[Q];if(0>s($e,F))Q<ne&&0>s(yt,$e)?(M[J]=yt,M[Q]=F,J=Q):(M[J]=$e,M[Ve]=F,J=Ve);else if(Q<ne&&0>s(yt,F))M[J]=yt,M[Q]=F,J=Q;else break e}}return B}function s(M,B){var F=M.sortIndex-B.sortIndex;return F!==0?F:M.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,p=null,y=3,w=!1,R=!1,k=!1,C=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(M){for(var B=n(d);B!==null;){if(B.callback===null)r(d);else if(B.startTime<=M)r(d),B.sortIndex=B.expirationTime,e(u,B);else break;B=n(d)}}function j(M){if(k=!1,N(M),!R)if(n(u)!==null)R=!0,ee(D);else{var B=n(d);B!==null&&ye(j,B.startTime-M)}}function D(M,B){R=!1,k&&(k=!1,T(g),g=-1),w=!0;var F=y;try{for(N(B),p=n(u);p!==null&&(!(p.expirationTime>B)||M&&!x());){var J=p.callback;if(typeof J=="function"){p.callback=null,y=p.priorityLevel;var ne=J(p.expirationTime<=B);B=t.unstable_now(),typeof ne=="function"?p.callback=ne:p===n(u)&&r(u),N(B)}else r(u);p=n(u)}if(p!==null)var H=!0;else{var Ve=n(d);Ve!==null&&ye(j,Ve.startTime-B),H=!1}return H}finally{p=null,y=F,w=!1}}var U=!1,E=null,g=-1,v=5,I=-1;function x(){return!(t.unstable_now()-I<v)}function P(){if(E!==null){var M=t.unstable_now();I=M;var B=!0;try{B=E(!0,M)}finally{B?S():(U=!1,E=null)}}else U=!1}var S;if(typeof _=="function")S=function(){_(P)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,G=z.port2;z.port1.onmessage=P,S=function(){G.postMessage(null)}}else S=function(){C(P,0)};function ee(M){E=M,U||(U=!0,S())}function ye(M,B){g=C(function(){M(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){R||w||(R=!0,ee(D))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(M){switch(y){case 1:case 2:case 3:var B=3;break;default:B=y}var F=y;y=B;try{return M()}finally{y=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,B){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var F=y;y=M;try{return B()}finally{y=F}},t.unstable_scheduleCallback=function(M,B,F){var J=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?J+F:J):F=J,M){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=F+ne,M={id:h++,callback:B,priorityLevel:M,startTime:F,expirationTime:ne,sortIndex:-1},F>J?(M.sortIndex=F,e(d,M),n(u)===null&&M===n(d)&&(k?(T(g),g=-1):k=!0,ye(j,F-J))):(M.sortIndex=ne,e(u,M),R||w||(R=!0,ee(D))),M},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(M){var B=y;return function(){var F=y;y=B;try{return M.apply(this,arguments)}finally{y=F}}}})(Bv);zv.exports=Bv;var aT=zv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT=A,Wt=aT;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qv=new Set,Vo={};function Rs(t,e){hi(t,e),hi(t+"Capture",e)}function hi(t,e){for(Vo[t]=e,t=0;t<e.length;t++)qv.add(e[t])}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xd=Object.prototype.hasOwnProperty,cT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ag={},Cg={};function uT(t){return Xd.call(Cg,t)?!0:Xd.call(Ag,t)?!1:cT.test(t)?Cg[t]=!0:(Ag[t]=!0,!1)}function dT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function hT(t,e,n,r){if(e===null||typeof e>"u"||dT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Tf=/[\-:]([a-z])/g;function If(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Tf,If);st[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Tf,If);st[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Tf,If);st[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Nf(t,e,n,r){var s=st.hasOwnProperty(e)?st[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hT(e,n,s,r)&&(n=null),r||s===null?uT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var er=lT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,el=Symbol.for("react.element"),zs=Symbol.for("react.portal"),Bs=Symbol.for("react.fragment"),Sf=Symbol.for("react.strict_mode"),Jd=Symbol.for("react.profiler"),Hv=Symbol.for("react.provider"),Wv=Symbol.for("react.context"),Rf=Symbol.for("react.forward_ref"),Zd=Symbol.for("react.suspense"),eh=Symbol.for("react.suspense_list"),Af=Symbol.for("react.memo"),cr=Symbol.for("react.lazy"),Gv=Symbol.for("react.offscreen"),kg=Symbol.iterator;function eo(t){return t===null||typeof t!="object"?null:(t=kg&&t[kg]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,Zu;function ho(t){if(Zu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zu=e&&e[1]||""}return`
`+Zu+t}var ed=!1;function td(t,e){if(!t||ed)return"";ed=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{ed=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ho(t):""}function fT(t){switch(t.tag){case 5:return ho(t.type);case 16:return ho("Lazy");case 13:return ho("Suspense");case 19:return ho("SuspenseList");case 0:case 2:case 15:return t=td(t.type,!1),t;case 11:return t=td(t.type.render,!1),t;case 1:return t=td(t.type,!0),t;default:return""}}function th(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bs:return"Fragment";case zs:return"Portal";case Jd:return"Profiler";case Sf:return"StrictMode";case Zd:return"Suspense";case eh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Wv:return(t.displayName||"Context")+".Consumer";case Hv:return(t._context.displayName||"Context")+".Provider";case Rf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Af:return e=t.displayName||null,e!==null?e:th(t.type)||"Memo";case cr:e=t._payload,t=t._init;try{return th(t(e))}catch{}}return null}function mT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return th(e);case 8:return e===Sf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function jr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pT(t){var e=Qv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function tl(t){t._valueTracker||(t._valueTracker=pT(t))}function Kv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Qv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ec(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nh(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Pg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=jr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Yv(t,e){e=e.checked,e!=null&&Nf(t,"checked",e,!1)}function rh(t,e){Yv(t,e);var n=jr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sh(t,e.type,n):e.hasOwnProperty("defaultValue")&&sh(t,e.type,jr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sh(t,e,n){(e!=="number"||ec(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fo=Array.isArray;function ni(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+jr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ih(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Og(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(fo(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:jr(n)}}function Xv(t,e){var n=jr(e.value),r=jr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Dg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Jv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Jv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var nl,Zv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(nl=nl||document.createElement("div"),nl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $o(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Eo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gT=["Webkit","ms","Moz","O"];Object.keys(Eo).forEach(function(t){gT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Eo[e]=Eo[t]})});function ex(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Eo.hasOwnProperty(t)&&Eo[t]?(""+e).trim():e+"px"}function tx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ex(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var yT=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ah(t,e){if(e){if(yT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function lh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ch=null;function Cf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var uh=null,ri=null,si=null;function Lg(t){if(t=va(t)){if(typeof uh!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Kc(e),uh(t.stateNode,t.type,e))}}function nx(t){ri?si?si.push(t):si=[t]:ri=t}function rx(){if(ri){var t=ri,e=si;if(si=ri=null,Lg(t),e)for(t=0;t<e.length;t++)Lg(e[t])}}function sx(t,e){return t(e)}function ix(){}var nd=!1;function ox(t,e,n){if(nd)return t(e,n);nd=!0;try{return sx(t,e,n)}finally{nd=!1,(ri!==null||si!==null)&&(ix(),rx())}}function Uo(t,e){var n=t.stateNode;if(n===null)return null;var r=Kc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var dh=!1;if(Hn)try{var to={};Object.defineProperty(to,"passive",{get:function(){dh=!0}}),window.addEventListener("test",to,to),window.removeEventListener("test",to,to)}catch{dh=!1}function vT(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var bo=!1,tc=null,nc=!1,hh=null,xT={onError:function(t){bo=!0,tc=t}};function _T(t,e,n,r,s,i,o,l,u){bo=!1,tc=null,vT.apply(xT,arguments)}function wT(t,e,n,r,s,i,o,l,u){if(_T.apply(this,arguments),bo){if(bo){var d=tc;bo=!1,tc=null}else throw Error(q(198));nc||(nc=!0,hh=d)}}function As(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ax(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Mg(t){if(As(t)!==t)throw Error(q(188))}function ET(t){var e=t.alternate;if(!e){if(e=As(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Mg(s),t;if(i===r)return Mg(s),e;i=i.sibling}throw Error(q(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function lx(t){return t=ET(t),t!==null?cx(t):null}function cx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=cx(t);if(e!==null)return e;t=t.sibling}return null}var ux=Wt.unstable_scheduleCallback,Vg=Wt.unstable_cancelCallback,bT=Wt.unstable_shouldYield,TT=Wt.unstable_requestPaint,Fe=Wt.unstable_now,IT=Wt.unstable_getCurrentPriorityLevel,kf=Wt.unstable_ImmediatePriority,dx=Wt.unstable_UserBlockingPriority,rc=Wt.unstable_NormalPriority,NT=Wt.unstable_LowPriority,hx=Wt.unstable_IdlePriority,Hc=null,bn=null;function ST(t){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(Hc,t,void 0,(t.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:CT,RT=Math.log,AT=Math.LN2;function CT(t){return t>>>=0,t===0?32:31-(RT(t)/AT|0)|0}var rl=64,sl=4194304;function mo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=mo(l):(i&=o,i!==0&&(r=mo(i)))}else o=n&~s,o!==0?r=mo(o):i!==0&&(r=mo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-un(e),s=1<<n,r|=t[n],e&=~s;return r}function kT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-un(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=kT(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function fh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fx(){var t=rl;return rl<<=1,!(rl&4194240)&&(rl=64),t}function rd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ga(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-un(e),t[e]=n}function jT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-un(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Pf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-un(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var xe=0;function mx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var px,jf,gx,yx,vx,mh=!1,il=[],wr=null,Er=null,br=null,Fo=new Map,zo=new Map,dr=[],OT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $g(t,e){switch(t){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":Fo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zo.delete(e.pointerId)}}function no(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=va(e),e!==null&&jf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function DT(t,e,n,r,s){switch(e){case"focusin":return wr=no(wr,t,e,n,r,s),!0;case"dragenter":return Er=no(Er,t,e,n,r,s),!0;case"mouseover":return br=no(br,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Fo.set(i,no(Fo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,zo.set(i,no(zo.get(i)||null,t,e,n,r,s)),!0}return!1}function xx(t){var e=ls(t.target);if(e!==null){var n=As(e);if(n!==null){if(e=n.tag,e===13){if(e=ax(n),e!==null){t.blockedOn=e,vx(t.priority,function(){gx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ph(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ch=r,n.target.dispatchEvent(r),ch=null}else return e=va(n),e!==null&&jf(e),t.blockedOn=n,!1;e.shift()}return!0}function Ug(t,e,n){kl(t)&&n.delete(e)}function LT(){mh=!1,wr!==null&&kl(wr)&&(wr=null),Er!==null&&kl(Er)&&(Er=null),br!==null&&kl(br)&&(br=null),Fo.forEach(Ug),zo.forEach(Ug)}function ro(t,e){t.blockedOn===e&&(t.blockedOn=null,mh||(mh=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,LT)))}function Bo(t){function e(s){return ro(s,t)}if(0<il.length){ro(il[0],t);for(var n=1;n<il.length;n++){var r=il[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wr!==null&&ro(wr,t),Er!==null&&ro(Er,t),br!==null&&ro(br,t),Fo.forEach(e),zo.forEach(e),n=0;n<dr.length;n++)r=dr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<dr.length&&(n=dr[0],n.blockedOn===null);)xx(n),n.blockedOn===null&&dr.shift()}var ii=er.ReactCurrentBatchConfig,ic=!0;function MT(t,e,n,r){var s=xe,i=ii.transition;ii.transition=null;try{xe=1,Of(t,e,n,r)}finally{xe=s,ii.transition=i}}function VT(t,e,n,r){var s=xe,i=ii.transition;ii.transition=null;try{xe=4,Of(t,e,n,r)}finally{xe=s,ii.transition=i}}function Of(t,e,n,r){if(ic){var s=ph(t,e,n,r);if(s===null)fd(t,e,r,oc,n),$g(t,r);else if(DT(s,t,e,n,r))r.stopPropagation();else if($g(t,r),e&4&&-1<OT.indexOf(t)){for(;s!==null;){var i=va(s);if(i!==null&&px(i),i=ph(t,e,n,r),i===null&&fd(t,e,r,oc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else fd(t,e,r,null,n)}}var oc=null;function ph(t,e,n,r){if(oc=null,t=Cf(r),t=ls(t),t!==null)if(e=As(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ax(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return oc=t,null}function _x(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IT()){case kf:return 1;case dx:return 4;case rc:case NT:return 16;case hx:return 536870912;default:return 16}default:return 16}}var vr=null,Df=null,Pl=null;function wx(){if(Pl)return Pl;var t,e=Df,n=e.length,r,s="value"in vr?vr.value:vr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Pl=s.slice(t,1<r?1-r:void 0)}function jl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ol(){return!0}function Fg(){return!1}function Qt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ol:Fg,this.isPropagationStopped=Fg,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ol)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ol)},persist:function(){},isPersistent:ol}),e}var Ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lf=Qt(Ai),ya=Pe({},Ai,{view:0,detail:0}),$T=Qt(ya),sd,id,so,Wc=Pe({},ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==so&&(so&&t.type==="mousemove"?(sd=t.screenX-so.screenX,id=t.screenY-so.screenY):id=sd=0,so=t),sd)},movementY:function(t){return"movementY"in t?t.movementY:id}}),zg=Qt(Wc),UT=Pe({},Wc,{dataTransfer:0}),FT=Qt(UT),zT=Pe({},ya,{relatedTarget:0}),od=Qt(zT),BT=Pe({},Ai,{animationName:0,elapsedTime:0,pseudoElement:0}),qT=Qt(BT),HT=Pe({},Ai,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),WT=Qt(HT),GT=Pe({},Ai,{data:0}),Bg=Qt(GT),QT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=YT[t])?!!e[t]:!1}function Mf(){return XT}var JT=Pe({},ya,{key:function(t){if(t.key){var e=QT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?KT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mf,charCode:function(t){return t.type==="keypress"?jl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ZT=Qt(JT),eI=Pe({},Wc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qg=Qt(eI),tI=Pe({},ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mf}),nI=Qt(tI),rI=Pe({},Ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),sI=Qt(rI),iI=Pe({},Wc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),oI=Qt(iI),aI=[9,13,27,32],Vf=Hn&&"CompositionEvent"in window,To=null;Hn&&"documentMode"in document&&(To=document.documentMode);var lI=Hn&&"TextEvent"in window&&!To,Ex=Hn&&(!Vf||To&&8<To&&11>=To),Hg=" ",Wg=!1;function bx(t,e){switch(t){case"keyup":return aI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qs=!1;function cI(t,e){switch(t){case"compositionend":return Tx(e);case"keypress":return e.which!==32?null:(Wg=!0,Hg);case"textInput":return t=e.data,t===Hg&&Wg?null:t;default:return null}}function uI(t,e){if(qs)return t==="compositionend"||!Vf&&bx(t,e)?(t=wx(),Pl=Df=vr=null,qs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ex&&e.locale!=="ko"?null:e.data;default:return null}}var dI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dI[t.type]:e==="textarea"}function Ix(t,e,n,r){nx(r),e=ac(e,"onChange"),0<e.length&&(n=new Lf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Io=null,qo=null;function hI(t){Lx(t,0)}function Gc(t){var e=Gs(t);if(Kv(e))return t}function fI(t,e){if(t==="change")return e}var Nx=!1;if(Hn){var ad;if(Hn){var ld="oninput"in document;if(!ld){var Qg=document.createElement("div");Qg.setAttribute("oninput","return;"),ld=typeof Qg.oninput=="function"}ad=ld}else ad=!1;Nx=ad&&(!document.documentMode||9<document.documentMode)}function Kg(){Io&&(Io.detachEvent("onpropertychange",Sx),qo=Io=null)}function Sx(t){if(t.propertyName==="value"&&Gc(qo)){var e=[];Ix(e,qo,t,Cf(t)),ox(hI,e)}}function mI(t,e,n){t==="focusin"?(Kg(),Io=e,qo=n,Io.attachEvent("onpropertychange",Sx)):t==="focusout"&&Kg()}function pI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gc(qo)}function gI(t,e){if(t==="click")return Gc(e)}function yI(t,e){if(t==="input"||t==="change")return Gc(e)}function vI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hn=typeof Object.is=="function"?Object.is:vI;function Ho(t,e){if(hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Xd.call(e,s)||!hn(t[s],e[s]))return!1}return!0}function Yg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xg(t,e){var n=Yg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yg(n)}}function Rx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Rx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ax(){for(var t=window,e=ec();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ec(t.document)}return e}function $f(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xI(t){var e=Ax(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Rx(n.ownerDocument.documentElement,n)){if(r!==null&&$f(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Xg(n,i);var o=Xg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _I=Hn&&"documentMode"in document&&11>=document.documentMode,Hs=null,gh=null,No=null,yh=!1;function Jg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yh||Hs==null||Hs!==ec(r)||(r=Hs,"selectionStart"in r&&$f(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),No&&Ho(No,r)||(No=r,r=ac(gh,"onSelect"),0<r.length&&(e=new Lf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hs)))}function al(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ws={animationend:al("Animation","AnimationEnd"),animationiteration:al("Animation","AnimationIteration"),animationstart:al("Animation","AnimationStart"),transitionend:al("Transition","TransitionEnd")},cd={},Cx={};Hn&&(Cx=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function Qc(t){if(cd[t])return cd[t];if(!Ws[t])return t;var e=Ws[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Cx)return cd[t]=e[n];return t}var kx=Qc("animationend"),Px=Qc("animationiteration"),jx=Qc("animationstart"),Ox=Qc("transitionend"),Dx=new Map,Zg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zr(t,e){Dx.set(t,e),Rs(e,[t])}for(var ud=0;ud<Zg.length;ud++){var dd=Zg[ud],wI=dd.toLowerCase(),EI=dd[0].toUpperCase()+dd.slice(1);zr(wI,"on"+EI)}zr(kx,"onAnimationEnd");zr(Px,"onAnimationIteration");zr(jx,"onAnimationStart");zr("dblclick","onDoubleClick");zr("focusin","onFocus");zr("focusout","onBlur");zr(Ox,"onTransitionEnd");hi("onMouseEnter",["mouseout","mouseover"]);hi("onMouseLeave",["mouseout","mouseover"]);hi("onPointerEnter",["pointerout","pointerover"]);hi("onPointerLeave",["pointerout","pointerover"]);Rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bI=new Set("cancel close invalid load scroll toggle".split(" ").concat(po));function e0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,wT(r,e,void 0,t),t.currentTarget=null}function Lx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;e0(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;e0(s,l,d),i=u}}}if(nc)throw t=hh,nc=!1,hh=null,t}function be(t,e){var n=e[Eh];n===void 0&&(n=e[Eh]=new Set);var r=t+"__bubble";n.has(r)||(Mx(e,t,2,!1),n.add(r))}function hd(t,e,n){var r=0;e&&(r|=4),Mx(n,t,r,e)}var ll="_reactListening"+Math.random().toString(36).slice(2);function Wo(t){if(!t[ll]){t[ll]=!0,qv.forEach(function(n){n!=="selectionchange"&&(bI.has(n)||hd(n,!1,t),hd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ll]||(e[ll]=!0,hd("selectionchange",!1,e))}}function Mx(t,e,n,r){switch(_x(e)){case 1:var s=MT;break;case 4:s=VT;break;default:s=Of}n=s.bind(null,e,n,t),s=void 0,!dh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function fd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ls(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}ox(function(){var d=i,h=Cf(n),p=[];e:{var y=Dx.get(t);if(y!==void 0){var w=Lf,R=t;switch(t){case"keypress":if(jl(n)===0)break e;case"keydown":case"keyup":w=ZT;break;case"focusin":R="focus",w=od;break;case"focusout":R="blur",w=od;break;case"beforeblur":case"afterblur":w=od;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=zg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=FT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=nI;break;case kx:case Px:case jx:w=qT;break;case Ox:w=sI;break;case"scroll":w=$T;break;case"wheel":w=oI;break;case"copy":case"cut":case"paste":w=WT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=qg}var k=(e&4)!==0,C=!k&&t==="scroll",T=k?y!==null?y+"Capture":null:y;k=[];for(var _=d,N;_!==null;){N=_;var j=N.stateNode;if(N.tag===5&&j!==null&&(N=j,T!==null&&(j=Uo(_,T),j!=null&&k.push(Go(_,j,N)))),C)break;_=_.return}0<k.length&&(y=new w(y,R,null,n,h),p.push({event:y,listeners:k}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",y&&n!==ch&&(R=n.relatedTarget||n.fromElement)&&(ls(R)||R[Wn]))break e;if((w||y)&&(y=h.window===h?h:(y=h.ownerDocument)?y.defaultView||y.parentWindow:window,w?(R=n.relatedTarget||n.toElement,w=d,R=R?ls(R):null,R!==null&&(C=As(R),R!==C||R.tag!==5&&R.tag!==6)&&(R=null)):(w=null,R=d),w!==R)){if(k=zg,j="onMouseLeave",T="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(k=qg,j="onPointerLeave",T="onPointerEnter",_="pointer"),C=w==null?y:Gs(w),N=R==null?y:Gs(R),y=new k(j,_+"leave",w,n,h),y.target=C,y.relatedTarget=N,j=null,ls(h)===d&&(k=new k(T,_+"enter",R,n,h),k.target=N,k.relatedTarget=C,j=k),C=j,w&&R)t:{for(k=w,T=R,_=0,N=k;N;N=Ms(N))_++;for(N=0,j=T;j;j=Ms(j))N++;for(;0<_-N;)k=Ms(k),_--;for(;0<N-_;)T=Ms(T),N--;for(;_--;){if(k===T||T!==null&&k===T.alternate)break t;k=Ms(k),T=Ms(T)}k=null}else k=null;w!==null&&t0(p,y,w,k,!1),R!==null&&C!==null&&t0(p,C,R,k,!0)}}e:{if(y=d?Gs(d):window,w=y.nodeName&&y.nodeName.toLowerCase(),w==="select"||w==="input"&&y.type==="file")var D=fI;else if(Gg(y))if(Nx)D=yI;else{D=pI;var U=mI}else(w=y.nodeName)&&w.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(D=gI);if(D&&(D=D(t,d))){Ix(p,D,n,h);break e}U&&U(t,y,d),t==="focusout"&&(U=y._wrapperState)&&U.controlled&&y.type==="number"&&sh(y,"number",y.value)}switch(U=d?Gs(d):window,t){case"focusin":(Gg(U)||U.contentEditable==="true")&&(Hs=U,gh=d,No=null);break;case"focusout":No=gh=Hs=null;break;case"mousedown":yh=!0;break;case"contextmenu":case"mouseup":case"dragend":yh=!1,Jg(p,n,h);break;case"selectionchange":if(_I)break;case"keydown":case"keyup":Jg(p,n,h)}var E;if(Vf)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else qs?bx(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(Ex&&n.locale!=="ko"&&(qs||g!=="onCompositionStart"?g==="onCompositionEnd"&&qs&&(E=wx()):(vr=h,Df="value"in vr?vr.value:vr.textContent,qs=!0)),U=ac(d,g),0<U.length&&(g=new Bg(g,t,null,n,h),p.push({event:g,listeners:U}),E?g.data=E:(E=Tx(n),E!==null&&(g.data=E)))),(E=lI?cI(t,n):uI(t,n))&&(d=ac(d,"onBeforeInput"),0<d.length&&(h=new Bg("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:d}),h.data=E))}Lx(p,e)})}function Go(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ac(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Uo(t,n),i!=null&&r.unshift(Go(t,i,s)),i=Uo(t,e),i!=null&&r.push(Go(t,i,s))),t=t.return}return r}function Ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function t0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=Uo(n,i),u!=null&&o.unshift(Go(n,u,l))):s||(u=Uo(n,i),u!=null&&o.push(Go(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var TI=/\r\n?/g,II=/\u0000|\uFFFD/g;function n0(t){return(typeof t=="string"?t:""+t).replace(TI,`
`).replace(II,"")}function cl(t,e,n){if(e=n0(e),n0(t)!==e&&n)throw Error(q(425))}function lc(){}var vh=null,xh=null;function _h(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wh=typeof setTimeout=="function"?setTimeout:void 0,NI=typeof clearTimeout=="function"?clearTimeout:void 0,r0=typeof Promise=="function"?Promise:void 0,SI=typeof queueMicrotask=="function"?queueMicrotask:typeof r0<"u"?function(t){return r0.resolve(null).then(t).catch(RI)}:wh;function RI(t){setTimeout(function(){throw t})}function md(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Bo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Bo(e)}function Tr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function s0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ci=Math.random().toString(36).slice(2),wn="__reactFiber$"+Ci,Qo="__reactProps$"+Ci,Wn="__reactContainer$"+Ci,Eh="__reactEvents$"+Ci,AI="__reactListeners$"+Ci,CI="__reactHandles$"+Ci;function ls(t){var e=t[wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wn]||n[wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=s0(t);t!==null;){if(n=t[wn])return n;t=s0(t)}return e}t=n,n=t.parentNode}return null}function va(t){return t=t[wn]||t[Wn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Kc(t){return t[Qo]||null}var bh=[],Qs=-1;function Br(t){return{current:t}}function Ie(t){0>Qs||(t.current=bh[Qs],bh[Qs]=null,Qs--)}function we(t,e){Qs++,bh[Qs]=t.current,t.current=e}var Or={},pt=Br(Or),Pt=Br(!1),gs=Or;function fi(t,e){var n=t.type.contextTypes;if(!n)return Or;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function jt(t){return t=t.childContextTypes,t!=null}function cc(){Ie(Pt),Ie(pt)}function i0(t,e,n){if(pt.current!==Or)throw Error(q(168));we(pt,e),we(Pt,n)}function Vx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(q(108,mT(t)||"Unknown",s));return Pe({},n,r)}function uc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Or,gs=pt.current,we(pt,t),we(Pt,Pt.current),!0}function o0(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=Vx(t,e,gs),r.__reactInternalMemoizedMergedChildContext=t,Ie(Pt),Ie(pt),we(pt,t)):Ie(Pt),we(Pt,n)}var Ln=null,Yc=!1,pd=!1;function $x(t){Ln===null?Ln=[t]:Ln.push(t)}function kI(t){Yc=!0,$x(t)}function qr(){if(!pd&&Ln!==null){pd=!0;var t=0,e=xe;try{var n=Ln;for(xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ln=null,Yc=!1}catch(s){throw Ln!==null&&(Ln=Ln.slice(t+1)),ux(kf,qr),s}finally{xe=e,pd=!1}}return null}var Ks=[],Ys=0,dc=null,hc=0,Yt=[],Xt=0,ys=null,Mn=1,Vn="";function ss(t,e){Ks[Ys++]=hc,Ks[Ys++]=dc,dc=t,hc=e}function Ux(t,e,n){Yt[Xt++]=Mn,Yt[Xt++]=Vn,Yt[Xt++]=ys,ys=t;var r=Mn;t=Vn;var s=32-un(r)-1;r&=~(1<<s),n+=1;var i=32-un(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Mn=1<<32-un(e)+s|n<<s|r,Vn=i+t}else Mn=1<<i|n<<s|r,Vn=t}function Uf(t){t.return!==null&&(ss(t,1),Ux(t,1,0))}function Ff(t){for(;t===dc;)dc=Ks[--Ys],Ks[Ys]=null,hc=Ks[--Ys],Ks[Ys]=null;for(;t===ys;)ys=Yt[--Xt],Yt[Xt]=null,Vn=Yt[--Xt],Yt[Xt]=null,Mn=Yt[--Xt],Yt[Xt]=null}var Ht=null,zt=null,Se=!1,ln=null;function Fx(t,e){var n=Jt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function a0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ht=t,zt=Tr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ht=t,zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ys!==null?{id:Mn,overflow:Vn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ht=t,zt=null,!0):!1;default:return!1}}function Th(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ih(t){if(Se){var e=zt;if(e){var n=e;if(!a0(t,e)){if(Th(t))throw Error(q(418));e=Tr(n.nextSibling);var r=Ht;e&&a0(t,e)?Fx(r,n):(t.flags=t.flags&-4097|2,Se=!1,Ht=t)}}else{if(Th(t))throw Error(q(418));t.flags=t.flags&-4097|2,Se=!1,Ht=t}}}function l0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ht=t}function ul(t){if(t!==Ht)return!1;if(!Se)return l0(t),Se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_h(t.type,t.memoizedProps)),e&&(e=zt)){if(Th(t))throw zx(),Error(q(418));for(;e;)Fx(t,e),e=Tr(e.nextSibling)}if(l0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zt=Tr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zt=null}}else zt=Ht?Tr(t.stateNode.nextSibling):null;return!0}function zx(){for(var t=zt;t;)t=Tr(t.nextSibling)}function mi(){zt=Ht=null,Se=!1}function zf(t){ln===null?ln=[t]:ln.push(t)}var PI=er.ReactCurrentBatchConfig;function io(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function dl(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function c0(t){var e=t._init;return e(t._payload)}function Bx(t){function e(T,_){if(t){var N=T.deletions;N===null?(T.deletions=[_],T.flags|=16):N.push(_)}}function n(T,_){if(!t)return null;for(;_!==null;)e(T,_),_=_.sibling;return null}function r(T,_){for(T=new Map;_!==null;)_.key!==null?T.set(_.key,_):T.set(_.index,_),_=_.sibling;return T}function s(T,_){return T=Rr(T,_),T.index=0,T.sibling=null,T}function i(T,_,N){return T.index=N,t?(N=T.alternate,N!==null?(N=N.index,N<_?(T.flags|=2,_):N):(T.flags|=2,_)):(T.flags|=1048576,_)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,_,N,j){return _===null||_.tag!==6?(_=Ed(N,T.mode,j),_.return=T,_):(_=s(_,N),_.return=T,_)}function u(T,_,N,j){var D=N.type;return D===Bs?h(T,_,N.props.children,j,N.key):_!==null&&(_.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===cr&&c0(D)===_.type)?(j=s(_,N.props),j.ref=io(T,_,N),j.return=T,j):(j=Ul(N.type,N.key,N.props,null,T.mode,j),j.ref=io(T,_,N),j.return=T,j)}function d(T,_,N,j){return _===null||_.tag!==4||_.stateNode.containerInfo!==N.containerInfo||_.stateNode.implementation!==N.implementation?(_=bd(N,T.mode,j),_.return=T,_):(_=s(_,N.children||[]),_.return=T,_)}function h(T,_,N,j,D){return _===null||_.tag!==7?(_=fs(N,T.mode,j,D),_.return=T,_):(_=s(_,N),_.return=T,_)}function p(T,_,N){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Ed(""+_,T.mode,N),_.return=T,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case el:return N=Ul(_.type,_.key,_.props,null,T.mode,N),N.ref=io(T,null,_),N.return=T,N;case zs:return _=bd(_,T.mode,N),_.return=T,_;case cr:var j=_._init;return p(T,j(_._payload),N)}if(fo(_)||eo(_))return _=fs(_,T.mode,N,null),_.return=T,_;dl(T,_)}return null}function y(T,_,N,j){var D=_!==null?_.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return D!==null?null:l(T,_,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case el:return N.key===D?u(T,_,N,j):null;case zs:return N.key===D?d(T,_,N,j):null;case cr:return D=N._init,y(T,_,D(N._payload),j)}if(fo(N)||eo(N))return D!==null?null:h(T,_,N,j,null);dl(T,N)}return null}function w(T,_,N,j,D){if(typeof j=="string"&&j!==""||typeof j=="number")return T=T.get(N)||null,l(_,T,""+j,D);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case el:return T=T.get(j.key===null?N:j.key)||null,u(_,T,j,D);case zs:return T=T.get(j.key===null?N:j.key)||null,d(_,T,j,D);case cr:var U=j._init;return w(T,_,N,U(j._payload),D)}if(fo(j)||eo(j))return T=T.get(N)||null,h(_,T,j,D,null);dl(_,j)}return null}function R(T,_,N,j){for(var D=null,U=null,E=_,g=_=0,v=null;E!==null&&g<N.length;g++){E.index>g?(v=E,E=null):v=E.sibling;var I=y(T,E,N[g],j);if(I===null){E===null&&(E=v);break}t&&E&&I.alternate===null&&e(T,E),_=i(I,_,g),U===null?D=I:U.sibling=I,U=I,E=v}if(g===N.length)return n(T,E),Se&&ss(T,g),D;if(E===null){for(;g<N.length;g++)E=p(T,N[g],j),E!==null&&(_=i(E,_,g),U===null?D=E:U.sibling=E,U=E);return Se&&ss(T,g),D}for(E=r(T,E);g<N.length;g++)v=w(E,T,g,N[g],j),v!==null&&(t&&v.alternate!==null&&E.delete(v.key===null?g:v.key),_=i(v,_,g),U===null?D=v:U.sibling=v,U=v);return t&&E.forEach(function(x){return e(T,x)}),Se&&ss(T,g),D}function k(T,_,N,j){var D=eo(N);if(typeof D!="function")throw Error(q(150));if(N=D.call(N),N==null)throw Error(q(151));for(var U=D=null,E=_,g=_=0,v=null,I=N.next();E!==null&&!I.done;g++,I=N.next()){E.index>g?(v=E,E=null):v=E.sibling;var x=y(T,E,I.value,j);if(x===null){E===null&&(E=v);break}t&&E&&x.alternate===null&&e(T,E),_=i(x,_,g),U===null?D=x:U.sibling=x,U=x,E=v}if(I.done)return n(T,E),Se&&ss(T,g),D;if(E===null){for(;!I.done;g++,I=N.next())I=p(T,I.value,j),I!==null&&(_=i(I,_,g),U===null?D=I:U.sibling=I,U=I);return Se&&ss(T,g),D}for(E=r(T,E);!I.done;g++,I=N.next())I=w(E,T,g,I.value,j),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?g:I.key),_=i(I,_,g),U===null?D=I:U.sibling=I,U=I);return t&&E.forEach(function(P){return e(T,P)}),Se&&ss(T,g),D}function C(T,_,N,j){if(typeof N=="object"&&N!==null&&N.type===Bs&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case el:e:{for(var D=N.key,U=_;U!==null;){if(U.key===D){if(D=N.type,D===Bs){if(U.tag===7){n(T,U.sibling),_=s(U,N.props.children),_.return=T,T=_;break e}}else if(U.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===cr&&c0(D)===U.type){n(T,U.sibling),_=s(U,N.props),_.ref=io(T,U,N),_.return=T,T=_;break e}n(T,U);break}else e(T,U);U=U.sibling}N.type===Bs?(_=fs(N.props.children,T.mode,j,N.key),_.return=T,T=_):(j=Ul(N.type,N.key,N.props,null,T.mode,j),j.ref=io(T,_,N),j.return=T,T=j)}return o(T);case zs:e:{for(U=N.key;_!==null;){if(_.key===U)if(_.tag===4&&_.stateNode.containerInfo===N.containerInfo&&_.stateNode.implementation===N.implementation){n(T,_.sibling),_=s(_,N.children||[]),_.return=T,T=_;break e}else{n(T,_);break}else e(T,_);_=_.sibling}_=bd(N,T.mode,j),_.return=T,T=_}return o(T);case cr:return U=N._init,C(T,_,U(N._payload),j)}if(fo(N))return R(T,_,N,j);if(eo(N))return k(T,_,N,j);dl(T,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,_!==null&&_.tag===6?(n(T,_.sibling),_=s(_,N),_.return=T,T=_):(n(T,_),_=Ed(N,T.mode,j),_.return=T,T=_),o(T)):n(T,_)}return C}var pi=Bx(!0),qx=Bx(!1),fc=Br(null),mc=null,Xs=null,Bf=null;function qf(){Bf=Xs=mc=null}function Hf(t){var e=fc.current;Ie(fc),t._currentValue=e}function Nh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function oi(t,e){mc=t,Bf=Xs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kt=!0),t.firstContext=null)}function en(t){var e=t._currentValue;if(Bf!==t)if(t={context:t,memoizedValue:e,next:null},Xs===null){if(mc===null)throw Error(q(308));Xs=t,mc.dependencies={lanes:0,firstContext:t}}else Xs=Xs.next=t;return e}var cs=null;function Wf(t){cs===null?cs=[t]:cs.push(t)}function Hx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Wf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Gn(t,r)}function Gn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ur=!1;function Gf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ir(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Gn(t,n)}return s=r.interleaved,s===null?(e.next=e,Wf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Gn(t,n)}function Ol(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pf(t,n)}}function u0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pc(t,e,n,r){var s=t.updateQueue;ur=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,h=d=u=null,l=i;do{var y=l.lane,w=l.eventTime;if((r&y)===y){h!==null&&(h=h.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var R=t,k=l;switch(y=e,w=n,k.tag){case 1:if(R=k.payload,typeof R=="function"){p=R.call(w,p,y);break e}p=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=k.payload,y=typeof R=="function"?R.call(w,p,y):R,y==null)break e;p=Pe({},p,y);break e;case 2:ur=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[l]:y.push(l))}else w={eventTime:w,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=w,u=p):h=h.next=w,o|=y;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;y=l,l=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(h===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);xs|=o,t.lanes=o,t.memoizedState=p}}function d0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(q(191,s));s.call(r)}}}var xa={},Tn=Br(xa),Ko=Br(xa),Yo=Br(xa);function us(t){if(t===xa)throw Error(q(174));return t}function Qf(t,e){switch(we(Yo,e),we(Ko,t),we(Tn,xa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:oh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=oh(e,t)}Ie(Tn),we(Tn,e)}function gi(){Ie(Tn),Ie(Ko),Ie(Yo)}function Gx(t){us(Yo.current);var e=us(Tn.current),n=oh(e,t.type);e!==n&&(we(Ko,t),we(Tn,n))}function Kf(t){Ko.current===t&&(Ie(Tn),Ie(Ko))}var Ce=Br(0);function gc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gd=[];function Yf(){for(var t=0;t<gd.length;t++)gd[t]._workInProgressVersionPrimary=null;gd.length=0}var Dl=er.ReactCurrentDispatcher,yd=er.ReactCurrentBatchConfig,vs=0,ke=null,We=null,Xe=null,yc=!1,So=!1,Xo=0,jI=0;function ct(){throw Error(q(321))}function Xf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hn(t[n],e[n]))return!1;return!0}function Jf(t,e,n,r,s,i){if(vs=i,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Dl.current=t===null||t.memoizedState===null?MI:VI,t=n(r,s),So){i=0;do{if(So=!1,Xo=0,25<=i)throw Error(q(301));i+=1,Xe=We=null,e.updateQueue=null,Dl.current=$I,t=n(r,s)}while(So)}if(Dl.current=vc,e=We!==null&&We.next!==null,vs=0,Xe=We=ke=null,yc=!1,e)throw Error(q(300));return t}function Zf(){var t=Xo!==0;return Xo=0,t}function xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?ke.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function tn(){if(We===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Xe===null?ke.memoizedState:Xe.next;if(e!==null)Xe=e,We=t;else{if(t===null)throw Error(q(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Xe===null?ke.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Jo(t,e){return typeof e=="function"?e(t):e}function vd(t){var e=tn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=We,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var h=d.lane;if((vs&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,ke.lanes|=h,xs|=h}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,hn(r,e.memoizedState)||(kt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ke.lanes|=i,xs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xd(t){var e=tn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);hn(i,e.memoizedState)||(kt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Qx(){}function Kx(t,e){var n=ke,r=tn(),s=e(),i=!hn(r.memoizedState,s);if(i&&(r.memoizedState=s,kt=!0),r=r.queue,em(Jx.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,Zo(9,Xx.bind(null,n,r,s,e),void 0,null),Je===null)throw Error(q(349));vs&30||Yx(n,e,s)}return s}function Yx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Xx(t,e,n,r){e.value=n,e.getSnapshot=r,Zx(e)&&e_(t)}function Jx(t,e,n){return n(function(){Zx(e)&&e_(t)})}function Zx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hn(t,n)}catch{return!0}}function e_(t){var e=Gn(t,1);e!==null&&dn(e,t,1,-1)}function h0(t){var e=xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:t},e.queue=t,t=t.dispatch=LI.bind(null,ke,t),[e.memoizedState,t]}function Zo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function t_(){return tn().memoizedState}function Ll(t,e,n,r){var s=xn();ke.flags|=t,s.memoizedState=Zo(1|e,n,void 0,r===void 0?null:r)}function Xc(t,e,n,r){var s=tn();r=r===void 0?null:r;var i=void 0;if(We!==null){var o=We.memoizedState;if(i=o.destroy,r!==null&&Xf(r,o.deps)){s.memoizedState=Zo(e,n,i,r);return}}ke.flags|=t,s.memoizedState=Zo(1|e,n,i,r)}function f0(t,e){return Ll(8390656,8,t,e)}function em(t,e){return Xc(2048,8,t,e)}function n_(t,e){return Xc(4,2,t,e)}function r_(t,e){return Xc(4,4,t,e)}function s_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function i_(t,e,n){return n=n!=null?n.concat([t]):null,Xc(4,4,s_.bind(null,e,t),n)}function tm(){}function o_(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function a_(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function l_(t,e,n){return vs&21?(hn(n,e)||(n=fx(),ke.lanes|=n,xs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kt=!0),t.memoizedState=n)}function OI(t,e){var n=xe;xe=n!==0&&4>n?n:4,t(!0);var r=yd.transition;yd.transition={};try{t(!1),e()}finally{xe=n,yd.transition=r}}function c_(){return tn().memoizedState}function DI(t,e,n){var r=Sr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},u_(t))d_(e,n);else if(n=Hx(t,e,n,r),n!==null){var s=Et();dn(n,t,r,s),h_(n,e,r)}}function LI(t,e,n){var r=Sr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(u_(t))d_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,hn(l,o)){var u=e.interleaved;u===null?(s.next=s,Wf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Hx(t,e,s,r),n!==null&&(s=Et(),dn(n,t,r,s),h_(n,e,r))}}function u_(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function d_(t,e){So=yc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function h_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pf(t,n)}}var vc={readContext:en,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},MI={readContext:en,useCallback:function(t,e){return xn().memoizedState=[t,e===void 0?null:e],t},useContext:en,useEffect:f0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ll(4194308,4,s_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ll(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ll(4,2,t,e)},useMemo:function(t,e){var n=xn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=DI.bind(null,ke,t),[r.memoizedState,t]},useRef:function(t){var e=xn();return t={current:t},e.memoizedState=t},useState:h0,useDebugValue:tm,useDeferredValue:function(t){return xn().memoizedState=t},useTransition:function(){var t=h0(!1),e=t[0];return t=OI.bind(null,t[1]),xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ke,s=xn();if(Se){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),Je===null)throw Error(q(349));vs&30||Yx(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,f0(Jx.bind(null,r,i,t),[t]),r.flags|=2048,Zo(9,Xx.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=xn(),e=Je.identifierPrefix;if(Se){var n=Vn,r=Mn;n=(r&~(1<<32-un(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},VI={readContext:en,useCallback:o_,useContext:en,useEffect:em,useImperativeHandle:i_,useInsertionEffect:n_,useLayoutEffect:r_,useMemo:a_,useReducer:vd,useRef:t_,useState:function(){return vd(Jo)},useDebugValue:tm,useDeferredValue:function(t){var e=tn();return l_(e,We.memoizedState,t)},useTransition:function(){var t=vd(Jo)[0],e=tn().memoizedState;return[t,e]},useMutableSource:Qx,useSyncExternalStore:Kx,useId:c_,unstable_isNewReconciler:!1},$I={readContext:en,useCallback:o_,useContext:en,useEffect:em,useImperativeHandle:i_,useInsertionEffect:n_,useLayoutEffect:r_,useMemo:a_,useReducer:xd,useRef:t_,useState:function(){return xd(Jo)},useDebugValue:tm,useDeferredValue:function(t){var e=tn();return We===null?e.memoizedState=t:l_(e,We.memoizedState,t)},useTransition:function(){var t=xd(Jo)[0],e=tn().memoizedState;return[t,e]},useMutableSource:Qx,useSyncExternalStore:Kx,useId:c_,unstable_isNewReconciler:!1};function on(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jc={isMounted:function(t){return(t=t._reactInternals)?As(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Et(),s=Sr(t),i=Fn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ir(t,i,s),e!==null&&(dn(e,t,s,r),Ol(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Et(),s=Sr(t),i=Fn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ir(t,i,s),e!==null&&(dn(e,t,s,r),Ol(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Et(),r=Sr(t),s=Fn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ir(t,s,r),e!==null&&(dn(e,t,r,n),Ol(e,t,r))}};function m0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ho(n,r)||!Ho(s,i):!0}function f_(t,e,n){var r=!1,s=Or,i=e.contextType;return typeof i=="object"&&i!==null?i=en(i):(s=jt(e)?gs:pt.current,r=e.contextTypes,i=(r=r!=null)?fi(t,s):Or),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function p0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Jc.enqueueReplaceState(e,e.state,null)}function Rh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Gf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=en(i):(i=jt(e)?gs:pt.current,s.context=fi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Sh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Jc.enqueueReplaceState(s,s.state,null),pc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function yi(t,e){try{var n="",r=e;do n+=fT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function _d(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ah(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var UI=typeof WeakMap=="function"?WeakMap:Map;function m_(t,e,n){n=Fn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_c||(_c=!0,$h=r),Ah(t,e)},n}function p_(t,e,n){n=Fn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ah(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ah(t,e),typeof r!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function g0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new UI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=eN.bind(null,t,e,n),e.then(t,t))}function y0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function v0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fn(-1,1),e.tag=2,Ir(n,e,1))),n.lanes|=1),t)}var FI=er.ReactCurrentOwner,kt=!1;function wt(t,e,n,r){e.child=t===null?qx(e,null,n,r):pi(e,t.child,n,r)}function x0(t,e,n,r,s){n=n.render;var i=e.ref;return oi(e,s),r=Jf(t,e,n,r,i,s),n=Zf(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qn(t,e,s)):(Se&&n&&Uf(e),e.flags|=1,wt(t,e,r,s),e.child)}function _0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!cm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,g_(t,e,i,r,s)):(t=Ul(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ho,n(o,r)&&t.ref===e.ref)return Qn(t,e,s)}return e.flags|=1,t=Rr(i,r),t.ref=e.ref,t.return=e,e.child=t}function g_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ho(i,r)&&t.ref===e.ref)if(kt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(kt=!0);else return e.lanes=t.lanes,Qn(t,e,s)}return Ch(t,e,n,r,s)}function y_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Zs,Ut),Ut|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(Zs,Ut),Ut|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,we(Zs,Ut),Ut|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,we(Zs,Ut),Ut|=r;return wt(t,e,s,n),e.child}function v_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ch(t,e,n,r,s){var i=jt(n)?gs:pt.current;return i=fi(e,i),oi(e,s),n=Jf(t,e,n,r,i,s),r=Zf(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qn(t,e,s)):(Se&&r&&Uf(e),e.flags|=1,wt(t,e,n,s),e.child)}function w0(t,e,n,r,s){if(jt(n)){var i=!0;uc(e)}else i=!1;if(oi(e,s),e.stateNode===null)Ml(t,e),f_(e,n,r),Rh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=en(d):(d=jt(n)?gs:pt.current,d=fi(e,d));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&p0(e,o,r,d),ur=!1;var y=e.memoizedState;o.state=y,pc(e,r,o,s),u=e.memoizedState,l!==r||y!==u||Pt.current||ur?(typeof h=="function"&&(Sh(e,n,h,r),u=e.memoizedState),(l=ur||m0(e,n,l,r,y,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Wx(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:on(e.type,l),o.props=d,p=e.pendingProps,y=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=en(u):(u=jt(n)?gs:pt.current,u=fi(e,u));var w=n.getDerivedStateFromProps;(h=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||y!==u)&&p0(e,o,r,u),ur=!1,y=e.memoizedState,o.state=y,pc(e,r,o,s);var R=e.memoizedState;l!==p||y!==R||Pt.current||ur?(typeof w=="function"&&(Sh(e,n,w,r),R=e.memoizedState),(d=ur||m0(e,n,d,r,y,R,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,R,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,R,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),o.props=r,o.state=R,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return kh(t,e,n,r,i,s)}function kh(t,e,n,r,s,i){v_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&o0(e,n,!1),Qn(t,e,i);r=e.stateNode,FI.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=pi(e,t.child,null,i),e.child=pi(e,null,l,i)):wt(t,e,l,i),e.memoizedState=r.state,s&&o0(e,n,!0),e.child}function x_(t){var e=t.stateNode;e.pendingContext?i0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&i0(t,e.context,!1),Qf(t,e.containerInfo)}function E0(t,e,n,r,s){return mi(),zf(s),e.flags|=256,wt(t,e,n,r),e.child}var Ph={dehydrated:null,treeContext:null,retryLane:0};function jh(t){return{baseLanes:t,cachePool:null,transitions:null}}function __(t,e,n){var r=e.pendingProps,s=Ce.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),we(Ce,s&1),t===null)return Ih(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=tu(o,r,0,null),t=fs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=jh(n),e.memoizedState=Ph,t):nm(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return zI(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Rr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Rr(l,i):(i=fs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?jh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Ph,r}return i=t.child,t=i.sibling,r=Rr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function nm(t,e){return e=tu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hl(t,e,n,r){return r!==null&&zf(r),pi(e,t.child,null,n),t=nm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=_d(Error(q(422))),hl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=tu({mode:"visible",children:r.children},s,0,null),i=fs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&pi(e,t.child,null,o),e.child.memoizedState=jh(o),e.memoizedState=Ph,i);if(!(e.mode&1))return hl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(q(419)),r=_d(i,r,void 0),hl(t,e,o,r)}if(l=(o&t.childLanes)!==0,kt||l){if(r=Je,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Gn(t,s),dn(r,t,s,-1))}return lm(),r=_d(Error(q(421))),hl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=tN.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,zt=Tr(s.nextSibling),Ht=e,Se=!0,ln=null,t!==null&&(Yt[Xt++]=Mn,Yt[Xt++]=Vn,Yt[Xt++]=ys,Mn=t.id,Vn=t.overflow,ys=e),e=nm(e,r.children),e.flags|=4096,e)}function b0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Nh(t.return,e,n)}function wd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function w_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(wt(t,e,r.children,n),r=Ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&b0(t,n,e);else if(t.tag===19)b0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(we(Ce,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&gc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),wd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&gc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}wd(e,!0,n,null,i);break;case"together":wd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ml(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=Rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function BI(t,e,n){switch(e.tag){case 3:x_(e),mi();break;case 5:Gx(e);break;case 1:jt(e.type)&&uc(e);break;case 4:Qf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;we(fc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(we(Ce,Ce.current&1),e.flags|=128,null):n&e.child.childLanes?__(t,e,n):(we(Ce,Ce.current&1),t=Qn(t,e,n),t!==null?t.sibling:null);we(Ce,Ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return w_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),we(Ce,Ce.current),r)break;return null;case 22:case 23:return e.lanes=0,y_(t,e,n)}return Qn(t,e,n)}var E_,Oh,b_,T_;E_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Oh=function(){};b_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,us(Tn.current);var i=null;switch(n){case"input":s=nh(t,s),r=nh(t,r),i=[];break;case"select":s=Pe({},s,{value:void 0}),r=Pe({},r,{value:void 0}),i=[];break;case"textarea":s=ih(t,s),r=ih(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=lc)}ah(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Vo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Vo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&be("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};T_=function(t,e,n,r){n!==r&&(e.flags|=4)};function oo(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qI(t,e,n){var r=e.pendingProps;switch(Ff(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return jt(e.type)&&cc(),ut(e),null;case 3:return r=e.stateNode,gi(),Ie(Pt),Ie(pt),Yf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ul(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ln!==null&&(zh(ln),ln=null))),Oh(t,e),ut(e),null;case 5:Kf(e);var s=us(Yo.current);if(n=e.type,t!==null&&e.stateNode!=null)b_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return ut(e),null}if(t=us(Tn.current),ul(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[wn]=e,r[Qo]=i,t=(e.mode&1)!==0,n){case"dialog":be("cancel",r),be("close",r);break;case"iframe":case"object":case"embed":be("load",r);break;case"video":case"audio":for(s=0;s<po.length;s++)be(po[s],r);break;case"source":be("error",r);break;case"img":case"image":case"link":be("error",r),be("load",r);break;case"details":be("toggle",r);break;case"input":Pg(r,i),be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},be("invalid",r);break;case"textarea":Og(r,i),be("invalid",r)}ah(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&cl(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&cl(r.textContent,l,t),s=["children",""+l]):Vo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&be("scroll",r)}switch(n){case"input":tl(r),jg(r,i,!0);break;case"textarea":tl(r),Dg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=lc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Jv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[wn]=e,t[Qo]=r,E_(t,e,!1,!1),e.stateNode=t;e:{switch(o=lh(n,r),n){case"dialog":be("cancel",t),be("close",t),s=r;break;case"iframe":case"object":case"embed":be("load",t),s=r;break;case"video":case"audio":for(s=0;s<po.length;s++)be(po[s],t);s=r;break;case"source":be("error",t),s=r;break;case"img":case"image":case"link":be("error",t),be("load",t),s=r;break;case"details":be("toggle",t),s=r;break;case"input":Pg(t,r),s=nh(t,r),be("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Pe({},r,{value:void 0}),be("invalid",t);break;case"textarea":Og(t,r),s=ih(t,r),be("invalid",t);break;default:s=r}ah(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?tx(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Zv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&$o(t,u):typeof u=="number"&&$o(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Vo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&be("scroll",t):u!=null&&Nf(t,i,u,o))}switch(n){case"input":tl(t),jg(t,r,!1);break;case"textarea":tl(t),Dg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+jr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ni(t,!!r.multiple,i,!1):r.defaultValue!=null&&ni(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=lc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)T_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=us(Yo.current),us(Tn.current),ul(e)){if(r=e.stateNode,n=e.memoizedProps,r[wn]=e,(i=r.nodeValue!==n)&&(t=Ht,t!==null))switch(t.tag){case 3:cl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wn]=e,e.stateNode=r}return ut(e),null;case 13:if(Ie(Ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Se&&zt!==null&&e.mode&1&&!(e.flags&128))zx(),mi(),e.flags|=98560,i=!1;else if(i=ul(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[wn]=e}else mi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),i=!1}else ln!==null&&(zh(ln),ln=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ce.current&1?Ge===0&&(Ge=3):lm())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return gi(),Oh(t,e),t===null&&Wo(e.stateNode.containerInfo),ut(e),null;case 10:return Hf(e.type._context),ut(e),null;case 17:return jt(e.type)&&cc(),ut(e),null;case 19:if(Ie(Ce),i=e.memoizedState,i===null)return ut(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)oo(i,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=gc(t),o!==null){for(e.flags|=128,oo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(Ce,Ce.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fe()>vi&&(e.flags|=128,r=!0,oo(i,!1),e.lanes=4194304)}else{if(!r)if(t=gc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),oo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Se)return ut(e),null}else 2*Fe()-i.renderingStartTime>vi&&n!==1073741824&&(e.flags|=128,r=!0,oo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,n=Ce.current,we(Ce,r?n&1|2:n&1),e):(ut(e),null);case 22:case 23:return am(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ut&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function HI(t,e){switch(Ff(e),e.tag){case 1:return jt(e.type)&&cc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gi(),Ie(Pt),Ie(pt),Yf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Kf(e),null;case 13:if(Ie(Ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));mi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(Ce),null;case 4:return gi(),null;case 10:return Hf(e.type._context),null;case 22:case 23:return am(),null;case 24:return null;default:return null}}var fl=!1,ft=!1,WI=typeof WeakSet=="function"?WeakSet:Set,X=null;function Js(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function Dh(t,e,n){try{n()}catch(r){De(t,e,r)}}var T0=!1;function GI(t,e){if(vh=ic,t=Ax(),$f(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,h=0,p=t,y=null;t:for(;;){for(var w;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(w=p.firstChild)!==null;)y=p,p=w;for(;;){if(p===t)break t;if(y===n&&++d===s&&(l=o),y===i&&++h===r&&(u=o),(w=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(xh={focusedElem:t,selectionRange:n},ic=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var k=R.memoizedProps,C=R.memoizedState,T=e.stateNode,_=T.getSnapshotBeforeUpdate(e.elementType===e.type?k:on(e.type,k),C);T.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(j){De(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return R=T0,T0=!1,R}function Ro(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Dh(e,n,i)}s=s.next}while(s!==r)}}function Zc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Lh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function I_(t){var e=t.alternate;e!==null&&(t.alternate=null,I_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wn],delete e[Qo],delete e[Eh],delete e[AI],delete e[CI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function N_(t){return t.tag===5||t.tag===3||t.tag===4}function I0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||N_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=lc));else if(r!==4&&(t=t.child,t!==null))for(Mh(t,e,n),t=t.sibling;t!==null;)Mh(t,e,n),t=t.sibling}function Vh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Vh(t,e,n),t=t.sibling;t!==null;)Vh(t,e,n),t=t.sibling}var et=null,an=!1;function ar(t,e,n){for(n=n.child;n!==null;)S_(t,e,n),n=n.sibling}function S_(t,e,n){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(Hc,n)}catch{}switch(n.tag){case 5:ft||Js(n,e);case 6:var r=et,s=an;et=null,ar(t,e,n),et=r,an=s,et!==null&&(an?(t=et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):et.removeChild(n.stateNode));break;case 18:et!==null&&(an?(t=et,n=n.stateNode,t.nodeType===8?md(t.parentNode,n):t.nodeType===1&&md(t,n),Bo(t)):md(et,n.stateNode));break;case 4:r=et,s=an,et=n.stateNode.containerInfo,an=!0,ar(t,e,n),et=r,an=s;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Dh(n,e,o),s=s.next}while(s!==r)}ar(t,e,n);break;case 1:if(!ft&&(Js(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){De(n,e,l)}ar(t,e,n);break;case 21:ar(t,e,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,ar(t,e,n),ft=r):ar(t,e,n);break;default:ar(t,e,n)}}function N0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new WI),e.forEach(function(r){var s=nN.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function sn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:et=l.stateNode,an=!1;break e;case 3:et=l.stateNode.containerInfo,an=!0;break e;case 4:et=l.stateNode.containerInfo,an=!0;break e}l=l.return}if(et===null)throw Error(q(160));S_(i,o,s),et=null,an=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){De(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)R_(e,t),e=e.sibling}function R_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(sn(e,t),vn(t),r&4){try{Ro(3,t,t.return),Zc(3,t)}catch(k){De(t,t.return,k)}try{Ro(5,t,t.return)}catch(k){De(t,t.return,k)}}break;case 1:sn(e,t),vn(t),r&512&&n!==null&&Js(n,n.return);break;case 5:if(sn(e,t),vn(t),r&512&&n!==null&&Js(n,n.return),t.flags&32){var s=t.stateNode;try{$o(s,"")}catch(k){De(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Yv(s,i),lh(l,o);var d=lh(l,i);for(o=0;o<u.length;o+=2){var h=u[o],p=u[o+1];h==="style"?tx(s,p):h==="dangerouslySetInnerHTML"?Zv(s,p):h==="children"?$o(s,p):Nf(s,h,p,d)}switch(l){case"input":rh(s,i);break;case"textarea":Xv(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?ni(s,!!i.multiple,w,!1):y!==!!i.multiple&&(i.defaultValue!=null?ni(s,!!i.multiple,i.defaultValue,!0):ni(s,!!i.multiple,i.multiple?[]:"",!1))}s[Qo]=i}catch(k){De(t,t.return,k)}}break;case 6:if(sn(e,t),vn(t),r&4){if(t.stateNode===null)throw Error(q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){De(t,t.return,k)}}break;case 3:if(sn(e,t),vn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bo(e.containerInfo)}catch(k){De(t,t.return,k)}break;case 4:sn(e,t),vn(t);break;case 13:sn(e,t),vn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(im=Fe())),r&4&&N0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ft=(d=ft)||h,sn(e,t),ft=d):sn(e,t),vn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(X=t,h=t.child;h!==null;){for(p=X=h;X!==null;){switch(y=X,w=y.child,y.tag){case 0:case 11:case 14:case 15:Ro(4,y,y.return);break;case 1:Js(y,y.return);var R=y.stateNode;if(typeof R.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(k){De(r,n,k)}}break;case 5:Js(y,y.return);break;case 22:if(y.memoizedState!==null){R0(p);continue}}w!==null?(w.return=y,X=w):R0(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=ex("display",o))}catch(k){De(t,t.return,k)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(k){De(t,t.return,k)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:sn(e,t),vn(t),r&4&&N0(t);break;case 21:break;default:sn(e,t),vn(t)}}function vn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(N_(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&($o(s,""),r.flags&=-33);var i=I0(t);Vh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=I0(t);Mh(t,l,o);break;default:throw Error(q(161))}}catch(u){De(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QI(t,e,n){X=t,A_(t)}function A_(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||fl;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ft;l=fl;var d=ft;if(fl=o,(ft=u)&&!d)for(X=s;X!==null;)o=X,u=o.child,o.tag===22&&o.memoizedState!==null?A0(s):u!==null?(u.return=o,X=u):A0(s);for(;i!==null;)X=i,A_(i),i=i.sibling;X=s,fl=l,ft=d}S0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):S0(t)}}function S0(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||Zc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ft)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:on(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&d0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}d0(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Bo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}ft||e.flags&512&&Lh(e)}catch(y){De(e,e.return,y)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function R0(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function A0(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zc(4,e)}catch(u){De(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){De(e,s,u)}}var i=e.return;try{Lh(e)}catch(u){De(e,i,u)}break;case 5:var o=e.return;try{Lh(e)}catch(u){De(e,o,u)}}}catch(u){De(e,e.return,u)}if(e===t){X=null;break}var l=e.sibling;if(l!==null){l.return=e.return,X=l;break}X=e.return}}var KI=Math.ceil,xc=er.ReactCurrentDispatcher,rm=er.ReactCurrentOwner,Zt=er.ReactCurrentBatchConfig,me=0,Je=null,qe=null,rt=0,Ut=0,Zs=Br(0),Ge=0,ea=null,xs=0,eu=0,sm=0,Ao=null,At=null,im=0,vi=1/0,Dn=null,_c=!1,$h=null,Nr=null,ml=!1,xr=null,wc=0,Co=0,Uh=null,Vl=-1,$l=0;function Et(){return me&6?Fe():Vl!==-1?Vl:Vl=Fe()}function Sr(t){return t.mode&1?me&2&&rt!==0?rt&-rt:PI.transition!==null?($l===0&&($l=fx()),$l):(t=xe,t!==0||(t=window.event,t=t===void 0?16:_x(t.type)),t):1}function dn(t,e,n,r){if(50<Co)throw Co=0,Uh=null,Error(q(185));ga(t,n,r),(!(me&2)||t!==Je)&&(t===Je&&(!(me&2)&&(eu|=n),Ge===4&&hr(t,rt)),Ot(t,r),n===1&&me===0&&!(e.mode&1)&&(vi=Fe()+500,Yc&&qr()))}function Ot(t,e){var n=t.callbackNode;PT(t,e);var r=sc(t,t===Je?rt:0);if(r===0)n!==null&&Vg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Vg(n),e===1)t.tag===0?kI(C0.bind(null,t)):$x(C0.bind(null,t)),SI(function(){!(me&6)&&qr()}),n=null;else{switch(mx(r)){case 1:n=kf;break;case 4:n=dx;break;case 16:n=rc;break;case 536870912:n=hx;break;default:n=rc}n=M_(n,C_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function C_(t,e){if(Vl=-1,$l=0,me&6)throw Error(q(327));var n=t.callbackNode;if(ai()&&t.callbackNode!==n)return null;var r=sc(t,t===Je?rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ec(t,r);else{e=r;var s=me;me|=2;var i=P_();(Je!==t||rt!==e)&&(Dn=null,vi=Fe()+500,hs(t,e));do try{JI();break}catch(l){k_(t,l)}while(!0);qf(),xc.current=i,me=s,qe!==null?e=0:(Je=null,rt=0,e=Ge)}if(e!==0){if(e===2&&(s=fh(t),s!==0&&(r=s,e=Fh(t,s))),e===1)throw n=ea,hs(t,0),hr(t,r),Ot(t,Fe()),n;if(e===6)hr(t,r);else{if(s=t.current.alternate,!(r&30)&&!YI(s)&&(e=Ec(t,r),e===2&&(i=fh(t),i!==0&&(r=i,e=Fh(t,i))),e===1))throw n=ea,hs(t,0),hr(t,r),Ot(t,Fe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:is(t,At,Dn);break;case 3:if(hr(t,r),(r&130023424)===r&&(e=im+500-Fe(),10<e)){if(sc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Et(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=wh(is.bind(null,t,At,Dn),e);break}is(t,At,Dn);break;case 4:if(hr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-un(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*KI(r/1960))-r,10<r){t.timeoutHandle=wh(is.bind(null,t,At,Dn),r);break}is(t,At,Dn);break;case 5:is(t,At,Dn);break;default:throw Error(q(329))}}}return Ot(t,Fe()),t.callbackNode===n?C_.bind(null,t):null}function Fh(t,e){var n=Ao;return t.current.memoizedState.isDehydrated&&(hs(t,e).flags|=256),t=Ec(t,e),t!==2&&(e=At,At=n,e!==null&&zh(e)),t}function zh(t){At===null?At=t:At.push.apply(At,t)}function YI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!hn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hr(t,e){for(e&=~sm,e&=~eu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-un(e),r=1<<n;t[n]=-1,e&=~r}}function C0(t){if(me&6)throw Error(q(327));ai();var e=sc(t,0);if(!(e&1))return Ot(t,Fe()),null;var n=Ec(t,e);if(t.tag!==0&&n===2){var r=fh(t);r!==0&&(e=r,n=Fh(t,r))}if(n===1)throw n=ea,hs(t,0),hr(t,e),Ot(t,Fe()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,is(t,At,Dn),Ot(t,Fe()),null}function om(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(vi=Fe()+500,Yc&&qr())}}function _s(t){xr!==null&&xr.tag===0&&!(me&6)&&ai();var e=me;me|=1;var n=Zt.transition,r=xe;try{if(Zt.transition=null,xe=1,t)return t()}finally{xe=r,Zt.transition=n,me=e,!(me&6)&&qr()}}function am(){Ut=Zs.current,Ie(Zs)}function hs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,NI(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(Ff(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cc();break;case 3:gi(),Ie(Pt),Ie(pt),Yf();break;case 5:Kf(r);break;case 4:gi();break;case 13:Ie(Ce);break;case 19:Ie(Ce);break;case 10:Hf(r.type._context);break;case 22:case 23:am()}n=n.return}if(Je=t,qe=t=Rr(t.current,null),rt=Ut=e,Ge=0,ea=null,sm=eu=xs=0,At=Ao=null,cs!==null){for(e=0;e<cs.length;e++)if(n=cs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}cs=null}return t}function k_(t,e){do{var n=qe;try{if(qf(),Dl.current=vc,yc){for(var r=ke.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}yc=!1}if(vs=0,Xe=We=ke=null,So=!1,Xo=0,rm.current=null,n===null||n.return===null){Ge=1,ea=e,qe=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=rt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var y=h.alternate;y?(h.updateQueue=y.updateQueue,h.memoizedState=y.memoizedState,h.lanes=y.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=y0(o);if(w!==null){w.flags&=-257,v0(w,o,l,i,e),w.mode&1&&g0(i,d,e),e=w,u=d;var R=e.updateQueue;if(R===null){var k=new Set;k.add(u),e.updateQueue=k}else R.add(u);break e}else{if(!(e&1)){g0(i,d,e),lm();break e}u=Error(q(426))}}else if(Se&&l.mode&1){var C=y0(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),v0(C,o,l,i,e),zf(yi(u,l));break e}}i=u=yi(u,l),Ge!==4&&(Ge=2),Ao===null?Ao=[i]:Ao.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=m_(i,u,e);u0(i,T);break e;case 1:l=u;var _=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Nr===null||!Nr.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=p_(i,l,e);u0(i,j);break e}}i=i.return}while(i!==null)}O_(n)}catch(D){e=D,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function P_(){var t=xc.current;return xc.current=vc,t===null?vc:t}function lm(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),Je===null||!(xs&268435455)&&!(eu&268435455)||hr(Je,rt)}function Ec(t,e){var n=me;me|=2;var r=P_();(Je!==t||rt!==e)&&(Dn=null,hs(t,e));do try{XI();break}catch(s){k_(t,s)}while(!0);if(qf(),me=n,xc.current=r,qe!==null)throw Error(q(261));return Je=null,rt=0,Ge}function XI(){for(;qe!==null;)j_(qe)}function JI(){for(;qe!==null&&!bT();)j_(qe)}function j_(t){var e=L_(t.alternate,t,Ut);t.memoizedProps=t.pendingProps,e===null?O_(t):qe=e,rm.current=null}function O_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=HI(n,e),n!==null){n.flags&=32767,qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,qe=null;return}}else if(n=qI(n,e,Ut),n!==null){qe=n;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Ge===0&&(Ge=5)}function is(t,e,n){var r=xe,s=Zt.transition;try{Zt.transition=null,xe=1,ZI(t,e,n,r)}finally{Zt.transition=s,xe=r}return null}function ZI(t,e,n,r){do ai();while(xr!==null);if(me&6)throw Error(q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(jT(t,i),t===Je&&(qe=Je=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ml||(ml=!0,M_(rc,function(){return ai(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Zt.transition,Zt.transition=null;var o=xe;xe=1;var l=me;me|=4,rm.current=null,GI(t,n),R_(n,t),xI(xh),ic=!!vh,xh=vh=null,t.current=n,QI(n),TT(),me=l,xe=o,Zt.transition=i}else t.current=n;if(ml&&(ml=!1,xr=t,wc=s),i=t.pendingLanes,i===0&&(Nr=null),ST(n.stateNode),Ot(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(_c)throw _c=!1,t=$h,$h=null,t;return wc&1&&t.tag!==0&&ai(),i=t.pendingLanes,i&1?t===Uh?Co++:(Co=0,Uh=t):Co=0,qr(),null}function ai(){if(xr!==null){var t=mx(wc),e=Zt.transition,n=xe;try{if(Zt.transition=null,xe=16>t?16:t,xr===null)var r=!1;else{if(t=xr,xr=null,wc=0,me&6)throw Error(q(331));var s=me;for(me|=4,X=t.current;X!==null;){var i=X,o=i.child;if(X.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(X=d;X!==null;){var h=X;switch(h.tag){case 0:case 11:case 15:Ro(8,h,i)}var p=h.child;if(p!==null)p.return=h,X=p;else for(;X!==null;){h=X;var y=h.sibling,w=h.return;if(I_(h),h===d){X=null;break}if(y!==null){y.return=w,X=y;break}X=w}}}var R=i.alternate;if(R!==null){var k=R.child;if(k!==null){R.child=null;do{var C=k.sibling;k.sibling=null,k=C}while(k!==null)}}X=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,X=o;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ro(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,X=T;break e}X=i.return}}var _=t.current;for(X=_;X!==null;){o=X;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,X=N;else e:for(o=_;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Zc(9,l)}}catch(D){De(l,l.return,D)}if(l===o){X=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,X=j;break e}X=l.return}}if(me=s,qr(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(Hc,t)}catch{}r=!0}return r}finally{xe=n,Zt.transition=e}}return!1}function k0(t,e,n){e=yi(n,e),e=m_(t,e,1),t=Ir(t,e,1),e=Et(),t!==null&&(ga(t,1,e),Ot(t,e))}function De(t,e,n){if(t.tag===3)k0(t,t,n);else for(;e!==null;){if(e.tag===3){k0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nr===null||!Nr.has(r))){t=yi(n,t),t=p_(e,t,1),e=Ir(e,t,1),t=Et(),e!==null&&(ga(e,1,t),Ot(e,t));break}}e=e.return}}function eN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&n,Je===t&&(rt&n)===n&&(Ge===4||Ge===3&&(rt&130023424)===rt&&500>Fe()-im?hs(t,0):sm|=n),Ot(t,e)}function D_(t,e){e===0&&(t.mode&1?(e=sl,sl<<=1,!(sl&130023424)&&(sl=4194304)):e=1);var n=Et();t=Gn(t,e),t!==null&&(ga(t,e,n),Ot(t,n))}function tN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),D_(t,n)}function nN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),D_(t,n)}var L_;L_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pt.current)kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kt=!1,BI(t,e,n);kt=!!(t.flags&131072)}else kt=!1,Se&&e.flags&1048576&&Ux(e,hc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ml(t,e),t=e.pendingProps;var s=fi(e,pt.current);oi(e,n),s=Jf(null,e,r,t,s,n);var i=Zf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(r)?(i=!0,uc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Gf(e),s.updater=Jc,e.stateNode=s,s._reactInternals=e,Rh(e,r,t,n),e=kh(null,e,r,!0,i,n)):(e.tag=0,Se&&i&&Uf(e),wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ml(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=sN(r),t=on(r,t),s){case 0:e=Ch(null,e,r,t,n);break e;case 1:e=w0(null,e,r,t,n);break e;case 11:e=x0(null,e,r,t,n);break e;case 14:e=_0(null,e,r,on(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:on(r,s),Ch(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:on(r,s),w0(t,e,r,s,n);case 3:e:{if(x_(e),t===null)throw Error(q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Wx(t,e),pc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=yi(Error(q(423)),e),e=E0(t,e,r,n,s);break e}else if(r!==s){s=yi(Error(q(424)),e),e=E0(t,e,r,n,s);break e}else for(zt=Tr(e.stateNode.containerInfo.firstChild),Ht=e,Se=!0,ln=null,n=qx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mi(),r===s){e=Qn(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return Gx(e),t===null&&Ih(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,_h(r,s)?o=null:i!==null&&_h(r,i)&&(e.flags|=32),v_(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&Ih(e),null;case 13:return __(t,e,n);case 4:return Qf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=pi(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:on(r,s),x0(t,e,r,s,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,we(fc,r._currentValue),r._currentValue=o,i!==null)if(hn(i.value,o)){if(i.children===s.children&&!Pt.current){e=Qn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Fn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Nh(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(q(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Nh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,oi(e,n),s=en(s),r=r(s),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,s=on(r,e.pendingProps),s=on(r.type,s),_0(t,e,r,s,n);case 15:return g_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:on(r,s),Ml(t,e),e.tag=1,jt(r)?(t=!0,uc(e)):t=!1,oi(e,n),f_(e,r,s),Rh(e,r,s,n),kh(null,e,r,!0,t,n);case 19:return w_(t,e,n);case 22:return y_(t,e,n)}throw Error(q(156,e.tag))};function M_(t,e){return ux(t,e)}function rN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,e,n,r){return new rN(t,e,n,r)}function cm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sN(t){if(typeof t=="function")return cm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rf)return 11;if(t===Af)return 14}return 2}function Rr(t,e){var n=t.alternate;return n===null?(n=Jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ul(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")cm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bs:return fs(n.children,s,i,e);case Sf:o=8,s|=8;break;case Jd:return t=Jt(12,n,e,s|2),t.elementType=Jd,t.lanes=i,t;case Zd:return t=Jt(13,n,e,s),t.elementType=Zd,t.lanes=i,t;case eh:return t=Jt(19,n,e,s),t.elementType=eh,t.lanes=i,t;case Gv:return tu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Hv:o=10;break e;case Wv:o=9;break e;case Rf:o=11;break e;case Af:o=14;break e;case cr:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Jt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function fs(t,e,n,r){return t=Jt(7,t,r,e),t.lanes=n,t}function tu(t,e,n,r){return t=Jt(22,t,r,e),t.elementType=Gv,t.lanes=n,t.stateNode={isHidden:!1},t}function Ed(t,e,n){return t=Jt(6,t,null,e),t.lanes=n,t}function bd(t,e,n){return e=Jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function iN(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rd(0),this.expirationTimes=rd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function um(t,e,n,r,s,i,o,l,u){return t=new iN(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Jt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gf(i),t}function oN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function V_(t){if(!t)return Or;t=t._reactInternals;e:{if(As(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(jt(n))return Vx(t,n,e)}return e}function $_(t,e,n,r,s,i,o,l,u){return t=um(n,r,!0,t,s,i,o,l,u),t.context=V_(null),n=t.current,r=Et(),s=Sr(n),i=Fn(r,s),i.callback=e??null,Ir(n,i,s),t.current.lanes=s,ga(t,s,r),Ot(t,r),t}function nu(t,e,n,r){var s=e.current,i=Et(),o=Sr(s);return n=V_(n),e.context===null?e.context=n:e.pendingContext=n,e=Fn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ir(s,e,o),t!==null&&(dn(t,s,o,i),Ol(t,s,o)),o}function bc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function P0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function dm(t,e){P0(t,e),(t=t.alternate)&&P0(t,e)}function aN(){return null}var U_=typeof reportError=="function"?reportError:function(t){console.error(t)};function hm(t){this._internalRoot=t}ru.prototype.render=hm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));nu(t,e,null,null)};ru.prototype.unmount=hm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_s(function(){nu(null,t,null,null)}),e[Wn]=null}};function ru(t){this._internalRoot=t}ru.prototype.unstable_scheduleHydration=function(t){if(t){var e=yx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<dr.length&&e!==0&&e<dr[n].priority;n++);dr.splice(n,0,t),n===0&&xx(t)}};function fm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function su(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function j0(){}function lN(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=bc(o);i.call(d)}}var o=$_(e,r,t,0,null,!1,!1,"",j0);return t._reactRootContainer=o,t[Wn]=o.current,Wo(t.nodeType===8?t.parentNode:t),_s(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=bc(u);l.call(d)}}var u=um(t,0,!1,null,null,!1,!1,"",j0);return t._reactRootContainer=u,t[Wn]=u.current,Wo(t.nodeType===8?t.parentNode:t),_s(function(){nu(e,u,n,r)}),u}function iu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=bc(o);l.call(u)}}nu(e,o,t,s)}else o=lN(n,e,t,s,r);return bc(o)}px=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=mo(e.pendingLanes);n!==0&&(Pf(e,n|1),Ot(e,Fe()),!(me&6)&&(vi=Fe()+500,qr()))}break;case 13:_s(function(){var r=Gn(t,1);if(r!==null){var s=Et();dn(r,t,1,s)}}),dm(t,1)}};jf=function(t){if(t.tag===13){var e=Gn(t,134217728);if(e!==null){var n=Et();dn(e,t,134217728,n)}dm(t,134217728)}};gx=function(t){if(t.tag===13){var e=Sr(t),n=Gn(t,e);if(n!==null){var r=Et();dn(n,t,e,r)}dm(t,e)}};yx=function(){return xe};vx=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}};uh=function(t,e,n){switch(e){case"input":if(rh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Kc(r);if(!s)throw Error(q(90));Kv(r),rh(r,s)}}}break;case"textarea":Xv(t,n);break;case"select":e=n.value,e!=null&&ni(t,!!n.multiple,e,!1)}};sx=om;ix=_s;var cN={usingClientEntryPoint:!1,Events:[va,Gs,Kc,nx,rx,om]},ao={findFiberByHostInstance:ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uN={bundleType:ao.bundleType,version:ao.version,rendererPackageName:ao.rendererPackageName,rendererConfig:ao.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:er.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=lx(t),t===null?null:t.stateNode},findFiberByHostInstance:ao.findFiberByHostInstance||aN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pl.isDisabled&&pl.supportsFiber)try{Hc=pl.inject(uN),bn=pl}catch{}}Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cN;Gt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fm(e))throw Error(q(200));return oN(t,e,null,n)};Gt.createRoot=function(t,e){if(!fm(t))throw Error(q(299));var n=!1,r="",s=U_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=um(t,1,!1,null,null,n,!1,r,s),t[Wn]=e.current,Wo(t.nodeType===8?t.parentNode:t),new hm(e)};Gt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=lx(e),t=t===null?null:t.stateNode,t};Gt.flushSync=function(t){return _s(t)};Gt.hydrate=function(t,e,n){if(!su(e))throw Error(q(200));return iu(null,t,e,!0,n)};Gt.hydrateRoot=function(t,e,n){if(!fm(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=U_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=$_(e,null,t,1,n??null,s,!1,i,o),t[Wn]=e.current,Wo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ru(e)};Gt.render=function(t,e,n){if(!su(e))throw Error(q(200));return iu(null,t,e,!1,n)};Gt.unmountComponentAtNode=function(t){if(!su(t))throw Error(q(40));return t._reactRootContainer?(_s(function(){iu(null,null,t,!1,function(){t._reactRootContainer=null,t[Wn]=null})}),!0):!1};Gt.unstable_batchedUpdates=om;Gt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!su(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return iu(t,e,n,!1,r)};Gt.version="18.3.1-next-f1338f8080-20240426";function F_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(F_)}catch(t){console.error(t)}}F_(),Fv.exports=Gt;var dN=Fv.exports,O0=dN;Yd.createRoot=O0.createRoot,Yd.hydrateRoot=O0.hydrateRoot;const hN="modulepreload",fN=function(t){return"/"+t},D0={},he=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=fN(u),u in D0)return;D0[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":hN,d||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((y,w)=>{p.addEventListener("load",y),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var mm={};Object.defineProperty(mm,"__esModule",{value:!0});mm.parse=_N;mm.serialize=wN;const mN=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,pN=/^[\u0021-\u003A\u003C-\u007E]*$/,gN=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,yN=/^[\u0020-\u003A\u003D-\u007E]*$/,vN=Object.prototype.toString,xN=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function _N(t,e){const n=new xN,r=t.length;if(r<2)return n;const s=(e==null?void 0:e.decode)||EN;let i=0;do{const o=t.indexOf("=",i);if(o===-1)break;const l=t.indexOf(";",i),u=l===-1?r:l;if(o>u){i=t.lastIndexOf(";",o-1)+1;continue}const d=L0(t,i,o),h=M0(t,o,d),p=t.slice(d,h);if(n[p]===void 0){let y=L0(t,o+1,u),w=M0(t,u,y);const R=s(t.slice(y,w));n[p]=R}i=u+1}while(i<r);return n}function L0(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function M0(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function wN(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!mN.test(t))throw new TypeError(`argument name is invalid: ${t}`);const s=r(e);if(!pN.test(s))throw new TypeError(`argument val is invalid: ${e}`);let i=t+"="+s;if(!n)return i;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);i+="; Max-Age="+n.maxAge}if(n.domain){if(!gN.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);i+="; Domain="+n.domain}if(n.path){if(!yN.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);i+="; Path="+n.path}if(n.expires){if(!bN(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);i+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.partitioned&&(i+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return i}function EN(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function bN(t){return vN.call(t)==="[object Date]"}var V0="popstate";function TN(t={}){function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Bh("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ta(s)}return NN(e,n,null,t)}function Re(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function IN(){return Math.random().toString(36).substring(2,10)}function $0(t,e){return{usr:t.state,key:t.key,idx:e}}function Bh(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ki(e):e,state:n,key:e&&e.key||r||IN()}}function ta({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ki(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function NN(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l="POP",u=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function p(){l="POP";let C=h(),T=C==null?null:C-d;d=C,u&&u({action:l,location:k.location,delta:T})}function y(C,T){l="PUSH";let _=Bh(k.location,C,T);d=h()+1;let N=$0(_,d),j=k.createHref(_);try{o.pushState(N,"",j)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(j)}i&&u&&u({action:l,location:k.location,delta:1})}function w(C,T){l="REPLACE";let _=Bh(k.location,C,T);d=h();let N=$0(_,d),j=k.createHref(_);o.replaceState(N,"",j),i&&u&&u({action:l,location:k.location,delta:0})}function R(C){let T=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof C=="string"?C:ta(C);return _=_.replace(/ $/,"%20"),Re(T,`No window.location.(origin|href) available to create URL for href: ${_}`),new URL(_,T)}let k={get action(){return l},get location(){return t(s,o)},listen(C){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(V0,p),u=C,()=>{s.removeEventListener(V0,p),u=null}},createHref(C){return e(s,C)},createURL:R,encodeLocation(C){let T=R(C);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:y,replace:w,go(C){return o.go(C)}};return k}function z_(t,e,n="/"){return SN(t,e,n,!1)}function SN(t,e,n,r){let s=typeof e=="string"?ki(e):e,i=Kn(s.pathname||"/",n);if(i==null)return null;let o=B_(t);RN(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=$N(i);l=MN(o[u],d,r)}return l}function B_(t,e=[],n=[],r=""){let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Re(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let d=zn([r,u.relativePath]),h=n.concat(u);i.children&&i.children.length>0&&(Re(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),B_(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:DN(d,i.index),routesMeta:h})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of q_(i.path))s(i,o,u)}),e}function q_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=q_(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function RN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:LN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var AN=/^:[\w-]+$/,CN=3,kN=2,PN=1,jN=10,ON=-2,U0=t=>t==="*";function DN(t,e){let n=t.split("/"),r=n.length;return n.some(U0)&&(r+=ON),e&&(r+=kN),n.filter(s=>!U0(s)).reduce((s,i)=>s+(AN.test(i)?CN:i===""?PN:jN),r)}function LN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function MN(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",p=Tc({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),y=u.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=Tc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:zn([i,p.pathname]),pathnameBase:BN(zn([i,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(i=zn([i,p.pathnameBase]))}return o}function Tc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=VN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:p},y)=>{if(h==="*"){let R=l[y]||"";o=i.slice(0,i.length-R.length).replace(/(.)\/+$/,"$1")}const w=l[y];return p&&!w?d[h]=void 0:d[h]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function VN(t,e=!1,n=!0){fn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function $N(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Kn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function UN(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ki(t):t;return{pathname:n?n.startsWith("/")?n:FN(n,e):e,search:qN(r),hash:HN(s)}}function FN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Td(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function pm(t){let e=zN(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function gm(t,e,n,r=!1){let s;typeof t=="string"?s=ki(t):(s={...t},Re(!s.pathname||!s.pathname.includes("?"),Td("?","pathname","search",s)),Re(!s.pathname||!s.pathname.includes("#"),Td("#","pathname","hash",s)),Re(!s.search||!s.search.includes("#"),Td("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),p-=1;s.pathname=y.join("/")}l=p>=0?e[p]:"/"}let u=UN(s,l),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var zn=t=>t.join("/").replace(/\/\/+/g,"/"),BN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),qN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,HN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function WN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var H_=["POST","PUT","PATCH","DELETE"];new Set(H_);var GN=["GET",...H_];new Set(GN);var Pi=A.createContext(null);Pi.displayName="DataRouter";var ou=A.createContext(null);ou.displayName="DataRouterState";var W_=A.createContext({isTransitioning:!1});W_.displayName="ViewTransition";var QN=A.createContext(new Map);QN.displayName="Fetchers";var KN=A.createContext(null);KN.displayName="Await";var gn=A.createContext(null);gn.displayName="Navigation";var _a=A.createContext(null);_a.displayName="Location";var yn=A.createContext({outlet:null,matches:[],isDataRoute:!1});yn.displayName="Route";var ym=A.createContext(null);ym.displayName="RouteError";function YN(t,{relative:e}={}){Re(ji(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(gn),{hash:s,pathname:i,search:o}=wa(t,{relative:e}),l=i;return n!=="/"&&(l=i==="/"?n:zn([n,i])),r.createHref({pathname:l,search:o,hash:s})}function ji(){return A.useContext(_a)!=null}function Dt(){return Re(ji(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(_a).location}var G_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Q_(t){A.useContext(gn).static||A.useLayoutEffect(t)}function tr(){let{isDataRoute:t}=A.useContext(yn);return t?cS():XN()}function XN(){Re(ji(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Pi),{basename:e,navigator:n}=A.useContext(gn),{matches:r}=A.useContext(yn),{pathname:s}=Dt(),i=JSON.stringify(pm(r)),o=A.useRef(!1);return Q_(()=>{o.current=!0}),A.useCallback((u,d={})=>{if(fn(o.current,G_),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=gm(u,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:zn([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,s,t])}A.createContext(null);function JO(){let{matches:t}=A.useContext(yn),e=t[t.length-1];return e?e.params:{}}function wa(t,{relative:e}={}){let{matches:n}=A.useContext(yn),{pathname:r}=Dt(),s=JSON.stringify(pm(n));return A.useMemo(()=>gm(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function JN(t,e){return K_(t,e)}function K_(t,e,n,r){var _;Re(ji(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:i}=A.useContext(gn),{matches:o}=A.useContext(yn),l=o[o.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",p=l&&l.route;{let N=p&&p.path||"";Y_(d,!p||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let y=Dt(),w;if(e){let N=typeof e=="string"?ki(e):e;Re(h==="/"||((_=N.pathname)==null?void 0:_.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${N.pathname}" was given in the \`location\` prop.`),w=N}else w=y;let R=w.pathname||"/",k=R;if(h!=="/"){let N=h.replace(/^\//,"").split("/");k="/"+R.replace(/^\//,"").split("/").slice(N.length).join("/")}let C=!i&&n&&n.matches&&n.matches.length>0?n.matches:z_(t,{pathname:k});fn(p||C!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),fn(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=rS(C&&C.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:zn([h,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?h:zn([h,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),o,n,r);return e&&T?A.createElement(_a.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},T):T}function ZN(){let t=lS(),e=WN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:i},"ErrorBoundary")," or"," ",A.createElement("code",{style:i},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:s},n):null,o)}var eS=A.createElement(ZN,null),tS=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?A.createElement(yn.Provider,{value:this.props.routeContext},A.createElement(ym.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function nS({routeContext:t,match:e,children:n}){let r=A.useContext(Pi);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(yn.Provider,{value:t},n)}function rS(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,i=n==null?void 0:n.errors;if(i!=null){let u=s.findIndex(d=>d.route.id&&(i==null?void 0:i[d.route.id])!==void 0);Re(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let o=!1,l=-1;if(n)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:p}=n,y=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||y){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,d,h)=>{let p,y=!1,w=null,R=null;n&&(p=i&&d.route.id?i[d.route.id]:void 0,w=d.route.errorElement||eS,o&&(l<0&&h===0?(Y_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,R=null):l===h&&(y=!0,R=d.route.hydrateFallbackElement||null)));let k=e.concat(s.slice(0,h+1)),C=()=>{let T;return p?T=w:y?T=R:d.route.Component?T=A.createElement(d.route.Component,null):d.route.element?T=d.route.element:T=u,A.createElement(nS,{match:d,routeContext:{outlet:u,matches:k,isDataRoute:n!=null},children:T})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?A.createElement(tS,{location:n.location,revalidation:n.revalidation,component:w,error:p,children:C(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):C()},null)}function vm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sS(t){let e=A.useContext(Pi);return Re(e,vm(t)),e}function iS(t){let e=A.useContext(ou);return Re(e,vm(t)),e}function oS(t){let e=A.useContext(yn);return Re(e,vm(t)),e}function xm(t){let e=oS(t),n=e.matches[e.matches.length-1];return Re(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function aS(){return xm("useRouteId")}function lS(){var r;let t=A.useContext(ym),e=iS("useRouteError"),n=xm("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function cS(){let{router:t}=sS("useNavigate"),e=xm("useNavigate"),n=A.useRef(!1);return Q_(()=>{n.current=!0}),A.useCallback(async(s,i={})=>{fn(n.current,G_),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var F0={};function Y_(t,e,n){!e&&!F0[t]&&(F0[t]=!0,fn(!1,n))}A.memo(uS);function uS({routes:t,future:e,state:n}){return K_(t,void 0,n,e)}function ei({to:t,replace:e,state:n,relative:r}){Re(ji(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=A.useContext(gn);fn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=A.useContext(yn),{pathname:o}=Dt(),l=tr(),u=gm(t,pm(i),o,r==="path"),d=JSON.stringify(u);return A.useEffect(()=>{l(JSON.parse(d),{replace:e,state:n,relative:r})},[l,d,r,e,n]),null}function Z(t){Re(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dS({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){Re(!ji(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=A.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=ki(n));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:y="default"}=n,w=A.useMemo(()=>{let R=Kn(u,o);return R==null?null:{location:{pathname:R,search:d,hash:h,state:p,key:y},navigationType:r}},[o,u,d,h,p,y,r]);return fn(w!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:A.createElement(gn.Provider,{value:l},A.createElement(_a.Provider,{children:e,value:w}))}function gl({children:t,location:e}){return JN(qh(t),e)}function qh(t,e=[]){let n=[];return A.Children.forEach(t,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){n.push.apply(n,qh(r.props.children,i));return}Re(r.type===Z,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Re(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=qh(r.props.children,i)),n.push(o)}),n}var Fl="get",zl="application/x-www-form-urlencoded";function au(t){return t!=null&&typeof t.tagName=="string"}function hS(t){return au(t)&&t.tagName.toLowerCase()==="button"}function fS(t){return au(t)&&t.tagName.toLowerCase()==="form"}function mS(t){return au(t)&&t.tagName.toLowerCase()==="input"}function pS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gS(t,e){return t.button===0&&(!e||e==="_self")&&!pS(t)}var yl=null;function yS(){if(yl===null)try{new FormData(document.createElement("form"),0),yl=!1}catch{yl=!0}return yl}var vS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Id(t){return t!=null&&!vS.has(t)?(fn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zl}"`),null):t}function xS(t,e){let n,r,s,i,o;if(fS(t)){let l=t.getAttribute("action");r=l?Kn(l,e):null,n=t.getAttribute("method")||Fl,s=Id(t.getAttribute("enctype"))||zl,i=new FormData(t)}else if(hS(t)||mS(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(r=u?Kn(u,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Fl,s=Id(t.getAttribute("formenctype"))||Id(l.getAttribute("enctype"))||zl,i=new FormData(l,t),!yS()){let{name:d,type:h,value:p}=t;if(h==="image"){let y=d?`${d}.`:"";i.append(`${y}x`,"0"),i.append(`${y}y`,"0")}else d&&i.append(d,p)}}else{if(au(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Fl,r=null,s=zl,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}function _m(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function _S(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wS(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function ES(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await _S(i,n);return o.links?o.links():[]}return[]}));return NS(r.flat(1).filter(wS).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function z0(t,e,n,r,s,i){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,l=(u,d)=>{var h;return n[d].pathname!==u.pathname||((h=n[d].route.path)==null?void 0:h.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>o(u,d)||l(u,d)):i==="data"?e.filter((u,d)=>{var p;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,d)||l(u,d))return!0;if(u.route.shouldRevalidate){let y=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function bS(t,e,{includeHydrateFallback:n}={}){return TS(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function TS(t){return[...new Set(t)]}function IS(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function NS(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(IS(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}var SS=new Set([100,101,204,205]);function RS(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Kn(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function X_(){let t=A.useContext(Pi);return _m(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function AS(){let t=A.useContext(ou);return _m(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var wm=A.createContext(void 0);wm.displayName="FrameworkContext";function J_(){let t=A.useContext(wm);return _m(t,"You must render this element inside a <HydratedRouter> element"),t}function CS(t,e){let n=A.useContext(wm),[r,s]=A.useState(!1),[i,o]=A.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:p}=e,y=A.useRef(null);A.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let k=T=>{T.forEach(_=>{o(_.isIntersecting)})},C=new IntersectionObserver(k,{threshold:.5});return y.current&&C.observe(y.current),()=>{C.disconnect()}}},[t]),A.useEffect(()=>{if(r){let k=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(k)}}},[r]);let w=()=>{s(!0)},R=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,y,{}]:[i,y,{onFocus:lo(l,w),onBlur:lo(u,R),onMouseEnter:lo(d,w),onMouseLeave:lo(h,R),onTouchStart:lo(p,w)}]:[!1,y,{}]}function lo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function kS({page:t,...e}){let{router:n}=X_(),r=A.useMemo(()=>z_(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(jS,{page:t,matches:r,...e}):null}function PS(t){let{manifest:e,routeModules:n}=J_(),[r,s]=A.useState([]);return A.useEffect(()=>{let i=!1;return ES(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function jS({page:t,matches:e,...n}){let r=Dt(),{manifest:s,routeModules:i}=J_(),{basename:o}=X_(),{loaderData:l,matches:u}=AS(),d=A.useMemo(()=>z0(t,e,u,s,r,"data"),[t,e,u,s,r]),h=A.useMemo(()=>z0(t,e,u,s,r,"assets"),[t,e,u,s,r]),p=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let R=new Set,k=!1;if(e.forEach(T=>{var N;let _=s.routes[T.route.id];!_||!_.hasLoader||(!d.some(j=>j.route.id===T.route.id)&&T.route.id in l&&((N=i[T.route.id])!=null&&N.shouldRevalidate)||_.hasClientLoader?k=!0:R.add(T.route.id))}),R.size===0)return[];let C=RS(t,o);return k&&R.size>0&&C.searchParams.set("_routes",e.filter(T=>R.has(T.route.id)).map(T=>T.route.id).join(",")),[C.pathname+C.search]},[o,l,r,s,d,e,t,i]),y=A.useMemo(()=>bS(h,s),[h,s]),w=PS(h);return A.createElement(A.Fragment,null,p.map(R=>A.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...n})),y.map(R=>A.createElement("link",{key:R,rel:"modulepreload",href:R,...n})),w.map(({key:R,link:k})=>A.createElement("link",{key:R,...k})))}function OS(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Z_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Z_&&(window.__reactRouterVersion="7.5.3")}catch{}function DS({basename:t,children:e,window:n}){let r=A.useRef();r.current==null&&(r.current=TN({window:n,v5Compat:!0}));let s=r.current,[i,o]=A.useState({action:s.action,location:s.location}),l=A.useCallback(u=>{A.startTransition(()=>o(u))},[o]);return A.useLayoutEffect(()=>s.listen(l),[s,l]),A.createElement(dS,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var ew=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,le=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:p,...y},w){let{basename:R}=A.useContext(gn),k=typeof d=="string"&&ew.test(d),C,T=!1;if(typeof d=="string"&&k&&(C=d,Z_))try{let v=new URL(window.location.href),I=d.startsWith("//")?new URL(v.protocol+d):new URL(d),x=Kn(I.pathname,R);I.origin===v.origin&&x!=null?d=x+I.search+I.hash:T=!0}catch{fn(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=YN(d,{relative:s}),[N,j,D]=CS(r,y),U=$S(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:s,viewTransition:p});function E(v){e&&e(v),v.defaultPrevented||U(v)}let g=A.createElement("a",{...y,...D,href:C||_,onClick:T||i?e:E,ref:OS(w,j),target:u,"data-discover":!k&&n==="render"?"true":void 0});return N&&!k?A.createElement(A.Fragment,null,g,A.createElement(kS,{page:_})):g});le.displayName="Link";var LS=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:l,children:u,...d},h){let p=wa(o,{relative:d.relative}),y=Dt(),w=A.useContext(ou),{navigator:R,basename:k}=A.useContext(gn),C=w!=null&&qS(p)&&l===!0,T=R.encodeLocation?R.encodeLocation(p).pathname:p.pathname,_=y.pathname,N=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;n||(_=_.toLowerCase(),N=N?N.toLowerCase():null,T=T.toLowerCase()),N&&k&&(N=Kn(N,k)||N);const j=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let D=_===T||!s&&_.startsWith(T)&&_.charAt(j)==="/",U=N!=null&&(N===T||!s&&N.startsWith(T)&&N.charAt(T.length)==="/"),E={isActive:D,isPending:U,isTransitioning:C},g=D?e:void 0,v;typeof r=="function"?v=r(E):v=[r,D?"active":null,U?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let I=typeof i=="function"?i(E):i;return A.createElement(le,{...d,"aria-current":g,className:v,ref:h,style:I,to:o,viewTransition:l},typeof u=="function"?u(E):u)});LS.displayName="NavLink";var MS=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=Fl,action:l,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:p,...y},w)=>{let R=zS(),k=BS(l,{relative:d}),C=o.toLowerCase()==="get"?"get":"post",T=typeof l=="string"&&ew.test(l),_=N=>{if(u&&u(N),N.defaultPrevented)return;N.preventDefault();let j=N.nativeEvent.submitter,D=(j==null?void 0:j.getAttribute("formmethod"))||o;R(j||N.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:s,state:i,relative:d,preventScrollReset:h,viewTransition:p})};return A.createElement("form",{ref:w,method:C,action:k,onSubmit:r?u:_,...y,"data-discover":!T&&t==="render"?"true":void 0})});MS.displayName="Form";function VS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tw(t){let e=A.useContext(Pi);return Re(e,VS(t)),e}function $S(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let l=tr(),u=Dt(),d=wa(t,{relative:i});return A.useCallback(h=>{if(gS(h,e)){h.preventDefault();let p=n!==void 0?n:ta(u)===ta(d);l(t,{replace:p,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[u,l,d,n,r,e,t,s,i,o])}var US=0,FS=()=>`__${String(++US)}__`;function zS(){let{router:t}=tw("useSubmit"),{basename:e}=A.useContext(gn),n=aS();return A.useCallback(async(r,s={})=>{let{action:i,method:o,encType:l,formData:u,body:d}=xS(r,e);if(s.navigate===!1){let h=s.fetcherKey||FS();await t.fetch(h,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function BS(t,{relative:e}={}){let{basename:n}=A.useContext(gn),r=A.useContext(yn);Re(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...wa(t||".",{relative:e})},o=Dt();if(t==null){i.search=o.search;let l=new URLSearchParams(i.search),u=l.getAll("index");if(u.some(h=>h==="")){l.delete("index"),u.filter(p=>p).forEach(p=>l.append("index",p));let h=l.toString();i.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:zn([n,i.pathname])),ta(i)}function qS(t,e={}){let n=A.useContext(W_);Re(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=tw("useViewTransitionState"),s=wa(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Kn(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Kn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Tc(s.pathname,o)!=null||Tc(s.pathname,i)!=null}new TextEncoder;[...SS];const HS=()=>{};var B0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},WS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},rw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=i>>2,p=(i&3)<<4|l>>4;let y=(l&15)<<2|d>>6,w=d&63;u||(w=64,o||(y=64)),r.push(n[h],n[p],n[y],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):WS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new GS;const y=i<<2|l>>4;if(r.push(y),d!==64){const w=l<<4&240|d>>2;if(r.push(w),p!==64){const R=d<<6&192|p;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QS=function(t){const e=nw(t);return rw.encodeByteArray(e,!0)},Ic=function(t){return QS(t).replace(/\./g,"")},sw=function(t){try{return rw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=()=>KS().__FIREBASE_DEFAULTS__,XS=()=>{if(typeof process>"u"||typeof B0>"u")return;const t=B0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sw(t[1]);return e&&JSON.parse(e)},lu=()=>{try{return HS()||YS()||XS()||JS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},iw=t=>{var e,n;return(n=(e=lu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ow=t=>{const e=iw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},aw=()=>{var t;return(t=lu())===null||t===void 0?void 0:t.config},lw=t=>{var e;return(e=lu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ic(JSON.stringify(n)),Ic(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gt())}function tR(){var t;const e=(t=lu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iR(){const t=gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function oR(){return!tR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aR(){try{return typeof indexedDB=="object"}catch{return!1}}function lR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="FirebaseError";class kn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cR,Object.setPrototypeOf(this,kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ea.prototype.create)}}class Ea{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?uR(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new kn(s,l,r)}}function uR(t,e){return t.replace(dR,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const dR=/\{\$([^}]+)}/g;function hR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ws(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(q0(i)&&q0(o)){if(!ws(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function q0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function go(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function yo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function fR(t,e){const n=new mR(t,e);return n.subscribe.bind(n)}class mR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");pR(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Nd),s.error===void 0&&(s.error=Nd),s.complete===void 0&&(s.complete=Nd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Nd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t){return t&&t._delegate?t._delegate:t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(t){return t.endsWith(".cloudworkstations.dev")}async function Em(t){return(await fetch(t,{credentials:"include"})).ok}class Dr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ZS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vR(e))try{this.getOrInitializeService({instanceIdentifier:os})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=os){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=os){return this.instances.has(e)}getOptions(e=os){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=os){return this.component?this.component.multipleInstances?e:os:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yR(t){return t===os?void 0:t}function vR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const _R={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},wR=ue.INFO,ER={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},bR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=ER[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bm{constructor(e){this.name=e,this._logLevel=wR,this._logHandler=bR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_R[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const TR=(t,e)=>e.some(n=>t instanceof n);let H0,W0;function IR(){return H0||(H0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NR(){return W0||(W0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uw=new WeakMap,Hh=new WeakMap,dw=new WeakMap,Sd=new WeakMap,Tm=new WeakMap;function SR(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ar(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&uw.set(n,t)}).catch(()=>{}),Tm.set(e,t),e}function RR(t){if(Hh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Hh.set(t,e)}let Wh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ar(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function AR(t){Wh=t(Wh)}function CR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Rd(this),e,...n);return dw.set(r,e.sort?e.sort():[e]),Ar(r)}:NR().includes(t)?function(...e){return t.apply(Rd(this),e),Ar(uw.get(this))}:function(...e){return Ar(t.apply(Rd(this),e))}}function kR(t){return typeof t=="function"?CR(t):(t instanceof IDBTransaction&&RR(t),TR(t,IR())?new Proxy(t,Wh):t)}function Ar(t){if(t instanceof IDBRequest)return SR(t);if(Sd.has(t))return Sd.get(t);const e=kR(t);return e!==t&&(Sd.set(t,e),Tm.set(e,t)),e}const Rd=t=>Tm.get(t);function PR(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Ar(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ar(o.result),u.oldVersion,u.newVersion,Ar(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const jR=["get","getKey","getAll","getAllKeys","count"],OR=["put","add","delete","clear"],Ad=new Map;function G0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ad.get(e))return Ad.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=OR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||jR.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Ad.set(e,i),i}AR(t=>({...t,get:(e,n,r)=>G0(e,n)||t.get(e,n,r),has:(e,n)=>!!G0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(LR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function LR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gh="@firebase/app",Q0="0.12.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn=new bm("@firebase/app"),MR="@firebase/app-compat",VR="@firebase/analytics-compat",$R="@firebase/analytics",UR="@firebase/app-check-compat",FR="@firebase/app-check",zR="@firebase/auth",BR="@firebase/auth-compat",qR="@firebase/database",HR="@firebase/data-connect",WR="@firebase/database-compat",GR="@firebase/functions",QR="@firebase/functions-compat",KR="@firebase/installations",YR="@firebase/installations-compat",XR="@firebase/messaging",JR="@firebase/messaging-compat",ZR="@firebase/performance",eA="@firebase/performance-compat",tA="@firebase/remote-config",nA="@firebase/remote-config-compat",rA="@firebase/storage",sA="@firebase/storage-compat",iA="@firebase/firestore",oA="@firebase/vertexai",aA="@firebase/firestore-compat",lA="firebase",cA="11.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh="[DEFAULT]",uA={[Gh]:"fire-core",[MR]:"fire-core-compat",[$R]:"fire-analytics",[VR]:"fire-analytics-compat",[FR]:"fire-app-check",[UR]:"fire-app-check-compat",[zR]:"fire-auth",[BR]:"fire-auth-compat",[qR]:"fire-rtdb",[HR]:"fire-data-connect",[WR]:"fire-rtdb-compat",[GR]:"fire-fn",[QR]:"fire-fn-compat",[KR]:"fire-iid",[YR]:"fire-iid-compat",[XR]:"fire-fcm",[JR]:"fire-fcm-compat",[ZR]:"fire-perf",[eA]:"fire-perf-compat",[tA]:"fire-rc",[nA]:"fire-rc-compat",[rA]:"fire-gcs",[sA]:"fire-gcs-compat",[iA]:"fire-fst",[aA]:"fire-fst-compat",[oA]:"fire-vertex","fire-js":"fire-js",[lA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=new Map,dA=new Map,Kh=new Map;function K0(t,e){try{t.container.addComponent(e)}catch(n){Yn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Es(t){const e=t.name;if(Kh.has(e))return Yn.debug(`There were multiple attempts to register component ${e}.`),!1;Kh.set(e,t);for(const n of Nc.values())K0(n,t);for(const n of dA.values())K0(n,t);return!0}function cu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ft(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cr=new Ea("app","Firebase",hA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=cA;function hw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Qh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Cr.create("bad-app-name",{appName:String(s)});if(n||(n=aw()),!n)throw Cr.create("no-options");const i=Nc.get(s);if(i){if(ws(n,i.options)&&ws(r,i.config))return i;throw Cr.create("duplicate-app",{appName:s})}const o=new xR(s);for(const u of Kh.values())o.addComponent(u);const l=new fA(n,r,o);return Nc.set(s,l),l}function Im(t=Qh){const e=Nc.get(t);if(!e&&t===Qh&&aw())return hw();if(!e)throw Cr.create("no-app",{appName:t});return e}function In(t,e,n){var r;let s=(r=uA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yn.warn(l.join(" "));return}Es(new Dr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="firebase-heartbeat-database",pA=1,na="firebase-heartbeat-store";let Cd=null;function fw(){return Cd||(Cd=PR(mA,pA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(na)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cr.create("idb-open",{originalErrorMessage:t.message})})),Cd}async function gA(t){try{const n=(await fw()).transaction(na),r=await n.objectStore(na).get(mw(t));return await n.done,r}catch(e){if(e instanceof kn)Yn.warn(e.message);else{const n=Cr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yn.warn(n.message)}}}async function Y0(t,e){try{const r=(await fw()).transaction(na,"readwrite");await r.objectStore(na).put(e,mw(t)),await r.done}catch(n){if(n instanceof kn)Yn.warn(n.message);else{const r=Cr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yn.warn(r.message)}}}function mw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=1024,vA=30;class xA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=X0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>vA){const o=EA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Yn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=X0(),{heartbeatsToSend:r,unsentEntries:s}=_A(this._heartbeatsCache.heartbeats),i=Ic(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Yn.warn(n),""}}}function X0(){return new Date().toISOString().substring(0,10)}function _A(t,e=yA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),J0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),J0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class wA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aR()?lR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Y0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Y0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function J0(t){return Ic(JSON.stringify({version:2,heartbeats:t})).length}function EA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t){Es(new Dr("platform-logger",e=>new DR(e),"PRIVATE")),Es(new Dr("heartbeat",e=>new xA(e),"PRIVATE")),In(Gh,Q0,t),In(Gh,Q0,"esm2017"),In("fire-js","")}bA("");function Nm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function pw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TA=pw,gw=new Ea("auth","Firebase",pw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=new bm("@firebase/auth");function IA(t,...e){Sc.logLevel<=ue.WARN&&Sc.warn(`Auth (${Cs}): ${t}`,...e)}function Bl(t,...e){Sc.logLevel<=ue.ERROR&&Sc.error(`Auth (${Cs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t,...e){throw Sm(t,...e)}function Nn(t,...e){return Sm(t,...e)}function yw(t,e,n){const r=Object.assign(Object.assign({},TA()),{[e]:n});return new Ea("auth","Firebase",r).create(e,{appName:t.name})}function Bn(t){return yw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gw.create(t,...e)}function re(t,e,...n){if(!t)throw Sm(e,...n)}function $n(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bl(e),new Error(e)}function Xn(t,e){t||$n(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function NA(){return Z0()==="http:"||Z0()==="https:"}function Z0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NA()||rR()||"connection"in navigator)?navigator.onLine:!0}function RA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xn(n>e,"Short delay should be less than long delay!"),this.isMobile=eR()||sR()}get(){return SA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(t,e){Xn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kA=new Ta(3e4,6e4);function nr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Pn(t,e,n,r,s={}){return xw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=ba(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return nR()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Oi(t.emulatorConfig.host)&&(d.credentials="include"),vw.fetch()(await _w(t,t.config.apiHost,n,l),d)})}async function xw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},AA),e);try{const s=new jA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw vl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw vl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw vl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw vl(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw yw(t,h,d);mn(t,h)}}catch(s){if(s instanceof kn)throw s;mn(t,"network-request-failed",{message:String(s)})}}async function Ia(t,e,n,r,s={}){const i=await Pn(t,e,n,r,s);return"mfaPendingCredential"in i&&mn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function _w(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Rm(t.config,s):`${t.config.apiScheme}://${s}`;return CA.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function PA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Nn(this.auth,"network-request-failed")),kA.get())})}}function vl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Nn(t,e,r);return s.customData._tokenResponse=n,s}function ey(t){return t!==void 0&&t.enterprise!==void 0}class OA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return PA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function DA(t,e){return Pn(t,"GET","/v2/recaptchaConfig",nr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(t,e){return Pn(t,"POST","/v1/accounts:delete",e)}async function Rc(t,e){return Pn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MA(t,e=!1){const n=Ne(t),r=await n.getIdToken(e),s=Am(r);re(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ko(kd(s.auth_time)),issuedAtTime:ko(kd(s.iat)),expirationTime:ko(kd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function kd(t){return Number(t)*1e3}function Am(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Bl("JWT malformed, contained fewer than 3 sections"),null;try{const s=sw(n);return s?JSON.parse(s):(Bl("Failed to decode base64 JWT payload"),null)}catch(s){return Bl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ty(t){const e=Am(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof kn&&VA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function VA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ko(this.lastLoginAt),this.creationTime=ko(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(t){var e;const n=t.auth,r=await t.getIdToken(),s=await xi(t,Rc(n,{idToken:r}));re(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?ww(i.providerUserInfo):[],l=FA(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),h=u?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Xh(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function UA(t){const e=Ne(t);await Ac(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ww(t){return t.map(e=>{var{providerId:n}=e,r=Nm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zA(t,e){const n=await xw(t,{},async()=>{const r=ba({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await _w(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",vw.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function BA(t,e){return Pn(t,"POST","/v2/accounts:revokeToken",nr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ty(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");const n=ty(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await zA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new li;return r&&(re(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(re(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(re(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new li,this.toJSON())}_performRefresh(){return $n("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class cn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Nm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $A(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Xh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await xi(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return MA(this,e)}reload(){return UA(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new cn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ac(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ft(this.auth.app))return Promise.reject(Bn(this.auth));const e=await this.getIdToken();return await xi(this,LA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,d,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(s=n.email)!==null&&s!==void 0?s:void 0,w=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,R=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(l=n.tenantId)!==null&&l!==void 0?l:void 0,C=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,T=(d=n.createdAt)!==null&&d!==void 0?d:void 0,_=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:N,emailVerified:j,isAnonymous:D,providerData:U,stsTokenManager:E}=n;re(N&&E,e,"internal-error");const g=li.fromJSON(this.name,E);re(typeof N=="string",e,"internal-error"),lr(p,e.name),lr(y,e.name),re(typeof j=="boolean",e,"internal-error"),re(typeof D=="boolean",e,"internal-error"),lr(w,e.name),lr(R,e.name),lr(k,e.name),lr(C,e.name),lr(T,e.name),lr(_,e.name);const v=new cn({uid:N,auth:e,email:y,emailVerified:j,displayName:p,isAnonymous:D,photoURL:R,phoneNumber:w,tenantId:k,stsTokenManager:g,createdAt:T,lastLoginAt:_});return U&&Array.isArray(U)&&(v.providerData=U.map(I=>Object.assign({},I))),C&&(v._redirectEventId=C),v}static async _fromIdTokenResponse(e,n,r=!1){const s=new li;s.updateFromServerResponse(n);const i=new cn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ac(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];re(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?ww(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new li;l.updateFromIdToken(r);const u=new cn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Xh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny=new Map;function Un(t){Xn(t instanceof Function,"Expected a class definition");let e=ny.get(t);return e?(Xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ny.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ew.type="NONE";const ry=Ew;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(t,e,n){return`firebase:${t}:${e}:${n}`}class ci{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ql(this.userKey,s.apiKey,i),this.fullPersistenceKey=ql("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Rc(this.auth,{idToken:e}).catch(()=>{});return n?cn._fromGetAccountInfoResponse(this.auth,n,e):null}return cn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ci(Un(ry),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Un(ry);const o=ql(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(o);if(h){let p;if(typeof h=="string"){const y=await Rc(e,{idToken:h}).catch(()=>{});if(!y)break;p=await cn._fromGetAccountInfoResponse(e,y,h)}else p=cn._fromJSON(e,h);d!==i&&(l=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new ci(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new ci(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Nw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Rw(e))return"Blackberry";if(Aw(e))return"Webos";if(Tw(e))return"Safari";if((e.includes("chrome/")||Iw(e))&&!e.includes("edge/"))return"Chrome";if(Sw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bw(t=gt()){return/firefox\//i.test(t)}function Tw(t=gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Iw(t=gt()){return/crios\//i.test(t)}function Nw(t=gt()){return/iemobile/i.test(t)}function Sw(t=gt()){return/android/i.test(t)}function Rw(t=gt()){return/blackberry/i.test(t)}function Aw(t=gt()){return/webos/i.test(t)}function Cm(t=gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qA(t=gt()){var e;return Cm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HA(){return iR()&&document.documentMode===10}function Cw(t=gt()){return Cm(t)||Sw(t)||Aw(t)||Rw(t)||/windows phone/i.test(t)||Nw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(t,e=[]){let n;switch(t){case"Browser":n=sy(gt());break;case"Worker":n=`${sy(gt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Cs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GA(t,e={}){return Pn(t,"GET","/v2/passwordPolicy",nr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=6;class KA{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:QA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iy(this),this.idTokenSubscription=new iy(this),this.beforeStateQueue=new WA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Un(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ci.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Rc(this,{idToken:e}),r=await cn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ft(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ac(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ft(this.app))return Promise.reject(Bn(this));const n=e?Ne(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ft(this.app)?Promise.reject(Bn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ft(this.app)?Promise.reject(Bn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GA(this),n=new KA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ea("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await BA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Un(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await ci.create(this,[Un(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Ft(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&IA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Hr(t){return Ne(t)}class iy{constructor(e){this.auth=e,this.observer=null,this.addObserver=fR(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XA(t){uu=t}function Pw(t){return uu.loadJS(t)}function JA(){return uu.recaptchaEnterpriseScript}function ZA(){return uu.gapiScript}function eC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class tC{constructor(){this.enterprise=new nC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class nC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const rC="recaptcha-enterprise",jw="NO_RECAPTCHA";class sC{constructor(e){this.type=rC,this.auth=Hr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{DA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new OA(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;ey(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(jw)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tC().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&ey(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=JA();u.length!==0&&(u+=l),Pw(u).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function oy(t,e,n,r=!1,s=!1){const i=new sC(t);let o;if(s)o=jw;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Cc(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await oy(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await oy(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t,e){const n=cu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ws(i,e??{}))return s;mn(s,"already-initialized")}return n.initialize({options:e})}function oC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Un);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function aC(t,e,n){const r=Hr(t);re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Ow(e),{host:o,port:l}=lC(e),u=l===null?"":`:${l}`,d={url:`${i}//${o}${u}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),re(ws(d,r.config.emulator)&&ws(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,cC(),Oi(o)&&Em(`${i}//${o}${u}`)}function Ow(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lC(t){const e=Ow(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ay(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:ay(o)}}}function ay(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function cC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $n("not implemented")}_getIdTokenResponse(e){return $n("not implemented")}_linkToIdToken(e,n){return $n("not implemented")}_getReauthenticationResolver(e){return $n("not implemented")}}async function uC(t,e){return Pn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(t,e){return Ia(t,"POST","/v1/accounts:signInWithPassword",nr(t,e))}async function hC(t,e){return Pn(t,"POST","/v1/accounts:sendOobCode",nr(t,e))}async function fC(t,e){return hC(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(t,e){return Ia(t,"POST","/v1/accounts:signInWithEmailLink",nr(t,e))}async function pC(t,e){return Ia(t,"POST","/v1/accounts:signInWithEmailLink",nr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends km{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ra(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ra(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cc(e,n,"signInWithPassword",dC);case"emailLink":return mC(e,{email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cc(e,r,"signUpPassword",uC);case"emailLink":return pC(e,{idToken:n,email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ui(t,e){return Ia(t,"POST","/v1/accounts:signInWithIdp",nr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="http://localhost";class bs extends km{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Nm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new bs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ui(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ui(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ui(e,n)}buildRequest(){const e={requestUri:gC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ba(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vC(t){const e=go(yo(t)).link,n=e?go(yo(e)).deep_link_id:null,r=go(yo(t)).deep_link_id;return(r?go(yo(r)).link:null)||r||n||e||t}class Pm{constructor(e){var n,r,s,i,o,l;const u=go(yo(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=yC((s=u.mode)!==null&&s!==void 0?s:null);re(d&&h&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=h,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=vC(e);try{return new Pm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(){this.providerId=Di.PROVIDER_ID}static credential(e,n){return ra._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Pm.parseLink(n);return re(r,"argument-error"),ra._fromEmailAndCode(e,r.code,r.tenantId)}}Di.PROVIDER_ID="password";Di.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Di.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends Dw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Na{constructor(){super("facebook.com")}static credential(e){return bs._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.FACEBOOK_SIGN_IN_METHOD="facebook.com";fr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Na{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bs._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return mr.credential(n,r)}catch{return null}}}mr.GOOGLE_SIGN_IN_METHOD="google.com";mr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Na{constructor(){super("github.com")}static credential(e){return bs._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.GITHUB_SIGN_IN_METHOD="github.com";pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Na{constructor(){super("twitter.com")}static credential(e,n){return bs._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return gr.credential(n,r)}catch{return null}}}gr.TWITTER_SIGN_IN_METHOD="twitter.com";gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(t,e){return Ia(t,"POST","/v1/accounts:signUp",nr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await cn._fromIdTokenResponse(e,r,s),o=ly(r);return new Ts({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=ly(r);return new Ts({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function ly(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc extends kn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,kc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new kc(e,n,r,s)}}function Lw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?kc._fromErrorAndOperation(t,i,e,r):i})}async function _C(t,e,n=!1){const r=await xi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ts._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wC(t,e,n=!1){const{auth:r}=t;if(Ft(r.app))return Promise.reject(Bn(r));const s="reauthenticate";try{const i=await xi(t,Lw(r,s,e,t),n);re(i.idToken,r,"internal-error");const o=Am(i.idToken);re(o,r,"internal-error");const{sub:l}=o;return re(t.uid===l,r,"user-mismatch"),Ts._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&mn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mw(t,e,n=!1){if(Ft(t.app))return Promise.reject(Bn(t));const r="signIn",s=await Lw(t,r,e),i=await Ts._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function EC(t,e){return Mw(Hr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vw(t){const e=Hr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $w(t,e,n){const r=Hr(t);await Cc(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",fC)}async function Uw(t,e,n){if(Ft(t.app))return Promise.reject(Bn(t));const r=Hr(t),o=await Cc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xC).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Vw(t),u}),l=await Ts._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function bC(t,e,n){return Ft(t.app)?Promise.reject(Bn(t)):EC(Ne(t),Di.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Vw(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(t,e){return Pn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fw(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ne(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await xi(r,TC(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function IC(t,e,n,r){return Ne(t).onIdTokenChanged(e,n,r)}function NC(t,e,n){return Ne(t).beforeAuthStateChanged(e,n)}function SC(t,e,n,r){return Ne(t).onAuthStateChanged(e,n,r)}function RC(t){return Ne(t).signOut()}const Pc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pc,"1"),this.storage.removeItem(Pc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=1e3,CC=10;class Bw extends zw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Cw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);HA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,CC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},AC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Bw.type="LOCAL";const kC=Bw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw extends zw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qw.type="SESSION";const Hw=qw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new du(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),u=await PC(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}du.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const d=jm("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const y=p;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(y.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return window}function OC(t){Sn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(){return typeof Sn().WorkerGlobalScope<"u"&&typeof Sn().importScripts=="function"}async function DC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function MC(){return Ww()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="firebaseLocalStorageDb",VC=1,jc="firebaseLocalStorage",Qw="fbase_key";class Sa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hu(t,e){return t.transaction([jc],e?"readwrite":"readonly").objectStore(jc)}function $C(){const t=indexedDB.deleteDatabase(Gw);return new Sa(t).toPromise()}function Jh(){const t=indexedDB.open(Gw,VC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(jc,{keyPath:Qw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(jc)?e(r):(r.close(),await $C(),e(await Jh()))})})}async function cy(t,e,n){const r=hu(t,!0).put({[Qw]:e,value:n});return new Sa(r).toPromise()}async function UC(t,e){const n=hu(t,!1).get(e),r=await new Sa(n).toPromise();return r===void 0?null:r.value}function uy(t,e){const n=hu(t,!0).delete(e);return new Sa(n).toPromise()}const FC=800,zC=3;class Kw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>zC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ww()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=du._getInstance(MC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await DC(),!this.activeServiceWorker)return;this.sender=new jC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jh();return await cy(e,Pc,"1"),await uy(e,Pc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>cy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>UC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>uy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=hu(s,!1).getAll();return new Sa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Kw.type="LOCAL";const BC=Kw;new Ta(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(t,e){return e?Un(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om extends km{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ui(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ui(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ui(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function HC(t){return Mw(t.auth,new Om(t),t.bypassAuthState)}function WC(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),wC(n,new Om(t),t.bypassAuthState)}async function GC(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),_C(n,new Om(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HC;case"linkViaPopup":case"linkViaRedirect":return GC;case"reauthViaPopup":case"reauthViaRedirect":return WC;default:mn(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=new Ta(2e3,1e4);class ti extends Yw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ti.currentPopupAction&&ti.currentPopupAction.cancel(),ti.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Xn(this.filter.length===1,"Popup operations only handle one event");const e=jm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Nn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ti.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QC.get())};e()}}ti.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="pendingRedirect",Hl=new Map;class YC extends Yw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hl.get(this.auth._key());if(!e){try{const r=await XC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hl.set(this.auth._key(),e)}return this.bypassAuthState||Hl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XC(t,e){const n=ek(e),r=ZC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function JC(t,e){Hl.set(t._key(),e)}function ZC(t){return Un(t._redirectPersistence)}function ek(t){return ql(KC,t.config.apiKey,t.name)}async function tk(t,e,n=!1){if(Ft(t.app))return Promise.reject(Bn(t));const r=Hr(t),s=qC(r,e),o=await new YC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=10*60*1e3;class rk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Xw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Nn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nk&&this.cachedEventUids.clear(),this.cachedEventUids.has(dy(e))}saveEventToCache(e){this.cachedEventUids.add(dy(e)),this.lastProcessedEventTime=Date.now()}}function dy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Xw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(t,e={}){return Pn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ak=/^https?/;async function lk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ik(t);for(const n of e)try{if(ck(n))return}catch{}mn(t,"unauthorized-domain")}function ck(t){const e=Yh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ak.test(n))return!1;if(ok.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=new Ta(3e4,6e4);function hy(){const t=Sn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function dk(t){return new Promise((e,n)=>{var r,s,i;function o(){hy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hy(),n(Nn(t,"network-request-failed"))},timeout:uk.get()})}if(!((s=(r=Sn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Sn().gapi)===null||i===void 0)&&i.load)o();else{const l=eC("iframefcb");return Sn()[l]=()=>{gapi.load?o():n(Nn(t,"network-request-failed"))},Pw(`${ZA()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Wl=null,e})}let Wl=null;function hk(t){return Wl=Wl||dk(t),Wl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=new Ta(5e3,15e3),mk="__/auth/iframe",pk="emulator/auth/iframe",gk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vk(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Rm(e,pk):`https://${t.config.authDomain}/${mk}`,r={apiKey:e.apiKey,appName:t.name,v:Cs},s=yk.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ba(r).slice(1)}`}async function xk(t){const e=await hk(t),n=Sn().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:vk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gk,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Nn(t,"network-request-failed"),l=Sn().setTimeout(()=>{i(o)},fk.get());function u(){Sn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wk=500,Ek=600,bk="_blank",Tk="http://localhost";class fy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ik(t,e,n,r=wk,s=Ek){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},_k),{width:r.toString(),height:s.toString(),top:i,left:o}),d=gt().toLowerCase();n&&(l=Iw(d)?bk:n),bw(d)&&(e=e||Tk,u.scrollbars="yes");const h=Object.entries(u).reduce((y,[w,R])=>`${y}${w}=${R},`,"");if(qA(d)&&l!=="_self")return Nk(e||"",l),new fy(null);const p=window.open(e||"",l,h);re(p,t,"popup-blocked");try{p.focus()}catch{}return new fy(p)}function Nk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk="__/auth/handler",Rk="emulator/auth/handler",Ak=encodeURIComponent("fac");async function my(t,e,n,r,s,i){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Cs,eventId:s};if(e instanceof Dw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",hR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof Na){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),d=u?`#${Ak}=${encodeURIComponent(u)}`:"";return`${Ck(t)}?${ba(l).slice(1)}${d}`}function Ck({config:t}){return t.emulator?Rm(t,Rk):`https://${t.authDomain}/${Sk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="webStorageSupport";class kk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hw,this._completeRedirectFn=tk,this._overrideRedirectResult=JC}async _openPopup(e,n,r,s){var i;Xn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await my(e,n,r,Yh(),s);return Ik(e,o,jm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await my(e,n,r,Yh(),s);return OC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Xn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await xk(e),r=new rk(e);return n.register("authEvent",s=>(re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pd,{type:Pd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Pd];o!==void 0&&n(!!o),mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Cw()||Tw()||Cm()}}const Pk=kk;var py="@firebase/auth",gy="1.10.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dk(t){Es(new Dr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kw(t)},d=new YA(r,s,i,u);return oC(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Es(new Dr("auth-internal",e=>{const n=Hr(e.getProvider("auth").getImmediate());return(r=>new jk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),In(py,gy,Ok(t)),In(py,gy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=5*60,Mk=lw("authIdTokenMaxAge")||Lk;let yy=null;const Vk=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Mk)return;const s=n==null?void 0:n.token;yy!==s&&(yy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function $k(t=Im()){const e=cu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=iC(t,{popupRedirectResolver:Pk,persistence:[BC,kC,Hw]}),r=lw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Vk(i.toString());NC(n,o,()=>o(n.currentUser)),IC(n,l=>o(l))}}const s=iw("auth");return s&&aC(n,`http://${s}`),n}function Uk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}XA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Nn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Uk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Dk("Browser");var vy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kr,Jw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,g){function v(){}v.prototype=g.prototype,E.D=g.prototype,E.prototype=new v,E.prototype.constructor=E,E.C=function(I,x,P){for(var S=Array(arguments.length-2),z=2;z<arguments.length;z++)S[z-2]=arguments[z];return g.prototype[x].apply(I,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,g,v){v||(v=0);var I=Array(16);if(typeof g=="string")for(var x=0;16>x;++x)I[x]=g.charCodeAt(v++)|g.charCodeAt(v++)<<8|g.charCodeAt(v++)<<16|g.charCodeAt(v++)<<24;else for(x=0;16>x;++x)I[x]=g[v++]|g[v++]<<8|g[v++]<<16|g[v++]<<24;g=E.g[0],v=E.g[1],x=E.g[2];var P=E.g[3],S=g+(P^v&(x^P))+I[0]+3614090360&4294967295;g=v+(S<<7&4294967295|S>>>25),S=P+(x^g&(v^x))+I[1]+3905402710&4294967295,P=g+(S<<12&4294967295|S>>>20),S=x+(v^P&(g^v))+I[2]+606105819&4294967295,x=P+(S<<17&4294967295|S>>>15),S=v+(g^x&(P^g))+I[3]+3250441966&4294967295,v=x+(S<<22&4294967295|S>>>10),S=g+(P^v&(x^P))+I[4]+4118548399&4294967295,g=v+(S<<7&4294967295|S>>>25),S=P+(x^g&(v^x))+I[5]+1200080426&4294967295,P=g+(S<<12&4294967295|S>>>20),S=x+(v^P&(g^v))+I[6]+2821735955&4294967295,x=P+(S<<17&4294967295|S>>>15),S=v+(g^x&(P^g))+I[7]+4249261313&4294967295,v=x+(S<<22&4294967295|S>>>10),S=g+(P^v&(x^P))+I[8]+1770035416&4294967295,g=v+(S<<7&4294967295|S>>>25),S=P+(x^g&(v^x))+I[9]+2336552879&4294967295,P=g+(S<<12&4294967295|S>>>20),S=x+(v^P&(g^v))+I[10]+4294925233&4294967295,x=P+(S<<17&4294967295|S>>>15),S=v+(g^x&(P^g))+I[11]+2304563134&4294967295,v=x+(S<<22&4294967295|S>>>10),S=g+(P^v&(x^P))+I[12]+1804603682&4294967295,g=v+(S<<7&4294967295|S>>>25),S=P+(x^g&(v^x))+I[13]+4254626195&4294967295,P=g+(S<<12&4294967295|S>>>20),S=x+(v^P&(g^v))+I[14]+2792965006&4294967295,x=P+(S<<17&4294967295|S>>>15),S=v+(g^x&(P^g))+I[15]+1236535329&4294967295,v=x+(S<<22&4294967295|S>>>10),S=g+(x^P&(v^x))+I[1]+4129170786&4294967295,g=v+(S<<5&4294967295|S>>>27),S=P+(v^x&(g^v))+I[6]+3225465664&4294967295,P=g+(S<<9&4294967295|S>>>23),S=x+(g^v&(P^g))+I[11]+643717713&4294967295,x=P+(S<<14&4294967295|S>>>18),S=v+(P^g&(x^P))+I[0]+3921069994&4294967295,v=x+(S<<20&4294967295|S>>>12),S=g+(x^P&(v^x))+I[5]+3593408605&4294967295,g=v+(S<<5&4294967295|S>>>27),S=P+(v^x&(g^v))+I[10]+38016083&4294967295,P=g+(S<<9&4294967295|S>>>23),S=x+(g^v&(P^g))+I[15]+3634488961&4294967295,x=P+(S<<14&4294967295|S>>>18),S=v+(P^g&(x^P))+I[4]+3889429448&4294967295,v=x+(S<<20&4294967295|S>>>12),S=g+(x^P&(v^x))+I[9]+568446438&4294967295,g=v+(S<<5&4294967295|S>>>27),S=P+(v^x&(g^v))+I[14]+3275163606&4294967295,P=g+(S<<9&4294967295|S>>>23),S=x+(g^v&(P^g))+I[3]+4107603335&4294967295,x=P+(S<<14&4294967295|S>>>18),S=v+(P^g&(x^P))+I[8]+1163531501&4294967295,v=x+(S<<20&4294967295|S>>>12),S=g+(x^P&(v^x))+I[13]+2850285829&4294967295,g=v+(S<<5&4294967295|S>>>27),S=P+(v^x&(g^v))+I[2]+4243563512&4294967295,P=g+(S<<9&4294967295|S>>>23),S=x+(g^v&(P^g))+I[7]+1735328473&4294967295,x=P+(S<<14&4294967295|S>>>18),S=v+(P^g&(x^P))+I[12]+2368359562&4294967295,v=x+(S<<20&4294967295|S>>>12),S=g+(v^x^P)+I[5]+4294588738&4294967295,g=v+(S<<4&4294967295|S>>>28),S=P+(g^v^x)+I[8]+2272392833&4294967295,P=g+(S<<11&4294967295|S>>>21),S=x+(P^g^v)+I[11]+1839030562&4294967295,x=P+(S<<16&4294967295|S>>>16),S=v+(x^P^g)+I[14]+4259657740&4294967295,v=x+(S<<23&4294967295|S>>>9),S=g+(v^x^P)+I[1]+2763975236&4294967295,g=v+(S<<4&4294967295|S>>>28),S=P+(g^v^x)+I[4]+1272893353&4294967295,P=g+(S<<11&4294967295|S>>>21),S=x+(P^g^v)+I[7]+4139469664&4294967295,x=P+(S<<16&4294967295|S>>>16),S=v+(x^P^g)+I[10]+3200236656&4294967295,v=x+(S<<23&4294967295|S>>>9),S=g+(v^x^P)+I[13]+681279174&4294967295,g=v+(S<<4&4294967295|S>>>28),S=P+(g^v^x)+I[0]+3936430074&4294967295,P=g+(S<<11&4294967295|S>>>21),S=x+(P^g^v)+I[3]+3572445317&4294967295,x=P+(S<<16&4294967295|S>>>16),S=v+(x^P^g)+I[6]+76029189&4294967295,v=x+(S<<23&4294967295|S>>>9),S=g+(v^x^P)+I[9]+3654602809&4294967295,g=v+(S<<4&4294967295|S>>>28),S=P+(g^v^x)+I[12]+3873151461&4294967295,P=g+(S<<11&4294967295|S>>>21),S=x+(P^g^v)+I[15]+530742520&4294967295,x=P+(S<<16&4294967295|S>>>16),S=v+(x^P^g)+I[2]+3299628645&4294967295,v=x+(S<<23&4294967295|S>>>9),S=g+(x^(v|~P))+I[0]+4096336452&4294967295,g=v+(S<<6&4294967295|S>>>26),S=P+(v^(g|~x))+I[7]+1126891415&4294967295,P=g+(S<<10&4294967295|S>>>22),S=x+(g^(P|~v))+I[14]+2878612391&4294967295,x=P+(S<<15&4294967295|S>>>17),S=v+(P^(x|~g))+I[5]+4237533241&4294967295,v=x+(S<<21&4294967295|S>>>11),S=g+(x^(v|~P))+I[12]+1700485571&4294967295,g=v+(S<<6&4294967295|S>>>26),S=P+(v^(g|~x))+I[3]+2399980690&4294967295,P=g+(S<<10&4294967295|S>>>22),S=x+(g^(P|~v))+I[10]+4293915773&4294967295,x=P+(S<<15&4294967295|S>>>17),S=v+(P^(x|~g))+I[1]+2240044497&4294967295,v=x+(S<<21&4294967295|S>>>11),S=g+(x^(v|~P))+I[8]+1873313359&4294967295,g=v+(S<<6&4294967295|S>>>26),S=P+(v^(g|~x))+I[15]+4264355552&4294967295,P=g+(S<<10&4294967295|S>>>22),S=x+(g^(P|~v))+I[6]+2734768916&4294967295,x=P+(S<<15&4294967295|S>>>17),S=v+(P^(x|~g))+I[13]+1309151649&4294967295,v=x+(S<<21&4294967295|S>>>11),S=g+(x^(v|~P))+I[4]+4149444226&4294967295,g=v+(S<<6&4294967295|S>>>26),S=P+(v^(g|~x))+I[11]+3174756917&4294967295,P=g+(S<<10&4294967295|S>>>22),S=x+(g^(P|~v))+I[2]+718787259&4294967295,x=P+(S<<15&4294967295|S>>>17),S=v+(P^(x|~g))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+g&4294967295,E.g[1]=E.g[1]+(x+(S<<21&4294967295|S>>>11))&4294967295,E.g[2]=E.g[2]+x&4294967295,E.g[3]=E.g[3]+P&4294967295}r.prototype.u=function(E,g){g===void 0&&(g=E.length);for(var v=g-this.blockSize,I=this.B,x=this.h,P=0;P<g;){if(x==0)for(;P<=v;)s(this,E,P),P+=this.blockSize;if(typeof E=="string"){for(;P<g;)if(I[x++]=E.charCodeAt(P++),x==this.blockSize){s(this,I),x=0;break}}else for(;P<g;)if(I[x++]=E[P++],x==this.blockSize){s(this,I),x=0;break}}this.h=x,this.o+=g},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var g=1;g<E.length-8;++g)E[g]=0;var v=8*this.o;for(g=E.length-8;g<E.length;++g)E[g]=v&255,v/=256;for(this.u(E),E=Array(16),g=v=0;4>g;++g)for(var I=0;32>I;I+=8)E[v++]=this.g[g]>>>I&255;return E};function i(E,g){var v=l;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=g(E)}function o(E,g){this.h=g;for(var v=[],I=!0,x=E.length-1;0<=x;x--){var P=E[x]|0;I&&P==g||(v[x]=P,I=!1)}this.g=v}var l={};function u(E){return-128<=E&&128>E?i(E,function(g){return new o([g|0],0>g?-1:0)}):new o([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return C(d(-E));for(var g=[],v=1,I=0;E>=v;I++)g[I]=E/v|0,v*=4294967296;return new o(g,0)}function h(E,g){if(E.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(E.charAt(0)=="-")return C(h(E.substring(1),g));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=d(Math.pow(g,8)),I=p,x=0;x<E.length;x+=8){var P=Math.min(8,E.length-x),S=parseInt(E.substring(x,x+P),g);8>P?(P=d(Math.pow(g,P)),I=I.j(P).add(d(S))):(I=I.j(v),I=I.add(d(S)))}return I}var p=u(0),y=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-C(this).m();for(var E=0,g=1,v=0;v<this.g.length;v++){var I=this.i(v);E+=(0<=I?I:4294967296+I)*g,g*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(R(this))return"0";if(k(this))return"-"+C(this).toString(E);for(var g=d(Math.pow(E,6)),v=this,I="";;){var x=j(v,g).g;v=T(v,x.j(g));var P=((0<v.g.length?v.g[0]:v.h)>>>0).toString(E);if(v=x,R(v))return P+I;for(;6>P.length;)P="0"+P;I=P+I}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function R(E){if(E.h!=0)return!1;for(var g=0;g<E.g.length;g++)if(E.g[g]!=0)return!1;return!0}function k(E){return E.h==-1}t.l=function(E){return E=T(this,E),k(E)?-1:R(E)?0:1};function C(E){for(var g=E.g.length,v=[],I=0;I<g;I++)v[I]=~E.g[I];return new o(v,~E.h).add(y)}t.abs=function(){return k(this)?C(this):this},t.add=function(E){for(var g=Math.max(this.g.length,E.g.length),v=[],I=0,x=0;x<=g;x++){var P=I+(this.i(x)&65535)+(E.i(x)&65535),S=(P>>>16)+(this.i(x)>>>16)+(E.i(x)>>>16);I=S>>>16,P&=65535,S&=65535,v[x]=S<<16|P}return new o(v,v[v.length-1]&-2147483648?-1:0)};function T(E,g){return E.add(C(g))}t.j=function(E){if(R(this)||R(E))return p;if(k(this))return k(E)?C(this).j(C(E)):C(C(this).j(E));if(k(E))return C(this.j(C(E)));if(0>this.l(w)&&0>E.l(w))return d(this.m()*E.m());for(var g=this.g.length+E.g.length,v=[],I=0;I<2*g;I++)v[I]=0;for(I=0;I<this.g.length;I++)for(var x=0;x<E.g.length;x++){var P=this.i(I)>>>16,S=this.i(I)&65535,z=E.i(x)>>>16,G=E.i(x)&65535;v[2*I+2*x]+=S*G,_(v,2*I+2*x),v[2*I+2*x+1]+=P*G,_(v,2*I+2*x+1),v[2*I+2*x+1]+=S*z,_(v,2*I+2*x+1),v[2*I+2*x+2]+=P*z,_(v,2*I+2*x+2)}for(I=0;I<g;I++)v[I]=v[2*I+1]<<16|v[2*I];for(I=g;I<2*g;I++)v[I]=0;return new o(v,0)};function _(E,g){for(;(E[g]&65535)!=E[g];)E[g+1]+=E[g]>>>16,E[g]&=65535,g++}function N(E,g){this.g=E,this.h=g}function j(E,g){if(R(g))throw Error("division by zero");if(R(E))return new N(p,p);if(k(E))return g=j(C(E),g),new N(C(g.g),C(g.h));if(k(g))return g=j(E,C(g)),new N(C(g.g),g.h);if(30<E.g.length){if(k(E)||k(g))throw Error("slowDivide_ only works with positive integers.");for(var v=y,I=g;0>=I.l(E);)v=D(v),I=D(I);var x=U(v,1),P=U(I,1);for(I=U(I,2),v=U(v,2);!R(I);){var S=P.add(I);0>=S.l(E)&&(x=x.add(v),P=S),I=U(I,1),v=U(v,1)}return g=T(E,x.j(g)),new N(x,g)}for(x=p;0<=E.l(g);){for(v=Math.max(1,Math.floor(E.m()/g.m())),I=Math.ceil(Math.log(v)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),P=d(v),S=P.j(g);k(S)||0<S.l(E);)v-=I,P=d(v),S=P.j(g);R(P)&&(P=y),x=x.add(P),E=T(E,S)}return new N(x,E)}t.A=function(E){return j(this,E).h},t.and=function(E){for(var g=Math.max(this.g.length,E.g.length),v=[],I=0;I<g;I++)v[I]=this.i(I)&E.i(I);return new o(v,this.h&E.h)},t.or=function(E){for(var g=Math.max(this.g.length,E.g.length),v=[],I=0;I<g;I++)v[I]=this.i(I)|E.i(I);return new o(v,this.h|E.h)},t.xor=function(E){for(var g=Math.max(this.g.length,E.g.length),v=[],I=0;I<g;I++)v[I]=this.i(I)^E.i(I);return new o(v,this.h^E.h)};function D(E){for(var g=E.g.length+1,v=[],I=0;I<g;I++)v[I]=E.i(I)<<1|E.i(I-1)>>>31;return new o(v,E.h)}function U(E,g){var v=g>>5;g%=32;for(var I=E.g.length-v,x=[],P=0;P<I;P++)x[P]=0<g?E.i(P+v)>>>g|E.i(P+v+1)<<32-g:E.i(P+v);return new o(x,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Jw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,kr=o}).apply(typeof vy<"u"?vy:typeof self<"u"?self:typeof window<"u"?window:{});var xl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zw,vo,eE,Gl,Zh,tE,nE,rE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,m){return c==Array.prototype||c==Object.prototype||(c[f]=m.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof xl=="object"&&xl];for(var f=0;f<c.length;++f){var m=c[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(c,f){if(f)e:{var m=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var O=c[b];if(!(O in m))break e;m=m[O]}c=c[c.length-1],b=m[c],f=f(b),f!=b&&f!=null&&e(m,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var m=0,b=!1,O={next:function(){if(!b&&m<c.length){var L=m++;return{value:f(L,c[L]),done:!1}}return b=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(c){return c||function(){return i(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function d(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,m){return c.call.apply(c.bind,arguments)}function p(c,f,m){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,b),c.apply(f,O)}}return function(){return c.apply(f,arguments)}}function y(c,f,m){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function w(c,f){var m=Array.prototype.slice.call(arguments,1);return function(){var b=m.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function R(c,f){function m(){}m.prototype=f.prototype,c.aa=f.prototype,c.prototype=new m,c.prototype.constructor=c,c.Qb=function(b,O,L){for(var W=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)W[_e-2]=arguments[_e];return f.prototype[O].apply(b,W)}}function k(c){const f=c.length;if(0<f){const m=Array(f);for(let b=0;b<f;b++)m[b]=c[b];return m}return[]}function C(c,f){for(let m=1;m<arguments.length;m++){const b=arguments[m];if(u(b)){const O=c.length||0,L=b.length||0;c.length=O+L;for(let W=0;W<L;W++)c[O+W]=b[W]}else c.push(b)}}class T{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function _(c){return/^[\s\xa0]*$/.test(c)}function N(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function j(c){return j[" "](c),c}j[" "]=function(){};var D=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function U(c,f,m){for(const b in c)f.call(m,c[b],b,c)}function E(c,f){for(const m in c)f.call(void 0,c[m],m,c)}function g(c){const f={};for(const m in c)f[m]=c[m];return f}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,f){let m,b;for(let O=1;O<arguments.length;O++){b=arguments[O];for(m in b)c[m]=b[m];for(let L=0;L<v.length;L++)m=v[L],Object.prototype.hasOwnProperty.call(b,m)&&(c[m]=b[m])}}function x(c){var f=1;c=c.split(":");const m=[];for(;0<f&&c.length;)m.push(c.shift()),f--;return c.length&&m.push(c.join(":")),m}function P(c){l.setTimeout(()=>{throw c},0)}function S(){var c=B;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class z{constructor(){this.h=this.g=null}add(f,m){const b=G.get();b.set(f,m),this.h?this.h.next=b:this.g=b,this.h=b}}var G=new T(()=>new ee,c=>c.reset());class ee{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,M=!1,B=new z,F=()=>{const c=l.Promise.resolve(void 0);ye=()=>{c.then(J)}};var J=()=>{for(var c;c=S();){try{c.h.call(c.g)}catch(m){P(m)}var f=G;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}M=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const m=()=>{};l.addEventListener("test",m,f),l.removeEventListener("test",m,f)}catch{}return c}();function $e(c,f){if(H.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var m=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(D){e:{try{j(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else m=="mouseover"?f=c.fromElement:m=="mouseout"&&(f=c.toElement);this.relatedTarget=f,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Q[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&$e.aa.h.call(this)}}R($e,H);var Q={2:"touch",3:"pen",4:"mouse"};$e.prototype.h=function(){$e.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var yt="closure_listenable_"+(1e6*Math.random()|0),Mt=0;function Ae(c,f,m,b,O){this.listener=c,this.proxy=null,this.src=f,this.type=m,this.capture=!!b,this.ha=O,this.key=++Mt,this.da=this.fa=!1}function Kt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function St(c){this.src=c,this.g={},this.h=0}St.prototype.add=function(c,f,m,b,O){var L=c.toString();c=this.g[L],c||(c=this.g[L]=[],this.h++);var W=rr(c,f,b,O);return-1<W?(f=c[W],m||(f.fa=!1)):(f=new Ae(f,this.src,L,!!b,O),f.fa=m,c.push(f)),f};function Xr(c,f){var m=f.type;if(m in c.g){var b=c.g[m],O=Array.prototype.indexOf.call(b,f,void 0),L;(L=0<=O)&&Array.prototype.splice.call(b,O,1),L&&(Kt(f),c.g[m].length==0&&(delete c.g[m],c.h--))}}function rr(c,f,m,b){for(var O=0;O<c.length;++O){var L=c[O];if(!L.da&&L.listener==f&&L.capture==!!m&&L.ha==b)return O}return-1}var Jr="closure_lm_"+(1e6*Math.random()|0),Pu={};function Sp(c,f,m,b,O){if(Array.isArray(f)){for(var L=0;L<f.length;L++)Sp(c,f[L],m,b,O);return null}return m=Cp(m),c&&c[yt]?c.K(f,m,d(b)?!!b.capture:!1,O):c1(c,f,m,!1,b,O)}function c1(c,f,m,b,O,L){if(!f)throw Error("Invalid event type");var W=d(O)?!!O.capture:!!O,_e=Ou(c);if(_e||(c[Jr]=_e=new St(c)),m=_e.add(f,m,b,W,L),m.proxy)return m;if(b=u1(),m.proxy=b,b.src=c,b.listener=m,c.addEventListener)Ve||(O=W),O===void 0&&(O=!1),c.addEventListener(f.toString(),b,O);else if(c.attachEvent)c.attachEvent(Ap(f.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return m}function u1(){function c(m){return f.call(c.src,c.listener,m)}const f=d1;return c}function Rp(c,f,m,b,O){if(Array.isArray(f))for(var L=0;L<f.length;L++)Rp(c,f[L],m,b,O);else b=d(b)?!!b.capture:!!b,m=Cp(m),c&&c[yt]?(c=c.i,f=String(f).toString(),f in c.g&&(L=c.g[f],m=rr(L,m,b,O),-1<m&&(Kt(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete c.g[f],c.h--)))):c&&(c=Ou(c))&&(f=c.g[f.toString()],c=-1,f&&(c=rr(f,m,b,O)),(m=-1<c?f[c]:null)&&ju(m))}function ju(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[yt])Xr(f.i,c);else{var m=c.type,b=c.proxy;f.removeEventListener?f.removeEventListener(m,b,c.capture):f.detachEvent?f.detachEvent(Ap(m),b):f.addListener&&f.removeListener&&f.removeListener(b),(m=Ou(f))?(Xr(m,c),m.h==0&&(m.src=null,f[Jr]=null)):Kt(c)}}}function Ap(c){return c in Pu?Pu[c]:Pu[c]="on"+c}function d1(c,f){if(c.da)c=!0;else{f=new $e(f,this);var m=c.listener,b=c.ha||c.src;c.fa&&ju(c),c=m.call(b,f)}return c}function Ou(c){return c=c[Jr],c instanceof St?c:null}var Du="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cp(c){return typeof c=="function"?c:(c[Du]||(c[Du]=function(f){return c.handleEvent(f)}),c[Du])}function ot(){ne.call(this),this.i=new St(this),this.M=this,this.F=null}R(ot,ne),ot.prototype[yt]=!0,ot.prototype.removeEventListener=function(c,f,m,b){Rp(this,c,f,m,b)};function vt(c,f){var m,b=c.F;if(b)for(m=[];b;b=b.F)m.push(b);if(c=c.M,b=f.type||f,typeof f=="string")f=new H(f,c);else if(f instanceof H)f.target=f.target||c;else{var O=f;f=new H(b,c),I(f,O)}if(O=!0,m)for(var L=m.length-1;0<=L;L--){var W=f.g=m[L];O=Ma(W,b,!0,f)&&O}if(W=f.g=c,O=Ma(W,b,!0,f)&&O,O=Ma(W,b,!1,f)&&O,m)for(L=0;L<m.length;L++)W=f.g=m[L],O=Ma(W,b,!1,f)&&O}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var m=c.g[f],b=0;b<m.length;b++)Kt(m[b]);delete c.g[f],c.h--}}this.F=null},ot.prototype.K=function(c,f,m,b){return this.i.add(String(c),f,!1,m,b)},ot.prototype.L=function(c,f,m,b){return this.i.add(String(c),f,!0,m,b)};function Ma(c,f,m,b){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,L=0;L<f.length;++L){var W=f[L];if(W&&!W.da&&W.capture==m){var _e=W.listener,Ze=W.ha||W.src;W.fa&&Xr(c.i,W),O=_e.call(Ze,b)!==!1&&O}}return O&&!b.defaultPrevented}function kp(c,f,m){if(typeof c=="function")m&&(c=y(c,m));else if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(c,f||0)}function Pp(c){c.g=kp(()=>{c.g=null,c.i&&(c.i=!1,Pp(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class h1 extends ne{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Pp(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(c){ne.call(this),this.h=c,this.g={}}R(Fi,ne);var jp=[];function Op(c){U(c.g,function(f,m){this.g.hasOwnProperty(m)&&ju(f)},c),c.g={}}Fi.prototype.N=function(){Fi.aa.N.call(this),Op(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lu=l.JSON.stringify,f1=l.JSON.parse,m1=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function Mu(){}Mu.prototype.h=null;function Dp(c){return c.h||(c.h=c.i())}function Lp(){}var zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vu(){H.call(this,"d")}R(Vu,H);function $u(){H.call(this,"c")}R($u,H);var Zr={},Mp=null;function Va(){return Mp=Mp||new ot}Zr.La="serverreachability";function Vp(c){H.call(this,Zr.La,c)}R(Vp,H);function Bi(c){const f=Va();vt(f,new Vp(f))}Zr.STAT_EVENT="statevent";function $p(c,f){H.call(this,Zr.STAT_EVENT,c),this.stat=f}R($p,H);function xt(c){const f=Va();vt(f,new $p(f,c))}Zr.Ma="timingevent";function Up(c,f){H.call(this,Zr.Ma,c),this.size=f}R(Up,H);function qi(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},f)}function Hi(){this.g=!0}Hi.prototype.xa=function(){this.g=!1};function p1(c,f,m,b,O,L){c.info(function(){if(c.g)if(L)for(var W="",_e=L.split("&"),Ze=0;Ze<_e.length;Ze++){var pe=_e[Ze].split("=");if(1<pe.length){var at=pe[0];pe=pe[1];var lt=at.split("_");W=2<=lt.length&&lt[1]=="type"?W+(at+"="+pe+"&"):W+(at+"=redacted&")}}else W=null;else W=L;return"XMLHTTP REQ ("+b+") [attempt "+O+"]: "+f+`
`+m+`
`+W})}function g1(c,f,m,b,O,L,W){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+O+"]: "+f+`
`+m+`
`+L+" "+W})}function js(c,f,m,b){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+v1(c,m)+(b?" "+b:"")})}function y1(c,f){c.info(function(){return"TIMEOUT: "+f})}Hi.prototype.info=function(){};function v1(c,f){if(!c.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(c=0;c<m.length;c++)if(Array.isArray(m[c])){var b=m[c];if(!(2>b.length)){var O=b[1];if(Array.isArray(O)&&!(1>O.length)){var L=O[0];if(L!="noop"&&L!="stop"&&L!="close")for(var W=1;W<O.length;W++)O[W]=""}}}}return Lu(m)}catch{return f}}var $a={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Uu;function Ua(){}R(Ua,Mu),Ua.prototype.g=function(){return new XMLHttpRequest},Ua.prototype.i=function(){return{}},Uu=new Ua;function sr(c,f,m,b){this.j=c,this.i=f,this.l=m,this.R=b||1,this.U=new Fi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zp}function zp(){this.i=null,this.g="",this.h=!1}var Bp={},Fu={};function zu(c,f,m){c.L=1,c.v=qa(jn(f)),c.m=m,c.P=!0,qp(c,null)}function qp(c,f){c.F=Date.now(),Fa(c),c.A=jn(c.v);var m=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),sg(m.i,"t",b),c.C=0,m=c.j.J,c.h=new zp,c.g=Eg(c.j,m?f:null,!c.m),0<c.O&&(c.M=new h1(y(c.Y,c,c.g),c.O)),f=c.U,m=c.g,b=c.ca;var O="readystatechange";Array.isArray(O)||(O&&(jp[0]=O.toString()),O=jp);for(var L=0;L<O.length;L++){var W=Sp(m,O[L],b||f.handleEvent,!1,f.h||f);if(!W)break;f.g[W.key]=W}f=c.H?g(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),Bi(),p1(c.i,c.u,c.A,c.l,c.R,c.m)}sr.prototype.ca=function(c){c=c.target;const f=this.M;f&&On(c)==3?f.j():this.Y(c)},sr.prototype.Y=function(c){try{if(c==this.g)e:{const lt=On(this.g);var f=this.g.Ba();const Ls=this.g.Z();if(!(3>lt)&&(lt!=3||this.g&&(this.h.h||this.g.oa()||dg(this.g)))){this.J||lt!=4||f==7||(f==8||0>=Ls?Bi(3):Bi(2)),Bu(this);var m=this.g.Z();this.X=m;t:if(Hp(this)){var b=dg(this.g);c="";var O=b.length,L=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){es(this),Wi(this);var W="";break t}this.h.i=new l.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,c+=this.h.i.decode(b[f],{stream:!(L&&f==O-1)});b.length=0,this.h.g+=c,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=m==200,g1(this.i,this.u,this.A,this.l,this.R,lt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var _e,Ze=this.g;if((_e=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(_e)){var pe=_e;break t}}pe=null}if(m=pe)js(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qu(this,m);else{this.o=!1,this.s=3,xt(12),es(this),Wi(this);break e}}if(this.P){m=!0;let rn;for(;!this.J&&this.C<W.length;)if(rn=x1(this,W),rn==Fu){lt==4&&(this.s=4,xt(14),m=!1),js(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==Bp){this.s=4,xt(15),js(this.i,this.l,W,"[Invalid Chunk]"),m=!1;break}else js(this.i,this.l,rn,null),qu(this,rn);if(Hp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||W.length!=0||this.h.h||(this.s=1,xt(16),m=!1),this.o=this.o&&m,!m)js(this.i,this.l,W,"[Invalid Chunked Response]"),es(this),Wi(this);else if(0<W.length&&!this.W){this.W=!0;var at=this.j;at.g==this&&at.ba&&!at.M&&(at.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Yu(at),at.M=!0,xt(11))}}else js(this.i,this.l,W,null),qu(this,W);lt==4&&es(this),this.o&&!this.J&&(lt==4?vg(this.j,this):(this.o=!1,Fa(this)))}else L1(this.g),m==400&&0<W.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),es(this),Wi(this)}}}catch{}finally{}};function Hp(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function x1(c,f){var m=c.C,b=f.indexOf(`
`,m);return b==-1?Fu:(m=Number(f.substring(m,b)),isNaN(m)?Bp:(b+=1,b+m>f.length?Fu:(f=f.slice(b,b+m),c.C=b+m,f)))}sr.prototype.cancel=function(){this.J=!0,es(this)};function Fa(c){c.S=Date.now()+c.I,Wp(c,c.I)}function Wp(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=qi(y(c.ba,c),f)}function Bu(c){c.B&&(l.clearTimeout(c.B),c.B=null)}sr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(y1(this.i,this.A),this.L!=2&&(Bi(),xt(17)),es(this),this.s=2,Wi(this)):Wp(this,this.S-c)};function Wi(c){c.j.G==0||c.J||vg(c.j,c)}function es(c){Bu(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,Op(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function qu(c,f){try{var m=c.j;if(m.G!=0&&(m.g==c||Hu(m.h,c))){if(!c.K&&Hu(m.h,c)&&m.G==3){try{var b=m.Da.g.parse(f)}catch{b=null}if(Array.isArray(b)&&b.length==3){var O=b;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<c.F)Ya(m),Qa(m);else break e;Ku(m),xt(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=qi(y(m.Za,m),6e3));if(1>=Kp(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ns(m,11)}else if((c.K||m.g==c)&&Ya(m),!_(f))for(O=m.Da.g.parse(f),f=0;f<O.length;f++){let pe=O[f];if(m.T=pe[0],pe=pe[1],m.G==2)if(pe[0]=="c"){m.K=pe[1],m.ia=pe[2];const at=pe[3];at!=null&&(m.la=at,m.j.info("VER="+m.la));const lt=pe[4];lt!=null&&(m.Aa=lt,m.j.info("SVER="+m.Aa));const Ls=pe[5];Ls!=null&&typeof Ls=="number"&&0<Ls&&(b=1.5*Ls,m.L=b,m.j.info("backChannelRequestTimeoutMs_="+b)),b=m;const rn=c.g;if(rn){const Ja=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ja){var L=b.h;L.g||Ja.indexOf("spdy")==-1&&Ja.indexOf("quic")==-1&&Ja.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Wu(L,L.h),L.h=null))}if(b.D){const Xu=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Xu&&(b.ya=Xu,Ee(b.I,b.D,Xu))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-c.F,m.j.info("Handshake RTT: "+m.R+"ms")),b=m;var W=c;if(b.qa=wg(b,b.J?b.ia:null,b.W),W.K){Yp(b.h,W);var _e=W,Ze=b.L;Ze&&(_e.I=Ze),_e.B&&(Bu(_e),Fa(_e)),b.g=W}else gg(b);0<m.i.length&&Ka(m)}else pe[0]!="stop"&&pe[0]!="close"||ns(m,7);else m.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?ns(m,7):Qu(m):pe[0]!="noop"&&m.l&&m.l.ta(pe),m.v=0)}}Bi(4)}catch{}}var _1=class{constructor(c,f){this.g=c,this.map=f}};function Gp(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qp(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Kp(c){return c.h?1:c.g?c.g.size:0}function Hu(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function Wu(c,f){c.g?c.g.add(f):c.h=f}function Yp(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Gp.prototype.cancel=function(){if(this.i=Xp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Xp(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const m of c.g.values())f=f.concat(m.D);return f}return k(c.i)}function w1(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var f=[],m=c.length,b=0;b<m;b++)f.push(c[b]);return f}f=[],m=0;for(b in c)f[m++]=c[b];return f}function E1(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var f=[];c=c.length;for(var m=0;m<c;m++)f.push(m);return f}f=[],m=0;for(const b in c)f[m++]=b;return f}}}function Jp(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var m=E1(c),b=w1(c),O=b.length,L=0;L<O;L++)f.call(void 0,b[L],m&&m[L],c)}var Zp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function b1(c,f){if(c){c=c.split("&");for(var m=0;m<c.length;m++){var b=c[m].indexOf("="),O=null;if(0<=b){var L=c[m].substring(0,b);O=c[m].substring(b+1)}else L=c[m];f(L,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ts(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ts){this.h=c.h,za(this,c.j),this.o=c.o,this.g=c.g,Ba(this,c.s),this.l=c.l;var f=c.i,m=new Ki;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),eg(this,m),this.m=c.m}else c&&(f=String(c).match(Zp))?(this.h=!1,za(this,f[1]||"",!0),this.o=Gi(f[2]||""),this.g=Gi(f[3]||"",!0),Ba(this,f[4]),this.l=Gi(f[5]||"",!0),eg(this,f[6]||"",!0),this.m=Gi(f[7]||"")):(this.h=!1,this.i=new Ki(null,this.h))}ts.prototype.toString=function(){var c=[],f=this.j;f&&c.push(Qi(f,tg,!0),":");var m=this.g;return(m||f=="file")&&(c.push("//"),(f=this.o)&&c.push(Qi(f,tg,!0),"@"),c.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&c.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(Qi(m,m.charAt(0)=="/"?N1:I1,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",Qi(m,R1)),c.join("")};function jn(c){return new ts(c)}function za(c,f,m){c.j=m?Gi(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Ba(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function eg(c,f,m){f instanceof Ki?(c.i=f,A1(c.i,c.h)):(m||(f=Qi(f,S1)),c.i=new Ki(f,c.h))}function Ee(c,f,m){c.i.set(f,m)}function qa(c){return Ee(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Gi(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Qi(c,f,m){return typeof c=="string"?(c=encodeURI(c).replace(f,T1),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function T1(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var tg=/[#\/\?@]/g,I1=/[#\?:]/g,N1=/[#\?]/g,S1=/[#\?@]/g,R1=/#/g;function Ki(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function ir(c){c.g||(c.g=new Map,c.h=0,c.i&&b1(c.i,function(f,m){c.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=Ki.prototype,t.add=function(c,f){ir(this),this.i=null,c=Os(this,c);var m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(f),this.h+=1,this};function ng(c,f){ir(c),f=Os(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function rg(c,f){return ir(c),f=Os(c,f),c.g.has(f)}t.forEach=function(c,f){ir(this),this.g.forEach(function(m,b){m.forEach(function(O){c.call(f,O,b,this)},this)},this)},t.na=function(){ir(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let b=0;b<f.length;b++){const O=c[b];for(let L=0;L<O.length;L++)m.push(f[b])}return m},t.V=function(c){ir(this);let f=[];if(typeof c=="string")rg(this,c)&&(f=f.concat(this.g.get(Os(this,c))));else{c=Array.from(this.g.values());for(let m=0;m<c.length;m++)f=f.concat(c[m])}return f},t.set=function(c,f){return ir(this),this.i=null,c=Os(this,c),rg(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function sg(c,f,m){ng(c,f),0<m.length&&(c.i=null,c.g.set(Os(c,f),k(m)),c.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var b=f[m];const L=encodeURIComponent(String(b)),W=this.V(b);for(b=0;b<W.length;b++){var O=L;W[b]!==""&&(O+="="+encodeURIComponent(String(W[b]))),c.push(O)}}return this.i=c.join("&")};function Os(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function A1(c,f){f&&!c.j&&(ir(c),c.i=null,c.g.forEach(function(m,b){var O=b.toLowerCase();b!=O&&(ng(this,b),sg(this,O,m))},c)),c.j=f}function C1(c,f){const m=new Hi;if(l.Image){const b=new Image;b.onload=w(or,m,"TestLoadImage: loaded",!0,f,b),b.onerror=w(or,m,"TestLoadImage: error",!1,f,b),b.onabort=w(or,m,"TestLoadImage: abort",!1,f,b),b.ontimeout=w(or,m,"TestLoadImage: timeout",!1,f,b),l.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else f(!1)}function k1(c,f){const m=new Hi,b=new AbortController,O=setTimeout(()=>{b.abort(),or(m,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:b.signal}).then(L=>{clearTimeout(O),L.ok?or(m,"TestPingServer: ok",!0,f):or(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),or(m,"TestPingServer: error",!1,f)})}function or(c,f,m,b,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),b(m)}catch{}}function P1(){this.g=new m1}function j1(c,f,m){const b=m||"";try{Jp(c,function(O,L){let W=O;d(O)&&(W=Lu(O)),f.push(b+L+"="+encodeURIComponent(W))})}catch(O){throw f.push(b+"type="+encodeURIComponent("_badmap")),O}}function Ha(c){this.l=c.Ub||null,this.j=c.eb||!1}R(Ha,Mu),Ha.prototype.g=function(){return new Wa(this.l,this.j)},Ha.prototype.i=function(c){return function(){return c}}({});function Wa(c,f){ot.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Wa,ot),t=Wa.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,Xi(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yi(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Xi(this)),this.g&&(this.readyState=3,Xi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ig(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function ig(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?Yi(this):Xi(this),this.readyState==3&&ig(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Yi(this))},t.Qa=function(c){this.g&&(this.response=c,Yi(this))},t.ga=function(){this.g&&Yi(this)};function Yi(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Xi(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=f.next();return c.join(`\r
`)};function Xi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Wa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function og(c){let f="";return U(c,function(m,b){f+=b,f+=":",f+=m,f+=`\r
`}),f}function Gu(c,f,m){e:{for(b in m){var b=!1;break e}b=!0}b||(m=og(m),typeof c=="string"?m!=null&&encodeURIComponent(String(m)):Ee(c,f,m))}function Oe(c){ot.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Oe,ot);var O1=/^https?$/i,D1=["POST","PUT"];t=Oe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,m,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Uu.g(),this.v=this.o?Dp(this.o):Dp(Uu),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(L){ag(this,L);return}if(c=m||"",m=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var O in b)m.set(O,b[O]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const L of b.keys())m.set(L,b.get(L));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),O=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(D1,f,void 0))||b||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,W]of m)this.g.setRequestHeader(L,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ug(this),this.u=!0,this.g.send(c),this.u=!1}catch(L){ag(this,L)}};function ag(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,lg(c),Ga(c)}function lg(c){c.A||(c.A=!0,vt(c,"complete"),vt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,vt(this,"complete"),vt(this,"abort"),Ga(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ga(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?cg(this):this.bb())},t.bb=function(){cg(this)};function cg(c){if(c.h&&typeof o<"u"&&(!c.v[1]||On(c)!=4||c.Z()!=2)){if(c.u&&On(c)==4)kp(c.Ea,0,c);else if(vt(c,"readystatechange"),On(c)==4){c.h=!1;try{const W=c.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var b;if(b=W===0){var O=String(c.D).match(Zp)[1]||null;!O&&l.self&&l.self.location&&(O=l.self.location.protocol.slice(0,-1)),b=!O1.test(O?O.toLowerCase():"")}m=b}if(m)vt(c,"complete"),vt(c,"success");else{c.m=6;try{var L=2<On(c)?c.g.statusText:""}catch{L=""}c.l=L+" ["+c.Z()+"]",lg(c)}}finally{Ga(c)}}}}function Ga(c,f){if(c.g){ug(c);const m=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||vt(c,"ready");try{m.onreadystatechange=b}catch{}}}function ug(c){c.I&&(l.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function On(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),f1(f)}};function dg(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function L1(c){const f={};c=(c.g&&2<=On(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(_(c[b]))continue;var m=x(c[b]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const L=f[O]||[];f[O]=L,L.push(m)}E(f,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ji(c,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||f}function hg(c){this.Aa=0,this.i=[],this.j=new Hi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ji("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ji("baseRetryDelayMs",5e3,c),this.cb=Ji("retryDelaySeedMs",1e4,c),this.Wa=Ji("forwardChannelMaxRetries",2,c),this.wa=Ji("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Gp(c&&c.concurrentRequestLimit),this.Da=new P1,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=hg.prototype,t.la=8,t.G=1,t.connect=function(c,f,m,b){xt(0),this.W=c,this.H=f||{},m&&b!==void 0&&(this.H.OSID=m,this.H.OAID=b),this.F=this.X,this.I=wg(this,null,this.W),Ka(this)};function Qu(c){if(fg(c),c.G==3){var f=c.U++,m=jn(c.I);if(Ee(m,"SID",c.K),Ee(m,"RID",f),Ee(m,"TYPE","terminate"),Zi(c,m),f=new sr(c,c.j,f),f.L=2,f.v=qa(jn(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=f.v,m=!0),m||(f.g=Eg(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Fa(f)}_g(c)}function Qa(c){c.g&&(Yu(c),c.g.cancel(),c.g=null)}function fg(c){Qa(c),c.u&&(l.clearTimeout(c.u),c.u=null),Ya(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function Ka(c){if(!Qp(c.h)&&!c.s){c.s=!0;var f=c.Ga;ye||F(),M||(ye(),M=!0),B.add(f,c),c.B=0}}function M1(c,f){return Kp(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=qi(y(c.Ga,c,f),xg(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const O=new sr(this,this.j,c);let L=this.o;if(this.S&&(L?(L=g(L),I(L,this.S)):L=this.S),this.m!==null||this.O||(O.H=L,L=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var b=this.i[m];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(f+=b,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=pg(this,O,f),m=jn(this.I),Ee(m,"RID",c),Ee(m,"CVER",22),this.D&&Ee(m,"X-HTTP-Session-Id",this.D),Zi(this,m),L&&(this.O?f="headers="+encodeURIComponent(String(og(L)))+"&"+f:this.m&&Gu(m,this.m,L)),Wu(this.h,O),this.Ua&&Ee(m,"TYPE","init"),this.P?(Ee(m,"$req",f),Ee(m,"SID","null"),O.T=!0,zu(O,m,null)):zu(O,m,f),this.G=2}}else this.G==3&&(c?mg(this,c):this.i.length==0||Qp(this.h)||mg(this))};function mg(c,f){var m;f?m=f.l:m=c.U++;const b=jn(c.I);Ee(b,"SID",c.K),Ee(b,"RID",m),Ee(b,"AID",c.T),Zi(c,b),c.m&&c.o&&Gu(b,c.m,c.o),m=new sr(c,c.j,m,c.B+1),c.m===null&&(m.H=c.o),f&&(c.i=f.D.concat(c.i)),f=pg(c,m,1e3),m.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Wu(c.h,m),zu(m,b,f)}function Zi(c,f){c.H&&U(c.H,function(m,b){Ee(f,b,m)}),c.l&&Jp({},function(m,b){Ee(f,b,m)})}function pg(c,f,m){m=Math.min(c.i.length,m);var b=c.l?y(c.l.Na,c.l,c):null;e:{var O=c.i;let L=-1;for(;;){const W=["count="+m];L==-1?0<m?(L=O[0].g,W.push("ofs="+L)):L=0:W.push("ofs="+L);let _e=!0;for(let Ze=0;Ze<m;Ze++){let pe=O[Ze].g;const at=O[Ze].map;if(pe-=L,0>pe)L=Math.max(0,O[Ze].g-100),_e=!1;else try{j1(at,W,"req"+pe+"_")}catch{b&&b(at)}}if(_e){b=W.join("&");break e}}}return c=c.i.splice(0,m),f.D=c,b}function gg(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;ye||F(),M||(ye(),M=!0),B.add(f,c),c.v=0}}function Ku(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=qi(y(c.Fa,c),xg(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,yg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=qi(y(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),Qa(this),yg(this))};function Yu(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function yg(c){c.g=new sr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=jn(c.qa);Ee(f,"RID","rpc"),Ee(f,"SID",c.K),Ee(f,"AID",c.T),Ee(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ee(f,"TO",c.ja),Ee(f,"TYPE","xmlhttp"),Zi(c,f),c.m&&c.o&&Gu(f,c.m,c.o),c.L&&(c.g.I=c.L);var m=c.g;c=c.ia,m.L=1,m.v=qa(jn(f)),m.m=null,m.P=!0,qp(m,c)}t.Za=function(){this.C!=null&&(this.C=null,Qa(this),Ku(this),xt(19))};function Ya(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function vg(c,f){var m=null;if(c.g==f){Ya(c),Yu(c),c.g=null;var b=2}else if(Hu(c.h,f))m=f.D,Yp(c.h,f),b=1;else return;if(c.G!=0){if(f.o)if(b==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var O=c.B;b=Va(),vt(b,new Up(b,m)),Ka(c)}else gg(c);else if(O=f.s,O==3||O==0&&0<f.X||!(b==1&&M1(c,f)||b==2&&Ku(c)))switch(m&&0<m.length&&(f=c.h,f.i=f.i.concat(m)),O){case 1:ns(c,5);break;case 4:ns(c,10);break;case 3:ns(c,6);break;default:ns(c,2)}}}function xg(c,f){let m=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(m*=2),m*f}function ns(c,f){if(c.j.info("Error code "+f),f==2){var m=y(c.fb,c),b=c.Xa;const O=!b;b=new ts(b||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||za(b,"https"),qa(b),O?C1(b.toString(),m):k1(b.toString(),m)}else xt(2);c.G=0,c.l&&c.l.sa(f),_g(c),fg(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function _g(c){if(c.G=0,c.ka=[],c.l){const f=Xp(c.h);(f.length!=0||c.i.length!=0)&&(C(c.ka,f),C(c.ka,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.ra()}}function wg(c,f,m){var b=m instanceof ts?jn(m):new ts(m);if(b.g!="")f&&(b.g=f+"."+b.g),Ba(b,b.s);else{var O=l.location;b=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var L=new ts(null);b&&za(L,b),f&&(L.g=f),O&&Ba(L,O),m&&(L.l=m),b=L}return m=c.D,f=c.ya,m&&f&&Ee(b,m,f),Ee(b,"VER",c.la),Zi(c,b),b}function Eg(c,f,m){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new Oe(new Ha({eb:m})):new Oe(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function bg(){}t=bg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Xa(){}Xa.prototype.g=function(c,f){return new Vt(c,f)};function Vt(c,f){ot.call(this),this.g=new hg(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!_(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!_(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Ds(this)}R(Vt,ot),Vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){Qu(this.g)},Vt.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.u&&(m={},m.__data__=Lu(c),c=m);f.i.push(new _1(f.Ya++,c)),f.G==3&&Ka(f)},Vt.prototype.N=function(){this.g.l=null,delete this.j,Qu(this.g),delete this.g,Vt.aa.N.call(this)};function Tg(c){Vu.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const m in f){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}R(Tg,Vu);function Ig(){$u.call(this),this.status=1}R(Ig,$u);function Ds(c){this.g=c}R(Ds,bg),Ds.prototype.ua=function(){vt(this.g,"a")},Ds.prototype.ta=function(c){vt(this.g,new Tg(c))},Ds.prototype.sa=function(c){vt(this.g,new Ig)},Ds.prototype.ra=function(){vt(this.g,"b")},Xa.prototype.createWebChannel=Xa.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,rE=function(){return new Xa},nE=function(){return Va()},tE=Zr,Zh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$a.NO_ERROR=0,$a.TIMEOUT=8,$a.HTTP_ERROR=6,Gl=$a,Fp.COMPLETE="complete",eE=Fp,Lp.EventType=zi,zi.OPEN="a",zi.CLOSE="b",zi.ERROR="c",zi.MESSAGE="d",ot.prototype.listen=ot.prototype.K,vo=Lp,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,Zw=Oe}).apply(typeof xl<"u"?xl:typeof self<"u"?self:typeof window<"u"?window:{});const xy="@firebase/firestore",_y="4.7.12";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Li="11.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new bm("@firebase/firestore");function Vs(){return Is.logLevel}function Y(t,...e){if(Is.logLevel<=ue.DEBUG){const n=e.map(Dm);Is.debug(`Firestore (${Li}): ${t}`,...n)}}function Jn(t,...e){if(Is.logLevel<=ue.ERROR){const n=e.map(Dm);Is.error(`Firestore (${Li}): ${t}`,...n)}}function _i(t,...e){if(Is.logLevel<=ue.WARN){const n=e.map(Dm);Is.warn(`Firestore (${Li}): ${t}`,...n)}}function Dm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,sE(t,r,n)}function sE(t,e,n){let r=`FIRESTORE (${Li}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Jn(r),new Error(r)}function ve(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||sE(e,s,r)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends kn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Fk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ht.UNAUTHENTICATED))}shutdown(){}}class zk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Bk{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new qn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new qn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new qn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new iE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new ht(e)}}class qk{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Hk{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new qk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wk{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ft(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ve(this.o===void 0,3512);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new wy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new wy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Gk(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function ef(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ae(r,s);{const i=oE(),o=Qk(i.encode(Ey(t,n)),i.encode(Ey(e,n)));return o!==0?o:ae(r,s)}}n+=r>65535?2:1}return ae(t.length,e.length)}function Ey(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Qk(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ae(t[n],e[n]);return ae(t.length,e.length)}function wi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=-62135596800,Ty=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ty);return new Qe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<by)throw new K(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ty}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-by;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{static fromTimestamp(e){return new ie(e)}static min(){return new ie(new Qe(0,0))}static max(){return new ie(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy="__name__";class _n{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _n.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _n?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=_n.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ae(e.length,n.length)}static compareSegments(e,n){const r=_n.isNumericId(e),s=_n.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?_n.extractNumericId(e).compare(_n.extractNumericId(n)):ef(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return kr.fromString(e.substring(4,e.length-2))}}class Te extends _n{construct(e,n,r){return new Te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const Kk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends _n{construct(e,n,r){return new nt(e,n,r)}static isValidIdentifier(e){return Kk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Iy}static keyField(){return new nt([Iy])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new K(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new K(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Te.fromString(e))}static fromName(e){return new te(Te.fromString(e).popFirst(5))}static empty(){return new te(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Te(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=-1;function Yk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ie.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new Lr(s,te.empty(),e)}function Xk(t){return new Lr(t.readTime,t.key,sa)}class Lr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Lr(ie.min(),te.empty(),sa)}static max(){return new Lr(ie.max(),te.empty(),sa)}}function Jk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class e2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mi(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==Zk)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(s=>s?$.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new $((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(h=>{o[d]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new $((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function t2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}fu.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm=-1;function mu(t){return t==null}function Oc(t){return t===0&&1/t==-1/0}function n2(t){return typeof t=="number"&&Number.isInteger(t)&&!Oc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="";function r2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ny(e)),e=s2(t.get(n),e);return Ny(e)}function s2(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case lE:n+="";break;default:n+=i}}return n}function Ny(t){return t+lE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){this.comparator=e,this.root=n||tt.EMPTY}insert(e,n){return new je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tt.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _l(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _l(this.root,e,this.comparator,!1)}getReverseIterator(){return new _l(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _l(this.root,e,this.comparator,!0)}}class _l{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??tt.RED,this.left=s??tt.EMPTY,this.right=i??tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new tt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return tt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw se(27949);return e+(this.isRed()?0:1)}}tt.EMPTY=null,tt.RED=!0,tt.BLACK=!1;tt.EMPTY=new class{constructor(){this.size=0}get key(){throw se(57766)}get value(){throw se(16141)}get color(){throw se(16727)}get left(){throw se(29726)}get right(){throw se(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ry(this.data.getIterator())}getIteratorFrom(e){return new Ry(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ke(this.comparator);return n.data=e,n}}class Ry{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new Bt([])}unionWith(e){let n=new Ke(nt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Bt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new uE("Invalid base64 string: "+i):i}}(e);return new it(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new it(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const i2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mr(t){if(ve(!!t,39018),typeof t=="string"){let e=0;const n=i2.exec(t);if(ve(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(t.seconds),nanos:Ue(t.nanos)}}function Ue(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vr(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="server_timestamp",hE="__type__",fE="__previous_value__",mE="__local_write_time__";function Mm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[hE])===null||n===void 0?void 0:n.stringValue)===dE}function pu(t){const e=t.mapValue.fields[fE];return Mm(e)?pu(e):e}function ia(t){const e=Mr(t.mapValue.fields[mE].timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n,r,s,i,o,l,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const Dc="(default)";class oa{constructor(e,n){this.projectId=e,this.database=n||Dc}static empty(){return new oa("","")}get isDefaultDatabase(){return this.database===Dc}isEqual(e){return e instanceof oa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="__type__",a2="__max__",wl={mapValue:{}},gE="__vector__",Lc="value";function $r(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mm(t)?4:c2(t)?9007199254740991:l2(t)?10:11:se(28295,{value:t})}function Cn(t,e){if(t===e)return!0;const n=$r(t);if(n!==$r(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ia(t).isEqual(ia(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Mr(s.timestampValue),l=Mr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Vr(s.bytesValue).isEqual(Vr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ue(s.geoPointValue.latitude)===Ue(i.geoPointValue.latitude)&&Ue(s.geoPointValue.longitude)===Ue(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ue(s.integerValue)===Ue(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ue(s.doubleValue),l=Ue(i.doubleValue);return o===l?Oc(o)===Oc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return wi(t.arrayValue.values||[],e.arrayValue.values||[],Cn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Sy(o)!==Sy(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Cn(o[u],l[u])))return!1;return!0}(t,e);default:return se(52216,{left:t})}}function aa(t,e){return(t.values||[]).find(n=>Cn(n,e))!==void 0}function Ei(t,e){if(t===e)return 0;const n=$r(t),r=$r(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ue(i.integerValue||i.doubleValue),u=Ue(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Ay(t.timestampValue,e.timestampValue);case 4:return Ay(ia(t),ia(e));case 5:return ef(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Vr(i),u=Vr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=ae(l[d],u[d]);if(h!==0)return h}return ae(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ae(Ue(i.latitude),Ue(o.latitude));return l!==0?l:ae(Ue(i.longitude),Ue(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Cy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,h;const p=i.fields||{},y=o.fields||{},w=(l=p[Lc])===null||l===void 0?void 0:l.arrayValue,R=(u=y[Lc])===null||u===void 0?void 0:u.arrayValue,k=ae(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((h=R==null?void 0:R.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:Cy(w,R)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===wl.mapValue&&o===wl.mapValue)return 0;if(i===wl.mapValue)return 1;if(o===wl.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const y=ef(u[p],h[p]);if(y!==0)return y;const w=Ei(l[u[p]],d[h[p]]);if(w!==0)return w}return ae(u.length,h.length)}(t.mapValue,e.mapValue);default:throw se(23264,{Pe:n})}}function Ay(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Mr(t),r=Mr(e),s=ae(n.seconds,r.seconds);return s!==0?s:ae(n.nanos,r.nanos)}function Cy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ei(n[s],r[s]);if(i)return i}return ae(n.length,r.length)}function bi(t){return tf(t)}function tf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Mr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=tf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${tf(n.fields[o])}`;return s+"}"}(t.mapValue):se(61005,{value:t})}function Ql(t){switch($r(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pu(t);return e?16+Ql(e):16;case 5:return 2*t.stringValue.length;case 6:return Vr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Ql(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Wr(r.fields,(i,o)=>{s+=i.length+Ql(o)}),s}(t.mapValue);default:throw se(13486,{value:t})}}function ky(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function nf(t){return!!t&&"integerValue"in t}function Vm(t){return!!t&&"arrayValue"in t}function Py(t){return!!t&&"nullValue"in t}function jy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kl(t){return!!t&&"mapValue"in t}function l2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[pE])===null||n===void 0?void 0:n.stringValue)===gE}function Po(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Wr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Po(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Po(t.arrayValue.values[n]);return e}return Object.assign({},t)}function c2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===a2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.value=e}static empty(){return new Ct({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Kl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Po(n)}setAll(e){let n=nt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Po(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Kl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Kl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Wr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ct(Po(this.value))}}function yE(t){const e=[];return Wr(t.fields,(n,r)=>{const s=new nt([n]);if(Kl(r)){const i=yE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Bt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new mt(e,0,ie.min(),ie.min(),ie.min(),Ct.empty(),0)}static newFoundDocument(e,n,r,s){return new mt(e,1,n,ie.min(),r,s,0)}static newNoDocument(e,n){return new mt(e,2,n,ie.min(),ie.min(),Ct.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,ie.min(),ie.min(),Ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n){this.position=e,this.inclusive=n}}function Oy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Ei(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Dy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n="asc"){this.field=e,this.dir=n}}function u2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{}class He extends vE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new h2(e,n,r):n==="array-contains"?new p2(e,r):n==="in"?new g2(e,r):n==="not-in"?new y2(e,r):n==="array-contains-any"?new v2(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new f2(e,r):new m2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ei(n,this.value)):n!==null&&$r(this.value)===$r(n)&&this.matchesComparison(Ei(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pn extends vE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new pn(e,n)}matches(e){return xE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function xE(t){return t.op==="and"}function _E(t){return d2(t)&&xE(t)}function d2(t){for(const e of t.filters)if(e instanceof pn)return!1;return!0}function rf(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+bi(t.value);if(_E(t))return t.filters.map(e=>rf(e)).join(",");{const e=t.filters.map(n=>rf(n)).join(",");return`${t.op}(${e})`}}function wE(t,e){return t instanceof He?function(r,s){return s instanceof He&&r.op===s.op&&r.field.isEqual(s.field)&&Cn(r.value,s.value)}(t,e):t instanceof pn?function(r,s){return s instanceof pn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&wE(o,s.filters[l]),!0):!1}(t,e):void se(19439)}function EE(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${bi(n.value)}`}(t):t instanceof pn?function(n){return n.op.toString()+" {"+n.getFilters().map(EE).join(" ,")+"}"}(t):"Filter"}class h2 extends He{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class f2 extends He{constructor(e,n){super(e,"in",n),this.keys=bE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class m2 extends He{constructor(e,n){super(e,"not-in",n),this.keys=bE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class p2 extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vm(n)&&aa(n.arrayValue,this.value)}}class g2 extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&aa(this.value.arrayValue,n)}}class y2 extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!aa(this.value.arrayValue,n)}}class v2 extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>aa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Ie=null}}function Ly(t,e=null,n=[],r=[],s=null,i=null,o=null){return new x2(t,e,n,r,s,i,o)}function $m(t){const e=oe(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>rf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),mu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bi(r)).join(",")),e.Ie=n}return e.Ie}function Um(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!u2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Dy(t.startAt,e.startAt)&&Dy(t.endAt,e.endAt)}function sf(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function _2(t,e,n,r,s,i,o,l){return new $i(t,e,n,r,s,i,o,l)}function Fm(t){return new $i(t)}function My(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function TE(t){return t.collectionGroup!==null}function jo(t){const e=oe(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ke(nt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new la(i,r))}),n.has(nt.keyField().canonicalString())||e.Ee.push(new la(nt.keyField(),r))}return e.Ee}function Rn(t){const e=oe(t);return e.de||(e.de=w2(e,jo(t))),e.de}function w2(t,e){if(t.limitType==="F")return Ly(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new la(s.field,i)});const n=t.endAt?new Mc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Mc(t.startAt.position,t.startAt.inclusive):null;return Ly(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function of(t,e){const n=t.filters.concat([e]);return new $i(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Vc(t,e,n){return new $i(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gu(t,e){return Um(Rn(t),Rn(e))&&t.limitType===e.limitType}function IE(t){return`${$m(Rn(t))}|lt:${t.limitType}`}function $s(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>EE(s)).join(", ")}]`),mu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>bi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>bi(s)).join(",")),`Target(${r})`}(Rn(t))}; limitType=${t.limitType})`}function yu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of jo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=Oy(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,jo(r),s)||r.endAt&&!function(o,l,u){const d=Oy(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,jo(r),s))}(t,e)}function E2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NE(t){return(e,n)=>{let r=!1;for(const s of jo(t)){const i=b2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function b2(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Ei(u,d):se(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Wr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return cE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=new je(te.comparator);function Zn(){return T2}const SE=new je(te.comparator);function xo(...t){let e=SE;for(const n of t)e=e.insert(n.key,n);return e}function RE(t){let e=SE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ds(){return Oo()}function AE(){return Oo()}function Oo(){return new ks(t=>t.toString(),(t,e)=>t.isEqual(e))}const I2=new je(te.comparator),N2=new Ke(te.comparator);function de(...t){let e=N2;for(const n of t)e=e.add(n);return e}const S2=new Ke(ae);function R2(){return S2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oc(e)?"-0":e}}function CE(t){return{integerValue:""+t}}function kE(t,e){return n2(e)?CE(e):zm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(){this._=void 0}}function A2(t,e,n){return t instanceof ca?function(s,i){const o={fields:{[hE]:{stringValue:dE},[mE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Mm(i)&&(i=pu(i)),i&&(o.fields[fE]=i),{mapValue:o}}(n,e):t instanceof ua?jE(t,e):t instanceof da?OE(t,e):function(s,i){const o=PE(s,i),l=Vy(o)+Vy(s.Re);return nf(o)&&nf(s.Re)?CE(l):zm(s.serializer,l)}(t,e)}function C2(t,e,n){return t instanceof ua?jE(t,e):t instanceof da?OE(t,e):n}function PE(t,e){return t instanceof ha?function(r){return nf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ca extends vu{}class ua extends vu{constructor(e){super(),this.elements=e}}function jE(t,e){const n=DE(e);for(const r of t.elements)n.some(s=>Cn(s,r))||n.push(r);return{arrayValue:{values:n}}}class da extends vu{constructor(e){super(),this.elements=e}}function OE(t,e){let n=DE(e);for(const r of t.elements)n=n.filter(s=>!Cn(s,r));return{arrayValue:{values:n}}}class ha extends vu{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Vy(t){return Ue(t.integerValue||t.doubleValue)}function DE(t){return Vm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n){this.field=e,this.transform=n}}function k2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ua&&s instanceof ua||r instanceof da&&s instanceof da?wi(r.elements,s.elements,Cn):r instanceof ha&&s instanceof ha?Cn(r.Re,s.Re):r instanceof ca&&s instanceof ca}(t.transform,e.transform)}class P2{constructor(e,n){this.version=e,this.transformResults=n}}class bt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new bt}static exists(e){return new bt(void 0,e)}static updateTime(e){return new bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class xu{}function ME(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _u(t.key,bt.none()):new Ra(t.key,t.data,bt.none());{const n=t.data,r=Ct.empty();let s=new Ke(nt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Gr(t.key,r,new Bt(s.toArray()),bt.none())}}function j2(t,e,n){t instanceof Ra?function(s,i,o){const l=s.value.clone(),u=Uy(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Gr?function(s,i,o){if(!Yl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Uy(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(VE(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Do(t,e,n,r){return t instanceof Ra?function(i,o,l,u){if(!Yl(i.precondition,o))return l;const d=i.value.clone(),h=Fy(i.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Gr?function(i,o,l,u){if(!Yl(i.precondition,o))return l;const d=Fy(i.fieldTransforms,u,o),h=o.data;return h.setAll(VE(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return Yl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function O2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=PE(r.transform,s||null);i!=null&&(n===null&&(n=Ct.empty()),n.set(r.field,i))}return n||null}function $y(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&wi(r,s,(i,o)=>k2(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ra extends xu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Gr extends xu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function VE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Uy(t,e,n){const r=new Map;ve(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,C2(o,l,n[s]))}return r}function Fy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,A2(i,o,e))}return r}class _u extends xu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class D2 extends xu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&j2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Do(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Do(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=AE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=ME(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&wi(this.mutations,e.mutations,(n,r)=>$y(n,r))&&wi(this.baseMutations,e.baseMutations,(n,r)=>$y(n,r))}}class Bm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ve(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return I2}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Bm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,fe;function $2(t){switch(t){case V.OK:return se(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return se(15467,{code:t})}}function $E(t){if(t===void 0)return Jn("GRPC error has no .code"),V.UNKNOWN;switch(t){case Be.OK:return V.OK;case Be.CANCELLED:return V.CANCELLED;case Be.UNKNOWN:return V.UNKNOWN;case Be.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Be.INTERNAL:return V.INTERNAL;case Be.UNAVAILABLE:return V.UNAVAILABLE;case Be.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Be.NOT_FOUND:return V.NOT_FOUND;case Be.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Be.ABORTED:return V.ABORTED;case Be.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Be.DATA_LOSS:return V.DATA_LOSS;default:return se(39323,{code:t})}}(fe=Be||(Be={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=new kr([4294967295,4294967295],0);function zy(t){const e=oE().encode(t),n=new Jw;return n.update(e),new Uint8Array(n.digest())}function By(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new kr([n,r],0),new kr([s,i],0)]}class qm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _o(`Invalid padding: ${n}`);if(r<0)throw new _o(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _o(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _o(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=kr.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(kr.fromNumber(r)));return s.compare(U2)===1&&(s=new kr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=zy(e),[r,s]=By(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.be(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new qm(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.pe===0)return;const n=zy(e),[r,s]=By(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _o extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Aa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new wu(ie.min(),s,new je(ae),Zn(),de())}}class Aa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Aa(r,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class UE{constructor(e,n){this.targetId=e,this.Ce=n}}class FE{constructor(e,n,r=it.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class qy{constructor(){this.Fe=0,this.Me=Hy(),this.xe=it.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=de(),n=de(),r=de();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:se(38017,{changeType:i})}}),new Aa(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=Hy()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ve(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class F2{constructor(e){this.ze=e,this.je=new Map,this.He=Zn(),this.Je=El(),this.Ye=El(),this.Ze=new je(ae)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:se(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(sf(i))if(r===0){const o=new te(i.path);this.tt(n,o,mt.newNoDocument(o,ie.min()))}else ve(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const l=this.ct(e),u=l?this.lt(l,e,o):1;if(u!==0){this.st(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Vr(r).toUint8Array()}catch(u){if(u instanceof uE)return _i("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new qm(o,s,i)}catch(u){return _i(u instanceof _o?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.pe===0?null:l}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,o)=>{const l=this._t(o);if(l){if(i.current&&sf(l.target)){const u=new te(l.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,mt.newNoDocument(u,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let r=de();this.Ye.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this._t(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new wu(e,n,this.Ze,this.He,r);return this.He=Zn(),this.Je=El(),this.Ye=El(),this.Ze=new je(ae),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new qy,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Ke(ae),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Ke(ae),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new qy),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function El(){return new je(te.comparator)}function Hy(){return new je(te.comparator)}const z2={asc:"ASCENDING",desc:"DESCENDING"},B2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},q2={and:"AND",or:"OR"};class H2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function af(t,e){return t.useProto3Json||mu(e)?e:{value:e}}function $c(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function W2(t,e){return $c(t,e.toTimestamp())}function An(t){return ve(!!t,49232),ie.fromTimestamp(function(n){const r=Mr(n);return new Qe(r.seconds,r.nanos)}(t))}function Hm(t,e){return lf(t,e).canonicalString()}function lf(t,e){const n=function(s){return new Te(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function BE(t){const e=Te.fromString(t);return ve(QE(e),10190,{key:e.toString()}),e}function cf(t,e){return Hm(t.databaseId,e.path)}function jd(t,e){const n=BE(e);if(n.get(1)!==t.databaseId.projectId)throw new K(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(HE(n))}function qE(t,e){return Hm(t.databaseId,e)}function G2(t){const e=BE(t);return e.length===4?Te.emptyPath():HE(e)}function uf(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HE(t){return ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Wy(t,e,n){return{name:cf(t,e),fields:n.value.mapValue.fields}}function Q2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:se(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(ve(h===void 0||typeof h=="string",58123),it.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),it.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?V.UNKNOWN:$E(d.code);return new K(h,d.message||"")}(o);n=new FE(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=jd(t,r.document.name),i=An(r.document.updateTime),o=r.document.createTime?An(r.document.createTime):ie.min(),l=new Ct({mapValue:{fields:r.document.fields}}),u=mt.newFoundDocument(s,i,o,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Xl(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=jd(t,r.document),i=r.readTime?An(r.readTime):ie.min(),o=mt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Xl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=jd(t,r.document),i=r.removedTargetIds||[];n=new Xl([],i,s,null)}else{if(!("filter"in e))return se(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new V2(s,i),l=r.targetId;n=new UE(l,o)}}return n}function K2(t,e){let n;if(e instanceof Ra)n={update:Wy(t,e.key,e.value)};else if(e instanceof _u)n={delete:cf(t,e.key)};else if(e instanceof Gr)n={update:Wy(t,e.key,e.data),updateMask:sP(e.fieldMask)};else{if(!(e instanceof D2))return se(16599,{ft:e.type});n={verify:cf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof ca)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ua)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof da)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ha)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw se(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:W2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:se(27497)}(t,e.precondition)),n}function Y2(t,e){return t&&t.length>0?(ve(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?An(s.updateTime):An(i);return o.isEqual(ie.min())&&(o=An(i)),new P2(o,s.transformResults||[])}(n,e))):[]}function X2(t,e){return{documents:[qE(t,e.path)]}}function J2(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qE(t,s);const i=function(d){if(d.length!==0)return GE(pn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(y){return{field:Us(y.field),direction:tP(y.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=af(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:s}}function Z2(t){let e=G2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ve(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(p){const y=WE(p);return y instanceof pn&&_E(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(y=>function(R){return new la(Fs(R.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(p){let y;return y=typeof p=="object"?p.value:p,mu(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){const y=!!p.before,w=p.values||[];return new Mc(w,y)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const y=!p.before,w=p.values||[];return new Mc(w,y)}(n.endAt)),_2(e,s,o,i,l,"F",u,d)}function eP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function WE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fs(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Fs(n.unaryFilter.field);return He.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Fs(n.unaryFilter.field);return He.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Fs(n.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return se(61313);default:return se(60726)}}(t):t.fieldFilter!==void 0?function(n){return He.create(Fs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return se(58110);default:return se(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return pn.create(n.compositeFilter.filters.map(r=>WE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return se(1026)}}(n.compositeFilter.op))}(t):se(30097,{filter:t})}function tP(t){return z2[t]}function nP(t){return B2[t]}function rP(t){return q2[t]}function Us(t){return{fieldPath:t.canonicalString()}}function Fs(t){return nt.fromServerFormat(t.fieldPath)}function GE(t){return t instanceof He?function(n){if(n.op==="=="){if(jy(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NAN"}};if(Py(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jy(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NAN"}};if(Py(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Us(n.field),op:nP(n.op),value:n.value}}}(t):t instanceof pn?function(n){const r=n.getFilters().map(s=>GE(s));return r.length===1?r[0]:{compositeFilter:{op:rP(n.op),filters:r}}}(t):se(54877,{filter:t})}function sP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function QE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n,r,s,i=ie.min(),o=ie.min(),l=it.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new _r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.wt=e}}function oP(t){const e=Z2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(){this.yn=new lP}addToCollectionParentIndex(e,n){return this.yn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.yn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Lr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Lr.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class lP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ke(Te.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ke(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KE=41943040;class Rt{static withCacheSize(e){return new Rt(e,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rt.DEFAULT_COLLECTION_PERCENTILE=10,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rt.DEFAULT=new Rt(KE,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rt.DISABLED=new Rt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Ti(0)}static ir(){return new Ti(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="LruGarbageCollector",cP=1048576;function Ky([t,e],[n,r]){const s=ae(t,n);return s===0?ae(e,r):s}class uP{constructor(e){this.cr=e,this.buffer=new Ke(Ky),this.lr=0}hr(){return++this.lr}Pr(e){const n=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Ky(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class dP{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){Y(Qy,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Vi(n)?Y(Qy,"Ignoring IndexedDB error during garbage collection: ",n):await Mi(n)}await this.Ir(3e5)})}}class hP{constructor(e,n){this.Er=e,this.params=n}calculateTargetCount(e,n){return this.Er.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(fu.le);const r=new uP(n);return this.Er.forEachTarget(e,s=>r.Pr(s.sequenceNumber)).next(()=>this.Er.Ar(e,s=>r.Pr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Er.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Er.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Gy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gy):this.Rr(e,n))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,n){let r,s,i,o,l,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Vs()<=ue.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function fP(t,e){return new hP(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(){this.changes=new ks(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Do(r.mutation,s,Bt.empty(),Qe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){const s=ds();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=xo();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ds();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Zn();const o=Oo(),l=function(){return Oo()}();return n.forEach((u,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Gr)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Do(h.mutation,d,h.mutation.getFieldMask(),Qe.now())):o.set(d.key,Bt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var p;return l.set(d,new pP(h,(p=o.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Oo();let s=new je((o,l)=>o-l),i=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||Bt.empty();h=l.applyToLocalView(d,h),r.set(u,h);const p=(s.get(l.batchId)||de()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,p=AE();h.forEach(y=>{if(!i.has(y)){const w=ME(n.get(y),r.get(y));w!==null&&p.set(y,w),i=i.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):TE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):$.resolve(ds());let l=sa,u=i;return o.next(d=>$.forEach(d,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{u=u.insert(h,y)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,de())).next(h=>({batchId:l,changes:RE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=xo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=xo();return this.indexManager.getCollectionParents(e,i).next(l=>$.forEach(l,u=>{const d=function(p,y){return new $i(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,mt.newInvalidDocument(h)))});let l=xo();return o.forEach((u,d)=>{const h=i.get(u);h!==void 0&&Do(h.mutation,d,Bt.empty(),Qe.now()),yu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,n){return $.resolve(this.Fr.get(n))}saveBundleMetadata(e,n){return this.Fr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:An(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Mr.get(n))}saveNamedQuery(e,n){return this.Mr.set(n.name,function(s){return{name:s.name,query:oP(s.bundledQuery),readTime:An(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(){this.overlays=new je(te.comparator),this.Or=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ds();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Or.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Or.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const s=ds(),i=n.length+1,o=new te(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new je((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=ds(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=ds(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return $.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Or.get(s.largestBatchId).delete(r.key);this.Or.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new M2(n,r));let i=this.Or.get(n);i===void 0&&(i=de(),this.Or.set(n,i)),this.Or.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(){this.Nr=new Ke(Ye.Br),this.Lr=new Ke(Ye.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,n){const r=new Ye(e,n);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Qr(new Ye(e,n))}$r(e,n){e.forEach(r=>this.removeReference(r,n))}Ur(e){const n=new te(new Te([])),r=new Ye(n,e),s=new Ye(n,e+1),i=[];return this.Lr.forEachInRange([r,s],o=>{this.Qr(o),i.push(o.key)}),i}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const n=new te(new Te([])),r=new Ye(n,e),s=new Ye(n,e+1);let i=de();return this.Lr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ye(e,0),r=this.Nr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ye{constructor(e,n){this.key=e,this.Gr=n}static Br(e,n){return te.comparator(e.key,n.key)||ae(e.Gr,n.Gr)}static kr(e,n){return ae(e.Gr,n.Gr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Jn=1,this.zr=new Ke(Ye.Br)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new L2(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.zr=this.zr.add(new Ye(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.jr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Hr(r),i=s<0?0:s;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Lm:this.Jn-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ye(n,0),s=new Ye(n,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([r,s],o=>{const l=this.jr(o.Gr);i.push(l)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ke(ae);return n.forEach(s=>{const i=new Ye(s,0),o=new Ye(s,Number.POSITIVE_INFINITY);this.zr.forEachInRange([i,o],l=>{r=r.add(l.Gr)})}),$.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new Ye(new te(i),0);let l=new Ke(ae);return this.zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Gr)),!0)},o),$.resolve(this.Jr(l))}Jr(e){const n=[];return e.forEach(r=>{const s=this.jr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ve(this.Yr(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return $.forEach(n.mutations,s=>{const i=new Ye(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,n){const r=new Ye(n,0),s=this.zr.firstAfterOrEqual(r);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Yr(e,n){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const n=this.Hr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e){this.Zr=e,this.docs=function(){return new je(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Zr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let r=Zn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():mt.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Zn();const o=n.path,l=new te(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||Jk(Xk(h),r)<=0||(s.has(h.key)||yu(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,r,s){se(9500)}Xr(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new EP(this)}getSize(e){return $.resolve(this.size)}}class EP extends mP{constructor(e){super(),this.vr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.vr.addEntry(e,s)):this.vr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.vr.getEntry(e,n)}getAllFromCache(e,n){return this.vr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e){this.persistence=e,this.ei=new ks(n=>$m(n),Um),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.ti=0,this.ni=new Wm,this.targetCount=0,this.ri=Ti.rr()}forEachTarget(e,n){return this.ei.forEach((r,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ti&&(this.ti=n),$.resolve()}ar(e){this.ei.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ri=new Ti(n),this.highestTargetId=n),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,n){return this.ar(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.ar(n),$.resolve()}removeTargetData(e,n){return this.ei.delete(n.target),this.ni.Ur(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ei.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ei.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),$.waitFor(i).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.ei.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.ni.qr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.ni.$r(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ni.Ur(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ni.Wr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.ni.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this.ii={},this.overlays={},this.si=new fu(0),this.oi=!1,this.oi=!0,this._i=new xP,this.referenceDelegate=e(this),this.ai=new bP(this),this.indexManager=new aP,this.remoteDocumentCache=function(s){return new wP(s)}(r=>this.referenceDelegate.ui(r)),this.serializer=new iP(n),this.ci=new yP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ii[e.toKey()];return r||(r=new _P(n,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new TP(this.si.next());return this.referenceDelegate.li(),r(s).next(i=>this.referenceDelegate.hi(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Pi(e,n){return $.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,n)))}}class TP extends e2{constructor(e){super(),this.currentSequenceNumber=e}}class Gm{constructor(e){this.persistence=e,this.Ti=new Wm,this.Ii=null}static Ei(e){return new Gm(e)}get di(){if(this.Ii)return this.Ii;throw se(60996)}addReference(e,n,r){return this.Ti.addReference(r,n),this.di.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Ti.removeReference(r,n),this.di.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ti.Ur(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}li(){this.Ii=new Set}hi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.di,r=>{const s=te.fromPath(r);return this.Ai(e,s).next(i=>{i||n.removeEntry(s,ie.min())})}).next(()=>(this.Ii=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ai(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}ui(e){return 0}Ai(e,n){return $.or([()=>$.resolve(this.Ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Pi(e,n)])}}class Uc{constructor(e,n){this.persistence=e,this.Ri=new ks(r=>r2(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=fP(this,n)}static Ei(e,n){return new Uc(e,n)}li(){}hi(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}Vr(e){let n=0;return this.Ar(e,r=>{n++}).next(()=>n)}Ar(e,n){return $.forEach(this.Ri,(r,s)=>this.gr(e,r,s).next(i=>i?$.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Xr(e,o=>this.gr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,ie.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.Ri.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.Ri.set(n,e.currentSequenceNumber),$.resolve()}ui(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ql(e.data.value)),n}gr(e,n,r){return $.or([()=>this.persistence.Pi(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.Ri.get(n);return $.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ls=r,this.hs=s}static Ps(e,n){let r=de(),s=de();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Qm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return oR()?8:t2(gt())>0?6:4}()}initialize(e,n){this.As=e,this.indexManager=n,this.Ts=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Rs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Vs(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new IP;return this.fs(e,n,o).next(l=>{if(i.result=l,this.Is)return this.gs(e,n,o,l.size)})}).next(()=>i.result)}gs(e,n,r,s){return r.documentReadCount<this.Es?(Vs()<=ue.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",$s(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),$.resolve()):(Vs()<=ue.DEBUG&&Y("QueryEngine","Query:",$s(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Vs()<=ue.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",$s(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rn(n))):$.resolve())}Rs(e,n){if(My(n))return $.resolve(null);let r=Rn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Vc(n,null,"F"),r=Rn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=de(...i);return this.As.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ps(n,l);return this.ys(n,d,o,u.readTime)?this.Rs(e,Vc(n,null,"F")):this.ws(e,d,n,u)}))})))}Vs(e,n,r,s){return My(n)||s.isEqual(ie.min())?$.resolve(null):this.As.getDocuments(e,r).next(i=>{const o=this.ps(n,i);return this.ys(n,o,r,s)?$.resolve(null):(Vs()<=ue.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$s(n)),this.ws(e,o,n,Yk(s,sa)).next(l=>l))})}ps(e,n){let r=new Ke(NE(e));return n.forEach((s,i)=>{yu(e,i)&&(r=r.add(i))}),r}ys(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}fs(e,n,r){return Vs()<=ue.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",$s(n)),this.As.getDocumentsMatchingQuery(e,n,Lr.min(),r)}ws(e,n,r,s){return this.As.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="LocalStore",SP=3e8;class RP{constructor(e,n,r,s){this.persistence=e,this.bs=n,this.serializer=s,this.Ss=new je(ae),this.Ds=new ks(i=>$m(i),Um),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gP(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ss))}}function AP(t,e,n,r){return new RP(t,e,n,r)}async function XE(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Fs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=de();for(const d of s){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ms:d,removedBatchIds:o,addedBatchIds:l}))})})}function CP(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const p=d.batch,y=p.keys();let w=$.resolve();return y.forEach(R=>{w=w.next(()=>h.getEntry(u,R)).next(k=>{const C=d.docVersions.get(R);ve(C!==null,48541),k.version.compareTo(C)<0&&(p.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),h.addEntry(k)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=de();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function JE(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ai.getLastRemoteSnapshotVersion(n))}function kP(t,e){const n=oe(t),r=e.snapshotVersion;let s=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Cs.newChangeBuffer({trackRemovals:!0});s=n.Ss;const l=[];e.targetChanges.forEach((h,p)=>{const y=s.get(p);if(!y)return;l.push(n.ai.removeMatchingKeys(i,h.removedDocuments,p).next(()=>n.ai.addMatchingKeys(i,h.addedDocuments,p)));let w=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(it.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),s=s.insert(p,w),function(k,C,T){return k.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=SP?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(y,w,h)&&l.push(n.ai.updateTargetData(i,w))});let u=Zn(),d=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(PP(i,o,e.documentUpdates).next(h=>{u=h.xs,d=h.Os})),!r.isEqual(ie.min())){const h=n.ai.getLastRemoteSnapshotVersion(i).next(p=>n.ai.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return $.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Ss=s,i))}function PP(t,e,n){let r=de(),s=de();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Zn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):Y(Km,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{xs:o,Os:s}})}function jP(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Lm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function OP(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.ai.getTargetData(r,e).next(i=>i?(s=i,$.resolve(s)):n.ai.allocateTargetId(r).next(o=>(s=new _r(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.ai.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ss.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(r.targetId,r),n.Ds.set(e,r.targetId)),r})}async function df(t,e,n){const r=oe(t),s=r.Ss.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Vi(o))throw o;Y(Km,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(s.target)}function Yy(t,e,n){const r=oe(t);let s=ie.min(),i=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const p=oe(u),y=p.Ds.get(h);return y!==void 0?$.resolve(p.Ss.get(y)):p.ai.getTargetData(d,h)}(r,o,Rn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.bs.getDocumentsMatchingQuery(o,e,n?s:ie.min(),n?i:de())).next(l=>(DP(r,E2(e),l),{documents:l,Ns:i})))}function DP(t,e,n){let r=t.vs.get(e)||ie.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.vs.set(e,r)}class Xy{constructor(){this.activeTargetIds=R2()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LP{constructor(){this.So=new Xy,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,n,r){this.Do[e]=n}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Xy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="ConnectivityMonitor";class Zy{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Y(Jy,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Y(Jy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bl=null;function hf(){return bl===null?bl=function(){return 268435456+Math.round(2147483648*Math.random())}():bl++,"0x"+bl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od="RestConnection",VP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $P{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Lo=n+"://"+e.host,this.ko=`projects/${r}/databases/${s}`,this.qo=this.databaseId.database===Dc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Qo(e,n,r,s,i){const o=hf(),l=this.$o(e,n.toUriEncodedString());Y(Od,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(u,s,i);const{host:d}=new URL(l),h=Oi(d);return this.Ko(e,l,u,r,h).then(p=>(Y(Od,`Received RPC '${e}' ${o}: `,p),p),p=>{throw _i(Od,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}Wo(e,n,r,s,i,o){return this.Qo(e,n,r,s,i)}Uo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Li}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}$o(e,n){const r=VP[e];return`${this.Lo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt="WebChannelConnection";class FP extends $P{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,n,r,s,i){const o=hf();return new Promise((l,u)=>{const d=new Zw;d.setWithCredentials(!0),d.listenOnce(eE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Gl.NO_ERROR:const p=d.getResponseJson();Y(dt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Gl.TIMEOUT:Y(dt,`RPC '${e}' ${o} timed out`),u(new K(V.DEADLINE_EXCEEDED,"Request time out"));break;case Gl.HTTP_ERROR:const y=d.getStatus();if(Y(dt,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const R=w==null?void 0:w.error;if(R&&R.status&&R.message){const k=function(T){const _=T.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(_)>=0?_:V.UNKNOWN}(R.status);u(new K(k,R.message))}else u(new K(V.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new K(V.UNAVAILABLE,"Connection failed."));break;default:se(9055,{s_:e,streamId:o,o_:d.getLastErrorCode(),__:d.getLastError()})}}finally{Y(dt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);Y(dt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",h,r,15)})}a_(e,n,r){const s=hf(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=rE(),l=nE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Uo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=i.join("");Y(dt,`Creating RPC '${e}' stream ${s}: ${h}`,u);const p=o.createWebChannel(h,u);let y=!1,w=!1;const R=new UP({Go:C=>{w?Y(dt,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(y||(Y(dt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),y=!0),Y(dt,`RPC '${e}' stream ${s} sending:`,C),p.send(C))},zo:()=>p.close()}),k=(C,T,_)=>{C.listen(T,N=>{try{_(N)}catch(j){setTimeout(()=>{throw j},0)}})};return k(p,vo.EventType.OPEN,()=>{w||(Y(dt,`RPC '${e}' stream ${s} transport opened.`),R.t_())}),k(p,vo.EventType.CLOSE,()=>{w||(w=!0,Y(dt,`RPC '${e}' stream ${s} transport closed`),R.r_())}),k(p,vo.EventType.ERROR,C=>{w||(w=!0,_i(dt,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),R.r_(new K(V.UNAVAILABLE,"The operation could not be completed")))}),k(p,vo.EventType.MESSAGE,C=>{var T;if(!w){const _=C.data[0];ve(!!_,16349);const N=_,j=(N==null?void 0:N.error)||((T=N[0])===null||T===void 0?void 0:T.error);if(j){Y(dt,`RPC '${e}' stream ${s} received error:`,j);const D=j.status;let U=function(v){const I=Be[v];if(I!==void 0)return $E(I)}(D),E=j.message;U===void 0&&(U=V.INTERNAL,E="Unknown error status: "+D+" with message "+j.message),w=!0,R.r_(new K(U,E)),p.close()}else Y(dt,`RPC '${e}' stream ${s} received:`,_),R.i_(_)}}),k(l,tE.STAT_EVENT,C=>{C.stat===Zh.PROXY?Y(dt,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===Zh.NOPROXY&&Y(dt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.n_()},0),R}}function Dd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t){return new H2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.bi=e,this.timerId=n,this.u_=r,this.c_=s,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const n=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.h_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,s,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="PersistentStream";class eb{constructor(e,n,r,s,i,o,l,u){this.bi=e,this.R_=r,this.V_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new ZE(e,n)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,n){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(Jn(n.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(n)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),n=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.m_===n&&this.B_(r,s)},r=>{e(()=>{const s=new K(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(s)})})}B_(e,n){const r=this.N_(this.m_);this.stream=this.k_(e,n),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(s=>{r(()=>this.L_(s))}),this.stream.onMessage(s=>{r(()=>++this.p_==1?this.q_(s):this.onNext(s))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return Y(ev,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return n=>{this.bi.enqueueAndForget(()=>this.m_===e?n():(Y(ev,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zP extends eb{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}k_(e,n){return this.connection.a_("Listen",e,n)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const n=Q2(this.serializer,e),r=function(i){if(!("targetChange"in i))return ie.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ie.min():o.readTime?An(o.readTime):ie.min()}(e);return this.listener.Q_(n,r)}U_(e){const n={};n.database=uf(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=sf(u)?{documents:X2(i,u)}:{query:J2(i,u).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=zE(i,o.resumeToken);const d=af(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ie.min())>0){l.readTime=$c(i,o.snapshotVersion.toTimestamp());const d=af(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=eP(this.serializer,e);r&&(n.labels=r),this.F_(n)}K_(e){const n={};n.database=uf(this.serializer),n.removeTarget=e,this.F_(n)}}class BP extends eb{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,n){return this.connection.a_("Write",e,n)}q_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const n=Y2(e.writeResults,e.commitTime),r=An(e.commitTime);return this.listener.j_(r,n)}H_(){const e={};e.database=uf(this.serializer),this.F_(e)}G_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>K2(this.serializer,r))};this.F_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{}class HP extends qP{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.J_=!1}Y_(){if(this.J_)throw new K(V.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,n,r,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Qo(e,lf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(V.UNKNOWN,i.toString())})}Wo(e,n,r,s,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Wo(e,lf(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(V.UNKNOWN,o.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class WP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Jn(n),this.ea=!1):Y("OnlineStateTracker",n)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="RemoteStore";class GP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo(o=>{r.enqueueAndForget(async()=>{Ps(this)&&(Y(Ns,"Restarting streams for network reachability change."),await async function(u){const d=oe(u);d.aa.add(4),await Ca(d),d.la.set("Unknown"),d.aa.delete(4),await bu(d)}(this))})}),this.la=new WP(r,s)}}async function bu(t){if(Ps(t))for(const e of t.ua)await e(!0)}async function Ca(t){for(const e of t.ua)await e(!1)}function tb(t,e){const n=oe(t);n._a.has(e.targetId)||(n._a.set(e.targetId,e),Zm(n)?Jm(n):Ui(n).b_()&&Xm(n,e))}function Ym(t,e){const n=oe(t),r=Ui(n);n._a.delete(e),r.b_()&&nb(n,e),n._a.size===0&&(r.b_()?r.v_():Ps(n)&&n.la.set("Unknown"))}function Xm(t,e){if(t.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ui(t).U_(e)}function nb(t,e){t.ha.Ke(e),Ui(t).K_(e)}function Jm(t){t.ha=new F2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t._a.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Ui(t).start(),t.la.ta()}function Zm(t){return Ps(t)&&!Ui(t).w_()&&t._a.size>0}function Ps(t){return oe(t).aa.size===0}function rb(t){t.ha=void 0}async function QP(t){t.la.set("Online")}async function KP(t){t._a.forEach((e,n)=>{Xm(t,e)})}async function YP(t,e){rb(t),Zm(t)?(t.la.ia(e),Jm(t)):t.la.set("Unknown")}async function XP(t,e,n){if(t.la.set("Online"),e instanceof FE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s._a.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s._a.delete(l),s.ha.removeTarget(l))}(t,e)}catch(r){Y(Ns,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fc(t,r)}else if(e instanceof Xl?t.ha.Xe(e):e instanceof UE?t.ha.ot(e):t.ha.nt(e),!n.isEqual(ie.min()))try{const r=await JE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.ha.It(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=i._a.get(d);h&&i._a.set(d,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const h=i._a.get(u);if(!h)return;i._a.set(u,h.withResumeToken(it.EMPTY_BYTE_STRING,h.snapshotVersion)),nb(i,u);const p=new _r(h.target,u,d,h.sequenceNumber);Xm(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Y(Ns,"Failed to raise snapshot:",r),await Fc(t,r)}}async function Fc(t,e,n){if(!Vi(e))throw e;t.aa.add(1),await Ca(t),t.la.set("Offline"),n||(n=()=>JE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y(Ns,"Retrying IndexedDB access"),await n(),t.aa.delete(1),await bu(t)})}function sb(t,e){return e().catch(n=>Fc(t,n,e))}async function Tu(t){const e=oe(t),n=Ur(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:Lm;for(;JP(e);)try{const s=await jP(e.localStore,r);if(s===null){e.oa.length===0&&n.v_();break}r=s.batchId,ZP(e,s)}catch(s){await Fc(e,s)}ib(e)&&ob(e)}function JP(t){return Ps(t)&&t.oa.length<10}function ZP(t,e){t.oa.push(e);const n=Ur(t);n.b_()&&n.W_&&n.G_(e.mutations)}function ib(t){return Ps(t)&&!Ur(t).w_()&&t.oa.length>0}function ob(t){Ur(t).start()}async function ej(t){Ur(t).H_()}async function tj(t){const e=Ur(t);for(const n of t.oa)e.G_(n.mutations)}async function nj(t,e,n){const r=t.oa.shift(),s=Bm.from(r,e,n);await sb(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Tu(t)}async function rj(t,e){e&&Ur(t).W_&&await async function(r,s){if(function(o){return $2(o)&&o!==V.ABORTED}(s.code)){const i=r.oa.shift();Ur(r).D_(),await sb(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Tu(r)}}(t,e),ib(t)&&ob(t)}async function tv(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),Y(Ns,"RemoteStore received new credentials");const r=Ps(n);n.aa.add(3),await Ca(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.aa.delete(3),await bu(n)}async function sj(t,e){const n=oe(t);e?(n.aa.delete(2),await bu(n)):e||(n.aa.add(2),await Ca(n),n.la.set("Unknown"))}function Ui(t){return t.Pa||(t.Pa=function(n,r,s){const i=oe(n);return i.Y_(),new zP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{jo:QP.bind(null,t),Jo:KP.bind(null,t),Zo:YP.bind(null,t),Q_:XP.bind(null,t)}),t.ua.push(async e=>{e?(t.Pa.D_(),Zm(t)?Jm(t):t.la.set("Unknown")):(await t.Pa.stop(),rb(t))})),t.Pa}function Ur(t){return t.Ta||(t.Ta=function(n,r,s){const i=oe(n);return i.Y_(),new BP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{jo:()=>Promise.resolve(),Jo:ej.bind(null,t),Zo:rj.bind(null,t),z_:tj.bind(null,t),j_:nj.bind(null,t)}),t.ua.push(async e=>{e?(t.Ta.D_(),await Tu(t)):(await t.Ta.stop(),t.oa.length>0&&(Y(Ns,`Stopping write stream with ${t.oa.length} pending writes`),t.oa=[]))})),t.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new ep(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tp(t,e){if(Jn("AsyncQueue",`${e}: ${t}`),Vi(t))return new K(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{static emptySet(e){return new di(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=xo(),this.sortedSet=new je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof di)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new di;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(){this.Ia=new je(te.comparator)}track(e){const n=e.doc.key,r=this.Ia.get(n);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(n,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(n):e.type===1&&r.type===2?this.Ia=this.Ia.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):se(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(n,e)}da(){const e=[];return this.Ia.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ii{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ii(e,n,di.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class oj{constructor(){this.queries=rv(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(n,r){const s=oe(n),i=s.queries;s.queries=rv(),i.forEach((o,l)=>{for(const u of l.Ra)u.onError(r)})})(this,new K(V.ABORTED,"Firestore shutting down"))}}function rv(){return new ks(t=>IE(t),gu)}async function ab(t,e){const n=oe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Va()&&e.ma()&&(r=2):(i=new ij,r=e.ma()?0:1);try{switch(r){case 0:i.Aa=await n.onListen(s,!0);break;case 1:i.Aa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=tp(o,`Initialization of query '${$s(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Ra.push(e),e.ga(n.onlineState),i.Aa&&e.pa(i.Aa)&&np(n)}async function lb(t,e){const n=oe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Ra.indexOf(e);o>=0&&(i.Ra.splice(o,1),i.Ra.length===0?s=e.ma()?0:1:!i.Va()&&e.ma()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function aj(t,e){const n=oe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Ra)l.pa(s)&&(r=!0);o.Aa=s}}r&&np(n)}function lj(t,e,n){const r=oe(t),s=r.queries.get(e);if(s)for(const i of s.Ra)i.onError(n);r.queries.delete(e)}function np(t){t.fa.forEach(e=>{e.next()})}var ff,sv;(sv=ff||(ff={})).ya="default",sv.Cache="cache";class cb{constructor(e,n,r){this.query=e,this.wa=n,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ii(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ba?this.Da(e)&&(this.wa.next(e),n=!0):this.va(e,this.onlineState)&&(this.Ca(e),n=!0),this.Sa=e,n}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let n=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),n=!0),n}va(e,n){if(!e.fromCache||!this.ma())return!0;const r=n!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const n=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ca(e){e=Ii.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==ff.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e){this.key=e}}class db{constructor(e){this.key=e}}class cj{constructor(e,n){this.query=e,this.qa=n,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=de(),this.mutatedKeys=de(),this.Ua=NE(e),this.Ka=new di(this.Ua)}get Wa(){return this.qa}Ga(e,n){const r=n?n.za:new nv,s=n?n.Ka:this.Ka;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,p)=>{const y=s.get(h),w=yu(this.query,p)?p:null,R=!!y&&this.mutatedKeys.has(y.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let C=!1;y&&w?y.data.isEqual(w.data)?R!==k&&(r.track({type:3,doc:w}),C=!0):this.ja(y,w)||(r.track({type:2,doc:w}),C=!0,(u&&this.Ua(w,u)>0||d&&this.Ua(w,d)<0)&&(l=!0)):!y&&w?(r.track({type:0,doc:w}),C=!0):y&&!w&&(r.track({type:1,doc:y}),C=!0,(u||d)&&(l=!0)),C&&(w?(o=o.add(w),i=k?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ka:o,za:r,ys:l,mutatedKeys:i}}ja(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const o=e.za.da();o.sort((h,p)=>function(w,R){const k=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se(20277,{Vt:C})}};return k(w)-k(R)}(h.type,p.type)||this.Ua(h.doc,p.doc)),this.Ha(r),s=s!=null&&s;const l=n&&!s?this.Ja():[],u=this.$a.size===0&&this.current&&!s?1:0,d=u!==this.Qa;return this.Qa=u,o.length!==0||d?{snapshot:new Ii(this.query,e.Ka,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:l}:{Ya:l}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new nv,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(n=>this.qa=this.qa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qa=this.qa.delete(n)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=de(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const n=[];return e.forEach(r=>{this.$a.has(r)||n.push(new db(r))}),this.$a.forEach(r=>{e.has(r)||n.push(new ub(r))}),n}Xa(e){this.qa=e.Ns,this.$a=de();const n=this.Ga(e.documents);return this.applyChanges(n,!0)}eu(){return Ii.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const rp="SyncEngine";class uj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dj{constructor(e){this.key=e,this.tu=!1}}class hj{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.nu={},this.ru=new ks(l=>IE(l),gu),this.iu=new Map,this.su=new Set,this.ou=new je(te.comparator),this._u=new Map,this.au=new Wm,this.uu={},this.cu=new Map,this.lu=Ti.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function fj(t,e,n=!0){const r=yb(t);let s;const i=r.ru.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.eu()):s=await hb(r,e,n,!0),s}async function mj(t,e){const n=yb(t);await hb(n,e,!0,!1)}async function hb(t,e,n,r){const s=await OP(t.localStore,Rn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await pj(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&tb(t.remoteStore,s),l}async function pj(t,e,n,r,s){t.Pu=(p,y,w)=>async function(k,C,T,_){let N=C.view.Ga(T);N.ys&&(N=await Yy(k.localStore,C.query,!1).then(({documents:E})=>C.view.Ga(E,N)));const j=_&&_.targetChanges.get(C.targetId),D=_&&_.targetMismatches.get(C.targetId)!=null,U=C.view.applyChanges(N,k.isPrimaryClient,j,D);return ov(k,C.targetId,U.Ya),U.snapshot}(t,p,y,w);const i=await Yy(t.localStore,e,!0),o=new cj(e,i.Ns),l=o.Ga(i.documents),u=Aa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);ov(t,n,d.Ya);const h=new uj(e,n,o);return t.ru.set(e,h),t.iu.has(n)?t.iu.get(n).push(e):t.iu.set(n,[e]),d.snapshot}async function gj(t,e,n){const r=oe(t),s=r.ru.get(e),i=r.iu.get(s.targetId);if(i.length>1)return r.iu.set(s.targetId,i.filter(o=>!gu(o,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await df(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ym(r.remoteStore,s.targetId),mf(r,s.targetId)}).catch(Mi)):(mf(r,s.targetId),await df(r.localStore,s.targetId,!0))}async function yj(t,e){const n=oe(t),r=n.ru.get(e),s=n.iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ym(n.remoteStore,r.targetId))}async function vj(t,e,n){const r=Ij(t);try{const s=await function(o,l){const u=oe(o),d=Qe.now(),h=l.reduce((w,R)=>w.add(R.key),de());let p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let R=Zn(),k=de();return u.Cs.getEntries(w,h).next(C=>{R=C,R.forEach((T,_)=>{_.isValidDocument()||(k=k.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,R)).next(C=>{p=C;const T=[];for(const _ of l){const N=O2(_,p.get(_.key).overlayedDocument);N!=null&&T.push(new Gr(_.key,N,yE(N.value.mapValue),bt.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,T,l)}).next(C=>{y=C;const T=C.applyToLocalDocumentSet(p,k);return u.documentOverlayCache.saveOverlays(w,C.batchId,T)})}).then(()=>({batchId:y.batchId,changes:RE(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.uu[o.currentUser.toKey()];d||(d=new je(ae)),d=d.insert(l,u),o.uu[o.currentUser.toKey()]=d}(r,s.batchId,n),await ka(r,s.changes),await Tu(r.remoteStore)}catch(s){const i=tp(s,"Failed to persist write");n.reject(i)}}async function fb(t,e){const n=oe(t);try{const r=await kP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n._u.get(i);o&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.tu=!0:s.modifiedDocuments.size>0?ve(o.tu,14607):s.removedDocuments.size>0&&(ve(o.tu,42227),o.tu=!1))}),await ka(n,r,e)}catch(r){await Mi(r)}}function iv(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ru.forEach((i,o)=>{const l=o.view.ga(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=oe(o);u.onlineState=l;let d=!1;u.queries.forEach((h,p)=>{for(const y of p.Ra)y.ga(l)&&(d=!0)}),d&&np(u)}(r.eventManager,e),s.length&&r.nu.Q_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function xj(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r._u.get(e),i=s&&s.key;if(i){let o=new je(te.comparator);o=o.insert(i,mt.newNoDocument(i,ie.min()));const l=de().add(i),u=new wu(ie.min(),new Map,new je(ae),o,l);await fb(r,u),r.ou=r.ou.remove(i),r._u.delete(e),sp(r)}else await df(r.localStore,e,!1).then(()=>mf(r,e,n)).catch(Mi)}async function _j(t,e){const n=oe(t),r=e.batch.batchId;try{const s=await CP(n.localStore,e);pb(n,r,null),mb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ka(n,s)}catch(s){await Mi(s)}}async function wj(t,e,n){const r=oe(t);try{const s=await function(o,l){const u=oe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(p=>(ve(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);pb(r,e,n),mb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ka(r,s)}catch(s){await Mi(s)}}function mb(t,e){(t.cu.get(e)||[]).forEach(n=>{n.resolve()}),t.cu.delete(e)}function pb(t,e,n){const r=oe(t);let s=r.uu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.uu[r.currentUser.toKey()]=s}}function mf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.iu.get(e))t.ru.delete(r),n&&t.nu.Tu(r,n);t.iu.delete(e),t.isPrimaryClient&&t.au.Ur(e).forEach(r=>{t.au.containsKey(r)||gb(t,r)})}function gb(t,e){t.su.delete(e.path.canonicalString());const n=t.ou.get(e);n!==null&&(Ym(t.remoteStore,n),t.ou=t.ou.remove(e),t._u.delete(n),sp(t))}function ov(t,e,n){for(const r of n)r instanceof ub?(t.au.addReference(r.key,e),Ej(t,r)):r instanceof db?(Y(rp,"Document no longer in limbo: "+r.key),t.au.removeReference(r.key,e),t.au.containsKey(r.key)||gb(t,r.key)):se(19791,{Iu:r})}function Ej(t,e){const n=e.key,r=n.path.canonicalString();t.ou.get(n)||t.su.has(r)||(Y(rp,"New document in limbo: "+n),t.su.add(r),sp(t))}function sp(t){for(;t.su.size>0&&t.ou.size<t.maxConcurrentLimboResolutions;){const e=t.su.values().next().value;t.su.delete(e);const n=new te(Te.fromString(e)),r=t.lu.next();t._u.set(r,new dj(n)),t.ou=t.ou.insert(n,r),tb(t.remoteStore,new _r(Rn(Fm(n.path)),r,"TargetPurposeLimboResolution",fu.le))}}async function ka(t,e,n){const r=oe(t),s=[],i=[],o=[];r.ru.isEmpty()||(r.ru.forEach((l,u)=>{o.push(r.Pu(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Qm.Ps(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.nu.Q_(s),await async function(u,d){const h=oe(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>$.forEach(d,y=>$.forEach(y.ls,w=>h.persistence.referenceDelegate.addReference(p,y.targetId,w)).next(()=>$.forEach(y.hs,w=>h.persistence.referenceDelegate.removeReference(p,y.targetId,w)))))}catch(p){if(!Vi(p))throw p;Y(Km,"Failed to update sequence numbers: "+p)}for(const p of d){const y=p.targetId;if(!p.fromCache){const w=h.Ss.get(y),R=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(R);h.Ss=h.Ss.insert(y,k)}}}(r.localStore,i))}async function bj(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){Y(rp,"User change. New user:",e.toKey());const r=await XE(n.localStore,e);n.currentUser=e,function(i,o){i.cu.forEach(l=>{l.forEach(u=>{u.reject(new K(V.CANCELLED,o))})}),i.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ka(n,r.Ms)}}function Tj(t,e){const n=oe(t),r=n._u.get(e);if(r&&r.tu)return de().add(r.key);{let s=de();const i=n.iu.get(e);if(!i)return s;for(const o of i){const l=n.ru.get(o);s=s.unionWith(l.view.Wa)}return s}}function yb(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xj.bind(null,e),e.nu.Q_=aj.bind(null,e.eventManager),e.nu.Tu=lj.bind(null,e.eventManager),e}function Ij(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_j.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wj.bind(null,e),e}class zc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Eu(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,n){return null}fu(e,n){return null}Vu(e){return AP(this.persistence,new NP,e.initialUser,this.serializer)}Ru(e){return new YE(Gm.Ei,this.serializer)}Au(e){return new LP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zc.provider={build:()=>new zc};class Nj extends zc{constructor(e){super(),this.cacheSizeBytes=e}mu(e,n){ve(this.persistence.referenceDelegate instanceof Uc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new dP(r,e.asyncQueue,n)}Ru(e){const n=this.cacheSizeBytes!==void 0?Rt.withCacheSize(this.cacheSizeBytes):Rt.DEFAULT;return new YE(r=>Uc.Ei(r,n),this.serializer)}}class pf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>iv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bj.bind(null,this.syncEngine),await sj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new oj}()}createDatastore(e){const n=Eu(e.databaseInfo.databaseId),r=function(i){return new FP(i)}(e.databaseInfo);return function(i,o,l,u){return new HP(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new GP(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>iv(this.syncEngine,n,0),function(){return Zy.C()?new Zy:new MP}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,h){const p=new hj(s,i,o,l,u,d);return h&&(p.hu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=oe(s);Y(Ns,"RemoteStore shutting down."),i.aa.add(5),await Ca(i),i.ca.shutdown(),i.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}pf.provider={build:()=>new pf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Jn("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="FirestoreClient";class Sj{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ht.UNAUTHENTICATED,this.clientId=aE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Y(Fr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Y(Fr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=tp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ld(t,e){t.asyncQueue.verifyOperationInProgress(),Y(Fr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await XE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function av(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Rj(t);Y(Fr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>tv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>tv(e.remoteStore,s)),t._onlineComponents=e}async function Rj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(Fr,"Using user provided OfflineComponentProvider");try{await Ld(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;_i("Error using user provided cache. Falling back to memory cache: "+n),await Ld(t,new zc)}}else Y(Fr,"Using default OfflineComponentProvider"),await Ld(t,new Nj(void 0));return t._offlineComponents}async function xb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(Fr,"Using user provided OnlineComponentProvider"),await av(t,t._uninitializedComponentsProvider._online)):(Y(Fr,"Using default OnlineComponentProvider"),await av(t,new pf))),t._onlineComponents}function Aj(t){return xb(t).then(e=>e.syncEngine)}async function _b(t){const e=await xb(t),n=e.eventManager;return n.onListen=fj.bind(null,e.syncEngine),n.onUnlisten=gj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=yj.bind(null,e.syncEngine),n}function Cj(t,e,n={}){const r=new qn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const h=new vb({next:y=>{h.yu(),o.enqueueAndForget(()=>lb(i,p));const w=y.docs.has(l);!w&&y.fromCache?d.reject(new K(V.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&y.fromCache&&u&&u.source==="server"?d.reject(new K(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(y)},error:y=>d.reject(y)}),p=new cb(Fm(l.path),h,{includeMetadataChanges:!0,Fa:!0});return ab(i,p)}(await _b(t),t.asyncQueue,e,n,r)),r.promise}function kj(t,e,n={}){const r=new qn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const h=new vb({next:y=>{h.yu(),o.enqueueAndForget(()=>lb(i,p)),y.fromCache&&u.source==="server"?d.reject(new K(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),p=new cb(l,h,{includeMetadataChanges:!0,Fa:!0});return ab(i,p)}(await _b(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(t,e,n){if(!n)throw new K(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Pj(t,e,n,r){if(e===!0&&r===!0)throw new K(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cv(t){if(!te.isDocumentKey(t))throw new K(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uv(t){if(te.isDocumentKey(t))throw new K(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Iu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se(12329,{type:typeof t})}function nn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Iu(t);throw new K(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function jj(t,e){if(e<=0)throw new K(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="firestore.googleapis.com",dv=!0;class hv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bb,this.ssl=dv}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:dv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=KE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cP)throw new K(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Pj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Fk;switch(r.type){case"firstParty":return new Hk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=lv.get(n);r&&(Y("ComponentProvider","Removing Datastore"),lv.delete(n),r.terminate())}(this),Promise.resolve()}}function Oj(t,e,n,r={}){var s;t=nn(t,Nu);const i=Oi(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&Em(`https://${u}`),o.host!==bb&&o.host!==u&&_i("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:r});if(!ws(d,l)&&(t._setSettings(d),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=ht.MOCK_USER;else{h=cw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new K(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ht(y)}t._authCredentials=new zk(new iE(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qr(this.firestore,e,this._query)}}class Tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}}class Pr extends Qr{constructor(e,n,r){super(e,n,Fm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new te(e))}withConverter(e){return new Pr(this.firestore,e,this._path)}}function Md(t,e,...n){if(t=Ne(t),Eb("collection","path",e),t instanceof Nu){const r=Te.fromString(e,...n);return uv(r),new Pr(t,null,r)}{if(!(t instanceof Tt||t instanceof Pr))throw new K(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return uv(r),new Pr(t.firestore,null,r)}}function Lo(t,e,...n){if(t=Ne(t),arguments.length===1&&(e=aE.newId()),Eb("doc","path",e),t instanceof Nu){const r=Te.fromString(e,...n);return cv(r),new Tt(t,null,new te(r))}{if(!(t instanceof Tt||t instanceof Pr))throw new K(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return cv(r),new Tt(t.firestore,t instanceof Pr?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="AsyncQueue";class mv{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new ZE(this,"async_queue_retry"),this.ju=()=>{const r=Dd();r&&Y(fv,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const n=Dd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const n=Dd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const n=new qn;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Vi(e))throw e;Y(fv,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const n=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,Jn("INTERNAL UNHANDLED ERROR: ",pv(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=n,n}enqueueAfterDelay(e,n,r){this.Ju(),this.zu.indexOf(e)>-1&&(n=0);const s=ep.createAndSchedule(this,e,n,r,i=>this.Xu(i));return this.Uu.push(s),s}Ju(){this.Ku&&se(47125,{ec:pv(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const n of this.Uu)if(n.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const n=this.Uu.indexOf(e);this.Uu.splice(n,1)}}function pv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Kr extends Nu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new mv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mv(e),this._firestoreClient=void 0,await e}}}function Dj(t,e){const n=typeof t=="object"?t:Im(),r=typeof t=="string"?t:Dc,s=cu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=ow("firestore");i&&Oj(s,...i)}return s}function Su(t){if(t._terminated)throw new K(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Lj(t),t._firestoreClient}function Lj(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,h){return new o2(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,wb(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new Sj(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ni(it.fromBase64String(e))}catch(n){throw new K(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ni(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj=/^__.*__$/;class Vj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ra(e,this.data,n,this.fieldTransforms)}}class Tb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ib(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se(40011,{oc:t})}}class ap{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this._c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new ap(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ac({path:r,cc:!1});return s.lc(e),s}hc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ac({path:r,cc:!1});return s._c(),s}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Bc(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(Ib(this.oc)&&Mj.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class $j{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Eu(e)}dc(e,n,r,s=!1){return new ap({oc:e,methodName:n,Ec:r,path:nt.emptyPath(),cc:!1,Ic:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Oa(t){const e=t._freezeSettings(),n=Eu(t._databaseId);return new $j(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lp(t,e,n,r,s,i={}){const o=t.dc(i.merge||i.mergeFields?2:0,e,n,s);dp("Data must be an object, but it was:",o,r);const l=Rb(r,o);let u,d;if(i.merge)u=new Bt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const p of i.mergeFields){const y=gf(e,p,n);if(!o.contains(y))throw new K(V.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);Cb(h,y)||h.push(y)}u=new Bt(h),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new Vj(new Ct(l),u,d)}class Ru extends ja{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ru}}class cp extends ja{_toFieldTransform(e){return new LE(e.path,new ca)}isEqual(e){return e instanceof cp}}class up extends ja{constructor(e,n){super(e),this.Rc=n}_toFieldTransform(e){const n=new ha(e.serializer,kE(e.serializer,this.Rc));return new LE(e.path,n)}isEqual(e){return e instanceof up&&this.Rc===e.Rc}}function Nb(t,e,n,r){const s=t.dc(1,e,n);dp("Data must be an object, but it was:",s,r);const i=[],o=Ct.empty();Wr(r,(u,d)=>{const h=hp(e,u,n);d=Ne(d);const p=s.hc(h);if(d instanceof Ru)i.push(h);else{const y=Da(d,p);y!=null&&(i.push(h),o.set(h,y))}});const l=new Bt(i);return new Tb(o,l,s.fieldTransforms)}function Sb(t,e,n,r,s,i){const o=t.dc(1,e,n),l=[gf(e,r,n)],u=[s];if(i.length%2!=0)throw new K(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<i.length;y+=2)l.push(gf(e,i[y])),u.push(i[y+1]);const d=[],h=Ct.empty();for(let y=l.length-1;y>=0;--y)if(!Cb(d,l[y])){const w=l[y];let R=u[y];R=Ne(R);const k=o.hc(w);if(R instanceof Ru)d.push(w);else{const C=Da(R,k);C!=null&&(d.push(w),h.set(w,C))}}const p=new Bt(d);return new Tb(h,p,o.fieldTransforms)}function Uj(t,e,n,r=!1){return Da(n,t.dc(r?4:3,e))}function Da(t,e){if(Ab(t=Ne(t)))return dp("Unsupported field value:",e,t),Rb(t,e);if(t instanceof ja)return function(r,s){if(!Ib(s.oc))throw s.Tc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Tc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=Da(l,s.Pc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Qe.fromDate(r);return{timestampValue:$c(s.serializer,i)}}if(r instanceof Qe){const i=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$c(s.serializer,i)}}if(r instanceof ip)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ni)return{bytesValue:zE(s.serializer,r._byteString)};if(r instanceof Tt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Tc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Hm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof op)return function(o,l){return{mapValue:{fields:{[pE]:{stringValue:gE},[Lc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Tc("VectorValues must only contain numeric values.");return zm(l.serializer,d)})}}}}}}(r,s);throw s.Tc(`Unsupported field value: ${Iu(r)}`)}(t,e)}function Rb(t,e){const n={};return cE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wr(t,(r,s)=>{const i=Da(s,e.uc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Ab(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof ip||t instanceof Ni||t instanceof Tt||t instanceof ja||t instanceof op)}function dp(t,e,n){if(!Ab(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Iu(n);throw r==="an object"?e.Tc(t+" a custom object"):e.Tc(t+" "+r)}}function gf(t,e,n){if((e=Ne(e))instanceof Pa)return e._internalPath;if(typeof e=="string")return hp(t,e);throw Bc("Field path arguments must be of type string or ",t,!1,void 0,n)}const Fj=new RegExp("[~\\*/\\[\\]]");function hp(t,e,n){if(e.search(Fj)>=0)throw Bc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Pa(...e.split("."))._internalPath}catch{throw Bc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new K(V.INVALID_ARGUMENT,l+t+u)}function Cb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Au("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zj extends kb{data(){return super.data()}}function Au(t,e){return typeof e=="string"?hp(t,e):e instanceof Pa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fp{}class mp extends fp{}function Tl(t,e,...n){let r=[];e instanceof fp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof pp).length,l=i.filter(u=>u instanceof Cu).length;if(o>1||o>0&&l>0)throw new K(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Cu extends mp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Cu(e,n,r)}_apply(e){const n=this._parse(e);return Pb(e._query,n),new Qr(e.firestore,e.converter,of(e._query,n))}_parse(e){const n=Oa(e.firestore);return function(i,o,l,u,d,h,p){let y;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new K(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){yv(p,h);const R=[];for(const k of p)R.push(gv(u,i,k));y={arrayValue:{values:R}}}else y=gv(u,i,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||yv(p,h),y=Uj(l,o,p,h==="in"||h==="not-in");return He.create(d,h,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function eD(t,e,n){const r=e,s=Au("where",t);return Cu._create(s,r,n)}class pp extends fp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:pn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)Pb(o,u),o=of(o,u)}(e._query,n),new Qr(e.firestore,e.converter,of(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gp extends mp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new gp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new K(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new la(i,o)}(e._query,this._field,this._direction);return new Qr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new $i(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Vd(t,e="asc"){const n=e,r=Au("orderBy",t);return gp._create(r,n)}class yp extends mp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new yp(e,n,r)}_apply(e){return new Qr(e.firestore,e.converter,Vc(e._query,this._limit,this._limitType))}}function Il(t){return jj("limit",t),yp._create("limit",t,"F")}function gv(t,e,n){if(typeof(n=Ne(n))=="string"){if(n==="")throw new K(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TE(e)&&n.indexOf("/")!==-1)throw new K(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Te.fromString(n));if(!te.isDocumentKey(r))throw new K(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ky(t,new te(r))}if(n instanceof Tt)return ky(t,n._key);throw new K(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Iu(n)}.`)}function yv(t,e){if(!Array.isArray(t)||t.length===0)throw new K(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Pb(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class qj{convertValue(e,n="none"){switch($r(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Wr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Lc].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ue(o.doubleValue));return new op(i)}convertGeoPoint(e){return new ip(Ue(e.latitude),Ue(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=pu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ia(e));default:return null}}convertTimestamp(e){const n=Mr(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Te.fromString(e);ve(QE(r),9688,{name:e});const s=new oa(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||Jn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jb extends kb{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Au("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Jl extends jb{data(e={}){return super.data(e)}}class Hj{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new wo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Jl(this._firestore,this._userDataWriter,r.key,r,new wo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Jl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new wo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Jl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new wo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:Wj(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Wj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t){t=nn(t,Tt);const e=nn(t.firestore,Kr);return Cj(Su(e),t._key).then(n=>Qj(e,t,n))}class Ob extends qj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ni(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}function $d(t){t=nn(t,Qr);const e=nn(t.firestore,Kr),n=Su(e),r=new Ob(e);return Bj(t._query),kj(n,t._query).then(s=>new Hj(e,r,t,s))}function yf(t,e,n){t=nn(t,Tt);const r=nn(t.firestore,Kr),s=vp(t.converter,e,n);return La(r,[lp(Oa(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,bt.none())])}function Gj(t,e,n,...r){t=nn(t,Tt);const s=nn(t.firestore,Kr),i=Oa(s);let o;return o=typeof(e=Ne(e))=="string"||e instanceof Pa?Sb(i,"updateDoc",t._key,e,n,r):Nb(i,"updateDoc",t._key,e),La(s,[o.toMutation(t._key,bt.exists(!0))])}function tD(t){return La(nn(t.firestore,Kr),[new _u(t._key,bt.none())])}function nD(t,e){const n=nn(t.firestore,Kr),r=Lo(t),s=vp(t.converter,e);return La(n,[lp(Oa(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,bt.exists(!1))]).then(()=>r)}function La(t,e){return function(r,s){const i=new qn;return r.asyncQueue.enqueueAndForget(async()=>vj(await Aj(r),s,i)),i.promise}(Su(t),e)}function Qj(t,e,n){const r=n.docs.get(e._key),s=new Ob(t);return new jb(t,s,e._key,r,new wo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Oa(e)}set(e,n,r){this._verifyNotCommitted();const s=Ud(e,this._firestore),i=vp(s.converter,n,r),o=lp(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,bt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Ud(e,this._firestore);let o;return o=typeof(n=Ne(n))=="string"||n instanceof Pa?Sb(this._dataReader,"WriteBatch.update",i._key,n,r,s):Nb(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ud(e,this._firestore);return this._mutations=this._mutations.concat(new _u(n._key,bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new K(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ud(t,e){if((t=Ne(t)).firestore!==e)throw new K(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function rD(){return new cp("serverTimestamp")}function sD(t){return new up("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){return Su(t=nn(t,Kr)),new Kj(t,e=>La(t,e))}(function(e,n=!0){(function(s){Li=s})(Cs),Es(new Dr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Kr(new Bk(r.getProvider("auth-internal")),new Wk(o,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new K(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oa(d.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),In(xy,_y,e),In(xy,_y,"esm2017")})();var Yj="firebase",Xj="11.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In(Yj,Xj,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="firebasestorage.googleapis.com",Lb="storageBucket",Jj=2*60*1e3,Zj=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me extends kn{constructor(e,n,r=0){super(Fd(e),`Firebase Storage: ${n} (${Fd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Me.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Fd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Le;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Le||(Le={}));function Fd(t){return"storage/"+t}function xp(){const t="An unknown error occurred, please check the error payload for server response.";return new Me(Le.UNKNOWN,t)}function e4(t){return new Me(Le.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function t4(t){return new Me(Le.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function n4(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Me(Le.UNAUTHENTICATED,t)}function r4(){return new Me(Le.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function s4(t){return new Me(Le.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function i4(){return new Me(Le.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function o4(){return new Me(Le.CANCELED,"User canceled the upload/download.")}function a4(t){return new Me(Le.INVALID_URL,"Invalid URL '"+t+"'.")}function l4(t){return new Me(Le.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function c4(){return new Me(Le.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Lb+"' property when initializing the app?")}function u4(){return new Me(Le.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function d4(){return new Me(Le.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function h4(t){return new Me(Le.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function vf(t){return new Me(Le.INVALID_ARGUMENT,t)}function Mb(){return new Me(Le.APP_DELETED,"The Firebase app was deleted.")}function f4(t){return new Me(Le.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Mo(t,e){return new Me(Le.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function co(t){throw new Me(Le.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=qt.makeFromUrl(e,n)}catch{return new qt(e,"")}if(r.path==="")return r;throw l4(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(j){j.path_=decodeURIComponent(j.path)}const h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",w=new RegExp(`^https?://${p}/${h}/b/${s}/o${y}`,"i"),R={bucket:1,path:3},k=n===Db?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",T=new RegExp(`^https?://${k}/${s}/${C}`,"i"),N=[{regex:l,indices:u,postModify:i},{regex:w,indices:R,postModify:d},{regex:T,indices:{bucket:1,path:2},postModify:d}];for(let j=0;j<N.length;j++){const D=N[j],U=D.regex.exec(e);if(U){const E=U[D.indices.bucket];let g=U[D.indices.path];g||(g=""),r=new qt(E,g),D.postModify(r);break}}if(r==null)throw a4(e);return r}}class m4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let d=!1;function h(...C){d||(d=!0,e.apply(null,C))}function p(C){s=setTimeout(()=>{s=null,t(w,u())},C)}function y(){i&&clearTimeout(i)}function w(C,...T){if(d){y();return}if(C){y(),h.call(null,C,...T);return}if(u()||o){y(),h.call(null,C,...T);return}r<64&&(r*=2);let N;l===1?(l=2,N=0):N=(r+Math.random())*1e3,p(N)}let R=!1;function k(C){R||(R=!0,y(),!d&&(s!==null?(C||(l=2),clearTimeout(s),p(0)):C||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function g4(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t){return t!==void 0}function v4(t){return typeof t=="object"&&!Array.isArray(t)}function _p(t){return typeof t=="string"||t instanceof String}function xv(t){return wp()&&t instanceof Blob}function wp(){return typeof Blob<"u"}function _v(t,e,n,r){if(r<e)throw vf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw vf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Vb(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ms;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ms||(ms={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n,r,s,i,o,l,u,d,h,p,y=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=p,this.retry=y,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,k)=>{this.resolve_=R,this.reject_=k,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Nl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===ms.NO_ERROR,u=i.getStatus();if(!l||x4(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===ms.ABORT;r(!1,new Nl(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Nl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());y4(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=xp();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?Mb():o4();o(u)}else{const u=i4();o(u)}};this.canceled_?n(!1,new Nl(!1,null,!0)):this.backoffId_=p4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&g4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Nl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function w4(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function E4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function b4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function T4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function I4(t,e,n,r,s,i,o=!0,l=!1){const u=Vb(t.urlParams),d=t.url+u,h=Object.assign({},t.headers);return b4(h,e),w4(h,n),E4(h,i),T4(h,r),new _4(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function S4(...t){const e=N4();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(wp())return new Blob(t);throw new Me(Le.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function R4(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(t){if(typeof atob>"u")throw h4("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class zd{constructor(e,n){this.data=e,this.contentType=n||null}}function C4(t,e){switch(t){case En.RAW:return new zd($b(e));case En.BASE64:case En.BASE64URL:return new zd(Ub(t,e));case En.DATA_URL:return new zd(P4(e),j4(e))}throw xp()}function $b(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function k4(t){let e;try{e=decodeURIComponent(t)}catch{throw Mo(En.DATA_URL,"Malformed data URL.")}return $b(e)}function Ub(t,e){switch(t){case En.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Mo(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case En.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Mo(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=A4(e)}catch(s){throw s.message.includes("polyfill")?s:Mo(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Fb{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Mo(En.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=O4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function P4(t){const e=new Fb(t);return e.base64?Ub(En.BASE64,e.rest):k4(e.rest)}function j4(t){return new Fb(t).contentType}function O4(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n){let r=0,s="";xv(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(xv(this.data_)){const r=this.data_,s=R4(r,e,n);return s===null?null:new yr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new yr(r,!0)}}static getBlob(...e){if(wp()){const n=e.map(r=>r instanceof yr?r.data_:r);return new yr(S4.apply(null,n))}else{const n=e.map(o=>_p(o)?C4(En.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new yr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t){let e;try{e=JSON.parse(t)}catch{return null}return v4(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function L4(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Bb(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(t,e){return e}class _t{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||M4}}let Sl=null;function V4(t){return!_p(t)||t.length<2?t:Bb(t)}function qb(){if(Sl)return Sl;const t=[];t.push(new _t("bucket")),t.push(new _t("generation")),t.push(new _t("metageneration")),t.push(new _t("name","fullPath",!0));function e(i,o){return V4(o)}const n=new _t("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new _t("size");return s.xform=r,t.push(s),t.push(new _t("timeCreated")),t.push(new _t("updated")),t.push(new _t("md5Hash",null,!0)),t.push(new _t("cacheControl",null,!0)),t.push(new _t("contentDisposition",null,!0)),t.push(new _t("contentEncoding",null,!0)),t.push(new _t("contentLanguage",null,!0)),t.push(new _t("contentType",null,!0)),t.push(new _t("metadata","customMetadata",!0)),Sl=t,Sl}function $4(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new qt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function U4(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return $4(r,t),r}function Hb(t,e,n){const r=zb(e);return r===null?null:U4(t,r,n)}function F4(t,e,n,r){const s=zb(e);if(s===null||!_p(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const h=t.bucket,p=t.fullPath,y="/b/"+o(h)+"/o/"+o(p),w=Ep(y,n,r),R=Vb({alt:"media",token:d});return w+R})[0]}function z4(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Wb{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(t){if(!t)throw xp()}function B4(t,e){function n(r,s){const i=Hb(t,s,e);return Gb(i!==null),i}return n}function q4(t,e){function n(r,s){const i=Hb(t,s,e);return Gb(i!==null),F4(i,s,t.host,t._protocol)}return n}function Qb(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=r4():s=n4():n.getStatus()===402?s=t4(t.bucket):n.getStatus()===403?s=s4(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function H4(t){const e=Qb(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=e4(t.path)),i.serverResponse=s.serverResponse,i}return n}function W4(t,e,n){const r=e.fullServerUrl(),s=Ep(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new Wb(s,i,q4(t,n),o);return l.errorHandler=H4(e),l}function G4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Q4(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=G4(null,e)),r}function K4(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let N="";for(let j=0;j<2;j++)N=N+Math.random().toString().slice(2);return N}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const d=Q4(e,r,s),h=z4(d,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,y=`\r
--`+u+"--",w=yr.getBlob(p,r,y);if(w===null)throw u4();const R={name:d.fullPath},k=Ep(i,t.host,t._protocol),C="POST",T=t.maxUploadRetryTime,_=new Wb(k,C,B4(t,n),T);return _.urlParams=R,_.headers=o,_.body=w.uploadData(),_.errorHandler=Qb(e),_}class Y4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ms.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ms.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ms.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw co("cannot .send() more than once");if(Oi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw co("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw co("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw co("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw co("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class X4 extends Y4{initXhr(){this.xhr_.responseType="text"}}function Kb(){return new X4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n){this._service=e,n instanceof qt?this._location=n:this._location=qt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ss(e,n)}get root(){const e=new qt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Bb(this._location.path)}get storage(){return this._service}get parent(){const e=D4(this._location.path);if(e===null)return null;const n=new qt(this._location.bucket,e);return new Ss(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw f4(e)}}function J4(t,e,n){t._throwIfRoot("uploadBytes");const r=K4(t.storage,t._location,qb(),new yr(e,!0),n);return t.storage.makeRequestWithTokens(r,Kb).then(s=>({metadata:s,ref:t}))}function Z4(t){t._throwIfRoot("getDownloadURL");const e=W4(t.storage,t._location,qb());return t.storage.makeRequestWithTokens(e,Kb).then(n=>{if(n===null)throw d4();return n})}function eO(t,e){const n=L4(t._location.path,e),r=new qt(t._location.bucket,n);return new Ss(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(t){return/^[A-Za-z]+:\/\//.test(t)}function nO(t,e){return new Ss(t,e)}function Yb(t,e){if(t instanceof bp){const n=t;if(n._bucket==null)throw c4();const r=new Ss(n,n._bucket);return e!=null?Yb(r,e):r}else return e!==void 0?eO(t,e):t}function rO(t,e){if(e&&tO(e)){if(t instanceof bp)return nO(t,e);throw vf("To use ref(service, url), the first argument must be a Storage instance.")}else return Yb(t,e)}function wv(t,e){const n=e==null?void 0:e[Lb];return n==null?null:qt.makeFromBucketSpec(n,t)}function sO(t,e,n,r={}){t.host=`${e}:${n}`;const s=Oi(e);s&&Em(`https://${t.host}`),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:cw(i,t.app.options.projectId))}class bp{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=Db,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Jj,this._maxUploadRetryTime=Zj,this._requests=new Set,s!=null?this._bucket=qt.makeFromBucketSpec(s,this._host):this._bucket=wv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qt.makeFromBucketSpec(this._url,e):this._bucket=wv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_v("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_v("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ft(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ss(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new m4(Mb());{const o=I4(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Ev="@firebase/storage",bv="0.13.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="storage";function oD(t,e,n){return t=Ne(t),J4(t,e,n)}function aD(t){return t=Ne(t),Z4(t)}function lD(t,e){return t=Ne(t),rO(t,e)}function iO(t=Im(),e){t=Ne(t);const r=cu(t,Xb).getImmediate({identifier:e}),s=ow("storage");return s&&oO(r,...s),r}function oO(t,e,n,r={}){sO(t,e,n,r)}function aO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new bp(n,r,s,e,Cs)}function lO(){Es(new Dr(Xb,aO,"PUBLIC").setMultipleInstances(!0)),In(Ev,bv,""),In(Ev,bv,"esm2017")}lO();const cO={apiKey:"AIzaSyC_kUWaN1D5n9BeRSTsKf7wdS6-4CHREAo",authDomain:"wholesaler-app-841b7.firebaseapp.com",projectId:"wholesaler-app-841b7",storageBucket:"wholesaler-app-841b7.firebasestorage.app",messagingSenderId:"188437846114",appId:"1:188437846114:web:44eab90f30351e2bd3993b"},Tp=hw(cO),ps=Dj(Tp),as=$k(Tp),cD=iO(Tp),Jb=A.createContext(null),uO=({children:t})=>{const[e,n]=A.useState(null),[r,s]=A.useState(!0),[i,o]=A.useState(null),[l,u]=A.useState("guest"),[d,h]=A.useState(null),[p,y]=A.useState({});A.useEffect(()=>{const E=SC(as,async g=>{if(s(!0),o(null),g)try{const v=Lo(ps,"users",g.uid),I=await vv(v);if(I.exists()){const x=I.data(),P=x.requiresApproval||!1,S=x.approved||!1,z=x.status||"active";if(!P||S){const ee={...g,...x,canAccess:!0};n(ee),u(x.accountType||"user"),h({required:P,approved:S,status:z,canAccess:!0}),y(x.permissions||{}),await Gj(v,{lastLogin:new Date,isActive:!0})}else{const ee={uid:g.uid,email:g.email,displayName:x.displayName,accountType:x.accountType,status:z,canAccess:!1,requiresApproval:!0,approved:!1};n(ee),u("pending"),h({required:!0,approved:!1,status:z,canAccess:!1,message:w(z)}),y({})}}else{await yf(v,{uid:g.uid,email:g.email,displayName:g.displayName||g.email.split("@")[0],accountType:"user",approved:!0,status:"active",requiresApproval:!1,permissions:{canCreateOrders:!0,canManageInventory:!1,canViewAllOrders:!1,canApproveUsers:!1,canManageUsers:!1},createdAt:new Date,updatedAt:new Date,isActive:!0});const x={...g,accountType:"user",approved:!0,canAccess:!0};n(x),u("user"),h({required:!1,approved:!0,status:"active",canAccess:!0}),y({canCreateOrders:!0,canManageInventory:!1,canViewAllOrders:!1,canApproveUsers:!1,canManageUsers:!1})}}catch(v){console.error("Error fetching user data:",v),o("Failed to load user data"),n({...g,canAccess:!0,accountType:"user"}),u("user"),h({required:!1,approved:!0,status:"active",canAccess:!0})}else n(null),u("guest"),h(null),y({});s(!1)});return()=>E()},[]);const w=E=>{switch(E){case"pending_approval":return"Your account is pending admin approval. You will receive an email notification once approved.";case"rejected":return"Your account application was rejected. Please contact support for more information.";case"suspended":return"Your account has been suspended. Please contact support for assistance.";default:return"Your account requires approval before you can access the system."}},R=async(E,g,v=!1)=>{try{return s(!0),o(null),(await bC(as,E,g)).user}catch(I){let x="Login failed. Please try again.";switch(I.code){case"auth/user-not-found":x="No account found with this email address.";break;case"auth/wrong-password":x="Incorrect password. Please try again.";break;case"auth/invalid-email":x="Invalid email address format.";break;case"auth/user-disabled":x="This account has been disabled. Please contact support.";break;case"auth/too-many-requests":x="Too many failed login attempts. Please try again later.";break;default:x=I.message||"Login failed. Please try again."}throw o(x),new Error(x)}finally{s(!1)}},k=async(E,g,v)=>{try{s(!0),o(null);const I=await Uw(as,E,g);return v&&await Fw(I.user,{displayName:v}),await yf(Lo(ps,"users",I.user.uid),{uid:I.user.uid,email:E,displayName:v||E.split("@")[0],accountType:"user",approved:!0,status:"active",requiresApproval:!1,permissions:{canCreateOrders:!0,canManageInventory:!1,canViewAllOrders:!1,canApproveUsers:!1,canManageUsers:!1},createdAt:new Date,updatedAt:new Date,isActive:!0}),I.user}catch(I){let x="Registration failed. Please try again.";switch(I.code){case"auth/email-already-in-use":x="An account with this email already exists.";break;case"auth/weak-password":x="Password is too weak. Please choose a stronger password.";break;case"auth/invalid-email":x="Invalid email address format.";break;default:x=I.message||"Registration failed. Please try again."}throw o(x),new Error(x)}finally{s(!1)}},C=async()=>{try{o(null),await RC(as)}catch(E){throw o(E.message),E}},T=async E=>{try{s(!0),o(null),await $w(as,E)}catch(g){let v="Failed to send password reset email.";switch(g.code){case"auth/user-not-found":v="No account found with this email address.";break;case"auth/invalid-email":v="Invalid email address format.";break;default:v=g.message||"Failed to send password reset email."}throw o(v),new Error(v)}finally{s(!1)}},_=E=>p[E]===!0,U={user:e,loading:r,error:i,userRole:l,approvalStatus:d,permissions:p,login:R,logout:C,register:k,resetPassword:T,hasPermission:_,canAccess:(E=null,g=null)=>!(!e||!e.canAccess||E&&l!==E||g&&!_(g)),refreshUserData:async()=>{if(e)try{const E=Lo(ps,"users",e.uid),g=await vv(E);if(g.exists()){const v=g.data(),I={...e,...v,canAccess:v.approved||!v.requiresApproval};n(I),u(v.accountType||"user"),h({required:v.requiresApproval||!1,approved:v.approved||!1,status:v.status||"active",canAccess:v.approved||!v.requiresApproval}),y(v.permissions||{})}}catch(E){console.error("Error refreshing user data:",E)}},clearError:()=>{o(null)}};return a.jsx(Jb.Provider,{value:U,children:t})},Zb=A.createContext(null),dO=({children:t})=>{const[e,n]=A.useState(()=>{const s=localStorage.getItem("wholesaler-theme");return s?s==="dark":!!(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)}),r=()=>{n(s=>!s)};return A.useEffect(()=>{localStorage.setItem("wholesaler-theme",e?"dark":"light"),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e]),A.useEffect(()=>{const s=window.matchMedia("(prefers-color-scheme: dark)"),i=o=>{localStorage.getItem("wholesaler-theme")||n(o.matches)};return s.addEventListener?s.addEventListener("change",i):s.addListener(i),()=>{s.removeEventListener?s.removeEventListener("change",i):s.removeListener(i)}},[]),a.jsx(Zb.Provider,{value:{darkMode:e,toggleDarkMode:r},children:t})},Lt=()=>{const t=A.useContext(Zb);if(t===null)throw new Error("useTheme must be used within a ThemeProvider");return t},Yr=()=>{const t=A.useContext(Jb);if(t===null)throw new Error("useAuth must be used within an AuthProvider");return t},e1=A.createContext(),hO=({children:t})=>{const{user:e}=Yr(),[n,r]=A.useState([]),[s,i]=A.useState(!1),o=E=>E?`wholesaler-cart-${E}`:"wholesaler-cart-guest",l=E=>{try{i(!0);const g=o(E),v=localStorage.getItem(g);if(v){const I=JSON.parse(v);r(I)}else r([])}catch(g){console.error("Error loading cart from localStorage:",g),r([])}finally{i(!1)}},u=(E,g)=>{try{const v=o(E);localStorage.setItem(v,JSON.stringify(g))}catch(v){console.error("Error saving cart to localStorage:",v)}},d=()=>{try{localStorage.removeItem("wholesaler-cart-guest"),localStorage.removeItem("wholesaler-cart")}catch(E){console.error("Error clearing guest cart:",E)}};A.useEffect(()=>{l(e==null?void 0:e.uid),e!=null&&e.uid&&d()},[e==null?void 0:e.uid]),A.useEffect(()=>{s||u(e==null?void 0:e.uid,n)},[n,e==null?void 0:e.uid,s]);const h=(E,g=1)=>{r(v=>v.find(x=>x.id===E.id)?v.map(x=>x.id===E.id?{...x,quantity:Math.min(x.quantity+g,E.stock)}:x):[...v,{...E,quantity:Math.min(g,E.stock)}])},p=E=>{r(g=>g.filter(v=>v.id!==E))},y=(E,g)=>{if(g<=0){p(E);return}r(v=>v.map(I=>{if(I.id===E){const x=I.stock||999;return{...I,quantity:Math.min(g,x)}}return I}))},w=()=>{r([])},R=async()=>{try{const E=localStorage.getItem("wholesaler-cart-guest");if(E&&(e!=null&&e.uid)){const g=JSON.parse(E);g.length>0&&(r(v=>{const I=[...v];return g.forEach(x=>{const P=I.find(S=>S.id===x.id);P?P.quantity=Math.min(P.quantity+x.quantity,x.stock||999):I.push(x)}),I}),d())}}catch(E){console.error("Error transferring guest cart:",E)}};A.useEffect(()=>{e!=null&&e.uid&&R()},[e==null?void 0:e.uid]);const k=()=>n.reduce((E,g)=>E+g.price*g.quantity,0),U={cart:n,isLoading:s,addToCart:h,removeFromCart:p,updateQuantity:y,clearCart:w,getCartTotal:k,getCartItemCount:()=>n.reduce((E,g)=>E+g.quantity,0),isInCart:E=>n.some(g=>g.id===E),getCartItem:E=>n.find(g=>g.id===E),validateCartStock:async E=>{const g=[];for(const v of n){const I=E.find(x=>x.id===v.id);I?v.quantity>I.stock&&g.push({...v,issue:`Only ${I.stock} items available`,maxAvailable:I.stock}):g.push({...v,issue:"Product no longer available"})}return g},fixCartQuantities:E=>{r(g=>g.map(v=>{const I=E.find(x=>x.id===v.id);return I&&v.quantity>I.stock?{...v,quantity:Math.max(1,I.stock)}:v}).filter(v=>{const I=E.find(x=>x.id===v.id);return I&&I.stock>0}))},transferGuestCart:R,getCartInfo:()=>({userId:(e==null?void 0:e.uid)||"guest",cartKey:o(e==null?void 0:e.uid),itemCount:n.length,total:k(),isLoading:s})};return a.jsx(e1.Provider,{value:U,children:t})},t1=()=>{const t=A.useContext(e1);if(!t)throw new Error("useCart must be used within a CartProvider");return t},fO=t=>{if(!t)return!1;const e=t.accountType==="admin",n=t.accountType==="manager",r=t.accountType==="business"&&t.businessType==="seller",s=t.accountType==="business"&&t.businessType==="buyer",i=t.accountType==="user";return s||i?!1:e||n||r},Ip=t=>{if(!t)return!1;const e=t.accountType==="admin",n=t.accountType==="manager",r=t.accountType==="business"&&t.businessType==="seller",s=t.accountType==="business"&&t.businessType==="buyer",i=t.accountType==="user";return s||i?!1:e||n||r},mO=t=>{if(!t)return!1;const e=t.accountType==="admin",n=t.accountType==="manager";return e||n},n1=t=>{if(!t)return!1;const e=t.accountType==="admin",n=t.accountType==="manager";return e||n},pO=t=>{if(!t)return!1;const e=t.accountType==="admin",n=t.accountType==="manager";return e||n},gO=t=>Ip(t),yO=t=>{if(!t)return!1;const e=t.accountType==="admin",n=t.accountType==="manager";return e||n},r1=t=>t?t.accountType==="admin":!1,s1=t=>{if(!t)return!1;const e=t.accountType==="admin",n=t.accountType==="manager";return e||n},fa=t=>{if(!t)return!1;const e=t.accountType==="admin",n=t.accountType==="manager";return!(e||n)},Si=t=>{if(!t)return!0;const e=t.accountType==="admin",n=t.accountType==="manager";return!(e||n)},i1=t=>Si(t),vO=t=>{if(!t)return!1;const e=t.accountType==="admin",n=t.accountType==="manager",r=t.accountType==="business";return e||n||r},uD=t=>t?t.accountType==="admin"?"Administrator":t.accountType==="manager"?"Manager":t.accountType==="business"?t.businessType==="seller"?"Business Seller":t.businessType==="buyer"?"Business Buyer":"Business User":"Customer":"Guest",dD=t=>{const e=[{name:"Dashboard",path:"/",icon:"",available:!0},{name:"Catalog",path:"/catalog",icon:"",available:!0}];return Si(t)&&e.push({name:"Cart",path:"/cart",icon:"",available:!0}),t&&(fa(t)&&e.push({name:"Orders",path:"/orders",icon:"",available:!0}),n1(t)&&!fa(t)&&e.push({name:"All Orders",path:"/orders",icon:"",available:!0}),Ip(t)&&e.push({name:"Inventory",path:"/inventory",icon:"",available:!0},{name:"Add Product",path:"/add-product",icon:"",available:!0}),s1(t)&&e.push({name:"Manager Panel",path:"/manager",icon:"",available:!0}),r1(t)&&e.push({name:"Admin Panel",path:"/admin",icon:"",available:!0})),e.filter(n=>n.available)},$t={MANAGE_PRODUCTS:"canManageProducts",ACCESS_INVENTORY:"canAccessInventory",VIEW_ALL_PRODUCTS:"canViewAllProducts",VIEW_ALL_ORDERS:"canViewAllOrders",DELETE_ORDERS:"canDeleteOrders",MANAGE_INVENTORY:"canManageInventory",APPROVE_USERS:"canApproveUsers",ACCESS_ADMIN_PANEL:"canAccessAdminPanel",ACCESS_MANAGER_PANEL:"canAccessManagerPanel",CREATE_ORDERS:"canCreateOrders",ACCESS_CART:"canAccessCart",ACCESS_CHECKOUT:"canAccessCheckout",MANAGE_BUSINESS_SETTINGS:"canManageBusinessSettings"},hD=(t,e)=>{switch(e){case $t.MANAGE_PRODUCTS:return fO(t);case $t.ACCESS_INVENTORY:return Ip(t);case $t.VIEW_ALL_PRODUCTS:return mO(t);case $t.VIEW_ALL_ORDERS:return n1(t);case $t.DELETE_ORDERS:return pO(t);case $t.MANAGE_INVENTORY:return gO(t);case $t.APPROVE_USERS:return yO(t);case $t.ACCESS_ADMIN_PANEL:return r1(t);case $t.ACCESS_MANAGER_PANEL:return s1(t);case $t.CREATE_ORDERS:return fa(t);case $t.ACCESS_CART:return Si(t);case $t.ACCESS_CHECKOUT:return i1(t);case $t.MANAGE_BUSINESS_SETTINGS:return vO(t);default:return!1}},ma=({className:t=""})=>{const{darkMode:e,toggleDarkMode:n}=Lt();return a.jsxs("button",{onClick:n,className:`relative inline-flex items-center rounded-full transition-all duration-300 focus:outline-none ${t} ${e?"bg-gradient-to-r from-cyan-500 to-purple-500 shadow-lg shadow-cyan-500/25":"bg-gradient-to-r from-blue-500 to-purple-500 shadow-lg shadow-blue-500/25"}`,style:{width:"56px",height:"28px"},"aria-pressed":e,"aria-label":e?"Switch to neumorphism theme":"Switch to cyberpunk theme",title:e?"Switch to Light Theme":"Switch to Dark Theme",children:[a.jsx("div",{className:`absolute inset-0 rounded-full opacity-75 ${e?"bg-gradient-to-r from-cyan-400 to-purple-400":"bg-gradient-to-r from-blue-400 to-purple-400"} animate-pulse`}),a.jsx("span",{className:`relative inline-block h-6 w-6 transform rounded-full transition-all duration-300 shadow-lg ${e?"translate-x-7 bg-black border-2 border-cyan-400":"translate-x-0.5 bg-white border-2 border-blue-400"}`,style:{boxShadow:e?"0 0 15px rgba(0, 255, 255, 0.5)":"0 4px 8px rgba(0, 0, 0, 0.1)"},children:a.jsx("div",{className:"flex items-center justify-center h-full w-full",children:e?a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-cyan-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-orange-500",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})}),a.jsx("span",{className:"sr-only",children:e?"Switch to Light Neumorphism Theme":"Switch to Dark Cyberpunk Theme"}),a.jsx("div",{className:`absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap ${e?"text-cyan-400":"text-blue-600"}`,children:e?"Cyberpunk":"Neumorphism"})]})},xO=({showAsModal:t=!1,onClose:e=null})=>{const n=tr(),{cart:r,getCartTotal:s,getCartItemCount:i}=t1(),{user:o}=Yr(),{darkMode:l}=Lt(),u=s(),d=i(),h=()=>{n("/checkout"),e&&e()},p=()=>{o?n("/create-order",{state:{fromCart:!0}}):n("/login",{state:{from:{pathname:"/create-order",state:{fromCart:!0}}}}),e&&e()},w=(()=>{var k,C;return o?(k=o.email)!=null&&k.includes("admin")?"admin":(C=o.email)!=null&&C.includes("business")?"business":"customer":"guest"})(),R=a.jsxs("div",{className:`${l?"bg-gray-800 text-white":"bg-white text-gray-900"} ${t?"p-6 rounded-xl shadow-xl max-w-2xl w-full mx-4":"p-6"}`,children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:`text-2xl font-bold ${l?"text-white":"text-gray-900"} mb-2`,children:"Choose Your Checkout Experience"}),a.jsx("p",{className:`${l?"text-gray-300":"text-gray-600"}`,children:"Select the checkout process that best fits your needs"})]}),a.jsxs("div",{className:`mb-6 p-4 rounded-lg ${l?"bg-gray-700":"bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{children:a.jsxs("span",{className:`text-sm ${l?"text-gray-300":"text-gray-600"}`,children:[d," item",d!==1?"s":""," in cart"]})}),a.jsxs("div",{className:`text-lg font-bold ${l?"text-white":"text-gray-900"}`,children:["$",u.toFixed(2)]})]}),w==="business"&&a.jsx("div",{className:`mt-2 text-xs ${l?"text-green-400":"text-green-600"}`,children:" Business account - 15% bulk discount will be applied"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx("div",{className:`border-2 rounded-xl p-6 cursor-pointer transition-all hover:shadow-lg ${l?"border-gray-600 hover:border-indigo-500 bg-gray-700 hover:bg-gray-600":"border-gray-200 hover:border-indigo-500 bg-white hover:bg-gray-50"}`,onClick:h,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl mb-4",children:""}),a.jsx("h3",{className:`text-xl font-semibold mb-3 ${l?"text-white":"text-gray-900"}`,children:"Quick Checkout"}),a.jsx("p",{className:`text-sm mb-4 ${l?"text-gray-300":"text-gray-600"}`,children:"Fast, streamlined process perfect for guests and regular purchases"}),a.jsxs("div",{className:`text-xs ${l?"text-gray-400":"text-gray-500"} space-y-1 mb-6`,children:[a.jsx("div",{children:" 3-step process"}),a.jsx("div",{children:" Multiple payment methods"}),a.jsx("div",{children:" Express delivery options"}),a.jsx("div",{children:" Mobile optimized"}),!o&&a.jsx("div",{className:"text-green-600",children:" No account required (Guest checkout)"})]}),a.jsxs("button",{className:"w-full py-3 px-4 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:["Continue as ",o?"User":"Guest"]})]})}),a.jsx("div",{className:`border-2 rounded-xl p-6 cursor-pointer transition-all hover:shadow-lg ${l?"border-gray-600 hover:border-purple-500 bg-gray-700 hover:bg-gray-600":"border-gray-200 hover:border-purple-500 bg-white hover:bg-gray-50"}`,onClick:p,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl mb-4",children:""}),a.jsx("h3",{className:`text-xl font-semibold mb-3 ${l?"text-white":"text-gray-900"}`,children:"Advanced Order"}),a.jsx("p",{className:`text-sm mb-4 ${l?"text-gray-300":"text-gray-600"}`,children:"Full-featured ordering with advanced business options (Account required)"}),a.jsxs("div",{className:`text-xs ${l?"text-gray-400":"text-gray-500"} space-y-1 mb-6`,children:[a.jsx("div",{children:" Detailed order customization"}),a.jsx("div",{children:" Multiple payment methods"}),a.jsx("div",{children:" Business account features"}),a.jsx("div",{children:" Bulk order management"}),a.jsx("div",{children:" Advanced delivery options"}),!o&&a.jsx("div",{className:"text-orange-600",children:" Account required"})]}),a.jsx("button",{className:"w-full py-3 px-4 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:o?"Create Order":"Sign In & Create Order"})]})})]}),a.jsx("div",{className:`mt-6 p-4 rounded-lg ${l?"bg-blue-900/20 border border-blue-800":"bg-blue-50 border border-blue-200"}`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"text-2xl mr-3",children:""}),a.jsxs("div",{children:[a.jsx("h4",{className:`font-medium ${l?"text-blue-400":"text-blue-700"} mb-1`,children:"Not sure which to choose?"}),a.jsx("p",{className:`text-sm ${l?"text-blue-300":"text-blue-600"}`,children:o?w==="business"?"As a business user, we recommend the Advanced Order for bulk discounts and business features.":"Quick Checkout is perfect for most users. Choose Advanced Order if you need detailed customization or business features.":"Quick Checkout lets you purchase as a guest without creating an account. Advanced Order requires sign-in but offers more features and business options."})]})]})}),t&&e&&a.jsx("div",{className:"flex justify-end mt-6",children:a.jsx("button",{onClick:e,className:`px-4 py-2 border rounded-lg ${l?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Cancel"})})]});return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:R}):R},xf=({intensity:t=1,enableGlitch:e=!0})=>{const{darkMode:n}=Lt(),[r,s]=A.useState([]),[i,o]=A.useState([]),[l,u]=A.useState([]),[d,h]=A.useState(0),p=["","","","","","","","","","","",""],y=["ANALYZING MARKET PATTERNS","WHO CONTROLS THE SUPPLY CHAIN","DIGITAL TRANSFORMATION DETECTED","TRUST NO VENDOR","THE COMMERCIAL INVASION","QUANTUM COMMERCE NETWORK"];return A.useEffect(()=>{const w=Array.from({length:8},(C,T)=>({id:T,x:Math.random()*100,y:Math.random()*100,icon:p[Math.floor(Math.random()*p.length)],size:.8+Math.random()*.4,rotation:Math.random()*360,morphSpeed:.5+Math.random()*1,glitchPhase:Math.random()*Math.PI*2}));s(w);const R=Array.from({length:15},(C,T)=>({id:T,x:Math.random()*100,y:Math.random()*100,vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3,pulse:Math.random()*Math.PI*2,hue:Math.random()*60+(n?180:200),intensity:Math.random()}));o(R);const k=Array.from({length:4},(C,T)=>({id:T,x:25+Math.random()*50,y:25+Math.random()*50,size:20+Math.random()*30,morphPhase:Math.random()*Math.PI*2,speed:.3+Math.random()*.4,hue:n?180+Math.random()*80:200+Math.random()*60}));u(k)},[n]),A.useEffect(()=>{const R=setInterval(()=>{s(k=>k.map(C=>({...C,glitchPhase:C.glitchPhase+C.morphSpeed*.02,rotation:C.rotation+C.morphSpeed*.5,icon:Math.random()<.003?p[Math.floor(Math.random()*p.length)]:C.icon}))),o(k=>k.map(C=>({...C,x:C.x+C.vx,y:C.y+C.vy,pulse:C.pulse+.05,vx:C.x<=0||C.x>=100?-C.vx:C.vx,vy:C.y<=0||C.y>=100?-C.vy:C.vy,intensity:Math.sin(C.pulse)*.5+.5}))),u(k=>k.map(C=>({...C,morphPhase:C.morphPhase+C.speed*.01,x:C.x+Math.sin(C.morphPhase)*.05,y:C.y+Math.cos(C.morphPhase*.7)*.05,size:C.size+Math.sin(C.morphPhase*2)*3}))),e&&h(k=>Math.random()<.01?Math.random()*5:k*.95)},50);return()=>clearInterval(R)},[e]),a.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",style:{opacity:t},children:[a.jsx("div",{className:"absolute inset-0 opacity-20",children:a.jsxs("svg",{className:"w-full h-full",children:[a.jsxs("defs",{children:[a.jsxs("filter",{id:"secretInvasionGooey",children:[a.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"8"}),a.jsx("feColorMatrix",{mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 15 -7"}),a.jsx("feBlend",{in:"SourceGraphic",in2:"gooey"})]}),a.jsxs("radialGradient",{id:"morphingGradient",cx:"50%",cy:"50%",children:[a.jsx("stop",{offset:"0%",stopColor:n?"#00FFFF":"#4F46E5",stopOpacity:"0.6"}),a.jsx("stop",{offset:"50%",stopColor:n?"#FF00FF":"#7C3AED",stopOpacity:"0.4"}),a.jsx("stop",{offset:"100%",stopColor:n?"#FFFF00":"#3B82F6",stopOpacity:"0.2"})]})]}),a.jsx("g",{filter:"url(#secretInvasionGooey)",children:l.map(w=>a.jsx("circle",{cx:`${w.x}%`,cy:`${w.y}%`,r:`${w.size}%`,fill:"url(#morphingGradient)",style:{transform:`scale(${.8+Math.sin(w.morphPhase)*.3})`,filter:`hue-rotate(${w.hue+w.morphPhase*10}deg)`,opacity:.6+Math.sin(w.morphPhase*.5)*.2}},w.id))})]})}),a.jsx("div",{className:"absolute inset-0",children:r.map(w=>a.jsxs("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2",style:{left:`${w.x}%`,top:`${w.y}%`,fontSize:`${w.size*2}rem`,transform:`translate(-50%, -50%) rotate(${w.rotation}deg) scale(${.8+Math.sin(w.glitchPhase)*.2})`,filter:`
                hue-rotate(${w.glitchPhase*30}deg) 
                brightness(${1.2+Math.sin(w.glitchPhase*2)*.3})
                ${d>2?`blur(${d*.5}px)`:""}
              `,textShadow:n?`0 0 ${10+d*5}px #00FFFF, 0 0 ${20+d*10}px #FF00FF`:`0 0 ${8+d*3}px #4F46E5, 0 0 ${15+d*6}px #7C3AED`,opacity:.3+Math.sin(w.glitchPhase)*.2,animation:d>3?"morphGlitch 0.1s infinite":"none"},children:[w.icon,d>1&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute inset-0",style:{color:n?"#FF00FF":"#EC4899",transform:`translate(${d}px, -${d}px)`,opacity:.7,filter:"blur(0.5px)"},children:w.icon}),a.jsx("div",{className:"absolute inset-0",style:{color:n?"#00FFFF":"#06B6D4",transform:`translate(-${d}px, ${d}px)`,opacity:.5,filter:"blur(0.5px)"},children:w.icon})]})]},w.id))}),a.jsxs("div",{className:"absolute inset-0",children:[i.map(w=>a.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${w.x}%`,top:`${w.y}%`,background:`radial-gradient(circle, hsl(${w.hue}, 100%, 70%) 0%, transparent 70%)`,opacity:w.intensity*.6,boxShadow:`0 0 ${8+w.intensity*10}px hsl(${w.hue}, 100%, 70%)`,transform:`scale(${.5+w.intensity*.8})`,filter:`hue-rotate(${w.pulse*20}deg)`}},w.id)),a.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-30",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"connectionGradient",children:[a.jsx("stop",{offset:"0%",stopColor:n?"#00FFFF":"#4F46E5",stopOpacity:"0"}),a.jsx("stop",{offset:"50%",stopColor:n?"#FF00FF":"#7C3AED",stopOpacity:"0.8"}),a.jsx("stop",{offset:"100%",stopColor:n?"#FFFF00":"#3B82F6",stopOpacity:"0"})]})}),i.slice(0,8).map((w,R)=>{const k=i[(R+1)%8];return a.jsx("line",{x1:`${w.x}%`,y1:`${w.y}%`,x2:`${k.x}%`,y2:`${k.y}%`,stroke:"url(#connectionGradient)",strokeWidth:"1",opacity:Math.max(w.intensity,k.intensity)*.5},R)})]})]}),e&&d>3&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsx("div",{className:`text-center ${n?"text-cyan-400":"text-indigo-600"} font-mono text-lg font-bold`,style:{textShadow:n?"0 0 10px #00FFFF, 0 0 20px #FF00FF":"0 0 8px #4F46E5, 0 0 15px #7C3AED",opacity:(d-3)*.3,filter:`blur(${Math.max(0,d-4)}px)`,animation:"textFlicker 0.1s infinite"},children:y[Math.floor(Math.random()*y.length)]})}),a.jsx("style",{jsx:!0,children:`
        @keyframes morphGlitch {
          0%, 100% { 
            transform: translate(-50%, -50%) rotate(0deg) scale(1) skew(0deg); 
          }
          25% { 
            transform: translate(-50%, -50%) rotate(2deg) scale(1.1) skew(1deg); 
          }
          50% { 
            transform: translate(-50%, -50%) rotate(-1deg) scale(0.9) skew(-0.5deg); 
          }
          75% { 
            transform: translate(-50%, -50%) rotate(1deg) scale(1.05) skew(0.5deg); 
          }
        }

        @keyframes textFlicker {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.3; }
        }
      `})]})},ku=A.createContext(null),Tv=({children:t,onOpenChange:e})=>{const[n,r]=A.useState(!1),s=A.useRef(null),i=A.useRef(null),o=A.useRef(null),l=h=>{r(h),e==null||e(h)};A.useEffect(()=>{if(!n)return;const h=y=>{var w,R;(w=s.current)!=null&&w.contains(y.target)||(R=i.current)!=null&&R.contains(y.target)||l(!1)},p=y=>{var w;y.key==="Escape"&&(l(!1),(w=s.current)==null||w.focus())};return document.addEventListener("mousedown",h,!0),document.addEventListener("keydown",p),()=>{document.removeEventListener("mousedown",h,!0),document.removeEventListener("keydown",p)}},[n]);const u=Dt();A.useEffect(()=>{l(!1)},[u]);const d={isOpen:n,setIsOpen:l,triggerRef:s,contentRef:i,timeoutRef:o};return a.jsx(ku.Provider,{value:d,children:a.jsx("div",{className:"relative",children:t})})},Iv=({children:t,className:e="",...n})=>{const{isOpen:r,setIsOpen:s,triggerRef:i}=A.useContext(ku),o=u=>{u.preventDefault(),u.stopPropagation(),s(!r)},l=u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),s(!r))};return a.jsx("button",{ref:i,onClick:o,onKeyDown:l,"aria-expanded":r,"aria-haspopup":"true",className:e,...n,children:t})},Nv=({children:t,className:e="",align:n="right",...r})=>{const{isOpen:s,contentRef:i}=A.useContext(ku);if(!s)return null;const o={left:"left-0",right:"right-0",center:"left-1/2 transform -translate-x-1/2"};return a.jsx("div",{ref:i,className:`absolute top-full mt-2 z-50 ${o[n]} ${e}`,role:"menu","aria-orientation":"vertical",...r,children:a.jsx("div",{className:"animate-slideDown",children:t})})},rs=({children:t,onSelect:e,className:n="",disabled:r=!1,...s})=>{const{setIsOpen:i}=A.useContext(ku),o=u=>{u.preventDefault(),u.stopPropagation(),!r&&(i(!1),Promise.resolve().then(()=>{e==null||e(u)}))},l=u=>{(u.key==="Enter"||u.key===" ")&&o(u)};return a.jsx("button",{onClick:o,onKeyDown:l,disabled:r,role:"menuitem",className:`w-full text-left ${r?"opacity-50 cursor-not-allowed":""} ${n}`,...s,children:t})},_O=({sidebarOpen:t,setSidebarOpen:e})=>{const n=Dt(),r=tr(),{user:s,logout:i}=Yr(),{darkMode:o}=Lt(),{cart:l,getCartItemCount:u,getCartTotal:d}=t1(),[h,p]=A.useState(!1),[y,w]=A.useState(!1),[R,k]=A.useState(!1),C=z=>n.pathname===z,T=u(),_=d(),N=Si(s),j=fa(s),D=(z,G={})=>{r(z,G)},U=()=>{if(!s)return"/guest-dashboard";switch(s.accountType){case"admin":return"/admin-dashboard";case"manager":return"/manager-dashboard";case"business":return"/business-dashboard";case"user":return"/user-dashboard";default:return"/guest-dashboard"}},E=()=>{const z=[{to:U(),icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6",label:o?"NEURAL HUB":"Dashboard"}];return s?(z.push({to:"/catalog",icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",label:o?"PRODUCT MATRIX":"Products"}),s.accountType==="admin"||s.accountType==="manager"?z.push({to:"/inventory",icon:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4",label:o?"INVENTORY CORE":"Inventory"}):s.accountType==="business"?s.businessType==="seller"?z.push({to:"/inventory",icon:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4",label:o?"MY INVENTORY":"My Products"}):z.push({to:"/orders",icon:"M9 5H7a2 2 0 00-2 2v6a2 2 0 002 2h6a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2",label:o?"PURCHASE HISTORY":"Purchase History"}):s.accountType==="user"&&z.push({to:"/user-dashboard",icon:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z",label:o?"MY ACCOUNT":"My Account"}),z.push({to:"/orders",icon:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z",label:o?"ORDER STREAM":"Orders"}),z.push({to:"/feedback",icon:"M7 8h10M7 12h6m-6 4h8M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",label:o?"FEEDBACK MATRIX":"Feedback"})):z.push({to:"/catalog",icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",label:o?"PRODUCT MATRIX":"Browse Products"},{to:"/about-us",icon:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",label:o?"ABOUT NEURAL":"About Us"}),z};A.useEffect(()=>{const z=()=>{k(window.scrollY>10)};return window.addEventListener("scroll",z),()=>window.removeEventListener("scroll",z)},[]);const g=()=>{alert("Profile page not implemented yet")},v=()=>{alert("Settings page not implemented yet")},I=()=>{D("/qr-tools")},x=async()=>{try{await i(),D("/login",{replace:!0})}catch(z){console.error("Error signing out:",z),D("/login",{replace:!0})}},P=()=>{j?w(!0):D("/checkout")},S=o?"cyber":"neumorph";return a.jsxs("div",{className:`sticky top-0 z-50 transition-all duration-500 ${R?`${S}-navbar-scrolled shadow-2xl`:""}`,children:[a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:a.jsx(xf,{intensity:.6,enableGlitch:o})}),a.jsxs("div",{className:`${S}-navbar-wrapper relative overflow-hidden`,children:[o&&a.jsx("div",{className:"cyber-navbar-glow animate-pulse"}),!o&&a.jsx("div",{className:"neumorph-navbar-glow animate-pulse"}),a.jsx("div",{className:`py-3 px-4 transition-all duration-500 backdrop-blur-md relative overflow-hidden ${o?"bg-gradient-to-r from-gray-900/95 via-cyan-900/20 to-gray-900/95 border-b border-cyan-500/30":"bg-gradient-to-r from-indigo-600/90 via-blue-600/85 to-purple-600/90 border-b border-indigo-300/50"}`,children:a.jsxs("div",{className:"container mx-auto flex items-center justify-between text-sm relative z-10",children:[a.jsx("p",{className:`hidden md:block font-medium transition-all duration-300 ${o?"text-cyan-200 cyber-glow":"text-white neumorph-text-shadow"}`,children:o?" NEURAL WHOLESALER | QUANTUM INVENTORY MANAGEMENT WITH QR PROTOCOLS":" MEGA WHOLESALER | Premium Inventory Management with QR Tools"}),a.jsx("div",{className:"flex items-center space-x-3",children:[{href:"/help-center",text:o?"HELP MATRIX":"Help Center"},{href:"/contact-support",text:o?"NEURAL SUPPORT":"Contact Support"},{to:"/qr-tools",text:o?"QR PROTOCOLS":"QR Tools",icon:""}].map((z,G)=>a.jsxs("div",{className:"flex items-center",children:[G>0&&a.jsx("span",{className:`${o?"text-cyan-500":"text-indigo-200"}`,children:"|"}),z.to?a.jsxs(le,{to:z.to,className:`ml-3 transition-all duration-300 hover:scale-110 flex items-center group ${o?"text-cyan-300 hover:text-cyan-100 hover:text-glow":"text-white hover:text-indigo-100"}`,children:[z.icon&&a.jsx("span",{className:"mr-1 group-hover:scale-125 transition-transform duration-300",children:z.icon}),a.jsx("span",{className:"font-medium",children:z.text})]}):a.jsx(le,{to:z.href,className:`ml-3 transition-all duration-300 hover:scale-110 ${o?"text-cyan-300 hover:text-cyan-100 hover:text-glow":"text-white hover:text-indigo-100"}`,children:a.jsx("span",{className:"font-medium",children:z.text})})]},G))})]})}),a.jsx("nav",{className:`relative z-10 transition-all duration-500 backdrop-blur-lg overflow-hidden ${o?"bg-gradient-to-r from-gray-900/95 via-cyan-900/10 to-gray-900/95":"bg-gradient-to-r from-indigo-700/95 via-blue-700/90 to-purple-700/95"}`,children:a.jsx("div",{className:"container mx-auto px-4 py-4 relative z-20",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center space-x-3 group",children:[a.jsxs("div",{className:`${S}-logo transition-all duration-300 group-hover:scale-110 relative overflow-hidden w-12 h-12 ${o?"":"bg-indigo-400 border-4 border-indigo-600"}`,children:[o&&a.jsx("div",{className:"logo-glow"}),!o&&a.jsx("div",{className:"neumorph-logo-glow"}),a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-8 w-8 transition-all duration-300 ${o?"text-cyan-400":"text-white"}`,viewBox:"0 0 20 20",fill:"currentColor",children:[a.jsx("path",{d:"M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"}),a.jsx("path",{d:"M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H14a1 1 0 001-1V5a1 1 0 00-1-1H3zM14 7h-4v4h4V7zm1-2a2 2 0 012 2v10a2 2 0 01-2 2H3a2 2 0 01-2-2V5a2 2 0 012-2h12z"})]})]}),a.jsx(le,{to:"/",className:`transition-all duration-300 group-hover:scale-110 ${o?"cyber-title text-cyan-400 cyber-glow text-3xl":"neumorph-title text-white text-3xl"} font-bold hover:transform hover:rotate-1`,style:{textShadow:o?"none":"2px 2px 4px rgba(0,0,0,0.7)"},children:o?"NEURAL WHOLESALER":"MEGA WHOLESALER"})]}),a.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[E().map(z=>a.jsxs(le,{to:z.to,className:`transition-all duration-300 hover:scale-110 font-medium flex items-center relative group ${C(z.to)?o?"text-cyan-400 cyber-glow border-b-2 border-cyan-400":"text-white border-b-2 border-white neumorph-text-shadow":o?"text-cyan-200 hover:text-cyan-100 hover:cyber-glow":"text-indigo-100 hover:text-white hover:neumorph-text-shadow"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 transition-transform duration-300 group-hover:rotate-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:z.icon})}),a.jsx("span",{className:"font-bold tracking-wide",children:z.label})]},z.to)),a.jsx("div",{className:`h-8 w-px transition-all duration-300 ${o?"bg-cyan-500/50":"bg-indigo-300/50"}`}),N&&a.jsxs(Tv,{onOpenChange:()=>{},children:[a.jsxs(Iv,{className:`relative transition-all duration-300 hover:scale-110 group inline-flex items-center gap-2 px-6 py-3 font-bold text-lg rounded-lg ${o?"bg-cyan-600 hover:bg-cyan-500 text-black border-2 border-cyan-400 shadow-lg shadow-cyan-500/25":"bg-indigo-500 hover:bg-indigo-400 text-white border-2 border-indigo-600 shadow-lg shadow-indigo-500/50"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 group-hover:animate-bounce",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m2.6 8L6 5H3m4 8a2 2 0 100 4 2 2 0 000-4zm10 0a2 2 0 100 4 2 2 0 000-4z"})}),a.jsx("span",{children:o?"CART MATRIX":"Cart"}),T>0&&a.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center font-bold animate-bounce",children:T>99?"99+":T})]}),a.jsxs(Nv,{className:`w-80 ${o?"cyber-card border-cyan-500/50":"neumorph-card"} rounded-xl shadow-2xl py-2`,children:[o&&a.jsx("div",{className:"card-glow"}),a.jsxs("div",{className:`px-4 py-3 border-b ${o?"border-cyan-700/50":"border-gray-200"}`,children:[a.jsxs("h3",{className:`text-lg font-bold ${o?"cyber-title text-cyan-400 cyber-glow":"neumorph-title text-gray-900"}`,children:[o?"CART MATRIX":"Shopping Cart"," (",T,")"]}),_>0&&a.jsxs("p",{className:`text-sm font-medium ${o?"text-cyan-200":"text-gray-500"}`,children:["Total: $",_.toFixed(2)]})]}),l.length===0?a.jsxs("div",{className:"px-4 py-6 text-center",children:[a.jsx("div",{className:"text-4xl mb-2 animate-bounce",children:""}),a.jsx("p",{className:`text-sm font-medium mb-3 ${o?"text-cyan-300":"text-gray-500"}`,children:o?"CART MATRIX EMPTY":"Your cart is empty"}),a.jsx(rs,{onSelect:()=>D("/catalog"),className:`inline-block transition-all duration-300 hover:scale-105 px-4 py-2 rounded ${o?"text-cyan-400 hover:text-cyan-300 cyber-glow":"text-indigo-600 hover:text-indigo-800"} text-sm hover:underline font-bold`,children:o?"BROWSE PRODUCTS":"Browse Products"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"max-h-60 overflow-y-auto",children:[l.slice(0,3).map(z=>a.jsx("div",{className:`px-4 py-3 transition-all duration-300 ${o?"hover:bg-cyan-900/20":"hover:bg-gray-50"}`,children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center transition-all duration-300 hover:scale-110 ${o?"bg-gray-800 border border-cyan-600/50":"bg-gray-200"}`,children:z.imageUrl?a.jsx("img",{src:z.imageUrl,alt:z.name,className:"w-12 h-12 object-cover rounded-lg"}):a.jsx("span",{className:"text-lg",children:""})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`text-sm font-bold truncate ${o?"text-cyan-100":"text-gray-900"}`,children:z.name}),a.jsxs("p",{className:`text-xs font-medium ${o?"text-cyan-300":"text-gray-500"}`,children:["Qty: ",z.quantity,"  $",z.price.toFixed(2)]})]}),a.jsxs("div",{className:`text-sm font-bold ${o?"text-cyan-400 cyber-glow":"text-gray-900"}`,children:["$",(z.price*z.quantity).toFixed(2)]})]})},z.id)),l.length>3&&a.jsx("div",{className:`px-4 py-2 text-center border-t ${o?"border-cyan-700/50 text-cyan-300":"border-gray-200 text-gray-500"}`,children:a.jsxs("span",{className:"text-sm font-medium",children:["+",l.length-3," more item",l.length-3!==1?"s":""]})})]}),a.jsxs("div",{className:`px-4 py-3 border-t ${o?"border-cyan-700/50":"border-gray-200"} space-y-2`,children:[a.jsx(rs,{onSelect:P,className:`${S}-btn ${S}-btn-primary w-full py-3 transition-all duration-300 hover:scale-105 rounded text-center`,children:a.jsxs("span",{className:"font-bold",children:[o?"PROCESS ORDER":"Checkout"," ($",_.toFixed(2),")"]})}),a.jsx(rs,{onSelect:()=>D("/cart"),className:`${S}-btn ${S}-btn-outline w-full py-3 transition-all duration-300 hover:scale-105 rounded text-center`,children:a.jsx("span",{className:"font-bold",children:o?"VIEW CART MATRIX":"View Cart"})})]})]})]})]}),j&&a.jsxs(le,{to:"/create-order",className:`transition-all duration-300 hover:scale-110 group inline-flex items-center gap-2 px-6 py-3 font-bold text-lg rounded-lg ${o?"bg-yellow-600 hover:bg-yellow-500 text-black border-2 border-yellow-400 shadow-lg shadow-yellow-500/25":"bg-blue-500 hover:bg-blue-400 text-white border-2 border-blue-600 shadow-lg shadow-blue-500/50"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 group-hover:rotate-90 transition-transform duration-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),a.jsx("span",{children:o?"NEW ORDER":"New Order"})]}),a.jsx("div",{className:"flex items-center",children:a.jsx(ma,{})}),s?a.jsxs(Tv,{onOpenChange:()=>{},children:[a.jsxs(Iv,{className:"flex items-center space-x-2 focus:outline-none group transition-all duration-300 hover:scale-110",children:[a.jsx("div",{className:`h-12 w-12 rounded-full p-0.5 shadow-lg overflow-hidden transition-all duration-300 group-hover:ring-4 ${o?"bg-cyan-600 ring-cyan-400/50 cyber-glow":"bg-indigo-500 ring-indigo-400/50 neumorph-elevated"}`,children:a.jsx("div",{className:`h-full w-full rounded-full flex items-center justify-center font-bold text-lg ${o?"bg-gray-900 text-cyan-400":"bg-white text-indigo-700"}`,children:s.displayName?s.displayName.charAt(0).toUpperCase():"U"})}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 transition-all duration-300 ${o?"text-cyan-400":"text-indigo-100"}`,viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),a.jsxs(Nv,{className:`w-72 ${o?"cyber-card border-cyan-500/50":"neumorph-card"} rounded-xl shadow-2xl py-2`,children:[o&&a.jsx("div",{className:"card-glow"}),a.jsxs("div",{className:`px-4 py-3 border-b ${o?"border-cyan-700/50":"border-gray-200"}`,children:[a.jsx("p",{className:`text-sm font-medium ${o?"text-cyan-300":"text-gray-500"}`,children:o?"NEURAL ACCESS GRANTED":"Signed in as"}),a.jsx("p",{className:`text-sm font-bold truncate ${o?"text-cyan-100 cyber-glow":"text-gray-900"}`,children:s.email}),a.jsx("p",{className:`text-xs font-bold ${s.accountType==="admin"?"text-red-400":s.accountType==="manager"?"text-purple-400":"text-green-400"}`,children:s.accountType==="admin"?" ADMINISTRATOR":s.accountType==="manager"?" MANAGER":s.accountType==="business"?" BUSINESS USER":" REGULAR USER"})]}),a.jsxs("div",{className:"py-1",children:[a.jsxs(rs,{onSelect:g,className:`flex items-center px-4 py-3 text-sm font-medium transition-all duration-300 hover:scale-105 group ${o?"text-cyan-200 hover:bg-cyan-900/20 hover:text-cyan-100":"text-gray-700 hover:bg-indigo-50 hover:text-indigo-700"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 mr-3 transition-all duration-300 group-hover:rotate-12 ${o?"text-cyan-400":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),a.jsx("span",{className:"font-bold",children:o?"NEURAL PROFILE":"Your Profile"})]}),a.jsxs(rs,{onSelect:v,className:`flex items-center px-4 py-3 text-sm font-medium transition-all duration-300 hover:scale-105 group ${o?"text-cyan-200 hover:bg-cyan-900/20 hover:text-cyan-100":"text-gray-700 hover:bg-indigo-50 hover:text-indigo-700"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 mr-3 transition-all duration-300 group-hover:rotate-12 ${o?"text-cyan-400":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),a.jsx("span",{className:"font-bold",children:o?"SYSTEM CONFIG":"Settings"})]}),a.jsxs(rs,{onSelect:I,className:`flex items-center px-4 py-3 text-sm font-medium transition-all duration-300 hover:scale-105 group ${o?"text-cyan-200 hover:bg-cyan-900/20 hover:text-cyan-100":"text-gray-700 hover:bg-indigo-50 hover:text-indigo-700"}`,children:[a.jsx("span",{className:"mr-3 text-lg animate-pulse",children:""}),a.jsx("span",{className:"font-bold",children:o?"QR PROTOCOLS":"QR Tools"})]})]}),a.jsx("div",{className:`py-1 border-t ${o?"border-cyan-700/50":"border-gray-200"}`,children:a.jsxs(rs,{onSelect:x,className:`flex w-full items-center px-4 py-3 text-sm font-bold transition-all duration-300 hover:scale-105 group ${o?"text-red-400 hover:bg-red-900/30 hover:text-red-300":"text-gray-700 hover:bg-red-50 hover:text-red-700"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 mr-3 transition-all duration-300 group-hover:rotate-180 ${o?"text-red-400":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),o?"DISCONNECT":"Sign out"]})})]})]}):a.jsxs(le,{to:"/login",className:`transition-all duration-300 hover:scale-110 group inline-flex items-center gap-2 px-6 py-3 font-bold text-lg rounded-lg ${o?"bg-cyan-600 hover:bg-cyan-500 text-black border-2 border-cyan-400 shadow-lg shadow-cyan-500/25":"bg-purple-600 hover:bg-purple-500 text-white border-2 border-purple-700 shadow-lg shadow-purple-600/50"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 group-hover:rotate-12 transition-transform duration-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),a.jsx("span",{children:o?"NEURAL ACCESS":"Sign In"})]})]}),a.jsxs("div",{className:"md:hidden flex items-center space-x-3",children:[N&&a.jsxs(le,{to:"/cart",className:`relative transition-all duration-300 hover:scale-110 w-14 h-14 rounded-full flex items-center justify-center ${o?"bg-cyan-600 hover:bg-cyan-500 text-black border-2 border-cyan-400":"bg-indigo-500 hover:bg-indigo-400 text-white border-3 border-indigo-600"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m2.6 8L6 5H3m4 8a2 2 0 100 4 2 2 0 000-4zm10 0a2 2 0 100 4 2 2 0 000-4z"})}),T>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold animate-bounce",children:T>9?"9+":T})]}),a.jsx(le,{to:"/qr-tools",className:`transition-all duration-300 hover:scale-110 w-14 h-14 rounded-full flex items-center justify-center ${o?"bg-purple-600 hover:bg-purple-500 text-white border-2 border-purple-400":"bg-blue-500 hover:bg-blue-400 text-white border-3 border-blue-600"}`,title:"QR Tools",children:a.jsx("span",{className:"text-lg",children:""})}),a.jsx(ma,{className:"mr-2"}),a.jsx("button",{onClick:()=>p(!h),className:`transition-all duration-300 hover:scale-110 w-14 h-14 rounded-full flex items-center justify-center ${o?"bg-gray-700 hover:bg-gray-600 text-cyan-400 border-2 border-gray-600":"bg-purple-600 hover:bg-purple-500 text-white border-3 border-purple-700"}`,children:h?a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 transition-transform duration-300 rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 transition-transform duration-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})})]})]})})}),h&&a.jsx("div",{className:`md:hidden backdrop-blur-lg animate-slideInDown ${o?"bg-gradient-to-r from-gray-900/98 to-cyan-900/20 border-b border-cyan-500/30":"bg-gradient-to-r from-indigo-700/98 to-purple-700/20 border-b border-indigo-300/50"}`,children:a.jsxs("div",{className:"py-3 px-4 space-y-1",children:[E().map((z,G)=>a.jsx("button",{onClick:()=>{p(!1),D(z.to)},className:`block w-full text-left px-4 py-3 rounded-lg transition-all duration-300 hover:scale-105 font-bold ${C(z.to)?o?"bg-cyan-900/30 text-cyan-400 border border-cyan-600/50":"bg-indigo-600/30 text-white border border-indigo-400/50":o?"text-cyan-200 hover:bg-cyan-900/20 hover:text-cyan-100":"text-indigo-100 hover:bg-indigo-600/20 hover:text-white"}`,children:z.label},z.to)),j&&a.jsx("button",{onClick:()=>{p(!1),D("/create-order")},className:`block w-full text-left px-4 py-3 rounded-lg transition-all duration-300 hover:scale-105 font-bold ${o?"text-cyan-200 hover:bg-cyan-900/20 hover:text-cyan-100":"text-indigo-100 hover:bg-indigo-600/20 hover:text-white"}`,children:o?"NEW ORDER":"New Order"}),s?a.jsxs("div",{className:`pt-4 pb-3 border-t ${o?"border-cyan-700/50":"border-indigo-300/50"} space-y-2`,children:[a.jsx("div",{className:"px-4 py-2",children:a.jsx("p",{className:`text-sm font-medium ${o?"text-cyan-300":"text-indigo-200"}`,children:s.email})}),a.jsx("button",{onClick:()=>{p(!1),g()},className:`block w-full text-left px-4 py-3 rounded-lg transition-all duration-300 hover:scale-105 font-bold ${o?"text-cyan-200 hover:bg-cyan-900/20 hover:text-cyan-100":"text-indigo-100 hover:bg-indigo-600/20 hover:text-white"}`,children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),a.jsx("span",{children:o?"NEURAL PROFILE":"Your Profile"})]})}),a.jsx("button",{onClick:()=>{p(!1),v()},className:`block w-full text-left px-4 py-3 rounded-lg transition-all duration-300 hover:scale-105 font-bold ${o?"text-cyan-200 hover:bg-cyan-900/20 hover:text-cyan-100":"text-indigo-100 hover:bg-indigo-600/20 hover:text-white"}`,children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),a.jsx("span",{children:o?"SYSTEM CONFIG":"Settings"})]})}),a.jsx("button",{onClick:()=>{p(!1),I()},className:`block w-full text-left px-4 py-3 rounded-lg transition-all duration-300 hover:scale-105 font-bold ${o?"text-cyan-200 hover:bg-cyan-900/20 hover:text-cyan-100":"text-indigo-100 hover:bg-indigo-600/20 hover:text-white"}`,children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-lg",children:""}),a.jsx("span",{children:o?"QR PROTOCOLS":"QR Tools"})]})}),a.jsx("button",{onClick:()=>{p(!1),x()},className:`block w-full text-left px-4 py-3 rounded-lg transition-all duration-300 hover:scale-105 font-bold ${o?"text-red-400 hover:bg-red-900/30":"text-red-600 hover:bg-red-500/20"}`,children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),a.jsx("span",{children:o?"DISCONNECT":"Sign out"})]})})]}):a.jsx("button",{onClick:()=>{p(!1),D("/login")},className:`block w-full text-center py-3 mt-4 font-bold rounded-lg transition-all duration-300 hover:scale-105 ${o?"bg-cyan-600 hover:bg-cyan-500 text-black":"bg-indigo-600 hover:bg-indigo-500 text-white"}`,children:o?"NEURAL ACCESS":"Sign In"})]})})]}),y&&a.jsx(xO,{showAsModal:!0,onClose:()=>w(!1)}),a.jsx("style",{jsx:!0,children:`
        @keyframes slideDown {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        @keyframes slideInDown {
          from {
            opacity: 0;
            transform: translateY(-20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        .animate-slideDown {
          animation: slideDown 0.2s ease-out;
        }
        
        .animate-slideInDown {
          animation: slideInDown 0.3s ease-out;
        }
      `})]})},ge=({children:t})=>{const[e,n]=A.useState(!1),[r,s]=A.useState(!1),i=Dt(),o=tr(),{user:l,logout:u,userRole:d}=Yr(),{darkMode:h}=Lt(),p=A.useRef(null),y=A.useRef(null),w=_=>i.pathname===_,R=h?"cyber":"neumorph",k=h?"cyberpunk":"neumorph";A.useEffect(()=>{const _=()=>{s(window.scrollY>10)};return window.addEventListener("scroll",_),()=>window.removeEventListener("scroll",_)},[]);const C=async()=>{try{await u(),n(!1),o("/login")}catch(_){console.error("Error signing out:",_)}},T=i.pathname==="/login"||i.pathname==="/signup"||i.pathname==="/register"||i.pathname==="/forgot-password";return A.useEffect(()=>{if(!h)return;const _=p.current;if(!_)return;const N=_.getContext("2d"),j=()=>{_.width=window.innerWidth,_.height=window.innerHeight};j();const D=[],U=60;for(let v=0;v<U;v++)D.push({x:Math.random()*_.width,y:Math.random()*_.height,vx:(Math.random()-.5)*.8,vy:(Math.random()-.5)*.8,size:Math.random()*2+1,pulse:Math.random()*Math.PI*2,color:`hsl(${180+Math.random()*60}, 100%, 50%)`,energy:Math.random()});const E=()=>{N.fillStyle="rgba(0, 0, 0, 0.03)",N.fillRect(0,0,_.width,_.height),D.forEach((v,I)=>{v.x+=v.vx,v.y+=v.vy,v.pulse+=.02,v.energy=Math.sin(v.pulse)*.5+.5,(v.x<0||v.x>_.width)&&(v.vx*=-1),(v.y<0||v.y>_.height)&&(v.vy*=-1);const x=v.size+v.energy*3,P=N.createRadialGradient(v.x,v.y,0,v.x,v.y,x);P.addColorStop(0,v.color),P.addColorStop(1,"transparent"),N.fillStyle=P,N.beginPath(),N.arc(v.x,v.y,x,0,Math.PI*2),N.fill(),D.forEach((S,z)=>{if(I!==z){const G=v.x-S.x,ee=v.y-S.y,ye=Math.sqrt(G*G+ee*ee);if(ye<100){const M=(1-ye/100)*v.energy*.2;N.beginPath(),N.moveTo(v.x,v.y),N.lineTo(S.x,S.y),N.strokeStyle=`rgba(0, 255, 255, ${M})`,N.lineWidth=1,N.stroke()}}})}),requestAnimationFrame(E)};E();const g=()=>{j()};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[h]),A.useEffect(()=>{if(!h)return;const _=y.current;if(!_)return;const N=_.getContext("2d"),j=()=>{_.width=window.innerWidth,_.height=window.innerHeight};j();const E=""+"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",g=12,v=_.width/g,I=[];for(let z=0;z<v;z++)I[z]=Math.random()*_.height/g;const P=setInterval(()=>{N.fillStyle="rgba(0, 0, 0, 0.03)",N.fillRect(0,0,_.width,_.height),N.font=g+"px monospace";for(let z=0;z<I.length;z++){const G=E.charAt(Math.floor(Math.random()*E.length)),ee=N.createLinearGradient(0,I[z]*g-15,0,I[z]*g);ee.addColorStop(0,"#00FFFF"),ee.addColorStop(.5,"#00FF88"),ee.addColorStop(1,"rgba(0, 255, 255, 0.05)"),N.fillStyle=ee,N.fillText(G,z*g,I[z]*g),I[z]*g>_.height&&Math.random()>.98&&(I[z]=0),I[z]++}},80),S=()=>{j()};return window.addEventListener("resize",S),()=>{clearInterval(P),window.removeEventListener("resize",S)}},[h]),T?a.jsxs("div",{className:`${k}-login-wrapper`,children:[a.jsx(xf,{intensity:.7,enableGlitch:h}),h&&a.jsxs(a.Fragment,{children:[a.jsx("canvas",{ref:p,className:"fixed inset-0 pointer-events-none z-0"}),a.jsx("canvas",{ref:y,className:"fixed inset-0 pointer-events-none z-1 opacity-5"}),a.jsx("div",{className:"fixed inset-0 pointer-events-none z-2 opacity-10",children:a.jsx("div",{className:"cyberpunk-grid"})}),a.jsx("div",{className:"fixed inset-0 pointer-events-none z-3",children:a.jsx("div",{className:"scanlines"})})]}),!h&&a.jsx("div",{className:"fixed inset-0 pointer-events-none z-2 opacity-30",children:a.jsx("div",{className:"neumorph-grid"})}),a.jsx("main",{className:"relative z-10",children:t})]}):a.jsxs("div",{className:`${k}-layout-wrapper`,children:[a.jsx("style",{children:`
        /* Force transparency with higher specificity */
        .layout-wrapper .force-transparent.main-content-wrapper,
        .layout-wrapper .force-transparent.neumorph-main-content-wrapper,
        .layout-wrapper main .force-transparent {
          background: transparent !important;
          border: none !important;
          backdrop-filter: none !important;
          box-shadow: none !important;
          border-radius: 0 !important;
          min-height: auto !important;
        }
      `}),a.jsx(xf,{intensity:h?.8:.6,enableGlitch:h}),h?a.jsxs(a.Fragment,{children:[a.jsx("canvas",{ref:p,className:"fixed inset-0 pointer-events-none z-0"}),a.jsx("canvas",{ref:y,className:"fixed inset-0 pointer-events-none z-1 opacity-8"}),a.jsx("div",{className:"fixed inset-0 pointer-events-none z-2 opacity-15",children:a.jsx("div",{className:"cyberpunk-grid"})}),a.jsx("div",{className:"fixed inset-0 pointer-events-none z-3",children:a.jsx("div",{className:"scanlines"})})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 pointer-events-none z-2 opacity-20",children:a.jsx("div",{className:"neumorph-grid"})}),a.jsx("div",{className:"fixed inset-0 pointer-events-none z-3 opacity-10",children:a.jsx("div",{className:"neumorph-gradient"})})]}),a.jsxs("div",{className:`${k}-layout-content layout-wrapper relative z-10 min-h-screen flex flex-col`,children:[a.jsx("div",{className:`sticky top-0 z-40 transition-all duration-300 ${r?`${R}-navbar-scrolled shadow-lg`:""}`,children:a.jsxs("div",{className:`${R}-navbar-wrapper`,children:[h&&a.jsx("div",{className:"cyber-navbar-glow"}),!h&&a.jsx("div",{className:"neumorph-navbar-glow"}),a.jsx("div",{className:"relative z-50",children:a.jsx(_O,{sidebarOpen:e,setSidebarOpen:n})})]})}),e&&a.jsx("div",{className:`fixed inset-0 z-20 ${h?"bg-black bg-opacity-70 backdrop-blur-sm":"bg-white bg-opacity-70 backdrop-blur-sm"} lg:hidden`,onClick:()=>n(!1)}),a.jsxs("button",{className:`${R}-fab-button fixed bottom-6 right-6 z-30 lg:hidden`,onClick:()=>n(!e),"aria-label":"Toggle sidebar",children:[h&&a.jsx("div",{className:"fab-glow"}),!h&&a.jsx("div",{className:"neumorph-fab-glow"}),a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})]}),a.jsxs("div",{className:`${R}-sidebar fixed inset-y-0 left-0 transform ${e?"translate-x-0":"-translate-x-full"} lg:hidden z-30 w-64 transition-transform duration-300 ease-in-out`,children:[h&&a.jsx("div",{className:"sidebar-glow"}),!h&&a.jsx("div",{className:"neumorph-sidebar-glow"}),a.jsxs("div",{className:`${h?"sidebar-content":"neumorph-sidebar-content"} p-6`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsxs("div",{className:`${R}-logo`,children:[h&&a.jsx("div",{className:"logo-glow"}),!h&&a.jsx("div",{className:"neumorph-logo-glow"}),a.jsxs("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{d:"M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"}),a.jsx("path",{d:"M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H14a1 1 0 001-1V5a1 1 0 00-1-1H3z"})]})]}),a.jsx("h2",{className:`ml-3 text-xl font-bold ${h?"text-cyan-400 cyber-glow":"text-indigo-600 neumorph-text-shadow"}`,children:"WHOLESALER"})]}),a.jsx("button",{className:`${R}-close-btn`,onClick:()=>n(!1),"aria-label":"Close sidebar",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l?a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:`${R}-user-card`,children:[h&&a.jsx("div",{className:"user-card-glow"}),!h&&a.jsx("div",{className:"neumorph-user-card-glow"}),a.jsxs("div",{className:`${h?"user-avatar":"neumorph-user-avatar"}`,children:[h&&a.jsx("div",{className:"avatar-glow"}),!h&&a.jsx("div",{className:"neumorph-avatar-glow"}),l.displayName?l.displayName.charAt(0).toUpperCase():"U"]}),a.jsxs("div",{className:"user-info",children:[a.jsx("p",{className:h?"user-name":"neumorph-user-name",children:l.displayName||"User"}),a.jsx("p",{className:h?"user-email":"neumorph-user-email",children:l.email}),a.jsx("p",{className:h?"user-role":"neumorph-user-role",children:d})]})]})}):a.jsx("div",{className:"mb-8 flex justify-center",children:a.jsxs(le,{to:"/login",className:`${R}-btn ${R}-btn-primary`,children:[a.jsx("span",{className:h?"btn-text":"neumorph-btn-text",children:"SIGN IN"}),h&&a.jsx("div",{className:"btn-glow"}),!h&&a.jsx("div",{className:"neumorph-btn-glow"})]})}),a.jsx("nav",{className:"space-y-2",children:[{to:"/",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6",label:"DASHBOARD"},{to:"/inventory",icon:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4",label:"INVENTORY"},{to:"/orders",icon:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z",label:"ORDERS"},{to:"/create-order",icon:"M12 6v6m0 0v6m0-6h6m-6 0H6",label:"NEW ORDER"}].map(_=>a.jsxs(le,{to:_.to,className:`${R}-nav-link ${w(_.to)?"active":""}`,onClick:()=>n(!1),children:[h&&a.jsx("div",{className:"nav-link-glow"}),!h&&a.jsx("div",{className:"neumorph-nav-link-glow"}),a.jsx("svg",{className:h?"nav-icon":"neumorph-nav-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:_.icon})}),a.jsx("span",{children:_.label})]},_.to))}),a.jsxs("div",{className:`mt-10 pt-6 border-t ${h?"border-cyan-900/30":"border-gray-300"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:`text-xs font-semibold uppercase tracking-wider ${h?"text-gray-400":"text-gray-600"}`,children:h?"NEURAL THEME":"Interface Theme"}),a.jsx(ma,{})]}),l&&a.jsxs("button",{onClick:C,className:`${R}-signout-btn w-full`,children:[h&&a.jsx("div",{className:"signout-glow"}),!h&&a.jsx("div",{className:"neumorph-signout-glow"}),a.jsx("svg",{className:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),a.jsx("span",{children:h?"DISCONNECT":"Sign Out"})]})]})]})]}),a.jsx("main",{className:"flex-grow py-6 px-4 relative z-1",children:a.jsx("div",{className:`${h?"main-content-wrapper":"neumorph-main-content-wrapper"} force-transparent`,children:t})}),a.jsxs("footer",{className:`${R}-footer relative z-10 mt-auto`,children:[h&&a.jsx("div",{className:"footer-glow"}),!h&&a.jsx("div",{className:"neumorph-footer-glow"}),a.jsx("div",{className:h?"footer-content":"neumorph-footer-content",children:a.jsxs("div",{className:"container mx-auto px-4 md:px-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[a.jsxs("div",{children:[a.jsx("h3",{className:h?"footer-heading":"neumorph-footer-heading",children:h?"CORPORATION":"Company"}),a.jsxs("ul",{className:h?"footer-links":"neumorph-footer-links",children:[a.jsx("li",{children:a.jsx(le,{to:"/about-us",className:h?"footer-link":"neumorph-footer-link",children:h?"About Neural Corp":"About Us"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:h?"footer-link":"neumorph-footer-link",children:h?"Digital Careers":"Careers"})}),a.jsx("li",{children:a.jsx(le,{to:"/privacy-policy",className:h?"footer-link":"neumorph-footer-link",children:h?"Privacy Protocol":"Privacy Policy"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:h?"footer-heading":"neumorph-footer-heading",children:h?"RESOURCES":"Resources"}),a.jsxs("ul",{className:h?"footer-links":"neumorph-footer-links",children:[a.jsx("li",{children:a.jsx(le,{to:"/documentation",className:h?"footer-link":"neumorph-footer-link",children:h?"Neural Documentation":"Documentation"})}),a.jsx("li",{children:a.jsx(le,{to:"/support-center",className:h?"footer-link":"neumorph-footer-link",children:h?"Support Matrix":"Support Center"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:h?"footer-heading":"neumorph-footer-heading",children:h?"FEATURES":"Features"}),a.jsxs("ul",{className:h?"footer-links":"neumorph-footer-links",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:h?"footer-link":"neumorph-footer-link",children:h?"Quantum Inventory":"Inventory Management"})}),a.jsx("li",{children:a.jsx(le,{to:"/order-processing",className:h?"footer-link":"neumorph-footer-link",children:h?"Neural Processing":"Order Processing"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:h?"footer-heading":"neumorph-footer-heading",children:h?"CONNECT":"Contact"}),a.jsxs("ul",{className:h?"footer-links":"neumorph-footer-links",children:[a.jsxs("li",{className:h?"footer-contact":"neumorph-footer-contact",children:[a.jsx("svg",{className:h?"contact-icon":"neumorph-contact-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),h?"+1 (555) NEURAL":"+1 (555) 123-4567"]}),a.jsxs("li",{className:h?"footer-contact":"neumorph-footer-contact",children:[a.jsx("svg",{className:h?"contact-icon":"neumorph-contact-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),h?"contact@neural-corp.net":"hello@wholesaler.com"]})]}),a.jsx("div",{className:h?"cyber-social-links":"neumorph-social-links",children:["FB","TW","LI"].map(_=>a.jsxs("a",{href:"#",className:h?"social-link":"neumorph-social-link",children:[h&&a.jsx("div",{className:"social-glow"}),!h&&a.jsx("div",{className:"neumorph-social-glow"}),_]},_))})]})]}),a.jsxs("div",{className:h?"footer-bottom":"neumorph-footer-bottom",children:[a.jsxs("p",{className:h?"footer-copyright":"neumorph-footer-copyright",children:[" ",new Date().getFullYear()," ",h?"NEURAL WHOLESALER CORP. ALL RIGHTS RESERVED.":"Wholesaler Inc. All rights reserved."]}),a.jsx("div",{className:h?"footer-made-by":"neumorph-footer-made-by",children:a.jsx("p",{children:h?"ENGINEERED WITH  BY THE NEURAL TEAM":"Made with  by our team"})})]})]})})]})]})]})},wO=()=>{const t=tr(),{login:e,error:n,loading:r,user:s,approvalStatus:i,clearError:o}=Yr(),{darkMode:l}=Lt(),u=A.useRef(null),d=A.useRef(null),[h,p]=A.useState({email:"",password:""}),[y,w]=A.useState(""),[R,k]=A.useState(!1),[C,T]=A.useState(!1),[_,N]=A.useState(!1),[j,D]=A.useState(!1),[U,E]=A.useState(!1),[g,v]=A.useState(!1),[I,x]=A.useState(""),[P,S]=A.useState(!1);A.useEffect(()=>{const M=u.current;if(!M)return;const B=M.getContext("2d"),F=()=>{M.width=window.innerWidth,M.height=window.innerHeight};F();const J="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",ne=14,H=Math.floor(M.width/ne),Ve=Array(H).fill(0).map(()=>Math.random()*M.height/ne),$e=Array(H).fill(0).map(()=>.5+Math.random()*1),Q=Array(H).fill(0).map(()=>Math.random()),Mt=setInterval(()=>{B.fillStyle=l?"rgba(0, 0, 0, 0.08)":"rgba(240, 240, 243, 0.12)",B.fillRect(0,0,M.width,M.height),B.font=`${ne}px 'Orbitron', monospace`;for(let Ae=0;Ae<Ve.length;Ae++){const Kt=J[Math.floor(Math.random()*J.length)];Q[Ae]+=(Math.random()-.5)*.1,Q[Ae]=Math.max(.3,Math.min(1,Q[Ae]));const St=Q[Ae];l?B.fillStyle=`rgba(0, 255, 255, ${St})`:B.fillStyle=`rgba(34, 102, 187, ${St*.6})`,B.fillText(Kt,Ae*ne,Ve[Ae]*ne),Ve[Ae]+=$e[Ae],Ve[Ae]*ne>M.height&&Math.random()>.975&&(Ve[Ae]=0,$e[Ae]=.5+Math.random()*1)}},50);return window.addEventListener("resize",F),()=>{clearInterval(Mt),window.removeEventListener("resize",F)}},[l]),A.useEffect(()=>{const M=d.current;if(!M)return;const B=M.getContext("2d"),F=()=>{M.width=window.innerWidth,M.height=window.innerHeight};F();const J=Array(60).fill(0).map(()=>({x:Math.random()*M.width,y:Math.random()*M.height,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,size:Math.random()*3+1,pulse:Math.random()*Math.PI*2,color:l?`hsl(${180+Math.random()*80}, 100%, ${50+Math.random()*30}%)`:`hsl(${200+Math.random()*60}, 70%, ${40+Math.random()*20}%)`,life:Math.random()}));let ne=0,H=0;const Ve=Q=>{ne=Q.clientX,H=Q.clientY};window.addEventListener("mousemove",Ve);const $e=()=>{B.fillStyle=l?"rgba(0, 0, 0, 0.05)":"rgba(240, 240, 243, 0.08)",B.fillRect(0,0,M.width,M.height),J.forEach((Q,yt)=>{const Mt=ne-Q.x,Ae=H-Q.y;Math.sqrt(Mt*Mt+Ae*Ae)<100&&(Q.vx+=Mt*5e-5,Q.vy+=Ae*5e-5),Q.x+=Q.vx,Q.y+=Q.vy,Q.pulse+=.03,Q.life=Math.sin(Q.pulse)*.5+.5,(Q.x<0||Q.x>M.width)&&(Q.vx*=-.8,Q.x=Math.max(0,Math.min(M.width,Q.x))),(Q.y<0||Q.y>M.height)&&(Q.vy*=-.8,Q.y=Math.max(0,Math.min(M.height,Q.y))),Q.vx*=.99,Q.vy*=.99;const St=Q.size*(1+Q.life*2),Xr=B.createRadialGradient(Q.x,Q.y,0,Q.x,Q.y,St);Xr.addColorStop(0,Q.color),Xr.addColorStop(1,"transparent"),B.fillStyle=Xr,B.beginPath(),B.arc(Q.x,Q.y,St,0,Math.PI*2),B.fill(),J.slice(yt+1).forEach(rr=>{const Jr=Math.sqrt((Q.x-rr.x)**2+(Q.y-rr.y)**2);Jr<120&&(B.strokeStyle=l?`rgba(0, 255, 255, ${(1-Jr/120)*.3})`:`rgba(34, 102, 187, ${(1-Jr/120)*.2})`,B.lineWidth=1,B.beginPath(),B.moveTo(Q.x,Q.y),B.lineTo(rr.x,rr.y),B.stroke())})}),requestAnimationFrame($e)};return $e(),window.addEventListener("resize",F),()=>{window.removeEventListener("resize",F),window.removeEventListener("mousemove",Ve)}},[l]),A.useEffect(()=>{E(!0)},[]),A.useEffect(()=>{o(),w("")},[h.email,h.password,o]),A.useEffect(()=>{s&&j&&(s.canAccess||i&&!i.canAccess)&&t("/home",{replace:!0})},[s,i,j,t]);const z=M=>{p(B=>({...B,[M.target.name]:M.target.value}))},G=async M=>{if(M.preventDefault(),!h.email||!h.password){w("Please enter both email and password");return}k(!0),w(""),D(!0);try{await e(h.email,h.password,C)}catch(B){w(B.message||"Failed to login. Please check your credentials."),D(!1)}finally{k(!1)}},ee=async M=>{if(M.preventDefault(),!I){w("Please enter your email address");return}k(!0),w("");try{await $w(as,I),S(!0)}catch(B){switch(console.error("Password reset error:",B),B.code){case"auth/user-not-found":w("No account found with this email address");break;case"auth/invalid-email":w("Please enter a valid email address");break;default:w("Failed to send reset email. Please try again.")}}finally{k(!1)}},ye=M=>{p({email:{admin:"admin@wholesaler.com",manager:"manager@wholesaler.com",business_buyer:"buyer@wholesaler.com",business_seller:"seller@wholesaler.com",user:"user@wholesaler.com"}[M],password:"password123"})};return g?a.jsxs("div",{className:`min-h-screen flex items-center justify-center relative overflow-hidden transition-all duration-1000 ${l?"bg-black":"bg-gradient-to-br from-gray-50 to-blue-50"}`,children:[a.jsx("canvas",{ref:u,className:"fixed inset-0 z-0",style:{opacity:l?.3:.2,filter:"blur(1px)"}}),a.jsx("canvas",{ref:d,className:"fixed inset-0 z-1",style:{opacity:.5}}),P?a.jsxs("div",{className:`max-w-md w-full mx-4 p-8 rounded-xl shadow-lg text-center transition-all duration-700 animate-bounceIn ${l?"cyber-card":"neumorph-card"}`,children:[l&&a.jsx("div",{className:"card-glow"}),a.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),a.jsx("h2",{className:`text-2xl font-bold mb-4 ${l?"cyber-title text-cyan-400 cyber-glow":"neumorph-title text-blue-600"}`,children:l?"RESET SIGNAL SENT!":"Reset Email Sent!"}),a.jsx("p",{className:`mb-6 ${l?"text-gray-300":"text-gray-600"}`,children:"Check your email for password reset instructions."}),a.jsx("button",{onClick:()=>{v(!1),S(!1),x("")},className:`${l?"cyber-btn cyber-btn-primary":"neumorph-btn neumorph-btn-primary"} w-full py-3 transition-all duration-300 hover:scale-105`,children:a.jsx("span",{children:l?"RETURN TO TERMINAL":"Back to Login"})})]}):a.jsxs("div",{className:`max-w-md w-full mx-4 p-8 rounded-xl shadow-lg transition-all duration-700 animate-slideInUp ${l?"cyber-card":"neumorph-card"}`,children:[l&&a.jsx("div",{className:"card-glow"}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:`text-2xl font-bold mb-2 ${l?"cyber-title text-cyan-400 cyber-glow":"neumorph-title text-blue-600"}`,children:l?"RESET ACCESS KEY":"Reset Password"}),a.jsx("p",{className:`text-sm ${l?"text-gray-300":"text-gray-600"}`,children:l?"Enter your neural ID to receive reset instructions":"Enter your email to receive reset instructions"})]}),y&&a.jsx("div",{className:`mb-4 p-3 rounded border ${l?"bg-red-900/20 border-red-600 text-red-400":"bg-red-100 border-red-400 text-red-600"}`,children:a.jsx("p",{className:"text-sm",children:y})}),a.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${l?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:l?"NEURAL ID":"Email Address"}),a.jsx("input",{type:"email",value:I,onChange:M=>x(M.target.value),className:`w-full py-3 px-4 font-mono transition-all duration-300 focus:scale-105 ${l?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:l?"neural.id@corp.net":"your@email.com",required:!0})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>{v(!1),w(""),x("")},className:`${l?"cyber-btn cyber-btn-ghost":"neumorph-btn"} flex-1 py-3 transition-all duration-300 hover:scale-105`,children:a.jsx("span",{children:l?"CANCEL":"Cancel"})}),a.jsx("button",{type:"submit",disabled:R,className:`${l?"cyber-btn cyber-btn-primary":"neumorph-btn neumorph-btn-primary"} flex-1 py-3 transition-all duration-300 hover:scale-105 ${R?"animate-spin":""}`,children:a.jsx("span",{children:R?l?"SENDING...":"Sending...":l?"SEND RESET":"Send Reset"})})]})]})]})]}):a.jsxs("div",{className:`min-h-screen relative overflow-hidden transition-all duration-1000 ${l?"bg-black":"bg-gradient-to-br from-gray-50 to-blue-50"}`,children:[a.jsx("canvas",{ref:u,className:"fixed inset-0 z-0",style:{opacity:l?.6:.3,filter:`blur(${l?0:.5}px)`}}),a.jsx("canvas",{ref:d,className:"fixed inset-0 z-1",style:{opacity:.8}}),l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-2 opacity-20 pointer-events-none animate-pulse",children:a.jsx("div",{className:"cyberpunk-grid"})}),a.jsx("div",{className:"fixed inset-0 z-3 pointer-events-none",children:a.jsx("div",{className:"scanlines"})})]}):a.jsx("div",{className:"fixed inset-0 z-2 opacity-30 pointer-events-none",children:a.jsx("div",{className:"neumorph-grid animate-pulse"})}),a.jsxs("div",{className:`relative z-10 min-h-screen flex transition-all duration-1000 transform ${U?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}`,children:[a.jsxs("div",{className:"hidden md:flex md:w-1/2 relative p-12 flex-col justify-between",children:[a.jsx("div",{className:`absolute inset-0 backdrop-blur-sm transition-all duration-700 ${l?"bg-gradient-to-br from-cyan-900/20 to-purple-900/20":"bg-gradient-to-br from-blue-900/10 to-indigo-900/10"}`}),a.jsxs("div",{className:"relative z-10 space-y-8 animate-fadeInLeft",children:[a.jsxs(le,{to:"/home",className:"flex items-center group cursor-pointer",children:[a.jsxs("div",{className:`${l?"cyber-logo":"neumorph-logo"} h-12 w-12 transition-all duration-300 group-hover:scale-110`,children:[l&&a.jsx("div",{className:"logo-glow"}),a.jsxs("svg",{className:"h-8 w-8 animate-spin-slow",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{d:"M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"}),a.jsx("path",{d:"M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H14a1 1 0 001-1V5a1 1 0 00-1-1H3z"})]})]}),a.jsx("h1",{className:`text-3xl font-bold ml-4 transition-all duration-300 group-hover:scale-105 ${l?"cyber-title text-cyan-400 cyber-glow":"neumorph-title text-blue-600"}`,children:"WHOLESALER"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h2",{className:`text-5xl font-bold animate-slideInUp ${l?"cyber-title":"neumorph-title"}`,children:[a.jsx("div",{className:`${l?"text-cyan-400 cyber-glow":"text-blue-600"} animate-pulse`,children:l?"NEURAL":"QUANTUM"}),a.jsx("div",{className:`${l?"text-purple-400 cyber-glow":"text-teal-600"} animate-bounce`,children:"INTERFACE"}),a.jsx("div",{className:`${l?"text-yellow-400 cyber-glow":"text-indigo-600"} animate-pulse`,children:"ACCESS"})]}),a.jsx("p",{className:`text-xl leading-relaxed animate-fadeIn ${l?"text-gray-300":"text-gray-700"}`,children:l?"Connect to the wholesale neural network through our advanced quantum platform.":"Experience next-generation wholesale management with sophisticated design."})]}),a.jsx("div",{className:"space-y-6",children:[{icon:"",title:l?"QUANTUM SECURITY":"ENTERPRISE SECURITY",delay:"100ms"},{icon:"",title:l?"NEURAL PROTOCOLS":"SMART INTERFACE",delay:"200ms"},{icon:"",title:l?"AI COMMERCE":"ADVANCED FEATURES",delay:"300ms"}].map((M,B)=>a.jsxs("div",{className:"flex items-center group animate-slideInLeft",style:{animationDelay:M.delay},children:[a.jsx("div",{className:"text-4xl mr-4 transition-transform duration-300 group-hover:scale-125 group-hover:rotate-12",children:M.icon}),a.jsx("h3",{className:`text-xl font-bold transition-all duration-300 group-hover:translate-x-2 ${l?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:M.title})]},B))})]})]}),a.jsxs("div",{className:"flex flex-col justify-center items-center p-6 md:p-12 w-full md:w-1/2 relative",children:[a.jsx("div",{className:`absolute inset-0 backdrop-blur-md transition-all duration-700 ${l?"bg-black/80":"bg-white/90"}`}),a.jsx("div",{className:"absolute top-6 right-6 z-20 animate-bounceIn",children:a.jsx(ma,{})}),a.jsxs("div",{className:"w-full max-w-md relative z-10 space-y-8",children:[a.jsx("div",{className:"md:hidden flex items-center justify-center animate-fadeInDown",children:a.jsxs(le,{to:"/home",className:"flex items-center group cursor-pointer",children:[a.jsx("div",{className:`${l?"cyber-logo":"neumorph-logo"} h-10 w-10`,children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{d:"M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"})})}),a.jsx("h1",{className:`text-2xl font-bold ml-3 transition-all duration-300 group-hover:scale-105 ${l?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:"WHOLESALER"})]})}),a.jsx("div",{className:"text-center animate-slideInUp",children:a.jsxs("h2",{className:`text-4xl font-bold mb-4 ${l?"cyber-title":"neumorph-title"}`,children:[a.jsx("span",{className:l?"text-cyan-400 cyber-glow":"text-blue-600",children:"ACCESS"}),a.jsx("br",{}),a.jsx("span",{className:l?"text-purple-400 cyber-glow":"text-indigo-600",children:l?"TERMINAL":"PORTAL"})]})}),a.jsxs("div",{className:`${l?"cyber-card":"neumorph-card"} transition-all duration-500 hover:scale-105 animate-slideInRight`,children:[l&&a.jsx("div",{className:"card-glow"}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("p",{className:`font-bold text-sm ${l?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:l?"DEMO PROTOCOLS":"TEST ACCOUNTS"}),a.jsx("button",{onClick:()=>N(!_),className:`${l?"bg-cyan-900/30 border-2 border-cyan-500 text-cyan-200 hover:bg-cyan-800/40 hover:text-cyan-100":"bg-blue-100 border-2 border-blue-400 text-blue-700 hover:bg-blue-200 hover:text-blue-800"} text-xs px-3 py-1 rounded font-bold transition-all duration-300 hover:scale-110`,children:a.jsx("span",{children:_?"HIDE":"SHOW"})})]}),a.jsx("div",{className:`transition-all duration-500 overflow-hidden ${_?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:a.jsx("div",{className:"space-y-2",children:[{role:"admin",emoji:"",label:"ADMIN"},{role:"manager",emoji:"",label:"MANAGER"},{role:"business_buyer",emoji:"",label:"BUYER"},{role:"business_seller",emoji:"",label:"SELLER"},{role:"user",emoji:"",label:"USER"}].map((M,B)=>a.jsx("button",{onClick:()=>ye(M.role),className:`${l?"bg-gray-800 border-2 border-cyan-600 text-cyan-200 hover:bg-gray-700 hover:border-cyan-400 hover:text-cyan-100":"bg-gray-100 border-2 border-blue-300 text-blue-700 hover:bg-gray-200 hover:border-blue-500 hover:text-blue-800"} w-full text-xs px-3 py-2 rounded font-bold transition-all duration-300 hover:scale-105 animate-slideInLeft`,style:{animationDelay:`${B*100}ms`},children:a.jsxs("span",{children:[M.emoji," ",M.label]})},M.role))})})]})]}),(y||n)&&a.jsx("div",{className:`${l?"cyber-card border-red-600":"neumorph-card border-red-400"} 
                animate-shake transition-all duration-300`,children:a.jsxs("div",{className:"p-4 flex items-center",children:[a.jsx("svg",{className:"h-6 w-6 text-red-400 mr-3 animate-spin",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("div",{children:[a.jsx("h3",{className:`font-bold text-sm ${l?"text-red-400":"text-red-600"}`,children:l?"CONNECTION ERROR":"Authentication Error"}),a.jsx("p",{className:`text-sm ${l?"text-red-300":"text-red-600"}`,children:y||n})]})]})}),a.jsxs("form",{className:"space-y-6 animate-slideInUp",onSubmit:G,children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${l?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:l?"EMAIL PROTOCOL":"Email"}),a.jsx("input",{name:"email",type:"email",value:h.email,onChange:z,className:`w-full py-3 px-4 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${l?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:l?"neural.id@corp.net":"your@email.com",required:!0})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${l?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:l?"ACCESS KEY":"Password"}),a.jsx("input",{name:"password",type:"password",value:h.password,onChange:z,className:`w-full py-3 px-4 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${l?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:"",required:!0})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:"flex items-center cursor-pointer group",children:[a.jsx("input",{type:"checkbox",checked:C,onChange:M=>T(M.target.checked),className:`h-4 w-4 rounded transition-all duration-300 group-hover:scale-110 ${l?"text-cyan-500":"text-blue-500"}`}),a.jsx("span",{className:`ml-2 text-sm font-medium ${l?"text-cyan-200":"text-gray-700"}`,children:l?"MAINTAIN CONNECTION":"Remember me"})]}),a.jsx("button",{type:"button",onClick:()=>v(!0),className:`text-sm font-medium transition-all duration-300 hover:scale-105 ${l?"text-purple-400 hover:text-purple-300":"text-indigo-600 hover:text-indigo-800"}`,children:l?"RESET ACCESS":"Forgot password?"})]}),a.jsx("button",{type:"submit",disabled:R||r,className:`${l?"cyber-btn cyber-btn-primary":"neumorph-btn neumorph-btn-primary"} 
                  w-full py-4 text-lg font-bold transition-all duration-300 hover:scale-105 animate-pulse-slow
                  ${R||r?"animate-spin":""}`,children:R||r?a.jsx("span",{children:l?"CONNECTING...":"Signing in..."}):a.jsx("span",{children:l?"INITIALIZE CONNECTION":"Sign In"})})]}),a.jsxs("div",{className:"text-center animate-fadeInUp",children:[a.jsx("p",{className:`text-sm mb-4 font-medium ${l?"text-cyan-200":"text-gray-700"}`,children:l?"Need neural access?":"Need an account?"}),a.jsx(le,{to:"/register",className:`${l?"cyber-btn cyber-btn-outline":"neumorph-btn neumorph-btn-outline"} transition-all duration-300 hover:scale-105`,children:a.jsx("span",{children:l?"REQUEST ACCESS":"Create Account"})})]})]})]})]}),a.jsx("style",{jsx:!0,children:`
        @keyframes fadeInLeft {
          from { opacity: 0; transform: translateX(-30px); }
          to { opacity: 1; transform: translateX(0); }
        }
        @keyframes slideInUp {
          from { opacity: 0; transform: translateY(30px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideInRight {
          from { opacity: 0; transform: translateX(30px); }
          to { opacity: 1; transform: translateX(0); }
        }
        @keyframes slideInLeft {
          from { opacity: 0; transform: translateX(-30px); }
          to { opacity: 1; transform: translateX(0); }
        }
        @keyframes fadeInDown {
          from { opacity: 0; transform: translateY(-20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes bounceIn {
          0% { transform: scale(0.3); opacity: 0; }
          50% { transform: scale(1.05); }
          70% { transform: scale(0.9); }
          100% { transform: scale(1); opacity: 1; }
        }
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
          20%, 40%, 60%, 80% { transform: translateX(2px); }
        }
        @keyframes spin-slow {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @keyframes pulse-slow {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.7; }
        }
        
        .animate-fadeInLeft { animation: fadeInLeft 0.8s ease-out; }
        .animate-slideInUp { animation: slideInUp 0.6s ease-out; }
        .animate-slideInRight { animation: slideInRight 0.7s ease-out; }
        .animate-slideInLeft { animation: slideInLeft 0.6s ease-out; }
        .animate-fadeInDown { animation: fadeInDown 0.6s ease-out; }
        .animate-bounceIn { animation: bounceIn 0.8s ease-out; }
        .animate-shake { animation: shake 0.5s ease-in-out; }
        .animate-spin-slow { animation: spin-slow 3s linear infinite; }
        .animate-pulse-slow { animation: pulse-slow 2s ease-in-out infinite; }
        .animate-fadeIn { animation: fadeIn 1s ease-out; }
        .animate-fadeInUp { animation: fadeInUp 0.6s ease-out; }
        
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes fadeInUp {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `})]})},EO=()=>{var S,z;const t=tr(),e=Dt(),{darkMode:n}=Lt(),r=A.useRef(null),s=A.useRef(null),i=((z=(S=e.state)==null?void 0:S.from)==null?void 0:z.pathname)||"/home",[o,l]=A.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",businessName:"",phoneNumber:"",accountType:"user",businessType:"buyer"}),[u,d]=A.useState(""),[h,p]=A.useState(!1),[y,w]=A.useState(!1),[R,k]=A.useState(!1),[C,T]=A.useState(!1),[_,N]=A.useState(!1),[j,D]=A.useState(!1),[U,E]=A.useState(!1);A.useEffect(()=>{const G=r.current;if(!G)return;const ee=G.getContext("2d"),ye=()=>{G.width=window.innerWidth,G.height=window.innerHeight};ye();const M="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",B=14,F=Math.floor(G.width/B),J=Array(F).fill(0).map(()=>Math.random()*G.height/B),ne=Array(F).fill(0).map(()=>.5+Math.random()*1),H=Array(F).fill(0).map(()=>Math.random()),$e=setInterval(()=>{ee.fillStyle=n?"rgba(0, 0, 0, 0.08)":"rgba(240, 240, 243, 0.12)",ee.fillRect(0,0,G.width,G.height),ee.font=`${B}px 'Orbitron', monospace`;for(let Q=0;Q<J.length;Q++){const yt=M[Math.floor(Math.random()*M.length)];H[Q]+=(Math.random()-.5)*.1,H[Q]=Math.max(.3,Math.min(1,H[Q]));const Mt=H[Q];n?ee.fillStyle=`rgba(0, 255, 255, ${Mt})`:ee.fillStyle=`rgba(34, 102, 187, ${Mt*.6})`,ee.fillText(yt,Q*B,J[Q]*B),J[Q]+=ne[Q],J[Q]*B>G.height&&Math.random()>.975&&(J[Q]=0,ne[Q]=.5+Math.random()*1)}},50);return window.addEventListener("resize",ye),()=>{clearInterval($e),window.removeEventListener("resize",ye)}},[n]),A.useEffect(()=>{const G=s.current;if(!G)return;const ee=G.getContext("2d"),ye=()=>{G.width=window.innerWidth,G.height=window.innerHeight};ye();const M=Array(60).fill(0).map(()=>({x:Math.random()*G.width,y:Math.random()*G.height,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,size:Math.random()*3+1,pulse:Math.random()*Math.PI*2,color:n?`hsl(${180+Math.random()*80}, 100%, ${50+Math.random()*30}%)`:`hsl(${200+Math.random()*60}, 70%, ${40+Math.random()*20}%)`,life:Math.random()}));let B=0,F=0;const J=H=>{B=H.clientX,F=H.clientY};window.addEventListener("mousemove",J);const ne=()=>{ee.fillStyle=n?"rgba(0, 0, 0, 0.05)":"rgba(240, 240, 243, 0.08)",ee.fillRect(0,0,G.width,G.height),M.forEach((H,Ve)=>{const $e=B-H.x,Q=F-H.y;Math.sqrt($e*$e+Q*Q)<100&&(H.vx+=$e*5e-5,H.vy+=Q*5e-5),H.x+=H.vx,H.y+=H.vy,H.pulse+=.03,H.life=Math.sin(H.pulse)*.5+.5,(H.x<0||H.x>G.width)&&(H.vx*=-.8,H.x=Math.max(0,Math.min(G.width,H.x))),(H.y<0||H.y>G.height)&&(H.vy*=-.8,H.y=Math.max(0,Math.min(G.height,H.y))),H.vx*=.99,H.vy*=.99;const Mt=H.size*(1+H.life*2),Ae=ee.createRadialGradient(H.x,H.y,0,H.x,H.y,Mt);Ae.addColorStop(0,H.color),Ae.addColorStop(1,"transparent"),ee.fillStyle=Ae,ee.beginPath(),ee.arc(H.x,H.y,Mt,0,Math.PI*2),ee.fill(),M.slice(Ve+1).forEach(Kt=>{const St=Math.sqrt((H.x-Kt.x)**2+(H.y-Kt.y)**2);St<120&&(ee.strokeStyle=n?`rgba(0, 255, 255, ${(1-St/120)*.3})`:`rgba(34, 102, 187, ${(1-St/120)*.2})`,ee.lineWidth=1,ee.beginPath(),ee.moveTo(H.x,H.y),ee.lineTo(Kt.x,Kt.y),ee.stroke())})}),requestAnimationFrame(ne)};return ne(),window.addEventListener("resize",ye),()=>{window.removeEventListener("resize",ye),window.removeEventListener("mousemove",J)}},[n]),A.useEffect(()=>{E(!0)},[]);const g=G=>{const{name:ee,value:ye}=G.target;l(M=>({...M,[ee]:ye}))},v=()=>o.firstName.trim()?o.lastName.trim()?o.email.trim()?/\S+@\S+\.\S+/.test(o.email)?o.password.length<6?(d("Password must be at least 6 characters long"),!1):o.password!==o.confirmPassword?(d("Passwords do not match"),!1):(o.accountType==="business"||o.accountType==="manager")&&!o.businessName.trim()?(d("Business name is required for business and manager accounts"),!1):C?!0:(d("Please accept the terms and conditions"),!1):(d("Please enter a valid email address"),!1):(d("Email is required"),!1):(d("Last name is required"),!1):(d("First name is required"),!1),I=G=>{switch(G){case"user":return{approved:!0,status:"active",requiresApproval:!1};case"business":case"manager":return{approved:!1,status:"pending_approval",requiresApproval:!0};default:return{approved:!1,status:"pending_approval",requiresApproval:!0}}},x=async G=>{if(G.preventDefault(),!!v()){p(!0),d("");try{const ye=(await Uw(as,o.email,o.password)).user;await Fw(ye,{displayName:`${o.firstName} ${o.lastName}`});const M=I(o.accountType);await yf(Lo(ps,"users",ye.uid),{uid:ye.uid,firstName:o.firstName,lastName:o.lastName,email:o.email,displayName:`${o.firstName} ${o.lastName}`,accountType:o.accountType,businessType:o.accountType==="business"?o.businessType:null,businessName:o.businessName||null,phoneNumber:o.phoneNumber||null,approved:M.approved,status:M.status,requiresApproval:M.requiresApproval,permissions:{canCreateOrders:o.accountType==="user",canManageInventory:!1,canViewAllOrders:!1,canApproveUsers:!1,canManageUsers:!1},createdAt:new Date,updatedAt:new Date,isActive:M.approved,emailVerified:ye.emailVerified,lastLogin:new Date,preferences:{notifications:!0,marketing:!1,theme:n?"dark":"light"}}),M.requiresApproval?N(!0):t(i,{replace:!0})}catch(ee){switch(console.error("Registration error:",ee),ee.code){case"auth/email-already-in-use":d("An account with this email already exists. Please sign in instead.");break;case"auth/weak-password":d("Password is too weak. Please choose a stronger password.");break;case"auth/invalid-email":d("Please enter a valid email address.");break;default:d("Failed to create account. Please try again.")}}finally{p(!1)}}},P=G=>{l({user:{firstName:"John",lastName:"Doe",email:"user@wholesaler.com",password:"password123",confirmPassword:"password123",accountType:"user",businessName:"",phoneNumber:"+1-555-0123",businessType:"buyer"},business_buyer:{firstName:"Jane",lastName:"Smith",email:"buyer@wholesaler.com",password:"password123",confirmPassword:"password123",accountType:"business",businessType:"buyer",businessName:"Smith Retail Store",phoneNumber:"+1-555-0456"},business_seller:{firstName:"Mike",lastName:"Johnson",email:"seller@wholesaler.com",password:"password123",confirmPassword:"password123",accountType:"business",businessType:"seller",businessName:"Johnson Supply Co",phoneNumber:"+1-555-0789"},manager:{firstName:"Sarah",lastName:"Wilson",email:"manager@wholesaler.com",password:"password123",confirmPassword:"password123",accountType:"manager",businessName:"Wilson Management LLC",phoneNumber:"+1-555-0321",businessType:"buyer"}}[G]),T(!0)};return _?a.jsx("div",{className:`min-h-screen flex items-center justify-center transition-all duration-1000 ${n?"bg-black":"bg-gradient-to-br from-gray-50 to-blue-50"}`,children:a.jsxs("div",{className:`max-w-md w-full mx-4 p-8 rounded-xl shadow-lg text-center transition-all duration-700 animate-bounceIn ${n?"cyber-card":"neumorph-card"}`,children:[n&&a.jsx("div",{className:"card-glow"}),a.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),a.jsx("h2",{className:`text-2xl font-bold mb-4 ${n?"cyber-title text-cyan-400 cyber-glow":"neumorph-title text-blue-600"}`,children:n?"NEURAL ACCESS GRANTED!":"Registration Successful!"}),a.jsxs("p",{className:`mb-6 ${n?"text-gray-300":"text-gray-600"}`,children:["Your ",o.accountType," account has been created and is pending admin approval."]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(le,{to:"/login",className:`${n?"cyber-btn cyber-btn-primary":"neumorph-btn neumorph-btn-primary"} block w-full py-3 transition-all duration-300 hover:scale-105`,children:a.jsx("span",{children:n?"ACCESS TERMINAL":"Go to Login"})}),a.jsx(le,{to:"/",className:`${n?"cyber-btn cyber-btn-ghost":"neumorph-btn"} block w-full py-3 transition-all duration-300 hover:scale-105`,children:a.jsx("span",{children:n?"GUEST MODE":"Continue as Guest"})})]})]})}):a.jsxs("div",{className:`min-h-screen relative overflow-hidden transition-all duration-1000 ${n?"bg-black":"bg-gradient-to-br from-gray-50 to-blue-50"}`,children:[a.jsx("canvas",{ref:r,className:"fixed inset-0 z-0",style:{opacity:n?.6:.3,filter:`blur(${n?0:.5}px)`}}),a.jsx("canvas",{ref:s,className:"fixed inset-0 z-1",style:{opacity:.8}}),n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-2 opacity-20 pointer-events-none animate-pulse",children:a.jsx("div",{className:"cyberpunk-grid"})}),a.jsx("div",{className:"fixed inset-0 z-3 pointer-events-none",children:a.jsx("div",{className:"scanlines"})})]}):a.jsx("div",{className:"fixed inset-0 z-2 opacity-30 pointer-events-none",children:a.jsx("div",{className:"neumorph-grid animate-pulse"})}),a.jsxs("div",{className:`relative z-10 min-h-screen flex transition-all duration-1000 transform ${U?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}`,children:[a.jsxs("div",{className:"hidden md:flex md:w-1/2 relative p-12 flex-col justify-between",children:[a.jsx("div",{className:`absolute inset-0 backdrop-blur-sm transition-all duration-700 ${n?"bg-gradient-to-br from-cyan-900/20 to-purple-900/20":"bg-gradient-to-br from-blue-900/10 to-indigo-900/10"}`}),a.jsxs("div",{className:"relative z-10 space-y-8 animate-fadeInLeft",children:[a.jsxs(le,{to:"/home",className:"flex items-center group cursor-pointer",children:[a.jsxs("div",{className:`${n?"cyber-logo":"neumorph-logo"} h-12 w-12 transition-all duration-300 group-hover:scale-110`,children:[n&&a.jsx("div",{className:"logo-glow"}),a.jsxs("svg",{className:"h-8 w-8 animate-spin-slow",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{d:"M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"}),a.jsx("path",{d:"M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H14a1 1 0 001-1V5a1 1 0 00-1-1H3z"})]})]}),a.jsx("h1",{className:`text-3xl font-bold ml-4 transition-all duration-300 group-hover:scale-105 ${n?"cyber-title text-cyan-400 cyber-glow":"neumorph-title text-blue-600"}`,children:"WHOLESALER"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h2",{className:`text-5xl font-bold animate-slideInUp ${n?"cyber-title":"neumorph-title"}`,children:[a.jsx("div",{className:`${n?"text-cyan-400 cyber-glow":"text-blue-600"} animate-pulse`,children:n?"JOIN THE":"CREATE"}),a.jsx("div",{className:`${n?"text-purple-400 cyber-glow":"text-teal-600"} animate-bounce`,children:n?"NEURAL":"YOUR"}),a.jsx("div",{className:`${n?"text-yellow-400 cyber-glow":"text-indigo-600"} animate-pulse`,children:n?"NETWORK":"ACCOUNT"})]}),a.jsx("p",{className:`text-xl leading-relaxed animate-fadeIn ${n?"text-gray-300":"text-gray-700"}`,children:n?"Request access to our advanced quantum wholesale network with role-based neural authentication.":"Join our sophisticated wholesale platform with multiple account types and secure approval process."})]}),a.jsx("div",{className:"space-y-6",children:[{icon:"",title:n?"MULTI-PROTOCOL ACCESS":"MULTIPLE ACCOUNT TYPES",delay:"100ms"},{icon:"",title:n?"QUANTUM VERIFICATION":"SECURE APPROVAL",delay:"200ms"},{icon:"",title:n?"ROLE-BASED NEURAL AUTH":"ROLE-BASED PERMISSIONS",delay:"300ms"}].map((G,ee)=>a.jsxs("div",{className:"flex items-center group animate-slideInLeft",style:{animationDelay:G.delay},children:[a.jsx("div",{className:"text-4xl mr-4 transition-transform duration-300 group-hover:scale-125 group-hover:rotate-12",children:G.icon}),a.jsx("h3",{className:`text-xl font-bold transition-all duration-300 group-hover:translate-x-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:G.title})]},ee))})]})]}),a.jsxs("div",{className:"flex flex-col justify-start items-center p-6 md:p-12 w-full md:w-1/2 relative overflow-y-auto",children:[a.jsx("div",{className:`absolute inset-0 backdrop-blur-md transition-all duration-700 ${n?"bg-black/80":"bg-white/90"}`}),a.jsx("div",{className:"absolute top-6 right-6 z-20 animate-bounceIn",children:a.jsx(ma,{})}),a.jsxs("div",{className:"w-full max-w-md relative z-10 space-y-6 py-8",children:[a.jsx("div",{className:"md:hidden flex items-center justify-center animate-fadeInDown",children:a.jsxs(le,{to:"/home",className:"flex items-center group cursor-pointer",children:[a.jsx("div",{className:`${n?"cyber-logo":"neumorph-logo"} h-10 w-10`,children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{d:"M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"})})}),a.jsx("h1",{className:`text-2xl font-bold ml-3 transition-all duration-300 group-hover:scale-105 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:"WHOLESALER"})]})}),a.jsx("div",{className:"text-center animate-slideInUp",children:a.jsxs("h2",{className:`text-3xl font-bold mb-4 ${n?"cyber-title":"neumorph-title"}`,children:[a.jsx("span",{className:n?"text-cyan-400 cyber-glow":"text-blue-600",children:n?"REQUEST":"CREATE"}),a.jsx("br",{}),a.jsx("span",{className:n?"text-purple-400 cyber-glow":"text-indigo-600",children:n?"NEURAL ACCESS":"ACCOUNT"})]})}),a.jsxs("div",{className:`${n?"cyber-card":"neumorph-card"} transition-all duration-500 hover:scale-105 animate-slideInRight`,children:[n&&a.jsx("div",{className:"card-glow"}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("p",{className:`font-bold text-sm ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"DEMO PROTOCOLS":"QUICK DEMO"}),a.jsx("button",{onClick:()=>D(!j),className:`${n?"bg-cyan-900/30 border-2 border-cyan-500 text-cyan-200 hover:bg-cyan-800/40 hover:text-cyan-100":"bg-blue-100 border-2 border-blue-400 text-blue-700 hover:bg-blue-200 hover:text-blue-800"} text-xs px-3 py-1 rounded font-bold transition-all duration-300 hover:scale-110`,children:a.jsx("span",{children:j?"HIDE":"SHOW"})})]}),a.jsx("div",{className:`transition-all duration-500 overflow-hidden ${j?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{type:"user",label:"USER"},{type:"business_buyer",label:"BUYER"},{type:"business_seller",label:"SELLER"},{type:"manager",label:"MANAGER"}].map((G,ee)=>a.jsx("button",{onClick:()=>P(G.type),className:`${n?"bg-gray-800 border-2 border-cyan-600 text-cyan-200 hover:bg-gray-700 hover:border-cyan-400 hover:text-cyan-100":"bg-gray-100 border-2 border-blue-300 text-blue-700 hover:bg-gray-200 hover:border-blue-500 hover:text-blue-800"} text-xs px-2 py-1 rounded font-bold transition-all duration-300 hover:scale-105 animate-slideInLeft`,style:{animationDelay:`${ee*100}ms`},children:a.jsx("span",{children:G.label})},G.type))})})]})]}),u&&a.jsx("div",{className:`${n?"cyber-card border-red-600":"neumorph-card border-red-400"} 
                animate-shake transition-all duration-300`,children:a.jsxs("div",{className:"p-4 flex items-center",children:[a.jsx("svg",{className:"h-6 w-6 text-red-400 mr-3 animate-spin",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("div",{children:[a.jsx("h3",{className:`font-bold text-sm ${n?"text-red-400":"text-red-600"}`,children:n?"REGISTRATION ERROR":"Registration Error"}),a.jsx("p",{className:`text-sm ${n?"text-red-300":"text-red-600"}`,children:u})]})]})}),a.jsxs("form",{className:"space-y-4 animate-slideInUp",onSubmit:x,children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"FIRST NAME":"First Name"}),a.jsx("input",{name:"firstName",type:"text",value:o.firstName,onChange:g,className:`w-full py-2 px-3 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${n?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:n?"JOHN":"John",required:!0})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"LAST NAME":"Last Name"}),a.jsx("input",{name:"lastName",type:"text",value:o.lastName,onChange:g,className:`w-full py-2 px-3 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${n?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:n?"DOE":"Doe",required:!0})]})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"EMAIL PROTOCOL":"Email"}),a.jsx("input",{name:"email",type:"email",value:o.email,onChange:g,className:`w-full py-2 px-3 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${n?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:n?"neural.id@corp.net":"you@example.com",required:!0})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"ACCESS LEVEL":"Account Type"}),a.jsxs("select",{name:"accountType",value:o.accountType,onChange:g,className:`w-full py-2 px-3 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${n?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg"}`,children:[a.jsx("option",{value:"user",className:n?"bg-gray-900 text-cyan-100":"bg-gray-50 text-gray-900",children:n?"STANDARD USER (INSTANT)":"Regular User (Immediate Access)"}),a.jsx("option",{value:"business",className:n?"bg-gray-900 text-cyan-100":"bg-gray-50 text-gray-900",children:n?"BUSINESS ENTITY (APPROVAL REQ)":"Business Account (Requires Approval)"}),a.jsx("option",{value:"manager",className:n?"bg-gray-900 text-cyan-100":"bg-gray-50 text-gray-900",children:n?"MANAGEMENT PROTOCOL (APPROVAL REQ)":"Manager Account (Requires Approval)"})]}),o.accountType!=="user"&&a.jsxs("p",{className:`text-xs mt-1 font-medium ${n?"text-yellow-400":"text-yellow-600"}`,children:[" ",n?"REQUIRES ADMIN NEURAL VERIFICATION":"Requires admin approval"]})]}),o.accountType==="business"&&a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"BUSINESS PROTOCOL":"Business Type"}),a.jsxs("select",{name:"businessType",value:o.businessType,onChange:g,className:`w-full py-2 px-3 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${n?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg"}`,children:[a.jsx("option",{value:"buyer",className:n?"bg-gray-900 text-cyan-100":"bg-gray-50 text-gray-900",children:n?"BUYER PROTOCOL":"Buyer (Purchase Products)"}),a.jsx("option",{value:"seller",className:n?"bg-gray-900 text-cyan-100":"bg-gray-50 text-gray-900",children:n?"SELLER PROTOCOL":"Seller (Sell Products)"})]})]}),(o.accountType==="business"||o.accountType==="manager")&&a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"ENTITY NAME":"Business Name"}),a.jsx("input",{name:"businessName",type:"text",value:o.businessName,onChange:g,className:`w-full py-2 px-3 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${n?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:n?"NEURAL CORP LTD":"Your Business Name"})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"COMM CHANNEL (OPT)":"Phone (Optional)"}),a.jsx("input",{name:"phoneNumber",type:"tel",value:o.phoneNumber,onChange:g,className:`w-full py-2 px-3 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${n?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:n?"+1-555-NEURAL":"+1 (555) 123-4567"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"ACCESS KEY":"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{name:"password",type:y?"text":"password",value:o.password,onChange:g,className:`w-full py-2 px-3 pr-10 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${n?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:"",required:!0}),a.jsx("button",{type:"button",onClick:()=>w(!y),className:`absolute right-3 top-1/2 transform -translate-y-1/2 transition-colors ${n?"text-cyan-400 hover:text-cyan-300":"text-gray-600 hover:text-gray-800"}`,children:y?"":""})]})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"CONFIRM KEY":"Confirm Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{name:"confirmPassword",type:R?"text":"password",value:o.confirmPassword,onChange:g,className:`w-full py-2 px-3 pr-10 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${n?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:"",required:!0}),a.jsx("button",{type:"button",onClick:()=>k(!R),className:`absolute right-3 top-1/2 transform -translate-y-1/2 transition-colors ${n?"text-cyan-400 hover:text-cyan-300":"text-gray-600 hover:text-gray-800"}`,children:R?"":""})]})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:C,onChange:G=>T(G.target.checked),className:`h-4 w-4 rounded transition-all duration-300 hover:scale-110 ${n?"text-cyan-500":"text-blue-500"}`}),a.jsxs("label",{className:`ml-2 text-sm font-medium ${n?"text-cyan-200":"text-gray-700"}`,children:["I agree to the"," ",a.jsx("span",{className:`font-bold ${n?"text-cyan-400":"text-blue-600"}`,children:n?"Neural Terms & Privacy Matrix":"Terms & Privacy Policy"})]})]}),a.jsx("button",{type:"submit",disabled:h,className:`${n?"cyber-btn cyber-btn-primary":"neumorph-btn neumorph-btn-primary"} 
                  w-full py-3 text-lg font-bold transition-all duration-300 hover:scale-105 animate-pulse-slow
                  ${h?"animate-spin":""}`,children:h?a.jsx("span",{children:n?"INITIALIZING...":"Creating Account..."}):a.jsx("span",{children:n?"REQUEST NEURAL ACCESS":"Create Account"})})]}),a.jsxs("div",{className:"text-center animate-fadeInUp",children:[a.jsx("p",{className:`text-sm mb-3 font-medium ${n?"text-cyan-200":"text-gray-700"}`,children:n?"Already have neural access?":"Already have an account?"}),a.jsx(le,{to:"/login",className:`${n?"cyber-btn cyber-btn-outline":"neumorph-btn neumorph-btn-outline"} transition-all duration-300 hover:scale-105`,children:a.jsx("span",{children:n?"ACCESS TERMINAL":"Sign In"})})]})]})]})]}),a.jsx("style",{jsx:!0,children:`
        @keyframes fadeInLeft {
          from { opacity: 0; transform: translateX(-30px); }
          to { opacity: 1; transform: translateX(0); }
        }
        @keyframes slideInUp {
          from { opacity: 0; transform: translateY(30px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideInRight {
          from { opacity: 0; transform: translateX(30px); }
          to { opacity: 1; transform: translateX(0); }
        }
        @keyframes slideInLeft {
          from { opacity: 0; transform: translateX(-30px); }
          to { opacity: 1; transform: translateX(0); }
        }
        @keyframes fadeInDown {
          from { opacity: 0; transform: translateY(-20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes bounceIn {
          0% { transform: scale(0.3); opacity: 0; }
          50% { transform: scale(1.05); }
          70% { transform: scale(0.9); }
          100% { transform: scale(1); opacity: 1; }
        }
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
          20%, 40%, 60%, 80% { transform: translateX(2px); }
        }
        @keyframes spin-slow {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @keyframes pulse-slow {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.7; }
        }
        
        .animate-fadeInLeft { animation: fadeInLeft 0.8s ease-out; }
        .animate-slideInUp { animation: slideInUp 0.6s ease-out; }
        .animate-slideInRight { animation: slideInRight 0.7s ease-out; }
        .animate-slideInLeft { animation: slideInLeft 0.6s ease-out; }
        .animate-fadeInDown { animation: fadeInDown 0.6s ease-out; }
        .animate-bounceIn { animation: bounceIn 0.8s ease-out; }
        .animate-shake { animation: shake 0.5s ease-in-out; }
        .animate-spin-slow { animation: spin-slow 3s linear infinite; }
        .animate-pulse-slow { animation: pulse-slow 2s ease-in-out infinite; }
        .animate-fadeIn { animation: fadeIn 1s ease-out; }
        .animate-fadeInUp { animation: fadeInUp 0.6s ease-out; }
        
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes fadeInUp {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `})]})},ze=({children:t,requiredRole:e=null,allowedRoles:n=null,requiredPermission:r=null,fallbackPath:s="/login"})=>{const{user:i,loading:o,approvalStatus:l,userRole:u,hasPermission:d}=Yr(),{darkMode:h}=Lt(),p=Dt();return o?a.jsx("div",{className:`flex justify-center items-center h-screen ${h?"bg-gray-900":"bg-gray-50"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500 mx-auto mb-4"}),a.jsx("p",{className:`text-lg ${h?"text-gray-300":"text-gray-600"}`,children:"Loading..."})]})}):i?!i.canAccess&&l&&!l.canAccess?a.jsx(bO,{approvalStatus:l,user:i,darkMode:h}):e&&u!==e?a.jsx(Bd,{reason:`This page requires ${e} access`,userRole:u,darkMode:h}):n&&!n.includes(u)?a.jsx(Bd,{reason:`This page is restricted to: ${n.join(", ")}`,userRole:u,darkMode:h}):r&&!d(r)?a.jsx(Bd,{reason:"You don't have the required permissions for this page",userRole:u,darkMode:h,missingPermission:r}):t:a.jsx(ei,{to:s,state:{from:p},replace:!0})},bO=({approvalStatus:t,user:e,darkMode:n})=>{const s=(()=>{switch(t.status){case"pending_approval":return{icon:"",title:"Account Pending Approval",message:"Your account is currently being reviewed by our admin team.",color:"yellow",details:["Your registration was successful","Admin review typically takes 1-2 business days","You'll receive an email notification once approved","You can still browse as a guest while waiting"]};case"rejected":return{icon:"",title:"Account Application Rejected",message:"Unfortunately, your account application was not approved.",color:"red",details:["Your application did not meet our requirements","You can contact support for more information","You may reapply after addressing the issues","You can still browse as a guest"]};case"suspended":return{icon:"",title:"Account Suspended",message:"Your account has been temporarily suspended.",color:"gray",details:["This may be due to a policy violation","Contact support to understand the reason","Your account may be reactivated after review","You can browse as a guest while suspended"]};default:return{icon:"",title:"Account Access Restricted",message:"Your account requires approval before you can access this area.",color:"blue",details:["Please wait for admin approval","Contact support if you have questions","You can browse public areas while waiting"]}}})();return a.jsx("div",{className:`min-h-screen flex items-center justify-center ${n?"bg-gray-900":"bg-gray-50"} px-4`,children:a.jsxs("div",{className:`max-w-md w-full p-8 ${n?"bg-gray-800":"bg-white"} rounded-xl shadow-lg text-center`,children:[a.jsx("div",{className:"text-6xl mb-6",children:s.icon}),a.jsx("h2",{className:`text-2xl font-bold mb-4 ${n?"text-white":"text-gray-900"}`,children:s.title}),a.jsx("p",{className:`mb-6 ${n?"text-gray-300":"text-gray-600"}`,children:s.message}),a.jsx("div",{className:`p-4 rounded-lg mb-6 ${n?"bg-gray-700":"bg-gray-50"}`,children:a.jsxs("div",{className:"text-left space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"Account Type:"}),a.jsx("span",{className:`text-sm font-medium ${n?"text-gray-200":"text-gray-800"} capitalize`,children:e.accountType})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"Email:"}),a.jsx("span",{className:`text-sm font-medium ${n?"text-gray-200":"text-gray-800"}`,children:e.email})]}),e.businessName&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"Business:"}),a.jsx("span",{className:`text-sm font-medium ${n?"text-gray-200":"text-gray-800"}`,children:e.businessName})]})]})}),a.jsxs("div",{className:`p-4 rounded-lg mb-6 ${s.color==="yellow"?n?"bg-yellow-900/20 border-yellow-800":"bg-yellow-50 border-yellow-200":s.color==="red"?n?"bg-red-900/20 border-red-800":"bg-red-50 border-red-200":s.color==="gray"?n?"bg-gray-900/20 border-gray-800":"bg-gray-50 border-gray-200":n?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-200"} border`,children:[a.jsx("h3",{className:`font-medium mb-2 ${s.color==="yellow"?n?"text-yellow-300":"text-yellow-800":s.color==="red"?n?"text-red-300":"text-red-800":s.color==="gray"?n?"text-gray-300":"text-gray-800":n?"text-blue-300":"text-blue-800"}`,children:"What you should know:"}),a.jsx("ul",{className:`text-sm text-left space-y-1 ${s.color==="yellow"?n?"text-yellow-200":"text-yellow-700":s.color==="red"?n?"text-red-200":"text-red-700":s.color==="gray"?n?"text-gray-200":"text-gray-700":n?"text-blue-200":"text-blue-700"}`,children:s.details.map((i,o)=>a.jsxs("li",{children:[" ",i]},o))})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(le,{to:"/",className:"block w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors",children:"Continue as Guest"}),t.status==="rejected"&&a.jsx(le,{to:"/register",className:`block w-full py-3 px-4 border ${n?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} rounded-lg transition-colors`,children:"Apply Again"}),a.jsx("a",{href:"mailto:support@wholesaler.com",className:`block w-full py-3 px-4 border ${n?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} rounded-lg transition-colors`,children:"Contact Support"}),a.jsx("button",{onClick:()=>window.location.reload(),className:`w-full py-2 px-4 text-sm ${n?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"} transition-colors`,children:" Refresh Status"})]})]})})},Bd=({reason:t,userRole:e,darkMode:n,missingPermission:r})=>a.jsx("div",{className:`min-h-screen flex items-center justify-center ${n?"bg-gray-900":"bg-gray-50"} px-4`,children:a.jsxs("div",{className:`max-w-md w-full p-8 ${n?"bg-gray-800":"bg-white"} rounded-xl shadow-lg text-center`,children:[a.jsx("div",{className:"text-6xl mb-6",children:""}),a.jsx("h2",{className:`text-2xl font-bold mb-4 ${n?"text-white":"text-gray-900"}`,children:"Access Denied"}),a.jsx("p",{className:`mb-6 ${n?"text-gray-300":"text-gray-600"}`,children:t}),a.jsx("div",{className:`p-4 rounded-lg mb-6 ${n?"bg-gray-700":"bg-gray-50"}`,children:a.jsxs("div",{className:"text-left space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"Your Role:"}),a.jsx("span",{className:`text-sm font-medium ${n?"text-gray-200":"text-gray-800"} capitalize`,children:e})]}),r&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"Required:"}),a.jsx("span",{className:`text-sm font-medium ${n?"text-red-400":"text-red-600"}`,children:r})]})]})}),a.jsxs("div",{className:`p-4 rounded-lg mb-6 ${n?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-200"} border`,children:[a.jsx("h3",{className:`font-medium mb-2 ${n?"text-blue-300":"text-blue-800"}`,children:"Need Access?"}),a.jsxs("ul",{className:`text-sm text-left space-y-1 ${n?"text-blue-200":"text-blue-700"}`,children:[a.jsx("li",{children:" Contact your administrator"}),a.jsx("li",{children:" Request role upgrade if needed"}),a.jsx("li",{children:" Check if you have the right account type"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(le,{to:"/",className:"block w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors",children:"Go to Dashboard"}),a.jsx(le,{to:"/profile",className:`block w-full py-3 px-4 border ${n?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} rounded-lg transition-colors`,children:"View Profile"}),a.jsx("a",{href:"mailto:admin@wholesaler.com",className:`block w-full py-3 px-4 border ${n?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} rounded-lg transition-colors`,children:"Contact Admin"})]})]})}),qd=({children:t,type:e="cart"})=>{const{user:n}=Yr(),{darkMode:r}=Lt();if(Dt(),n&&!(()=>{switch(e){case"cart":return Si(n);case"checkout":return i1(n);case"orders":return fa(n);default:return Si(n)}})()){const i=(n==null?void 0:n.accountType)==="admin",o=(n==null?void 0:n.accountType)==="manager",l=i?"/admin":o?"/manager":"/";return a.jsx("div",{className:`min-h-screen flex items-center justify-center ${r?"bg-gray-900":"bg-gray-50"} px-4`,children:a.jsxs("div",{className:`max-w-md w-full p-8 ${r?"bg-gray-800":"bg-white"} rounded-xl shadow-lg text-center`,children:[a.jsx("div",{className:"text-6xl mb-6",children:""}),a.jsx("h2",{className:`text-2xl font-bold mb-4 ${r?"text-white":"text-gray-900"}`,children:"Access Restricted"}),a.jsx("p",{className:`mb-6 ${r?"text-gray-300":"text-gray-600"}`,children:i?"As an administrator, you manage the platform rather than shop. Please use your admin panel for system management.":o?"As a manager, you oversee operations rather than shop. Please use your manager panel for platform oversight.":"You do not have permission to access this shopping feature."}),a.jsxs("div",{className:`p-4 rounded-lg mb-6 ${r?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-200"} border`,children:[a.jsx("h3",{className:`font-medium mb-2 ${r?"text-blue-300":"text-blue-800"}`,children:"Your Platform Access:"}),a.jsxs("ul",{className:`text-sm text-left space-y-1 ${r?"text-blue-200":"text-blue-700"}`,children:[i&&a.jsxs(a.Fragment,{children:[a.jsx("li",{children:" User management & approvals"}),a.jsx("li",{children:" System administration"}),a.jsx("li",{children:" Inventory oversight"}),a.jsx("li",{children:" Order management (view/edit)"}),a.jsx("li",{children:" Personal shopping & cart"})]}),o&&a.jsxs(a.Fragment,{children:[a.jsx("li",{children:" Team management"}),a.jsx("li",{children:" Operations oversight"}),a.jsx("li",{children:" Analytics & reports"}),a.jsx("li",{children:" Order management (view/edit)"}),a.jsx("li",{children:" Personal shopping & cart"})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ei,{to:l,replace:!0}),a.jsxs("button",{onClick:()=>window.location.href=l,className:"block w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors",children:["Go to ",i?"Admin":o?"Manager":"Your"," Dashboard"]}),a.jsx("button",{onClick:()=>window.history.back(),className:`block w-full py-3 px-4 border ${r?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} rounded-lg transition-colors`,children:"Go Back"})]}),a.jsx("div",{className:`mt-6 p-3 rounded-lg ${r?"bg-gray-700":"bg-gray-50"} text-xs`,children:a.jsxs("p",{className:`${r?"text-gray-400":"text-gray-600"}`,children:[" ",a.jsx("strong",{children:"Need to test shopping features?"}),a.jsx("br",{}),"Use a regular user account or business account for testing cart and checkout functionality."]})})]})})}return t},TO=({onScan:t,onError:e=null,showPreview:n=!0,className:r="",scannerConfig:s={}})=>{const[i,o]=A.useState(!1),[l,u]=A.useState(null),[d,h]=A.useState(null),[p,y]=A.useState([]),[w,R]=A.useState(null),[k,C]=A.useState("camera"),[T,_]=A.useState({qrcode:!1,html5qrcode:!1,zxing:!1}),[N,j]=A.useState(!0),{darkMode:D}=Lt();A.useRef(null);const U=A.useRef(null),E=A.useRef(null),g={fps:10,qrbox:{width:250,height:250},aspectRatio:1,disableFlip:!1,...s};A.useEffect(()=>{v()},[]);const v=async()=>{j(!0);const F={qrcode:!1,html5qrcode:!1,zxing:!1};try{await he(()=>import("./browser-BXdiCFWD.js").then(J=>J.b),[]),F.qrcode=!0}catch{console.log("QRCode library not available")}try{const J=await he(()=>import("./index-CKBzf1gd.js"),[]);J.Html5QrcodeScanner&&J.Html5Qrcode&&(F.html5qrcode=!0,window.Html5QrcodeScanner=J.Html5QrcodeScanner,window.Html5Qrcode=J.Html5Qrcode)}catch{console.log("Html5-qrcode library not available")}try{const J=await he(()=>import("./index-D3Mz4UNV.js"),[]);J.BrowserQRCodeReader&&(F.zxing=!0,window.BrowserQRCodeReader=J.BrowserQRCodeReader)}catch{console.log("ZXing library not available")}_(F),F.html5qrcode?await I():C("file"),j(!1)},I=async()=>{try{if(window.Html5Qrcode){const F=await window.Html5Qrcode.getCameras();y(F),F.length>0?R(F[0].id):(h("No cameras found. Please use file upload method."),C("file"))}}catch(F){console.error("Error initializing cameras:",F),h("Failed to initialize camera. Please use file upload method."),C("file")}},x=async()=>{if(!w&&k==="camera"){h("Please select a camera first");return}o(!0),h(null),u(null);try{k==="camera"&&T.html5qrcode&&await P()}catch(F){console.error("Error starting scanner:",F),h("Failed to start scanning: "+F.message),o(!1)}},P=async()=>{try{const F=new window.Html5QrcodeScanner("qr-reader",g,!1);F.render(z,G),U.current=F}catch(F){throw new Error("Failed to initialize camera scanner: "+F.message)}},S=async()=>{try{U.current&&(await U.current.clear(),U.current=null)}catch(F){console.error("Error stopping scanner:",F)}o(!1)},z=(F,J)=>{u(F),h(null);let ne;try{ne=JSON.parse(F)}catch{ne=F}t&&t(ne,J),S()},G=F=>{["Camera not found","Permission denied","Camera is already in use"].some(H=>F.toLowerCase().includes(H.toLowerCase()))&&e&&e(F)},ee=async F=>{const J=F.target.files[0];if(J){h(null),u(null);try{if(T.zxing){const H=await new window.BrowserQRCodeReader().decodeFromInputVideoDevice(void 0,"qr-reader-file");H&&z(H.text,H)}else if(T.html5qrcode){const H=await new window.Html5Qrcode("qr-reader-file").scanFile(J,!0);z(H,null)}else await ye(J)}catch(ne){console.error("Error scanning file:",ne),h("Failed to scan QR code from file. Please try a different image or install the required libraries.")}F.target.value=""}},ye=async F=>{h("File scanning requires QR libraries to be installed. Please install html5-qrcode and @zxing/library packages.")},B=(()=>{const F=Object.values(T).filter(Boolean).length,J=Object.keys(T).length;return{available:F,total:J,percentage:Math.round(F/J*100)}})();return N?a.jsx("div",{className:`${r} max-w-2xl mx-auto`,children:a.jsx("div",{className:`${D?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-xl shadow-lg border p-8`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500 mx-auto mb-4"}),a.jsx("p",{className:`${D?"text-gray-300":"text-gray-600"}`,children:"Loading QR Scanner..."})]})})}):a.jsx("div",{className:`${r} max-w-2xl mx-auto`,children:a.jsxs("div",{className:`${D?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-xl shadow-lg border overflow-hidden`,children:[a.jsxs("div",{className:`px-6 py-4 border-b ${D?"border-gray-700 bg-gray-700":"border-gray-200 bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:`text-lg font-bold ${D?"text-white":"text-gray-900"}`,children:" QR Code Scanner"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:`px-2 py-1 rounded-full text-xs ${B.percentage===100?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":B.percentage>50?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:[B.available,"/",B.total," Libraries"]}),a.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-600 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>!i&&C("camera"),disabled:i||!T.html5qrcode,className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${k==="camera"?"bg-white dark:bg-gray-500 text-gray-900 dark:text-white shadow":"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-100"} ${i||!T.html5qrcode?"opacity-50 cursor-not-allowed":""}`,children:" Camera"}),a.jsx("button",{onClick:()=>!i&&C("file"),disabled:i,className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${k==="file"?"bg-white dark:bg-gray-500 text-gray-900 dark:text-white shadow":"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-100"} ${i?"opacity-50 cursor-not-allowed":""}`,children:" File"})]})]})]}),k==="camera"&&p.length>1&&T.html5qrcode&&a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:`block text-sm font-medium ${D?"text-gray-300":"text-gray-700"} mb-1`,children:"Select Camera:"}),a.jsx("select",{value:w||"",onChange:F=>R(F.target.value),disabled:i,className:`w-full px-3 py-1 text-sm rounded-md ${D?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300"} border focus:ring-indigo-500 focus:border-indigo-500`,children:p.map(F=>a.jsx("option",{value:F.id,children:F.label||`Camera ${F.id}`},F.id))})]})]}),a.jsxs("div",{className:"p-6",children:[B.percentage<100&&a.jsx("div",{className:`mb-4 p-3 rounded-lg ${D?"bg-yellow-900/20 border-yellow-800":"bg-yellow-50 border-yellow-200"} border`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"text-2xl mr-3",children:""}),a.jsxs("div",{children:[a.jsx("h4",{className:`font-medium ${D?"text-yellow-400":"text-yellow-800"} mb-1`,children:"Limited QR Functionality"}),a.jsx("p",{className:`text-sm ${D?"text-yellow-300":"text-yellow-700"} mb-2`,children:"Some QR libraries are missing. Install them for full functionality:"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{className:`flex items-center ${T.qrcode?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[T.qrcode?"":""," qrcode"]}),a.jsxs("div",{className:`flex items-center ${T.html5qrcode?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[T.html5qrcode?"":""," html5-qrcode"]}),a.jsxs("div",{className:`flex items-center ${T.zxing?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[T.zxing?"":""," @zxing/library"]})]})]})]})}),d&&a.jsx("div",{className:`mb-4 p-3 rounded-lg ${D?"bg-red-900/20 border-red-800":"bg-red-50 border-red-200"} border`,children:a.jsxs("p",{className:`text-sm ${D?"text-red-400":"text-red-700"}`,children:[" ",d]})}),l&&a.jsxs("div",{className:`mb-4 p-3 rounded-lg ${D?"bg-green-900/20 border-green-800":"bg-green-50 border-green-200"} border`,children:[a.jsx("p",{className:`text-sm font-medium ${D?"text-green-400":"text-green-700"} mb-2`,children:" QR Code Scanned Successfully!"}),a.jsx("div",{className:`p-2 rounded ${D?"bg-gray-700":"bg-white"}`,children:a.jsx("pre",{className:`text-xs ${D?"text-gray-300":"text-gray-600"} break-all whitespace-pre-wrap max-h-32 overflow-y-auto`,children:typeof l=="object"?JSON.stringify(l,null,2):l})})]}),k==="camera"?a.jsx("div",{className:"text-center",children:T.html5qrcode?a.jsxs(a.Fragment,{children:[a.jsx("div",{id:"qr-reader",className:"mx-auto mb-4"}),a.jsx("div",{className:"flex justify-center space-x-3",children:i?a.jsx("button",{onClick:S,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:" Stop Scanning"}):a.jsx("button",{onClick:x,disabled:!w,className:`px-4 py-2 rounded-lg font-medium text-white transition-colors ${w?"bg-green-600 hover:bg-green-700":"bg-gray-400 cursor-not-allowed"}`,children:" Start Scanning"})})]}):a.jsxs("div",{className:`p-8 rounded-lg ${D?"bg-gray-700":"bg-gray-100"}`,children:[a.jsx("div",{className:"text-4xl mb-4",children:""}),a.jsx("h3",{className:`text-lg font-medium ${D?"text-white":"text-gray-900"} mb-2`,children:"Camera Scanning Unavailable"}),a.jsx("p",{className:`text-sm ${D?"text-gray-400":"text-gray-600"} mb-4`,children:"Install html5-qrcode library to enable camera scanning"}),a.jsx("code",{className:`text-xs ${D?"bg-gray-800 text-gray-300":"bg-white text-gray-800"} p-2 rounded block`,children:"npm install html5-qrcode"})]})}):a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 ${D?"border-gray-600 hover:border-gray-500":"border-gray-300 hover:border-gray-400"} transition-colors`,children:[a.jsx("input",{type:"file",accept:"image/*",onChange:ee,ref:E,className:"hidden"}),a.jsx("div",{className:"text-4xl mb-4",children:""}),a.jsx("p",{className:`text-lg font-medium ${D?"text-white":"text-gray-900"} mb-2`,children:"Upload QR Code Image"}),a.jsx("p",{className:`text-sm ${D?"text-gray-400":"text-gray-500"} mb-4`,children:"Select an image file containing a QR code"}),a.jsx("button",{onClick:()=>{var F;return(F=E.current)==null?void 0:F.click()},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors",children:" Choose File"})]}),a.jsx("div",{id:"qr-reader-file",className:"hidden"})]}),n&&a.jsxs("div",{className:`mt-6 p-4 rounded-lg ${D?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-200"} border`,children:[a.jsx("h4",{className:`font-medium ${D?"text-blue-300":"text-blue-800"} mb-2`,children:" Instructions"}),a.jsx("ul",{className:`text-sm space-y-1 ${D?"text-blue-200":"text-blue-700"}`,children:k==="camera"?a.jsxs(a.Fragment,{children:[a.jsx("li",{children:" Allow camera access when prompted"}),a.jsx("li",{children:" Point your camera at the QR code"}),a.jsx("li",{children:" Keep the QR code within the scanning area"}),a.jsx("li",{children:" Ensure good lighting for best results"})]}):a.jsxs(a.Fragment,{children:[a.jsx("li",{children:" Upload a clear image of the QR code"}),a.jsx("li",{children:" Supported formats: JPG, PNG, GIF"}),a.jsx("li",{children:" Ensure the QR code is not blurry"}),a.jsx("li",{children:" The entire QR code should be visible"})]})})]}),B.percentage<100&&a.jsxs("div",{className:`mt-4 p-4 rounded-lg ${D?"bg-gray-700":"bg-gray-100"}`,children:[a.jsx("h4",{className:`font-medium ${D?"text-gray-300":"text-gray-700"} mb-2`,children:" Install Missing Libraries"}),a.jsx("p",{className:`text-sm ${D?"text-gray-400":"text-gray-600"} mb-2`,children:"Run this command to install all QR libraries:"}),a.jsx("code",{className:`text-xs ${D?"bg-gray-800 text-gray-300":"bg-white text-gray-800"} p-2 rounded block font-mono`,children:"npm install qrcode html5-qrcode @zxing/library"})]})]})]})})},Sv=({data:t,size:e=200,className:n="",showDownload:r=!0})=>{const[s,i]=A.useState(""),[o,l]=A.useState(!1),{darkMode:u}=Lt();A.useEffect(()=>{d()},[t,e]);const d=async()=>{if(t){l(!0);try{const p=encodeURIComponent(typeof t=="object"?JSON.stringify(t):t),y=`https://api.qrserver.com/v1/create-qr-code/?size=${e}x${e}&data=${p}`;i(y)}catch(p){console.error("Error generating QR code:",p)}finally{l(!1)}}},h=async()=>{if(s)try{const y=await(await fetch(s)).blob(),w=window.URL.createObjectURL(y),R=document.createElement("a");R.download=`qrcode-${Date.now()}.png`,R.href=w,R.click(),window.URL.revokeObjectURL(w)}catch(p){console.error("Error downloading QR code:",p)}};return o?a.jsx("div",{className:`flex items-center justify-center ${n}`,style:{width:e,height:e},children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-500"})}):a.jsx("div",{className:`text-center ${n}`,children:s&&a.jsxs(a.Fragment,{children:[a.jsx("img",{src:s,alt:"QR Code",className:`mx-auto border-2 ${u?"border-gray-600":"border-gray-200"} rounded-lg`,style:{width:e,height:e},onError:()=>console.error("Failed to load QR code image")}),r&&a.jsxs("div",{className:"mt-4 flex justify-center space-x-2",children:[a.jsx("button",{onClick:h,className:"px-3 py-1 text-sm rounded-md bg-indigo-600 hover:bg-indigo-700 text-white transition-colors",children:" Download"}),a.jsx("button",{onClick:()=>{navigator.clipboard&&(navigator.clipboard.writeText(s),alert("QR code URL copied to clipboard!"))},className:"px-3 py-1 text-sm rounded-md bg-gray-600 hover:bg-gray-700 text-white transition-colors",children:" Copy URL"})]})]})})},IO=t=>{const[e,n]=A.useState(!1);if(A.useEffect(()=>{(async()=>{try{await he(()=>import("./browser-BXdiCFWD.js").then(i=>i.b),[])&&n(!0)}catch{console.log("QRCode library not available, using fallback"),n(!1)}})()},[]),e)try{const{QRCodeGenerator:r}=require("./QRCodeDisplay");return a.jsx(r,{...t})}catch{return a.jsx(Sv,{...t})}return a.jsx(Sv,{...t})},o1=(t,e)=>{const n=window.location.origin,s={timestamp:new Date().toISOString(),source:"wholesaler-app",version:"1.0"};switch(e){case"product":return{...s,type:"product",id:t.id,name:t.name,sku:t.sku,price:t.price,stock:t.stock,category:t.category,url:`${n}/products/${t.id}`};case"order":return{...s,type:"order",id:t.id,customer:t.customerName,total:t.total,status:t.status,itemCount:t.itemCount||0,url:`${n}/orders/${t.id}`};case"user":return{...s,type:"user",id:t.id,email:t.email,name:t.displayName,role:t.role||t.accountType,url:`${n}/admin/users/${t.id}`};case"inventory":return{...s,type:"inventory",productId:t.id,name:t.name,stock:t.stock,location:t.location||"warehouse",lastUpdated:t.updatedAt,url:`${n}/inventory/${t.id}`};default:return{...s,type:"generic",data:t}}},Np=t=>{try{const e=JSON.parse(t);return e.source==="wholesaler-app"&&e.type&&e.id?{isValid:!0,isOurFormat:!0,data:e,type:e.type,id:e.id,url:e.url}:{isValid:!0,isOurFormat:!1,data:e,type:"unknown",rawData:t}}catch{return{isValid:!0,isOurFormat:!1,data:t,type:"text",rawData:t}}},Zl=(t,e)=>{const n=Np(t);if(n.isOurFormat&&n.url){if(window.confirm(`QR code detected for ${n.type}: ${n.data.name||n.data.customer||n.data.email||n.id}. 
      
Navigate to this item?`)){const s=new URL(n.url);return e(s.pathname),!0}}else if(n.type==="text"&&n.data.startsWith("http")&&window.confirm(`External URL detected: ${n.data}
      
Open this link?`))return window.open(n.data,"_blank"),!0;return!1},a1=async(t,e)=>{try{const r=await(await fetch(t)).blob(),s=window.URL.createObjectURL(r),i=document.createElement("a");return i.download=e||`qr-code-${Date.now()}.png`,i.href=s,i.click(),window.URL.revokeObjectURL(s),!0}catch(n){return console.error("Download failed:",n),!1}},Hd=({data:t,type:e,item:n,size:r=200,showActions:s=!0,className:i=""})=>{const{darkMode:o}=Lt(),l=tr(),[u,d]=A.useState(""),h=typeof t=="string"?t:JSON.stringify(t),p=Np(h),y=()=>{Zl(h,l)},w=async()=>{if(u){const k=`qr-${e}-${(n==null?void 0:n.id)||"code"}-${Date.now()}.png`;await a1(u,k)}},R=async()=>{if(navigator.share&&p.isOurFormat)try{await navigator.share({title:`${e} QR Code`,text:`QR code for ${p.data.name||p.data.customer||p.data.email}`,url:p.data.url})}catch{navigator.clipboard&&p.data.url&&(await navigator.clipboard.writeText(p.data.url),alert("URL copied to clipboard!"))}else navigator.clipboard&&(await navigator.clipboard.writeText(h),alert("QR data copied to clipboard!"))};return a.jsxs("div",{className:`${i} text-center`,children:[a.jsx(IO,{data:h,size:r,showDownload:!1,onGenerated:d}),s&&a.jsxs("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:[a.jsx("button",{onClick:w,className:"px-3 py-1 text-sm rounded-md bg-indigo-600 hover:bg-indigo-700 text-white transition-colors",children:" Download"}),a.jsx("button",{onClick:R,className:"px-3 py-1 text-sm rounded-md bg-green-600 hover:bg-green-700 text-white transition-colors",children:" Share"}),p.isOurFormat&&a.jsx("button",{onClick:y,className:"px-3 py-1 text-sm rounded-md bg-purple-600 hover:bg-purple-700 text-white transition-colors",children:" Open"})]}),a.jsx("div",{className:`mt-3 p-2 rounded text-xs ${o?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:a.jsxs("details",{children:[a.jsx("summary",{className:"cursor-pointer",children:p.isOurFormat?`${p.type}: ${p.data.name||p.data.customer||p.data.email||p.id}`:"QR Data"}),a.jsx("pre",{className:"mt-2 text-left break-all whitespace-pre-wrap max-h-20 overflow-y-auto",children:h.length>200?h.substring(0,200)+"...":h})]})})]})},l1=()=>{const[t,e]=A.useState({qrcode:!1,html5qrcode:!1,zxing:!1,loading:!0});A.useEffect(()=>{n()},[]);const n=async()=>{const l={qrcode:!1,html5qrcode:!1,zxing:!1,loading:!1};try{await he(()=>import("./browser-BXdiCFWD.js").then(u=>u.b),[]),l.qrcode=!0}catch{console.log("QRCode library not available")}try{(await he(()=>import("./index-CKBzf1gd.js"),[])).Html5QrcodeScanner&&(l.html5qrcode=!0)}catch{console.log("Html5-qrcode library not available")}try{(await he(()=>import("./index-D3Mz4UNV.js"),[])).BrowserQRCodeReader&&(l.zxing=!0)}catch{console.log("ZXing library not available")}e(l)},r=()=>{const l=Object.entries(t).filter(([d,h])=>d!=="loading"&&h).length,u=Object.keys(t).length-1;return{available:l,total:u,percentage:Math.round(l/u*100),allAvailable:l===u,someAvailable:l>0,noneAvailable:l===0}},s=()=>t.html5qrcode,i=()=>t.qrcode,o=()=>t.zxing||t.html5qrcode;return{libraries:t,status:r(),canUseCamera:s,canGenerateQR:i,canScanFiles:o,refresh:n}},Wd=({selectedItems:t,itemType:e,onClearSelection:n,className:r=""})=>{const{darkMode:s}=Lt(),{canGenerateQR:i}=l1(),[o,l]=A.useState(!1),[u,d]=A.useState(0),h=async()=>{if(t.length){l(!0),d(0);try{for(let p=0;p<t.length;p++){const y=t[p],w=o1(y,e),R=JSON.stringify(w),C=`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(R)}`,T=`qr-${e}-${y.id}-${Date.now()}.png`;await a1(C,T),d(Math.round((p+1)/t.length*100)),await new Promise(_=>setTimeout(_,500))}alert(`Successfully generated ${t.length} QR codes!`),n()}catch(p){console.error("Bulk QR generation failed:",p),alert("Some QR codes failed to generate. Please try again.")}finally{l(!1),d(0)}}};return t.length?a.jsxs("div",{className:`${r} p-4 rounded-lg ${s?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-200"} border`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:`font-medium ${s?"text-blue-300":"text-blue-800"}`,children:"Bulk QR Generation"}),a.jsxs("p",{className:`text-sm ${s?"text-blue-200":"text-blue-700"}`,children:[t.length," ",e," selected"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[o&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`w-20 h-2 rounded-full ${s?"bg-gray-700":"bg-gray-200"}`,children:a.jsx("div",{className:"h-full bg-blue-600 rounded-full transition-all duration-300",style:{width:`${u}%`}})}),a.jsxs("span",{className:`text-sm ${s?"text-blue-300":"text-blue-700"}`,children:[u,"%"]})]}),a.jsx("button",{onClick:h,disabled:o||!i(),className:`px-4 py-2 rounded-lg font-medium text-white transition-colors ${o||!i()?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:o?" Generating...":" Generate QR Codes"}),a.jsx("button",{onClick:n,disabled:o,className:`px-3 py-2 rounded-lg font-medium transition-colors ${o?"opacity-50 cursor-not-allowed":s?"bg-gray-700 hover:bg-gray-600 text-gray-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:"Clear"})]})]}),!i()&&a.jsx("div",{className:`mt-2 text-xs ${s?"text-yellow-400":"text-yellow-700"}`,children:" Install 'qrcode' library for better QR generation"})]}):null},NO=()=>{const{darkMode:t}=Lt(),{user:e}=Yr(),n=tr(),r=l1(),[s,i]=A.useState({products:[],orders:[],users:[]}),[o,l]=A.useState(!0),[u,d]=A.useState(null),[h,p]=A.useState("scanner"),[y,w]=A.useState([]),[R,k]=A.useState([]),[C,T]=A.useState(!1),[_,N]=A.useState({generated:parseInt(localStorage.getItem("qr-generated")||"0"),scanned:parseInt(localStorage.getItem("qr-scanned")||"0"),today:parseInt(localStorage.getItem("qr-today")||"0")});A.useEffect(()=>{U(),j()},[]);const j=()=>{const x=localStorage.getItem("qr-last-date"),P=new Date().toDateString();x!==P&&(localStorage.setItem("qr-today","0"),localStorage.setItem("qr-last-date",P),N(S=>({...S,today:0})))},D=x=>{N(P=>{const S={...P,[x]:P[x]+1,today:x==="generated"||x==="scanned"?P.today+1:P.today};return localStorage.setItem(`qr-${x}`,S[x].toString()),(x==="generated"||x==="scanned")&&localStorage.setItem("qr-today",S.today.toString()),S})},U=async()=>{try{l(!0),d(null);const x={products:[],orders:[],users:[]};try{const P=Md(ps,"products"),S=Tl(P,Vd("createdAt","desc"),Il(50)),z=await $d(S);x.products=z.docs.map(G=>({id:G.id,...G.data()}))}catch(P){console.error("Error fetching products:",P)}try{const P=Md(ps,"orders");let S;if((e==null?void 0:e.accountType)==="admin"||(e==null?void 0:e.accountType)==="manager"?S=Tl(P,Vd("createdAt","desc"),Il(50)):e&&(S=Tl(P,Vd("createdAt","desc"),Il(20))),S){const z=await $d(S);x.orders=z.docs.map(G=>{const ee=G.data();return{id:G.id,customerName:ee.customerName||"Unknown Customer",total:ee.total||0,status:ee.status||"pending",createdAt:ee.createdAt,...ee}})}}catch(P){console.error("Error fetching orders:",P)}try{if((e==null?void 0:e.accountType)==="admin"||(e==null?void 0:e.accountType)==="manager"){const P=Md(ps,"users"),S=Tl(P,Il(30)),z=await $d(S);x.users=z.docs.map(G=>({id:G.id,...G.data()}))}}catch(P){console.error("Error fetching users:",P)}i(x)}catch(x){console.error("Error fetching QR data:",x),d("Failed to load data for QR generation")}finally{l(!1)}},E=x=>{const P={id:Date.now(),timestamp:new Date,rawData:x,parsed:Np(typeof x=="string"?x:JSON.stringify(x))};k(S=>[P,...S.slice(0,9)]),D("scanned"),P.parsed.isOurFormat&&window.confirm(`QR code detected for ${P.parsed.type}: ${P.parsed.data.name||P.parsed.data.customer||P.parsed.data.email||P.parsed.id}. 
        
Navigate to this item?`)&&Zl(P.rawData,n)},g=(x,P)=>{const S=o1(x,P);return D("generated"),S},v=()=>{k([])};if(o)return a.jsx("div",{className:`min-h-screen flex items-center justify-center ${t?"bg-gray-900":"bg-gray-50"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500 mx-auto mb-4"}),a.jsx("p",{className:`text-lg ${t?"text-gray-300":"text-gray-600"}`,children:"Loading QR Tools..."})]})});if(u)return a.jsx("div",{className:`min-h-screen flex items-center justify-center ${t?"bg-gray-900":"bg-gray-50"} px-4`,children:a.jsxs("div",{className:`max-w-md w-full p-8 ${t?"bg-gray-800":"bg-white"} rounded-xl shadow-lg text-center`,children:[a.jsx("div",{className:"text-6xl mb-6",children:""}),a.jsx("h2",{className:`text-2xl font-bold mb-4 ${t?"text-white":"text-gray-900"}`,children:"QR Tools Error"}),a.jsx("p",{className:`mb-6 ${t?"text-gray-300":"text-gray-600"}`,children:u}),a.jsx("button",{onClick:U,className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors",children:"Try Again"})]})});const I=[{id:"scanner",name:"Scanner",icon:"",description:"Scan QR codes"},{id:"generator",name:"Generator",icon:"",description:"Generate QR codes"},{id:"history",name:"History",icon:"",description:"Scan history"},{id:"bulk",name:"Bulk Tools",icon:"",description:"Bulk operations"}];return a.jsx("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-gray-50"} py-6 px-4`,children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"} mb-2`,children:" QR Code Management Suite"}),a.jsx("p",{className:`${t?"text-gray-400":"text-gray-600"}`,children:"Complete QR code solution for products, orders, and users"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[a.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow border p-4`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-2xl mr-3",children:r.status.allAvailable?"":r.status.someAvailable?"":""}),a.jsxs("div",{children:[a.jsx("p",{className:`text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"QR Libraries"}),a.jsxs("p",{className:`text-lg font-bold ${t?"text-white":"text-gray-900"}`,children:[r.status.available,"/",r.status.total]})]})]})}),a.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow border p-4`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-2xl mr-3",children:""}),a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Generated"}),a.jsx("p",{className:`text-lg font-bold ${t?"text-white":"text-gray-900"}`,children:_.generated})]})]})}),a.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow border p-4`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-2xl mr-3",children:""}),a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Scanned"}),a.jsx("p",{className:`text-lg font-bold ${t?"text-white":"text-gray-900"}`,children:_.scanned})]})]})}),a.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow border p-4`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-2xl mr-3",children:""}),a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Today"}),a.jsx("p",{className:`text-lg font-bold ${t?"text-white":"text-gray-900"}`,children:_.today})]})]})}),a.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow border p-4`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-2xl mr-3",children:""}),a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Total Items"}),a.jsx("p",{className:`text-lg font-bold ${t?"text-white":"text-gray-900"}`,children:s.products.length+s.orders.length+s.users.length})]})]})})]}),!r.status.allAvailable&&a.jsx("div",{className:`mb-6 p-4 rounded-lg ${t?"bg-yellow-900/20 border-yellow-800":"bg-yellow-50 border-yellow-200"} border`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"text-2xl mr-3",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:`font-medium ${t?"text-yellow-400":"text-yellow-800"} mb-2`,children:"Enhance QR Functionality"}),a.jsxs("p",{className:`text-sm ${t?"text-yellow-300":"text-yellow-700"} mb-3`,children:["Install QR libraries for full functionality. Current status: ",r.status.available,"/",r.status.total," libraries available."]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("code",{className:`text-xs ${t?"bg-gray-800 text-gray-300":"bg-white text-gray-800"} p-2 rounded font-mono`,children:"npm install qrcode html5-qrcode @zxing/library"}),a.jsx("button",{onClick:r.refresh,className:"text-sm px-3 py-1 rounded bg-yellow-600 hover:bg-yellow-700 text-white",children:"Refresh"})]})]})]})}),a.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-xl shadow-lg border overflow-hidden mb-6`,children:[a.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:I.map(x=>a.jsxs("button",{onClick:()=>p(x.id),className:`flex-1 px-6 py-4 text-center font-medium transition-colors ${h===x.id?"bg-indigo-600 text-white":t?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[a.jsx("div",{className:"text-2xl mb-1",children:x.icon}),a.jsx("div",{className:"text-sm font-medium",children:x.name}),a.jsx("div",{className:"text-xs opacity-75",children:x.description})]},x.id))}),a.jsxs("div",{className:"p-6",children:[h==="scanner"&&a.jsxs("div",{children:[a.jsx(TO,{onScan:E,showPreview:!0,className:"mb-6"}),R.length>0&&a.jsxs("div",{className:`mt-6 p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:["Recent Scans (",R.length,")"]}),a.jsx("button",{onClick:v,className:`text-sm ${t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:"Clear History"})]}),a.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:R.map(x=>a.jsx("div",{className:`p-3 rounded ${t?"bg-gray-800":"bg-white"} border ${t?"border-gray-600":"border-gray-200"}`,children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:`text-sm font-medium ${t?"text-white":"text-gray-900"}`,children:x.parsed.isOurFormat?`${x.parsed.type}: ${x.parsed.data.name||x.parsed.data.customer||x.parsed.data.email||x.parsed.id}`:"External QR Code"}),a.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:x.timestamp.toLocaleString()})]}),x.parsed.isOurFormat&&x.parsed.url&&a.jsx("button",{onClick:()=>Zl(x.rawData,n),className:"text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300 text-sm",children:"Open "})]})},x.id))})]})]}),h==="generator"&&a.jsx("div",{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[a.jsxs("div",{className:`p-6 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[a.jsxs("h3",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"} mb-4`,children:[" Products (",s.products.length,")"]}),a.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:[s.products.slice(0,10).map(x=>a.jsx("div",{className:`p-3 rounded ${t?"bg-gray-800":"bg-white"} border ${t?"border-gray-600":"border-gray-200"}`,children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:`text-sm font-medium ${t?"text-white":"text-gray-900"}`,children:x.name}),a.jsxs("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:["$",x.price,"  Stock: ",x.stock]})]}),a.jsx(Hd,{data:g(x,"product"),type:"product",item:x,size:60,showActions:!1})]})},x.id)),s.products.length>10&&a.jsxs("div",{className:`text-center text-sm ${t?"text-gray-400":"text-gray-500"}`,children:["+",s.products.length-10," more products"]})]})]}),a.jsxs("div",{className:`p-6 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[a.jsxs("h3",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"} mb-4`,children:[" Orders (",s.orders.length,")"]}),a.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:[s.orders.slice(0,10).map(x=>a.jsx("div",{className:`p-3 rounded ${t?"bg-gray-800":"bg-white"} border ${t?"border-gray-600":"border-gray-200"}`,children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("div",{className:`text-sm font-medium ${t?"text-white":"text-gray-900"}`,children:["#",x.id.slice(0,8)]}),a.jsxs("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:[x.customerName,"  $",x.total]})]}),a.jsx(Hd,{data:g(x,"order"),type:"order",item:x,size:60,showActions:!1})]})},x.id)),s.orders.length>10&&a.jsxs("div",{className:`text-center text-sm ${t?"text-gray-400":"text-gray-500"}`,children:["+",s.orders.length-10," more orders"]})]})]}),a.jsxs("div",{className:`p-6 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[a.jsxs("h3",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"} mb-4`,children:[" Users (",s.users.length,")"]}),s.users.length>0?a.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:[s.users.slice(0,10).map(x=>a.jsx("div",{className:`p-3 rounded ${t?"bg-gray-800":"bg-white"} border ${t?"border-gray-600":"border-gray-200"}`,children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:`text-sm font-medium ${t?"text-white":"text-gray-900"}`,children:x.displayName||x.email}),a.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:x.accountType||"user"})]}),a.jsx(Hd,{data:g(x,"user"),type:"user",item:x,size:60,showActions:!1})]})},x.id)),s.users.length>10&&a.jsxs("div",{className:`text-center text-sm ${t?"text-gray-400":"text-gray-500"}`,children:["+",s.users.length-10," more users"]})]}):a.jsx("div",{className:`text-center text-sm ${t?"text-gray-400":"text-gray-500"}`,children:(e==null?void 0:e.accountType)==="admin"||(e==null?void 0:e.accountType)==="manager"?"No users found":"Admin access required"})]})]})}),h==="history"&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Scan History"}),R.length>0&&a.jsx("button",{onClick:v,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Clear All"})]}),R.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:R.map(x=>a.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"} border ${t?"border-gray-600":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:x.parsed.isOurFormat?`${x.parsed.type}: ${x.parsed.data.name||x.parsed.data.customer||x.parsed.data.email||x.parsed.id}`:x.parsed.type==="text"?"Text QR":"External QR"}),a.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:x.timestamp.toLocaleString()})]}),x.parsed.isOurFormat&&a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t?"bg-green-900/30 text-green-400":"bg-green-100 text-green-800"}`,children:"Internal"})]}),a.jsx("div",{className:`p-2 rounded text-xs ${t?"bg-gray-800":"bg-white"} mb-3`,children:a.jsx("pre",{className:"break-all whitespace-pre-wrap max-h-20 overflow-y-auto",children:typeof x.rawData=="object"?JSON.stringify(x.rawData,null,2).substring(0,200)+(JSON.stringify(x.rawData).length>200?"...":""):x.rawData.substring(0,200)+(x.rawData.length>200?"...":"")})}),x.parsed.isOurFormat&&x.parsed.url&&a.jsx("button",{onClick:()=>Zl(x.rawData,n),className:"w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700 transition-colors",children:"Open Item"})]},x.id))}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-4xl mb-4",children:""}),a.jsx("h3",{className:`text-lg font-medium ${t?"text-gray-300":"text-gray-900"} mb-2`,children:"No Scan History"}),a.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"} mb-4`,children:"Start scanning QR codes to see your history here"}),a.jsx("button",{onClick:()=>p("scanner"),className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors",children:"Go to Scanner"})]})]}),h==="bulk"&&a.jsxs("div",{children:[a.jsx("h3",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"} mb-6`,children:"Bulk QR Operations"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"} mb-4`,children:" Products Bulk Generation"}),a.jsx(Wd,{selectedItems:s.products,itemType:"product",onClearSelection:()=>{}})]}),a.jsxs("div",{children:[a.jsx("h4",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"} mb-4`,children:" Orders Bulk Generation"}),a.jsx(Wd,{selectedItems:s.orders,itemType:"order",onClearSelection:()=>{}})]}),s.users.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"} mb-4`,children:" Users Bulk Generation"}),a.jsx(Wd,{selectedItems:s.users,itemType:"user",onClearSelection:()=>{}})]})]})]})]})]}),a.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow border p-6`,children:[a.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"} mb-4`,children:" QR Code Help & Features"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:`font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:" Scanner Features"}),a.jsxs("ul",{className:`text-sm space-y-1 ${t?"text-gray-400":"text-gray-600"}`,children:[a.jsx("li",{children:" Camera & file scanning"}),a.jsx("li",{children:" Auto-navigation"}),a.jsx("li",{children:" History tracking"}),a.jsx("li",{children:" Multiple formats supported"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:`font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:" Generator Features"}),a.jsxs("ul",{className:`text-sm space-y-1 ${t?"text-gray-400":"text-gray-600"}`,children:[a.jsx("li",{children:" Product QR codes"}),a.jsx("li",{children:" Order tracking"}),a.jsx("li",{children:" User profiles"}),a.jsx("li",{children:" Bulk generation"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:`font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:" Bulk Operations"}),a.jsxs("ul",{className:`text-sm space-y-1 ${t?"text-gray-400":"text-gray-600"}`,children:[a.jsx("li",{children:" Generate multiple QR codes"}),a.jsx("li",{children:" Download as images"}),a.jsx("li",{children:" Progress tracking"}),a.jsx("li",{children:" Batch processing"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:`font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:" Requirements"}),a.jsxs("ul",{className:`text-sm space-y-1 ${t?"text-gray-400":"text-gray-600"}`,children:[a.jsx("li",{children:" qrcode library"}),a.jsx("li",{children:" html5-qrcode library"}),a.jsx("li",{children:" @zxing/library"}),a.jsx("li",{children:" Camera permissions"})]})]})]})]})]})})},SO=A.lazy(()=>he(()=>import("./UserDashboard-0q34wuTX.js"),[])),RO=A.lazy(()=>he(()=>import("./ManagerDashboard-C0e2yUNg.js"),[])),AO=A.lazy(()=>he(()=>import("./AdminDashboard-CxekuWEb.js"),[])),Rv=A.lazy(()=>he(()=>import("./BusinessDashboard-BQpw1ZhF.js"),[])),CO=A.lazy(()=>he(()=>import("./GuestDashboard-lFzbLC2F.js"),[])),kO=A.lazy(()=>he(()=>import("./Home-DiJdAGzv.js"),[])),Rl=A.lazy(()=>he(()=>import("./Inventory-CgdR_eq5.js"),__vite__mapDeps([0,1,2,3]))),Av=A.lazy(()=>he(()=>import("./AddProduct-RHbWA88Y.js"),__vite__mapDeps([4,1,3]))),PO=A.lazy(()=>he(()=>import("./ProductDetail-D24HLyOD.js"),__vite__mapDeps([5,2,3]))),jO=A.lazy(()=>he(()=>import("./ProductDetails-N0I8Ubtc.js"),[])),Gd=A.lazy(()=>he(()=>import("./ProductCatalog-BGIclccz.js"),[]));A.lazy(()=>he(()=>Promise.resolve().then(()=>YO),void 0));const OO=A.lazy(()=>he(()=>import("./CreateOrder-D5SxRfi0.js"),__vite__mapDeps([6,7]))),DO=A.lazy(()=>he(()=>import("./OrderDetails-B3Ow_0vK.js"),__vite__mapDeps([8,7,9]))),LO=A.lazy(()=>he(()=>import("./InvoicePage-syehjgvh.js"),__vite__mapDeps([10,7,9]))),MO=A.lazy(()=>he(()=>import("./Cart-C7gHIMYU.js"),[])),VO=A.lazy(()=>he(()=>import("./Checkout-BZ3QZEEo.js"),__vite__mapDeps([11,7]))),Qd=A.lazy(()=>he(()=>import("./FeedbackPage-DDtpvQXI.js"),__vite__mapDeps([12,13]))),$O=A.lazy(()=>he(()=>import("./SupportCenter-UK08887k.js"),__vite__mapDeps([14,15]))),UO=A.lazy(()=>he(()=>import("./OrderProcessing-Dqn6ai43.js"),__vite__mapDeps([16,15]))),FO=A.lazy(()=>he(()=>import("./AboutUs-Bj_Yjbmd.js"),__vite__mapDeps([17,15]))),zO=A.lazy(()=>he(()=>import("./Documentation-Dum2Anij.js"),[])),BO=A.lazy(()=>he(()=>import("./PrivacyPolicy-CGNQgWTq.js"),__vite__mapDeps([18,15]))),qO=A.lazy(()=>he(()=>import("./HelpCenter-B8SBWI5e.js"),__vite__mapDeps([19,15]))),HO=A.lazy(()=>he(()=>import("./ContactSupport-0QZTRG8p.js"),__vite__mapDeps([20,15]))),uo=A.lazy(()=>he(()=>import("./UserApprovalDashboard-B8ZYWZjx.js"),[])),WO=A.lazy(()=>he(()=>import("./AdminPanel-BLAhAHXu.js"),[])),Kd=A.lazy(()=>he(()=>import("./UserSpecificOrders-DZDJdIlN.js"),__vite__mapDeps([21,13]))),GO=({onComplete:t})=>{const[e,n]=A.useState(0),[r,s]=A.useState(""),[i,o]=A.useState(0),l=["INITIALIZING WHOLESALER SYSTEM...","LOADING COMPONENTS...","CONNECTING TO SERVERS...","SYSTEM READY"];return A.useEffect(()=>{if(i<l.length){const u=l[i],d="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";let h=0;const p=setInterval(()=>{s(u.split("").map((y,w)=>w<h?u[w]:d[Math.floor(Math.random()*d.length)]).join("")),h>=u.length&&clearInterval(p),h+=1/3},30);return()=>clearInterval(p)}},[i]),A.useEffect(()=>{const u=setInterval(()=>{n(d=>{const h=d+2;if(h>=100)return clearInterval(u),setTimeout(t,500),100;const p=Math.floor(h/25);return p!==i&&p<l.length&&o(p),h})},80);return()=>clearInterval(u)},[i,t]),a.jsxs("div",{className:"fixed inset-0 bg-black flex items-center justify-center z-50 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-20",children:a.jsx("div",{className:"grid-pattern"})}),a.jsxs("div",{className:"text-center space-y-8 relative z-10 max-w-2xl px-8",children:[a.jsxs("div",{className:"mb-12",children:[a.jsx("div",{className:"text-6xl md:text-8xl font-bold bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 bg-clip-text text-transparent mb-4 animate-pulse",children:"WHOLESALER"}),a.jsx("div",{className:"text-sm text-gray-400 font-mono",children:"LOADING PLATFORM..."})]}),a.jsx("div",{className:"h-12 flex items-center justify-center",children:a.jsxs("div",{className:"text-cyan-400 font-mono text-lg",children:[r,a.jsx("span",{className:"animate-pulse",children:"_"})]})}),a.jsxs("div",{className:"w-full max-w-md mx-auto",children:[a.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-3",children:[a.jsx("span",{className:"font-mono",children:"LOADING"}),a.jsxs("span",{className:"font-mono",children:[e.toFixed(0),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-800 h-2 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 transition-all duration-300 rounded-full",style:{width:`${e}%`}})})]}),a.jsxs("div",{className:"flex justify-center space-x-6 text-xs",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-gray-400 font-mono",children:"SECURE"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-gray-400 font-mono",children:"ONLINE"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-gray-400 font-mono",children:"READY"})]})]})]}),a.jsx("style",{jsx:!0,children:`
        .grid-pattern {
          background-image: 
            linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
          background-size: 20px 20px;
          width: 100%;
          height: 100%;
          animation: gridMove 10s linear infinite;
        }

        @keyframes gridMove {
          0% { transform: translate(0, 0); }
          100% { transform: translate(20px, 20px); }
        }
      `})]})},QO=()=>a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]});function KO(){const[t,e]=A.useState(!0),n=()=>{e(!1)};return t?a.jsx(GO,{onComplete:n}):a.jsx(uO,{children:a.jsx(dO,{children:a.jsx(hO,{children:a.jsx(DS,{children:a.jsx(A.Suspense,{fallback:a.jsx(QO,{}),children:a.jsxs(gl,{children:[a.jsx(Z,{path:"/login",element:a.jsx(wO,{})}),a.jsx(Z,{path:"/register",element:a.jsx(EO,{})}),a.jsx(Z,{path:"/",element:a.jsx(ge,{children:a.jsx(kO,{})})}),a.jsx(Z,{path:"/guest-dashboard",element:a.jsx(ge,{children:a.jsx(CO,{})})}),a.jsx(Z,{path:"/qr-tools",element:a.jsx(ze,{children:a.jsx(ge,{children:a.jsx(NO,{})})})}),a.jsx(Z,{path:"/catalog",element:a.jsx(ge,{children:a.jsx(Gd,{})})}),a.jsx(Z,{path:"/products",element:a.jsx(ge,{children:a.jsx(Gd,{})})}),a.jsx(Z,{path:"/products/:id",element:a.jsx(ge,{children:a.jsx(jO,{})})}),a.jsx(Z,{path:"/browse",element:a.jsx(ge,{children:a.jsx(Gd,{})})}),a.jsx(Z,{path:"/help-center",element:a.jsx(ge,{children:a.jsx(qO,{})})}),a.jsx(Z,{path:"/contact-support",element:a.jsx(ge,{children:a.jsx(HO,{})})}),a.jsx(Z,{path:"/cart",element:a.jsx(qd,{type:"cart",children:a.jsx(ge,{children:a.jsx(MO,{})})})}),a.jsx(Z,{path:"/checkout",element:a.jsx(qd,{type:"checkout",children:a.jsx(ge,{children:a.jsx(VO,{})})})}),a.jsx(Z,{path:"/feedback",element:a.jsx(ze,{children:a.jsx(ge,{children:a.jsx(Qd,{})})})}),a.jsx(Z,{path:"/admin-dashboard",element:a.jsx(ze,{requiredRole:"admin",children:a.jsx(ge,{children:a.jsx(AO,{})})})}),a.jsx(Z,{path:"/business-dashboard",element:a.jsx(ze,{requiredRole:"business",children:a.jsx(ge,{children:a.jsx(Rv,{})})})}),a.jsx(Z,{path:"/manager-dashboard",element:a.jsx(ze,{requiredRole:"manager",children:a.jsx(ge,{children:a.jsx(RO,{})})})}),a.jsx(Z,{path:"/user-dashboard",element:a.jsx(ze,{requiredRole:"user",children:a.jsx(ge,{children:a.jsx(SO,{})})})}),a.jsx(Z,{path:"/admin/*",element:a.jsx(ze,{requiredRole:"admin",children:a.jsx(ge,{children:a.jsxs(gl,{children:[a.jsx(Z,{index:!0,element:a.jsx(WO,{})}),a.jsx(Z,{path:"users",element:a.jsx(uo,{})}),a.jsx(Z,{path:"approvals",element:a.jsx(uo,{})}),a.jsx(Z,{path:"pending-approvals",element:a.jsx(uo,{})}),a.jsx(Z,{path:"*",element:a.jsx(ei,{to:"/admin",replace:!0})})]})})})}),a.jsx(Z,{path:"/user-management",element:a.jsx(ze,{allowedRoles:["admin","manager"],requiredPermission:"canApproveUsers",children:a.jsx(ge,{children:a.jsx(uo,{})})})}),a.jsx(Z,{path:"/inventory",element:a.jsx(ze,{children:a.jsx(ge,{children:a.jsx(Rl,{})})})}),a.jsx(Z,{path:"/inventory/:id",element:a.jsx(ze,{children:a.jsx(ge,{children:a.jsx(PO,{})})})}),a.jsx(Z,{path:"/add-product",element:a.jsx(ze,{children:a.jsx(ge,{children:a.jsx(Av,{})})})}),a.jsx(Z,{path:"/orders",element:a.jsx(ze,{children:a.jsx(ge,{children:a.jsx(Kd,{})})})}),a.jsx(Z,{path:"/about-us",element:a.jsx(ge,{children:a.jsx(FO,{})})}),a.jsx(Z,{path:"/documentation",element:a.jsx(ge,{children:a.jsx(zO,{})})}),a.jsx(Z,{path:"/privacy-policy",element:a.jsx(ge,{children:a.jsx(BO,{})})}),a.jsx(Z,{path:"/support-center",element:a.jsx(ge,{children:a.jsx($O,{})})}),a.jsx(Z,{path:"/order-processing",element:a.jsx(ge,{children:a.jsx(UO,{})})}),a.jsx(Z,{path:"/orders/:id",element:a.jsx(ze,{children:a.jsx(ge,{children:a.jsx(DO,{})})})}),a.jsx(Z,{path:"/generate-invoice/:id",element:a.jsx(ze,{children:a.jsx(ge,{children:a.jsx(LO,{})})})}),a.jsx(Z,{path:"/create-order",element:a.jsx(qd,{type:"orders",children:a.jsx(ze,{children:a.jsx(ge,{children:a.jsx(OO,{})})})})}),a.jsx(Z,{path:"/manager/*",element:a.jsx(ze,{allowedRoles:["admin","manager"],children:a.jsx(ge,{children:a.jsxs(gl,{children:[a.jsx(Z,{index:!0,element:a.jsxs("div",{className:"p-8",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Manager Panel"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Comprehensive management tools and analytics for operations oversight."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsx(le,{to:"/manager/users",className:"block p-6 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"User Management"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage users and approvals"})]})]})}),a.jsx(le,{to:"/manager/inventory",className:"block p-6 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Inventory Control"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage products and stock"})]})]})}),a.jsx(le,{to:"/add-product",className:"block p-6 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add Product"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"List new products"})]})]})}),a.jsx(le,{to:"/manager/orders",className:"block p-6 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Order Management"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"View and process all orders"})]})]})}),a.jsx(le,{to:"/manager/analytics",className:"block p-6 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Analytics"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Performance metrics"})]})]})}),a.jsx(le,{to:"/manager/reports",className:"block p-6 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Reports"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Generate detailed reports"})]})]})}),a.jsx(le,{to:"/manager/settings",className:"block p-6 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Settings"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"System configuration"})]})]})}),a.jsx(le,{to:"/manager/feedback",className:"block p-6 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Feedback Management"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Review customer feedback"})]})]})})]})]})}),a.jsx(Z,{path:"users",element:a.jsx(uo,{})}),a.jsx(Z,{path:"inventory",element:a.jsx(Rl,{})}),a.jsx(Z,{path:"orders",element:a.jsx(Kd,{})}),a.jsx(Z,{path:"feedback",element:a.jsx(Qd,{})}),a.jsx(Z,{path:"analytics",element:a.jsxs("div",{className:"p-8",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Manager Analytics"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Comprehensive analytics and performance metrics."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Team Performance"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Monitor team productivity and efficiency"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"System Health"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Platform performance metrics"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Revenue Trends"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Financial performance analysis"})]})]})]})}),a.jsx(Z,{path:"reports",element:a.jsxs("div",{className:"p-8",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Manager Reports"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Generate and download detailed reports."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Monthly Summary Report"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Comprehensive monthly business overview"}),a.jsx("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Generate Report"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Inventory Report"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Stock levels and inventory analysis"}),a.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Generate Report"})]})]})]})}),a.jsx(Z,{path:"settings",element:a.jsxs("div",{className:"p-8",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Manager Settings"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"System configuration and preferences."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"System Configuration"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure system-wide settings"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"User Permissions"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage user roles and permissions"})]})]})]})}),a.jsx(Z,{path:"*",element:a.jsx(ei,{to:"/manager",replace:!0})})]})})})}),a.jsx(Z,{path:"/business/*",element:a.jsx(ze,{requiredRole:"business",children:a.jsx(ge,{children:a.jsxs(gl,{children:[a.jsx(Z,{index:!0,element:a.jsx(Rv,{})}),a.jsx(Z,{path:"products",element:a.jsx(ze,{children:a.jsx(Rl,{})})}),a.jsx(Z,{path:"add-product",element:a.jsx(ze,{children:a.jsx(Av,{})})}),a.jsx(Z,{path:"inventory",element:a.jsx(ze,{children:a.jsx(Rl,{})})}),a.jsx(Z,{path:"orders",element:a.jsx(Kd,{})}),a.jsx(Z,{path:"feedback",element:a.jsx(Qd,{})}),a.jsx(Z,{path:"analytics",element:a.jsxs("div",{className:"p-8",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Business Analytics"}),a.jsx("p",{children:"Detailed analytics and performance metrics would go here."}),a.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Sales Overview"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Monthly sales performance"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Customer Insights"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Customer behavior analysis"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Product Performance"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Top selling products"})]})]})]})}),a.jsx(Z,{path:"settings",element:a.jsxs("div",{className:"p-8",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Business Settings"}),a.jsx("p",{children:"Business account settings and preferences would go here."}),a.jsxs("div",{className:"mt-6 space-y-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Account Information"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Update your business details"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Payment Settings"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage payment methods and billing"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Notifications"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure notification preferences"})]})]})]})}),a.jsx(Z,{path:"help",element:a.jsxs("div",{className:"p-8",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Help & Support"}),a.jsx("p",{children:"Business support resources and documentation."}),a.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:" Getting Started Guide"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Learn how to use the platform effectively"}),a.jsx("button",{className:"text-indigo-600 hover:text-indigo-800 font-medium",children:"Read Guide "})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:" Contact Support"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Get help from our support team"}),a.jsx("button",{className:"text-indigo-600 hover:text-indigo-800 font-medium",children:"Contact Us "})]})]})]})}),a.jsx(Z,{path:"*",element:a.jsx(ei,{to:"/business",replace:!0})})]})})})}),a.jsx(Z,{path:"*",element:a.jsx(ei,{to:"/",replace:!0})})]})})})})})})}Yd.createRoot(document.getElementById("root")).render(a.jsx(eT.StrictMode,{children:a.jsx(KO,{})}));const YO=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{s1 as A,r1 as B,yO as C,gO as D,pO as E,n1 as F,mO as G,Ip as H,fO as I,dD as J,uD as K,le as L,JO as M,vv as N,lD as O,$t as P,cD as Q,oD as R,xf as S,ma as T,aD as U,t1 as V,sD as W,eT as X,V1 as Y,XO as Z,Yr as a,Gj as b,Md as c,ps as d,Lo as e,iD as f,$d as g,tr as h,Dt as i,a as j,tD as k,Il as l,as as m,Vd as n,SC as o,nD as p,Tl as q,A as r,rD as s,hD as t,Lt as u,vO as v,eD as w,i1 as x,Si as y,fa as z};
