import{r as c,j as e,p as K,t as T,v as J,x as O,f as W,b as S,d as C,y as Q,c as _,z as X,A as Y,u as Z,L as U,a as I,k as M}from"./index-CFL3WSdy.js";const ee=({label:o="Upload Image",initialImage:x="",onImageUploaded:r,uploadToStorage:t=null,folder:y="images",filePrefix:s="",maxSizeMB:f=2,showPreview:N=!0,previewSize:w="md",darkMode:i=!1,className:v="",autoUpload:k=!1,customId:d=null,buttonLabel:m=null})=>{const[u,a]=c.useState(x),[g,h]=c.useState(null),[j,L]=c.useState(!1),[n,l]=c.useState(""),[p,E]=c.useState(0),F=c.useRef(null);c.useEffect(()=>{x&&a(x)},[x]);const H={sm:"h-16 w-16",md:"h-20 w-20",lg:"h-32 w-32",xl:"h-48 w-48"},q=async D=>{const b=D.target.files[0];if(!b)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(b.type)){l("Please select a valid image file (JPEG, PNG, GIF, or WEBP)");return}if(b.size>f*1024*1024){l(`Image size must be less than ${f}MB`);return}l(""),h(b);const P=new FileReader;P.onloadend=()=>{a(P.result)},P.readAsDataURL(b),k?await A(b):r&&r(b)},A=async(D=null)=>{const b=D||g;if(!b)return u&&x?x:(l("Please select an image first"),"");try{L(!0),l(""),E(0);let $;if(t)$=await t(b);else{const P=`${s||""}${Date.now()}_${b.name}`,V=d?`${y}/${d}/${P}`:`${y}/${P}`,B=K(T,V);let R=0;const z=setInterval(()=>{R+=10,E(Math.min(R,90)),R>=90&&clearInterval(z)},200);await J(B,b),clearInterval(z),E(100),$=await O(B)}return r&&r($),L(!1),$}catch($){return console.error("Error uploading image:",$),l("Failed to upload image. Please try again."),L(!1),null}},G=()=>{a(""),h(null),E(0),r&&r(""),F.current&&(F.current.value="")};return e.jsxs("div",{className:`w-full ${v}`,children:[o&&e.jsx("label",{className:`block text-sm font-medium ${i?"text-gray-300":"text-gray-700"} mb-1`,children:o}),e.jsxs("div",{className:"mt-1 flex items-center space-x-4",children:[N&&e.jsxs("div",{className:`flex-shrink-0 ${H[w]} ${i?"bg-gray-700":"bg-gray-100"} rounded-md overflow-hidden flex items-center justify-center relative`,children:[u?e.jsx("img",{src:u,alt:"Preview",className:"h-full w-full object-cover"}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),u&&e.jsx("button",{type:"button",onClick:G,className:`absolute top-0 right-0 p-1 ${i?"bg-gray-800 text-gray-200":"bg-white text-gray-700"} rounded-bl-md hover:bg-red-500 hover:text-white transition-colors`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("input",{type:"file",accept:"image/*",id:`image-upload-${d||"default"}`,ref:F,onChange:q,className:"hidden",disabled:j}),e.jsxs("label",{htmlFor:`image-upload-${d||"default"}`,className:`inline-flex items-center px-3 py-1.5 ${i?"bg-gray-700 border-gray-600 text-gray-200 hover:bg-gray-600":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"} border rounded-md text-sm font-medium cursor-pointer transition-colors`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})}),u?"Change":m||"Select Image"]}),!k&&g&&!j&&e.jsx("button",{onClick:()=>A(),className:`inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-white ${i?"bg-indigo-600 hover:bg-indigo-500":"bg-indigo-600 hover:bg-indigo-700"}`,children:"Upload"}),j&&e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i?"bg-indigo-900/30 text-indigo-400":"bg-indigo-100 text-indigo-800"}`,children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]})]}),n&&e.jsx("p",{className:`text-xs mt-1 ${i?"text-red-400":"text-red-600"}`,children:n}),j&&p>0&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:i?"text-gray-400":"text-gray-500",children:"Uploading..."}),e.jsxs("span",{className:i?"text-gray-400":"text-gray-500",children:[p,"%"]})]}),e.jsx("div",{className:`w-full h-1.5 bg-gray-200 rounded-full overflow-hidden ${i?"bg-gray-700":"bg-gray-200"}`,children:e.jsx("div",{className:`h-full ${i?"bg-indigo-500":"bg-indigo-600"} rounded-full`,style:{width:`${p}%`}})})]}),e.jsxs("p",{className:`text-xs mt-1 ${i?"text-gray-400":"text-gray-500"}`,children:["Recommended: Square image (e.g., 600×600px), JPEG or PNG, under ",f,"MB"]})]})]})]})},te=({product:o,onClose:x,categories:r,darkMode:t})=>{const y=!!o,[s,f]=c.useState({name:"",sku:"",category:"",price:"",stock:"",description:"",imageUrl:"",costPrice:"",supplier:"",reorderPoint:""}),[N,w]=c.useState(!1),[i,v]=c.useState({});c.useEffect(()=>{o&&f({name:o.name||"",sku:o.sku||"",category:o.category||"",price:o.price||"",stock:o.stock||"",description:o.description||"",imageUrl:o.imageUrl||"",costPrice:o.costPrice||"",supplier:o.supplier||"",reorderPoint:o.reorderPoint||""})},[o]);const k=()=>{const a={};return s.name.trim()||(a.name="Product name is required"),s.category||(a.category="Category is required"),s.price?(isNaN(s.price)||Number(s.price)<=0)&&(a.price="Price must be a positive number"):a.price="Price is required",s.stock?(isNaN(s.stock)||Number(s.stock)<0||!Number.isInteger(Number(s.stock)))&&(a.stock="Stock must be a non-negative integer"):a.stock="Stock quantity is required",s.costPrice&&(isNaN(s.costPrice)||Number(s.costPrice)<=0)&&(a.costPrice="Cost price must be a positive number"),s.reorderPoint&&(isNaN(s.reorderPoint)||Number(s.reorderPoint)<0||!Number.isInteger(Number(s.reorderPoint)))&&(a.reorderPoint="Reorder point must be a non-negative integer"),a},d=a=>{const{name:g,value:h}=a.target;f(j=>({...j,[g]:h})),i[g]&&v(j=>({...j,[g]:void 0}))},m=a=>{f(g=>({...g,imageUrl:a}))},u=async a=>{a.preventDefault();const g=k();if(Object.keys(g).length>0){v(g);return}try{w(!0);const h={name:s.name,sku:s.sku,category:s.category,price:Number(s.price),stock:Number(s.stock),description:s.description,imageUrl:s.imageUrl,costPrice:s.costPrice?Number(s.costPrice):null,supplier:s.supplier,reorderPoint:s.reorderPoint?Number(s.reorderPoint):null,updatedAt:new Date};y?await W(S(C,"products",o.id),h):(h.createdAt=new Date,await Q(_(C,"products"),h)),w(!1),x(!0)}catch(h){console.error("Error saving product:",h),w(!1),v({submit:"Failed to save product. Please try again."})}};return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:e.jsxs("div",{className:`relative ${t?"bg-gray-800 text-gray-200":"bg-white text-gray-900"} rounded-lg shadow-xl mx-auto max-w-2xl w-full`,children:[e.jsx("div",{className:`${t?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"} py-4 px-6 rounded-t-lg border-b`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:`text-lg font-medium ${t?"text-gray-200":"text-gray-900"}`,children:y?"Edit Product":"Add New Product"}),e.jsx("button",{type:"button",onClick:()=>x(!1),className:`${t?"text-gray-400 hover:text-gray-300":"text-gray-400 hover:text-gray-500"} focus:outline-none`,children:e.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("form",{onSubmit:u,className:"p-6",children:[i.submit&&e.jsx("div",{className:`mb-4 ${t?"bg-red-900/30 border-red-800":"bg-red-50 border-red-400"} border-l-4 p-4 rounded-md`,children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:`text-sm ${t?"text-red-400":"text-red-700"}`,children:i.submit})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:["Product Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",id:"name",value:s.name,onChange:d,className:`mt-1 block w-full shadow-sm sm:text-sm rounded-md ${i.name?`${t?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-red-300 focus:ring-red-500 focus:border-red-500"}`:`${t?"border-gray-600 bg-gray-700 focus:ring-indigo-500 focus:border-indigo-500":"border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"}`}`,placeholder:"Enter product name"}),i.name&&e.jsx("p",{className:`mt-1 text-sm ${t?"text-red-400":"text-red-600"}`,children:i.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sku",className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"SKU"}),e.jsx("input",{type:"text",name:"sku",id:"sku",value:s.sku,onChange:d,className:`mt-1 block w-full shadow-sm sm:text-sm rounded-md ${t?"border-gray-600 bg-gray-700 focus:ring-indigo-500 focus:border-indigo-500":"border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"}`,placeholder:"Enter SKU (optional)"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"category",className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"category",name:"category",value:s.category,onChange:d,className:`mt-1 block w-full pl-3 pr-10 py-2 text-base shadow-sm sm:text-sm rounded-md ${i.category?`${t?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-red-300 focus:ring-red-500 focus:border-red-500"}`:`${t?"border-gray-600 bg-gray-700 focus:ring-indigo-500 focus:border-indigo-500":"border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"}`}`,children:[e.jsx("option",{value:"",children:"Select a category"}),r.map(a=>e.jsx("option",{value:a,children:a},a))]}),i.category&&e.jsx("p",{className:`mt-1 text-sm ${t?"text-red-400":"text-red-600"}`,children:i.category})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"price",className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:["Selling Price ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:`${t?"text-gray-400":"text-gray-500"} sm:text-sm`,children:"$"})}),e.jsx("input",{type:"number",name:"price",id:"price",value:s.price,onChange:d,step:"0.01",min:"0",className:`block w-full pl-7 pr-12 sm:text-sm rounded-md ${i.price?`${t?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-red-300 focus:ring-red-500 focus:border-red-500"}`:`${t?"border-gray-600 bg-gray-700 focus:ring-indigo-500 focus:border-indigo-500":"border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"}`}`,placeholder:"0.00"})]}),i.price&&e.jsx("p",{className:`mt-1 text-sm ${t?"text-red-400":"text-red-600"}`,children:i.price})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"stock",className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:["Stock Quantity ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"stock",id:"stock",value:s.stock,onChange:d,min:"0",step:"1",className:`mt-1 block w-full shadow-sm sm:text-sm rounded-md ${i.stock?`${t?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-red-300 focus:ring-red-500 focus:border-red-500"}`:`${t?"border-gray-600 bg-gray-700 focus:ring-indigo-500 focus:border-indigo-500":"border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"}`}`,placeholder:"0"}),i.stock&&e.jsx("p",{className:`mt-1 text-sm ${t?"text-red-400":"text-red-600"}`,children:i.stock})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Product Image"}),e.jsx(ee,{initialImage:s.imageUrl,onImageUploaded:m,folder:"product-images",itemId:y?o.id:null,maxSizeMB:2,aspectRatio:[1,1],darkMode:t,showPreview:!0,autoUpload:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"costPrice",className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"Cost Price"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:`${t?"text-gray-400":"text-gray-500"} sm:text-sm`,children:"$"})}),e.jsx("input",{type:"number",name:"costPrice",id:"costPrice",value:s.costPrice,onChange:d,step:"0.01",min:"0",className:`block w-full pl-7 pr-12 sm:text-sm rounded-md ${i.costPrice?`${t?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-red-300 focus:ring-red-500 focus:border-red-500"}`:`${t?"border-gray-600 bg-gray-700 focus:ring-indigo-500 focus:border-indigo-500":"border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"}`}`,placeholder:"0.00"})]}),i.costPrice&&e.jsx("p",{className:`mt-1 text-sm ${t?"text-red-400":"text-red-600"}`,children:i.costPrice})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"supplier",className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"Supplier"}),e.jsx("input",{type:"text",name:"supplier",id:"supplier",value:s.supplier,onChange:d,className:`mt-1 block w-full shadow-sm sm:text-sm rounded-md ${t?"border-gray-600 bg-gray-700 focus:ring-indigo-500 focus:border-indigo-500":"border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"}`,placeholder:"Enter supplier name (optional)"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reorderPoint",className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"Reorder Point"}),e.jsx("input",{type:"number",name:"reorderPoint",id:"reorderPoint",value:s.reorderPoint,onChange:d,min:"0",step:"1",className:`mt-1 block w-full shadow-sm sm:text-sm rounded-md ${i.reorderPoint?`${t?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-red-300 focus:ring-red-500 focus:border-red-500"}`:`${t?"border-gray-600 bg-gray-700 focus:ring-indigo-500 focus:border-indigo-500":"border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"}`}`,placeholder:"0"}),i.reorderPoint&&e.jsx("p",{className:`mt-1 text-sm ${t?"text-red-400":"text-red-600"}`,children:i.reorderPoint}),e.jsx("p",{className:`mt-1 text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Minimum inventory level before reordering"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"Description"}),e.jsx("textarea",{id:"description",name:"description",rows:"5",value:s.description,onChange:d,className:`mt-1 block w-full shadow-sm sm:text-sm rounded-md ${t?"border-gray-600 bg-gray-700 focus:ring-indigo-500 focus:border-indigo-500":"border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"}`,placeholder:"Enter product description (optional)"})]})]})]}),e.jsxs("div",{className:"mt-8 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:`inline-flex justify-center py-2 px-4 border ${t?"border-gray-600 text-gray-300 bg-gray-700 hover:bg-gray-600":"border-gray-300 text-gray-700 bg-white hover:bg-gray-50"} shadow-sm text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500`,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:N,className:`inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white ${N?`${t?"bg-indigo-500 opacity-70":"bg-indigo-400"}`:"bg-indigo-600 hover:bg-indigo-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500`,children:N?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Product"})]})]})]})})},se=()=>{const{id:o}=X(),x=Y(),{darkMode:r}=Z(),[t,y]=c.useState(null),[s,f]=c.useState(!0),[N,w]=c.useState(null),[i,v]=c.useState(!1),[k,d]=c.useState(!1),[m,u]=c.useState(0),[a,g]=c.useState([]);c.useEffect(()=>{(async()=>{try{f(!0);const l=S(C,"products",o),p=await I(l);p.exists()?y({id:p.id,...p.data()}):w("Product not found"),g(["Electronics","Office Supplies","Furniture","Kitchen","Clothing"]),f(!1)}catch(l){console.error("Error fetching product:",l),w("Failed to load product data. Please try again later."),f(!1)}})()},[o]);const h=async()=>{if(m!==0)try{const n=Math.max(0,(t.stock||0)+m),l=S(C,"products",o);await W(l,{stock:n,updatedAt:new Date}),y({...t,stock:n}),u(0)}catch(n){console.error("Error updating stock:",n),alert("Failed to update stock. Please try again.")}},j=async()=>{try{const n=S(C,"products",o);await M(n),x("/inventory")}catch(n){console.error("Error deleting product:",n),alert("Failed to delete product. Please try again.")}},L=async n=>{if(v(!1),n)try{const l=S(C,"products",o),p=await I(l);p.exists()&&y({id:p.id,...p.data()})}catch(l){console.error("Error refreshing product data:",l)}};return s?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):N?e.jsx("div",{className:`container mx-auto px-4 py-8 ${r?"text-white":""}`,children:e.jsxs("div",{className:`${r?"bg-gray-800":"bg-white"} shadow rounded-lg p-6`,children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:N}),e.jsx(U,{to:"/inventory",className:`text-indigo-${r?"400":"600"} hover:text-indigo-${r?"300":"800"}`,children:"← Back to Inventory"})]})}):t?e.jsxs("div",{className:`container mx-auto px-4 py-8 ${r?"text-white":""}`,children:[e.jsxs("div",{className:`${r?"bg-gray-800":"bg-white"} shadow rounded-lg overflow-hidden`,children:[e.jsxs("div",{className:`px-6 py-4 border-b ${r?"border-gray-700":"border-gray-200"} flex justify-between items-center`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{to:"/inventory",className:`mr-4 text-indigo-${r?"400":"600"} hover:text-indigo-${r?"300":"800"} flex items-center`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),e.jsx("h2",{className:"text-2xl font-bold",children:t.name})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>v(!0),className:`inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-${r?"500":"600"} hover:bg-indigo-${r?"400":"700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),e.jsxs("button",{onClick:()=>d(!0),className:`inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-red-${r?"500":"600"} hover:bg-red-${r?"400":"700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]}),e.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:`border ${r?"border-gray-700":"border-gray-200"} rounded-lg overflow-hidden mb-4`,children:e.jsx("div",{className:`h-80 bg-gray-100 ${r?"bg-gray-700":""} flex items-center justify-center`,children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-contain"}):e.jsxs("div",{className:"text-center p-6",children:[e.jsx("svg",{className:`mx-auto h-16 w-16 ${r?"text-gray-600":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{className:`mt-2 ${r?"text-gray-400":"text-gray-500"}`,children:"No product image available"}),e.jsx("button",{onClick:()=>v(!0),className:`mt-4 inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-${r?"500":"600"} hover:bg-indigo-${r?"400":"700"}`,children:"Add Image"})]})})}),e.jsxs("div",{className:`border ${r?"border-gray-700":"border-gray-200"} rounded-lg p-4`,children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Description"}),e.jsx("p",{className:`${r?"text-gray-300":"text-gray-600"}`,children:t.description||"No description available for this product."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`border ${r?"border-gray-700":"border-gray-200"} rounded-lg p-4`,children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Product Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-400":"text-gray-500"}`,children:"Category"}),e.jsx("span",{className:`block mt-1 text-sm ${r?"text-white":"text-gray-900"}`,children:t.category||"Uncategorized"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-400":"text-gray-500"}`,children:"SKU"}),e.jsx("span",{className:`block mt-1 text-sm ${r?"text-white":"text-gray-900"}`,children:t.sku||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-400":"text-gray-500"}`,children:"Supplier"}),e.jsx("span",{className:`block mt-1 text-sm ${r?"text-white":"text-gray-900"}`,children:t.supplier||"N/A"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-400":"text-gray-500"}`,children:"Selling Price"}),e.jsxs("span",{className:`block mt-1 text-sm font-medium ${r?"text-white":"text-gray-900"}`,children:["$",parseFloat(t.price).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-400":"text-gray-500"}`,children:"Cost Price"}),e.jsx("span",{className:`block mt-1 text-sm ${r?"text-white":"text-gray-900"}`,children:t.costPrice?`$${parseFloat(t.costPrice).toFixed(2)}`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-400":"text-gray-500"}`,children:"Profit Margin"}),e.jsx("span",{className:`block mt-1 text-sm ${r?"text-white":"text-gray-900"}`,children:t.costPrice?`${Math.round((t.price-t.costPrice)/t.price*100)}%`:"N/A"})]})]})]})]}),e.jsxs("div",{className:`border ${r?"border-gray-700":"border-gray-200"} rounded-lg p-4`,children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Stock Information"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:`text-sm font-medium ${r?"text-gray-400":"text-gray-500"}`,children:"Current Stock"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium 
                    ${parseInt(t.stock)<=5?r?"bg-red-900/30 text-red-400":"bg-red-100 text-red-800":r?"bg-green-900/30 text-green-400":"bg-green-100 text-green-800"}`,children:parseInt(t.stock)<=5?"Low Stock":"In Stock"})]}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx("span",{className:`text-2xl font-bold ${r?"text-white":"text-gray-900"}`,children:t.stock||0}),e.jsx("span",{className:`ml-2 text-sm ${r?"text-gray-400":"text-gray-500"}`,children:"units"})]})]}),t.reorderPoint&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-400":"text-gray-500"}`,children:"Reorder Point"}),e.jsx("span",{className:`block mt-1 text-sm ${r?"text-white":"text-gray-900"}`,children:t.reorderPoint})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-400":"text-gray-500"} mb-2`,children:"Adjust Stock"}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex rounded-md shadow-sm flex-1",children:[e.jsxs("button",{type:"button",onClick:()=>u(n=>Math.max(t.stock*-1,n-1)),className:`relative inline-flex items-center px-3 py-2 rounded-l-md border ${r?"border-gray-600 bg-gray-700 text-gray-300":"border-gray-300 bg-gray-50 text-gray-500"} hover:bg-gray-${r?"600":"100"}`,children:[e.jsx("span",{className:"sr-only",children:"Decrease"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 12H6"})})]}),e.jsx("input",{type:"number",id:"stock-adjustment",value:m,onChange:n=>{const l=parseInt(n.target.value,10);isNaN(l)||l>=-t.stock&&u(l)},className:`block w-full flex-1 rounded-none ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border-y text-center`}),e.jsxs("button",{type:"button",onClick:()=>u(n=>n+1),className:`relative inline-flex items-center px-3 py-2 rounded-r-md border ${r?"border-gray-600 bg-gray-700 text-gray-300":"border-gray-300 bg-gray-50 text-gray-500"} hover:bg-gray-${r?"600":"100"}`,children:[e.jsx("span",{className:"sr-only",children:"Increase"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})]})]}),e.jsx("button",{onClick:h,disabled:m===0,className:`ml-3 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white ${m===0?"bg-gray-300 dark:bg-gray-600 cursor-not-allowed":m>0?"bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-400":"bg-red-600 hover:bg-red-700 dark:bg-red-500 dark:hover:bg-red-400"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500`,children:m===0?"No Change":m>0?`Add ${m}`:`Remove ${Math.abs(m)}`})]}),e.jsx("div",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:m!==0&&e.jsxs("div",{children:["New stock will be: ",e.jsx("span",{className:"font-medium",children:t.stock+m})]})})]})]}),e.jsxs("div",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:["Last Updated: ",t.updatedAt?new Date(t.updatedAt.toDate()).toLocaleString():"N/A"]})]})]})]}),k&&e.jsx("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),e.jsxs("div",{className:`inline-block align-bottom ${r?"bg-gray-800":"bg-white"} rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full`,children:[e.jsx("div",{className:`${r?"bg-gray-800":"bg-white"} px-4 pt-5 pb-4 sm:p-6 sm:pb-4`,children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[e.jsx("h3",{className:`text-lg leading-6 font-medium ${r?"text-white":"text-gray-900"}`,id:"modal-title",children:"Delete Product"}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:`text-sm ${r?"text-gray-300":"text-gray-500"}`,children:"Are you sure you want to delete this product? This action cannot be undone."})})]})]})}),e.jsxs("div",{className:`${r?"bg-gray-800":"bg-gray-50"} px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse`,children:[e.jsx("button",{type:"button",onClick:j,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),e.jsx("button",{type:"button",onClick:()=>d(!1),className:`mt-3 w-full inline-flex justify-center rounded-md border ${r?"border-gray-600 bg-gray-700 text-gray-300":"border-gray-300 bg-white text-gray-700"} shadow-sm px-4 py-2 text-base font-medium hover:bg-gray-${r?"600":"50"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm`,children:"Cancel"})]})]})]})}),i&&e.jsx(te,{product:t,onClose:L,categories:a})]}):e.jsx("div",{className:`container mx-auto px-4 py-8 ${r?"text-white":""}`,children:e.jsxs("div",{className:`${r?"bg-gray-800":"bg-white"} shadow rounded-lg p-6`,children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Product not found"}),e.jsx(U,{to:"/inventory",className:`text-indigo-${r?"400":"600"} hover:text-indigo-${r?"300":"800"}`,children:"← Back to Inventory"})]})})};export{se as default};
