import{u as E,e as V,r as m,j as e,L as p,g as N,c as $,d as f}from"./index-CFL3WSdy.js";const w=({data:t,title:s,description:a,color:r,darkMode:l})=>{const o=Math.max(...t.map(n=>n.value));return e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`text-sm font-medium ${l?"text-gray-300":"text-gray-700"} mb-1`,children:s}),a&&e.jsx("p",{className:`text-xs ${l?"text-gray-400":"text-gray-500"} mb-3`,children:a}),e.jsx("div",{className:"space-y-2",children:t.map((n,x)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`text-xs w-16 ${l?"text-gray-400":"text-gray-500"}`,children:n.name}),e.jsx("div",{className:"flex-1 ml-2",children:e.jsx("div",{className:`h-4 rounded-full bg-${r}-${l?"900/30":"100"} overflow-hidden`,children:e.jsx("div",{className:`h-4 rounded-full bg-${r}-${l?"500":"600"}`,style:{width:`${n.value/o*100}%`}})})}),e.jsx("span",{className:`ml-2 text-xs font-medium ${l?"text-gray-300":"text-gray-700"}`,children:n.value})]},x))})]})},B=({stats:t,darkMode:s})=>{var n;const r=(()=>{const x=["Jan","Feb","Mar","Apr","May","Jun"];return new Date().getMonth(),x.map((u,h)=>{const d=t.totalRevenue*(.8+Math.random()*.4)/6;return{name:u,value:Math.round(d)}})})(),l=t.monthlyGrowth||0,o=t.totalRevenue*1.15;return e.jsxs("div",{className:`${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-lg overflow-hidden border`,children:[e.jsx("div",{className:`px-6 py-4 border-b ${s?"border-gray-700":"border-gray-100"}`,children:e.jsx("h2",{className:`text-xl font-bold ${s?"text-white":"text-gray-800"}`,children:"Revenue Analytics"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("div",{className:`text-sm ${s?"text-gray-400":"text-gray-500"}`,children:"Growth Rate"}),e.jsxs("div",{className:`text-2xl font-bold ${s?"text-green-400":"text-green-600"}`,children:["+",l.toFixed(1),"%"]})]}),e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("div",{className:`text-sm ${s?"text-gray-400":"text-gray-500"}`,children:"Projected"}),e.jsxs("div",{className:`text-2xl font-bold ${s?"text-blue-400":"text-blue-600"}`,children:["$",o.toFixed(0)]})]})]}),e.jsx(w,{title:"Monthly Revenue Trend",description:"Revenue performance over the last 6 months",data:r,color:"indigo",darkMode:s}),e.jsxs("div",{className:`mt-6 p-4 rounded-lg ${s?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-100"} border`,children:[e.jsx("h3",{className:`font-semibold mb-2 ${s?"text-blue-300":"text-blue-800"}`,children:"ðŸ’¡ Revenue Insights"}),e.jsxs("ul",{className:`text-sm space-y-1 ${s?"text-blue-200":"text-blue-700"}`,children:[e.jsx("li",{children:"â€¢ Revenue tracking based on actual order data"}),e.jsxs("li",{children:["â€¢ Average order value: $",((n=t.avgOrderValue)==null?void 0:n.toFixed(2))||"0.00"]}),e.jsxs("li",{children:["â€¢ Total customers served: ",t.totalCustomers||"N/A"]})]})]})]})]})},L=({stats:t,darkMode:s})=>{var l,o;const r=[{name:"Frequent",value:Math.round(t.totalCustomers*.3)},{name:"Regular",value:Math.round(t.totalCustomers*.5)},{name:"Occasional",value:Math.round(t.totalCustomers*.2)}].filter(x=>x.value>0);return e.jsxs("div",{className:`${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-lg overflow-hidden border`,children:[e.jsx("div",{className:`px-6 py-4 border-b ${s?"border-gray-700":"border-gray-100"}`,children:e.jsx("h2",{className:`text-xl font-bold ${s?"text-white":"text-gray-800"}`,children:"Customer Analytics"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("div",{className:`text-xs ${s?"text-gray-400":"text-gray-500"}`,children:"Total Customers"}),e.jsx("div",{className:`text-lg font-bold ${s?"text-gray-200":"text-gray-900"}`,children:t.totalCustomers||0})]}),e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("div",{className:`text-xs ${s?"text-gray-400":"text-gray-500"}`,children:"Avg Order Value"}),e.jsxs("div",{className:`text-lg font-bold ${s?"text-green-400":"text-green-600"}`,children:["$",((l=t.avgOrderValue)==null?void 0:l.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("div",{className:`text-xs ${s?"text-gray-400":"text-gray-500"}`,children:"Total Orders"}),e.jsx("div",{className:`text-lg font-bold ${s?"text-blue-400":"text-blue-600"}`,children:t.totalOrders||0})]}),e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("div",{className:`text-xs ${s?"text-gray-400":"text-gray-500"}`,children:"Completion Rate"}),e.jsxs("div",{className:`text-lg font-bold ${s?"text-purple-400":"text-purple-600"}`,children:[((o=t.completionRate)==null?void 0:o.toFixed(1))||"0.0","%"]})]})]}),r.length>0&&e.jsx(w,{title:"Customer Segments",description:"Customer distribution by purchase frequency",data:r,color:"green",darkMode:s})]})]})},q=({stats:t,darkMode:s})=>{const a=[{title:"Monthly Revenue Target",current:t.totalRevenue,target:t.totalRevenue*1.3,unit:"$"},{title:"Total Orders",current:t.totalOrders,target:Math.max(t.totalOrders*1.2,100),unit:""},{title:"Order Completion Rate",current:t.completionRate||85,target:95,unit:"%"},{title:"Customer Satisfaction",current:4.5,target:5,unit:"/5"}];return e.jsxs("div",{className:`${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-lg overflow-hidden border`,children:[e.jsx("div",{className:`px-6 py-4 border-b ${s?"border-gray-700":"border-gray-100"}`,children:e.jsx("h2",{className:`text-xl font-bold ${s?"text-white":"text-gray-800"}`,children:"Business Goals"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-6",children:a.map((r,l)=>{const o=r.current/r.target*100,n=o>=80;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:`text-sm font-medium ${s?"text-gray-300":"text-gray-700"}`,children:r.title}),e.jsxs("span",{className:`text-sm ${s?"text-gray-400":"text-gray-500"}`,children:[r.unit==="$"?r.unit:"",r.current.toFixed(r.unit==="$"?0:1),r.unit!=="$"?r.unit:""," / ",r.unit==="$"?r.unit:"",r.target.toFixed(r.unit==="$"?0:1),r.unit!=="$"?r.unit:""]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700",children:e.jsx("div",{className:`h-2 rounded-full ${n?s?"bg-green-500":"bg-green-600":s?"bg-yellow-500":"bg-yellow-600"}`,style:{width:`${Math.min(o,100)}%`}})}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsxs("span",{className:`text-xs ${s?"text-gray-500":"text-gray-400"}`,children:[o.toFixed(1),"% complete"]}),e.jsx("span",{className:`text-xs font-medium ${n?s?"text-green-400":"text-green-600":s?"text-yellow-400":"text-yellow-600"}`,children:n?"On Track":"Needs Attention"})]})]},l)})})})]})},H=({stats:t,darkMode:s})=>{const a=[{title:"Expand Product Catalog",potential:t.totalProducts<50?"High":"Medium",impact:`$${Math.round(t.totalRevenue*.3)}/month`,effort:"Medium",priority:t.totalProducts<20?"high":"medium"},{title:"Customer Retention Program",potential:"High",impact:`$${Math.round(t.totalRevenue*.2)}/month`,effort:"Low",priority:"medium"},{title:"Order Processing Optimization",potential:t.completionRate<90?"High":"Low",impact:`$${Math.round(t.totalRevenue*.15)}/month`,effort:t.completionRate<90?"Medium":"High",priority:t.completionRate<90?"high":"low"}];return e.jsxs("div",{className:`${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-lg overflow-hidden border`,children:[e.jsx("div",{className:`px-6 py-4 border-b ${s?"border-gray-700":"border-gray-100"}`,children:e.jsx("h2",{className:`text-xl font-bold ${s?"text-white":"text-gray-800"}`,children:"Market Opportunities"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:a.map((r,l)=>e.jsxs("div",{className:`p-4 rounded-lg border ${s?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:`font-medium ${s?"text-gray-200":"text-gray-900"}`,children:r.title}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.priority==="high"?s?"bg-red-900/30 text-red-400":"bg-red-100 text-red-800":r.priority==="medium"?s?"bg-yellow-900/30 text-yellow-400":"bg-yellow-100 text-yellow-800":s?"bg-blue-900/30 text-blue-400":"bg-blue-100 text-blue-800"}`,children:[r.priority," priority"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:`${s?"text-gray-400":"text-gray-500"}`,children:"Potential: "}),e.jsx("span",{className:`font-medium ${s?"text-gray-200":"text-gray-900"}`,children:r.potential})]}),e.jsxs("div",{children:[e.jsx("span",{className:`${s?"text-gray-400":"text-gray-500"}`,children:"Impact: "}),e.jsx("span",{className:`font-medium ${s?"text-green-400":"text-green-600"}`,children:r.impact})]}),e.jsxs("div",{children:[e.jsx("span",{className:`${s?"text-gray-400":"text-gray-500"}`,children:"Effort: "}),e.jsx("span",{className:`font-medium ${s?"text-gray-200":"text-gray-900"}`,children:r.effort})]})]})]},l))})})]})},U=()=>{const{darkMode:t}=E(),{user:s}=V(),[a,r]=m.useState({totalRevenue:0,totalOrders:0,totalCustomers:0,totalProducts:0,monthlyGrowth:0,avgOrderValue:0,completionRate:0}),[l,o]=m.useState(!0),[n,x]=m.useState(null);return m.useEffect(()=>{async function u(){try{o(!0);const d=(await N($(f,"orders"))).docs.map(i=>{var v;const c=i.data();return{id:i.id,total:c.total||0,status:c.status||"pending",customerName:c.customerName||"Unknown",createdAt:((v=c.createdAt)==null?void 0:v.toDate())||new Date}}),R=(await N($(f,"products"))).size,j=d.reduce((i,c)=>i+c.total,0),g=d.length,O=d.filter(i=>i.status==="completed").length,C=g>0?O/g*100:0,S=g>0?j/g:0,A=new Set(d.map(i=>i.customerName)).size,b=new Date().getMonth(),F=b===0?11:b-1,T=d.filter(i=>i.createdAt.getMonth()===b),P=d.filter(i=>i.createdAt.getMonth()===F),G=T.reduce((i,c)=>i+c.total,0),y=P.reduce((i,c)=>i+c.total,0),D=y>0?(G-y)/y*100:0;r({totalRevenue:j,totalOrders:g,totalCustomers:A,totalProducts:R,monthlyGrowth:D,avgOrderValue:S,completionRate:C}),o(!1)}catch(h){console.error("Error fetching business data:",h),x("Failed to load business data"),o(!1)}}u()},[]),l?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):n?e.jsx("div",{className:`container mx-auto px-4 py-8 ${t?"text-white":"text-gray-800"}`,children:e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-red-500",children:n})})}):e.jsxs("div",{className:`container mx-auto px-4 py-8 max-w-7xl ${t?"text-gray-200":"text-gray-800"}`,children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Business Dashboard"}),e.jsx("p",{className:`mt-1 text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Monitor your business performance, growth metrics, and market opportunities"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-md border p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"} uppercase tracking-wide`,children:"Total Revenue"}),e.jsxs("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"} mt-1`,children:["$",a.totalRevenue.toLocaleString()]}),e.jsxs("p",{className:`text-sm ${a.monthlyGrowth>=0?t?"text-green-400":"text-green-600":t?"text-red-400":"text-red-600"} mt-1`,children:[a.monthlyGrowth>=0?"+":"",a.monthlyGrowth.toFixed(1),"% this month"]})]}),e.jsx("div",{className:`text-3xl p-3 rounded-full bg-green-${t?"900/30":"100"}`,children:"ðŸ’°"})]})}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-md border p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"} uppercase tracking-wide`,children:"Total Customers"}),e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"} mt-1`,children:a.totalCustomers.toLocaleString()}),e.jsx("p",{className:`text-sm ${t?"text-blue-400":"text-blue-600"} mt-1`,children:"Unique customers"})]}),e.jsx("div",{className:`text-3xl p-3 rounded-full bg-blue-${t?"900/30":"100"}`,children:"ðŸ‘¥"})]})}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-md border p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"} uppercase tracking-wide`,children:"Total Orders"}),e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"} mt-1`,children:a.totalOrders}),e.jsxs("p",{className:`text-sm ${t?"text-indigo-400":"text-indigo-600"} mt-1`,children:[a.completionRate.toFixed(1),"% completion rate"]})]}),e.jsx("div",{className:`text-3xl p-3 rounded-full bg-indigo-${t?"900/30":"100"}`,children:"ðŸ“¦"})]})}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-md border p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"} uppercase tracking-wide`,children:"Avg Order Value"}),e.jsxs("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"} mt-1`,children:["$",a.avgOrderValue.toFixed(2)]}),e.jsx("p",{className:`text-sm ${t?"text-purple-400":"text-purple-600"} mt-1`,children:"Per transaction"})]}),e.jsx("div",{className:`text-3xl p-3 rounded-full bg-purple-${t?"900/30":"100"}`,children:"ðŸ“Š"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(B,{stats:a,darkMode:t}),e.jsx(L,{stats:a,darkMode:t})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(q,{stats:a,darkMode:t}),e.jsx(H,{stats:a,darkMode:t}),e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-lg overflow-hidden border`,children:[e.jsx("div",{className:`px-6 py-4 border-b ${t?"border-gray-700":"border-gray-100"}`,children:e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-800"}`,children:"Business Actions"})}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsx(p,{to:"/orders",className:"block w-full bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors text-center",children:"View Orders"}),e.jsx(p,{to:"/inventory",className:"block w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors text-center",children:"Manage Inventory"}),e.jsx(p,{to:"/create-order",className:"block w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-center",children:"Create Order"}),e.jsx("button",{className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors",children:"Export Analytics"}),e.jsx("button",{className:"w-full bg-orange-600 text-white py-2 px-4 rounded-lg hover:bg-orange-700 transition-colors",children:"Schedule Review"})]})]})]})]})]})};export{U as default};
