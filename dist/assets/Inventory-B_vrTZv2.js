import{r as d,j as e,u as ee,a as te,h as se,c as re,d as O,q as D,n as G,w as K,g as J,k as ae,e as ne}from"./index-BBVZjf1E.js";import{u as oe}from"./useAccessControl-Cp7aINs-.js";import{P as le}from"./ProductModal-v1gi_S9u.js";import"./ImageUploader-d-gMjT6N.js";const ie=({products:s,onUpdateStock:a,threshold:m,onChangeThreshold:w})=>{const[f,k]=d.useState(null),[M,j]=d.useState(0),[u,S]=d.useState(m),U=n=>{f===n?(k(null),j(0)):(k(n),j(0))},$=async n=>{const c=Math.max(0,n.stock+M);await a(n.id,c),k(null),j(0)},Q=n=>{const c=parseInt(n.target.value,10);!isNaN(c)&&c>=0&&S(c)},h=()=>{w(u)};return e.jsxs("div",{className:"mt-2 bg-white rounded-lg shadow-md border border-yellow-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-yellow-100 bg-yellow-50 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium text-yellow-800",children:"Low Stock Alert"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{htmlFor:"threshold",className:"text-sm font-medium text-yellow-700",children:"Low stock threshold:"}),e.jsx("input",{type:"number",id:"threshold",value:u,onChange:Q,min:"0",className:"w-16 text-center border-yellow-300 focus:ring-yellow-500 focus:border-yellow-500 rounded-md shadow-sm text-sm"}),e.jsx("button",{onClick:h,className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded hover:bg-yellow-200 text-sm",children:"Apply"})]})]}),e.jsx("div",{className:"divide-y divide-gray-100",children:s.map(n=>e.jsxs("div",{className:"p-4 hover:bg-gray-50",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 bg-gray-100 rounded-md flex items-center justify-center text-gray-400",children:n.imageUrl?e.jsx("img",{src:n.imageUrl,alt:n.name,className:"h-10 w-10 rounded-md object-cover"}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:n.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["SKU: ",n.sku||"N/A"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["$",parseFloat(n.price).toFixed(2)]}),e.jsxs("div",{className:"text-xs font-medium text-red-600",children:["Stock: ",n.stock]})]}),e.jsx("button",{onClick:()=>U(n.id),className:"flex-shrink-0 p-1 rounded-full text-gray-400 hover:text-gray-500",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 transition-transform duration-200 ${f===n.id?"transform rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),f===n.id&&e.jsx("div",{className:"mt-4 border-t border-gray-100 pt-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center",children:[e.jsxs("div",{className:"mb-4 sm:mb-0",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsxs("span",{children:["Supplier: ",n.supplier||"N/A"]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-700 mt-1",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),e.jsxs("span",{children:["Category: ",n.category]})]}),n.reorderPoint&&e.jsxs("div",{className:"flex items-center text-sm text-gray-700 mt-1",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsxs("span",{children:["Reorder Point: ",n.reorderPoint]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex rounded-md shadow-sm",children:[e.jsxs("button",{type:"button",onClick:()=>j(c=>Math.max(0,c-1)),className:"relative inline-flex items-center px-2 py-1 rounded-l-md border border-gray-300 bg-gray-50 text-gray-500 hover:bg-gray-100",children:[e.jsx("span",{className:"sr-only",children:"Decrease"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 12H6"})})]}),e.jsx("input",{type:"number",className:"focus:ring-indigo-500 focus:border-indigo-500 block w-16 min-w-0 border-gray-300 text-center",value:M,onChange:c=>{const y=parseInt(c.target.value,10);!isNaN(y)&&y>=0&&j(y)},min:"0"}),e.jsxs("button",{type:"button",onClick:()=>j(c=>c+1),className:"relative inline-flex items-center px-2 py-1 rounded-r-md border border-gray-300 bg-gray-50 text-gray-500 hover:bg-gray-100",children:[e.jsx("span",{className:"sr-only",children:"Increase"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})]})]}),e.jsx("button",{onClick:()=>$(n),className:"ml-3 inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Restock"})]})]})})]},n.id))})]})},me=()=>{const{darkMode:s}=ee(),{user:a}=te(),m=se(),{canManageProducts:w,isSeller:f,isAdmin:k,isManager:M,userAccessLevel:j}=oe(),[u,S]=d.useState([]),[U,$]=d.useState(!0),[Q,h]=d.useState(null),[n,c]=d.useState(""),[y,R]=d.useState("all"),[v,W]=d.useState("all"),[X,q]=d.useState(null),[Z,I]=d.useState(!1),[N,E]=d.useState({totalProducts:0,lowStockCount:0,totalValue:0,averagePrice:0}),[V,Y]=d.useState(null);d.useEffect(()=>{if(a&&a.accountType==="business"&&a.businessType==="buyer"){m("/business-dashboard",{replace:!0});return}},[a,m]);const F=(t,i="success")=>{Y({message:t,type:i}),setTimeout(()=>Y(null),4e3)},p=a&&(k||M),g=a&&f,T=async()=>{if(!a){h("Please log in to view inventory"),$(!1);return}try{$(!0),h(null);const t=re(O,"products");let i;p?(console.log("👑 Admin/Manager: Fetching all products"),i=D(t,G("createdAt","desc"))):g?(console.log("🏪 Seller: Fetching products for user:",a.uid),i=D(t,K("createdBy","==",a.uid))):(console.log("👤 Regular user: Fetching all products (view-only)"),i=D(t,G("createdAt","desc")));const b=await J(i),l=[];b.forEach(o=>{var B,L;const r=o.data();l.push({id:o.id,name:r.name||"Unnamed Product",description:r.description||"",price:r.price||0,stockQuantity:r.stock||r.stockQuantity||0,category:r.category||"Uncategorized",imageUrl:r.imageUrl||"",sku:r.sku||"",createdBy:r.createdBy||r.ownedBy||"unknown",ownedBy:r.ownedBy||r.createdBy||"unknown",createdAt:((B=r.createdAt)==null?void 0:B.toDate())||new Date,updatedAt:((L=r.updatedAt)==null?void 0:L.toDate())||new Date})}),g&&l.sort((o,r)=>r.createdAt-o.createdAt),console.log(`📦 Successfully fetched ${l.length} products for ${j}`),S(l);const x=l.length,P=l.filter(o=>o.stockQuantity<=10),C=l.reduce((o,r)=>o+r.price*r.stockQuantity,0),A=x>0?l.reduce((o,r)=>o+r.price,0)/x:0;E({totalProducts:x,lowStockCount:P.length,totalValue:C,averagePrice:A}),h(null)}catch(t){if(console.error("Error fetching products:",t),t.code==="permission-denied")h("You do not have permission to access inventory");else if(t.code==="failed-precondition"||t.message.includes("index"))if(console.log("Firestore indexing issue detected, trying simpler query..."),g)try{const i=D(productsRef,K("createdBy","==",a.uid)),b=await J(i),l=[];b.forEach(o=>{var B,L;const r=o.data();l.push({id:o.id,name:r.name||"Unnamed Product",description:r.description||"",price:r.price||0,stockQuantity:r.stock||r.stockQuantity||0,category:r.category||"Uncategorized",imageUrl:r.imageUrl||"",sku:r.sku||"",createdBy:r.createdBy||r.ownedBy||"unknown",ownedBy:r.ownedBy||r.createdBy||"unknown",createdAt:((B=r.createdAt)==null?void 0:B.toDate())||new Date,updatedAt:((L=r.updatedAt)==null?void 0:L.toDate())||new Date})}),l.sort((o,r)=>r.createdAt-o.createdAt),S(l);const x=l.length,P=l.filter(o=>o.stockQuantity<=10),C=l.reduce((o,r)=>o+r.price*r.stockQuantity,0),A=x>0?l.reduce((o,r)=>o+r.price,0)/x:0;E({totalProducts:x,lowStockCount:P.length,totalValue:C,averagePrice:A});return}catch(i){console.error("Simple query also failed:",i),h("Unable to load inventory. Please contact support.")}else h("Database indexing in progress. Please try again in a moment.");else h(`Failed to load inventory: ${t.message}`)}finally{$(!1)}};d.useEffect(()=>{a&&!(a.accountType==="business"&&a.businessType==="buyer")&&T()},[a,p,g]);const _=async(t,i)=>{if(!w){F("You do not have permission to delete products","error");return}if(f){const l=u.find(x=>x.id===t);if(l&&l.createdBy!==a.uid&&l.ownedBy!==a.uid){F("You can only delete products you created","error");return}}if(window.confirm(`Are you sure you want to delete "${i}"? This action cannot be undone.`))try{await ae(ne(O,"products",t)),S(o=>o.filter(r=>r.id!==t)),F("Product deleted successfully","success");const l=u.filter(o=>o.id!==t),x=l.length,P=l.filter(o=>o.stockQuantity<=10),C=l.reduce((o,r)=>o+r.price*r.stockQuantity,0),A=x>0?l.reduce((o,r)=>o+r.price,0)/x:0;E({totalProducts:x,lowStockCount:P.length,totalValue:C,averagePrice:A})}catch(l){console.error("Error deleting product:",l),F("Failed to delete product. Please try again.","error")}},z=u.filter(t=>{const i=n.trim()===""||t.name.toLowerCase().includes(n.toLowerCase())||t.sku&&t.sku.toLowerCase().includes(n.toLowerCase()),b=y==="all"||t.category===y,l=v==="all"||v==="low"&&t.stockQuantity<=10||v==="out"&&t.stockQuantity===0||v==="in"&&t.stockQuantity>0;return i&&b&&l}),H=[...new Set(u.map(t=>t.category).filter(Boolean))];return a&&a.accountType==="business"&&a.businessType==="buyer"?e.jsx("div",{className:`container mx-auto px-4 py-8 ${s?"text-white":"text-gray-800"}`,children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🛒"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Inventory Not Available for Buyers"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Business buyers can browse and purchase products, but cannot manage inventory."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>m("/catalog"),className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 mr-2",children:"Browse Products"}),e.jsx("button",{onClick:()=>m("/business-dashboard"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Go to Dashboard"})]})]})}):U?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading inventory..."})]}):Q?e.jsx("div",{className:`container mx-auto px-4 py-8 ${s?"text-white":"text-gray-800"}`,children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4 text-red-500",children:"⚠️"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Inventory"}),e.jsx("p",{className:"text-gray-500 mb-4",children:Q}),e.jsx("button",{onClick:T,className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 mr-2",children:"Try Again"}),e.jsx("button",{onClick:()=>m("/"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Go Home"})]})}):e.jsxs("div",{className:`container mx-auto px-4 py-8 max-w-7xl ${s?"text-gray-200":"text-gray-800"}`,children:[V&&e.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${V.type==="success"?s?"bg-green-900 border-green-700 text-green-100":"bg-green-100 border-green-400 text-green-800":s?"bg-red-900 border-red-700 text-red-100":"bg-red-100 border-red-400 text-red-800"} border`,children:V.message}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${s?"text-white":"text-gray-900"}`,children:p?"All Inventory":g?"My Products":"Product Inventory"}),e.jsx("p",{className:`mt-1 text-sm ${s?"text-gray-400":"text-gray-500"}`,children:p?"Manage all products in the system":g?"Manage your product listings and inventory":"View product inventory"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${p?s?"bg-purple-900/30 text-purple-400":"bg-purple-100 text-purple-800":g?s?"bg-green-900/30 text-green-400":"bg-green-100 text-green-800":s?"bg-blue-900/30 text-blue-400":"bg-blue-100 text-blue-800"}`,children:p?"👑 Admin/Manager View":g?"🏪 Seller View":"👤 User View"}),w&&e.jsx("button",{onClick:()=>m("/add-product"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:"Add Product"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:`${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-md border p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-500"} uppercase tracking-wide`,children:g?"My Products":"Total Products"}),e.jsx("p",{className:`text-2xl font-bold ${s?"text-white":"text-gray-900"} mt-1`,children:N.totalProducts})]}),e.jsx("div",{className:"text-3xl",children:"📦"})]})}),e.jsx("div",{className:`${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-md border p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-500"} uppercase tracking-wide`,children:"Low Stock"}),e.jsx("p",{className:`text-2xl font-bold ${N.lowStockCount>0?"text-red-500":s?"text-white":"text-gray-900"} mt-1`,children:N.lowStockCount})]}),e.jsx("div",{className:"text-3xl",children:"⚠️"})]})}),e.jsx("div",{className:`${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-md border p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-500"} uppercase tracking-wide`,children:"Total Value"}),e.jsxs("p",{className:`text-2xl font-bold ${s?"text-white":"text-gray-900"} mt-1`,children:["$",N.totalValue.toFixed(0)]})]}),e.jsx("div",{className:"text-3xl",children:"💰"})]})}),e.jsx("div",{className:`${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-md border p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-500"} uppercase tracking-wide`,children:"Avg Price"}),e.jsxs("p",{className:`text-2xl font-bold ${s?"text-white":"text-gray-900"} mt-1`,children:["$",N.averagePrice.toFixed(2)]})]}),e.jsx("div",{className:"text-3xl",children:"📊"})]})})]}),u.length>0&&e.jsx("div",{className:`mb-6 p-4 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search products...",value:n,onChange:t=>c(t.target.value),className:`w-full px-3 py-2 rounded-md ${s?"bg-gray-700 border-gray-600 text-gray-200":"bg-white border-gray-300"} border focus:ring-indigo-500 focus:border-indigo-500`})}),e.jsx("div",{children:e.jsxs("select",{value:y,onChange:t=>R(t.target.value),className:`w-full px-3 py-2 rounded-md ${s?"bg-gray-700 border-gray-600 text-gray-200":"bg-white border-gray-300"} border focus:ring-indigo-500 focus:border-indigo-500`,children:[e.jsx("option",{value:"all",children:"All Categories"}),H.map(t=>e.jsx("option",{value:t,children:t},t))]})}),e.jsx("div",{children:e.jsxs("select",{value:v,onChange:t=>W(t.target.value),className:`w-full px-3 py-2 rounded-md ${s?"bg-gray-700 border-gray-600 text-gray-200":"bg-white border-gray-300"} border focus:ring-indigo-500 focus:border-indigo-500`,children:[e.jsx("option",{value:"all",children:"All Stock Levels"}),e.jsx("option",{value:"in",children:"In Stock"}),e.jsx("option",{value:"low",children:"Low Stock"}),e.jsx("option",{value:"out",children:"Out of Stock"})]})}),e.jsx("div",{children:e.jsx("button",{onClick:T,className:"w-full bg-indigo-600 text-white px-3 py-2 rounded-md hover:bg-indigo-700 transition-colors",children:"Refresh"})})]})}),N.lowStockCount>0&&e.jsx("div",{className:"mb-6",children:e.jsx(ie,{products:u.filter(t=>t.stockQuantity<=10),darkMode:s})}),e.jsxs("div",{className:`${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-lg overflow-hidden border`,children:[e.jsx("div",{className:`px-6 py-4 border-b ${s?"border-gray-700":"border-gray-100"}`,children:e.jsxs("h2",{className:`text-xl font-bold ${s?"text-white":"text-gray-800"}`,children:["Products (",z.length,")"]})}),z.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`${s?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-100"} border-b`,children:[e.jsx("th",{className:`px-6 py-3 text-xs font-medium ${s?"text-gray-400":"text-gray-500"} uppercase tracking-wider`,children:"Product"}),e.jsx("th",{className:`px-6 py-3 text-xs font-medium ${s?"text-gray-400":"text-gray-500"} uppercase tracking-wider`,children:"Category"}),e.jsx("th",{className:`px-6 py-3 text-xs font-medium ${s?"text-gray-400":"text-gray-500"} uppercase tracking-wider`,children:"Price"}),e.jsx("th",{className:`px-6 py-3 text-xs font-medium ${s?"text-gray-400":"text-gray-500"} uppercase tracking-wider`,children:"Stock"}),p&&e.jsx("th",{className:`px-6 py-3 text-xs font-medium ${s?"text-gray-400":"text-gray-500"} uppercase tracking-wider`,children:"Owner"}),w&&e.jsx("th",{className:`px-6 py-3 text-xs font-medium ${s?"text-gray-400":"text-gray-500"} uppercase tracking-wider`,children:"Actions"})]})}),e.jsx("tbody",{className:`divide-y ${s?"divide-gray-700":"divide-gray-100"}`,children:z.map(t=>{var i,b;return e.jsxs("tr",{className:`${s?"hover:bg-gray-700":"hover:bg-gray-50"} transition-colors`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${s?"bg-gray-600":"bg-gray-200"} flex items-center justify-center mr-3`,children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-10 h-10 rounded-lg object-cover"}):e.jsx("span",{className:"text-xl",children:"📦"})}),e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${s?"text-gray-200":"text-gray-900"}`,children:t.name}),t.sku&&e.jsxs("div",{className:`text-xs ${s?"text-gray-400":"text-gray-500"}`,children:["SKU: ",t.sku]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:t.category})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`text-sm font-medium ${s?"text-gray-200":"text-gray-900"}`,children:["$",((i=t.price)==null?void 0:i.toFixed(2))||"0.00"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.stockQuantity<=0?s?"bg-red-900/30 text-red-400":"bg-red-100 text-red-800":t.stockQuantity<=10?s?"bg-yellow-900/30 text-yellow-400":"bg-yellow-100 text-yellow-800":s?"bg-green-900/30 text-green-400":"bg-green-100 text-green-800"}`,children:[t.stockQuantity," in stock"]})}),p&&e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-sm ${s?"text-gray-400":"text-gray-500"}`,children:t.ownedBy===(a==null?void 0:a.uid)||t.createdBy===(a==null?void 0:a.uid)?e.jsx("span",{className:"text-green-600 font-medium",children:"You"}):((b=t.ownedBy)==null?void 0:b.slice(0,8))||"Unknown"})}),w&&e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{q(t),I(!0)},className:`text-sm ${s?"text-indigo-400 hover:text-indigo-300":"text-indigo-600 hover:text-indigo-800"} font-medium`,children:"Edit"}),(p||t.createdBy===(a==null?void 0:a.uid)||t.ownedBy===(a==null?void 0:a.uid))&&e.jsx("button",{onClick:()=>_(t.id,t.name),className:`text-sm ${s?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-800"} font-medium`,children:"Delete"})]})})]},t.id)})})]})}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:`text-4xl mb-4 ${s?"text-gray-600":"text-gray-400"}`,children:"📦"}),e.jsx("h3",{className:`text-lg font-medium ${s?"text-gray-300":"text-gray-900"} mb-2`,children:n||y!=="all"||v!=="all"?"No products match your filters":g?"No products listed yet":"No products in inventory"}),e.jsx("p",{className:`${s?"text-gray-400":"text-gray-500"} mb-4`,children:g?"Start by adding your first product to begin selling.":w?"Add products to get started with inventory management.":"Contact admin to add products to the inventory."}),w&&e.jsx("button",{onClick:()=>m("/add-product"),className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Add Your First Product"}),(n||y!=="all"||v!=="all")&&e.jsx("button",{onClick:()=>{c(""),R("all"),W("all")},className:`ml-2 px-4 py-2 border rounded ${s?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Clear Filters"})]})]}),Z&&e.jsx(le,{product:X,onClose:t=>{I(!1),q(null),t&&T()},categories:H,darkMode:s})]})};export{me as default};
