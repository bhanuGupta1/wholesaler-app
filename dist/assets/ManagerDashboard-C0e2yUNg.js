import{u as T,r as v,b as H,e as P,d as S,f as L,j as e,c as A,g as B,L as O}from"./index-l2F0ffZz.js";const z=({data:s,title:t,description:j,color:m,darkMode:n,type:u="bar"})=>{if(!s||s.length===0)return e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`text-sm font-medium ${n?"text-gray-300":"text-gray-700"} mb-1`,children:t}),e.jsx("p",{className:`text-xs ${n?"text-gray-400":"text-gray-500"} mb-3`,children:"No data available"})]});const l=Math.max(...s.map(d=>d.value)),f=s.reduce((d,c)=>d+c.value,0);return e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`text-sm font-medium ${n?"text-gray-300":"text-gray-700"} mb-1`,children:t}),j&&e.jsx("p",{className:`text-xs ${n?"text-gray-400":"text-gray-500"} mb-3`,children:j}),u==="pie"?e.jsx("div",{className:"space-y-2",children:s.map((d,c)=>{const g=(d.value/f*100).toFixed(1);return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full bg-${m}-${500+c*100} mr-2`}),e.jsx("span",{className:`text-xs ${n?"text-gray-400":"text-gray-500"}`,children:d.name})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:`ml-2 text-xs font-medium ${n?"text-gray-300":"text-gray-700"}`,children:[d.value," (",g,"%)"]})})]},c)})}):e.jsx("div",{className:"space-y-2",children:s.map((d,c)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`text-xs w-16 ${n?"text-gray-400":"text-gray-500"}`,children:d.name}),e.jsx("div",{className:"flex-1 ml-2",children:e.jsx("div",{className:`h-4 rounded-full bg-${m}-${n?"900/30":"100"} overflow-hidden`,children:e.jsx("div",{className:`h-4 rounded-full bg-${m}-${n?"500":"600"} transition-all duration-500`,style:{width:`${d.value/l*100}%`}})})}),e.jsx("span",{className:`ml-2 text-xs font-medium ${n?"text-gray-300":"text-gray-700"}`,children:typeof d.value=="number"&&d.value>1e3?`$${(d.value/1e3).toFixed(1)}k`:d.value})]},c))})]})},W=({products:s,darkMode:t,onBulkRestock:j})=>{const[m,n]=v.useState(new Set),[u,l]=v.useState(50),[f,d]=v.useState(!1),c=s.filter(i=>i.stock<=10),g=s.filter(i=>i.stock<=3),b=i=>{const N=new Set(m);N.has(i)?N.delete(i):N.add(i),n(N)},y=()=>{m.size===c.length?n(new Set):n(new Set(c.map(i=>i.id)))},p=async()=>{if(m.size!==0){d(!0);try{await j(Array.from(m),u),n(new Set)}finally{d(!1)}}};return c.length===0?e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-lg overflow-hidden border`,children:[e.jsx("div",{className:`px-6 py-4 border-b ${t?"border-gray-700":"border-gray-100"}`,children:e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-800"}`,children:"Stock Alerts"})}),e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"âœ…"}),e.jsx("p",{className:`${t?"text-gray-300":"text-gray-600"}`,children:"All products are well stocked!"})]})]}):e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-lg overflow-hidden border`,children:[e.jsxs("div",{className:`px-6 py-4 border-b ${t?"border-gray-700":"border-gray-100"} flex justify-between items-center`,children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-800"}`,children:"Stock Alerts"}),e.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:[g.length," critical â€¢ ",c.length," total low stock"]})]}),m.size>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",value:u,onChange:i=>l(parseInt(i.target.value)||0),className:`w-20 px-2 py-1 text-sm rounded ${t?"bg-gray-700 border-gray-600 text-gray-200":"bg-white border-gray-300"} border`,min:"1",placeholder:"50"}),e.jsx("button",{onClick:p,disabled:f,className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 disabled:opacity-50",children:f?"Restocking...":`Restock ${m.size}`})]})]}),e.jsx("div",{className:`px-6 py-3 border-b ${t?"border-gray-700 bg-gray-700":"border-gray-100 bg-gray-50"}`,children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:m.size===c.length&&c.length>0,onChange:y,className:"mr-2"}),e.jsx("span",{className:`text-sm ${t?"text-gray-300":"text-gray-700"}`,children:"Select all low stock items"})]})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:c.map(i=>e.jsx("div",{className:`p-4 border-b ${t?"border-gray-700":"border-gray-100"} hover:bg-gray-50 dark:hover:bg-gray-700`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:m.has(i.id),onChange:()=>b(i.id),className:"mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:i.name}),e.jsxs("div",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:[i.category," â€¢ $",i.price]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i.stock<=3?t?"bg-red-900/30 text-red-400":"bg-red-100 text-red-800":t?"bg-yellow-900/30 text-yellow-400":"bg-yellow-100 text-yellow-800"}`,children:[i.stock," left"]}),e.jsx(O,{to:`/inventory/${i.id}`,className:`text-sm ${t?"text-indigo-400 hover:text-indigo-300":"text-indigo-600 hover:text-indigo-800"} font-medium`,children:"Edit"})]})]})},i.id))}),e.jsx("div",{className:`px-6 py-3 border-t ${t?"border-gray-700 bg-gray-700":"border-gray-100 bg-gray-50"}`,children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>n(new Set(g.map(i=>i.id))),className:"text-sm bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",children:["Select Critical (",g.length,")"]}),e.jsx("button",{onClick:()=>{const i=c.map(N=>({product:N.name,currentStock:N.stock,suggestedOrder:Math.max(50,N.stock*5)}));console.log("Purchase order suggestions:",i)},className:"text-sm bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700",children:"Generate Orders"})]})})]})},_=({orders:s,darkMode:t,onUpdateOrderStatus:j,onBulkUpdate:m})=>{const[n,u]=v.useState("pending"),[l,f]=v.useState(new Set),[d,c]=v.useState(null),[g,b]=v.useState(!1),y=v.useMemo(()=>n==="all"?s:s.filter(r=>r.status===n),[s,n]),p={pending:s.filter(r=>r.status==="pending").length,processing:s.filter(r=>r.status==="processing").length,completed:s.filter(r=>r.status==="completed").length,cancelled:s.filter(r=>r.status==="cancelled").length},i=r=>{const x=new Set(l);x.has(r)?x.delete(r):x.add(r),f(x)},N=()=>{l.size===y.length?f(new Set):f(new Set(y.map(r=>r.id)))},o=async r=>{if(l.size!==0){b(!0);try{await m(Array.from(l),r),f(new Set)}finally{b(!1)}}},h=async(r,x)=>{if(d!==r){c(r);try{await j(r,x)}catch(a){console.error("Failed to update order status:",a)}finally{c(null)}}};return e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-lg overflow-hidden border`,children:[e.jsxs("div",{className:`px-6 py-4 border-b ${t?"border-gray-700":"border-gray-100"} flex justify-between items-center`,children:[e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-800"}`,children:"Order Processing"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[l.size>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm ${t?"text-gray-300":"text-gray-600"}`,children:[l.size," selected"]}),e.jsx("button",{onClick:()=>o("processing"),disabled:g,className:"bg-blue-600 text-white px-2 py-1 rounded text-xs hover:bg-blue-700 disabled:opacity-50",children:"Process"}),e.jsx("button",{onClick:()=>o("completed"),disabled:g,className:"bg-green-600 text-white px-2 py-1 rounded text-xs hover:bg-green-700 disabled:opacity-50",children:"Complete"}),e.jsx("button",{onClick:()=>o("cancelled"),disabled:g,className:"bg-red-600 text-white px-2 py-1 rounded text-xs hover:bg-red-700 disabled:opacity-50",children:"Cancel"})]}),e.jsxs("select",{value:n,onChange:r=>u(r.target.value),className:`px-3 py-1 rounded-md text-sm ${t?"bg-gray-700 border-gray-600 text-gray-200":"bg-white border-gray-300"} border focus:ring-indigo-500 focus:border-indigo-500`,children:[e.jsxs("option",{value:"pending",children:["Pending (",p.pending,")"]}),e.jsxs("option",{value:"processing",children:["Processing (",p.processing,")"]}),e.jsxs("option",{value:"completed",children:["Completed (",p.completed,")"]}),e.jsxs("option",{value:"cancelled",children:["Cancelled (",p.cancelled,")"]}),e.jsxs("option",{value:"all",children:["All Orders (",s.length,")"]})]})]})]}),e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-yellow-400":"text-yellow-600"}`,children:p.pending}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Pending"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-blue-400":"text-blue-600"}`,children:p.processing}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Processing"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-green-400":"text-green-600"}`,children:p.completed}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Completed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-red-400":"text-red-600"}`,children:p.cancelled}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Cancelled"})]})]})}),y.length>0&&e.jsx("div",{className:`px-6 py-3 border-b ${t?"border-gray-700 bg-gray-700":"border-gray-100 bg-gray-50"}`,children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.size===y.length&&y.length>0,onChange:N,className:"mr-2"}),e.jsxs("span",{className:`text-sm ${t?"text-gray-300":"text-gray-700"}`,children:["Select all ",n," orders"]})]})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:y.length>0?e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:y.slice(0,15).map(r=>e.jsx("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.has(r.id),onChange:()=>i(r.id),className:"mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:["Order #",r.id.slice(0,8)]}),e.jsxs("div",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:[r.customerName," â€¢ $",r.total.toFixed(2)]}),e.jsx("div",{className:`text-xs ${t?"text-gray-500":"text-gray-400"}`,children:r.createdAt.toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:r.status,onChange:x=>h(r.id,x.target.value),disabled:d===r.id,className:`text-xs rounded-md ${t?"bg-gray-700 border-gray-600 text-gray-200":"bg-white border-gray-300"} border focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50`,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),d===r.id&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-indigo-500"}),e.jsx(O,{to:`/orders/${r.id}`,className:`text-sm ${t?"text-indigo-400 hover:text-indigo-300":"text-indigo-600 hover:text-indigo-800"} font-medium`,children:"View"})]})]})},r.id))}):e.jsx("div",{className:"p-6 text-center",children:e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"No orders found for the selected status."})})}),e.jsx("div",{className:`border-t ${t?"border-gray-700 bg-gray-700":"border-gray-100 bg-gray-50"} px-6 py-3`,children:e.jsxs(O,{to:"/orders",className:`text-sm font-medium ${t?"text-indigo-400 hover:text-indigo-300":"text-indigo-600 hover:text-indigo-800"} flex items-center justify-center`,children:["View All Orders",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ml-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})},V=({stats:s,darkMode:t})=>{var d,c;const j=()=>{const g=[],b=new Date;for(let y=6;y>=0;y--){const p=new Date(b);p.setDate(p.getDate()-y);const i=s.allOrders.filter(o=>new Date(o.createdAt).toDateString()===p.toDateString()),N=i.reduce((o,h)=>o+h.total,0);g.push({name:p.toLocaleDateString("en-US",{weekday:"short"}),value:Math.round(N),orders:i.length})}return g},m=()=>{if(!s.allProducts||s.allProducts.length===0)return[{name:"No Data",value:0}];const g={};return s.allProducts.forEach(b=>{const y=b.category||"Other",p=(b.price||0)*Math.max(0,100-(b.stock||0));g[y]=(g[y]||0)+p}),Object.entries(g).map(([b,y])=>({name:b,value:Math.round(y)})).sort((b,y)=>y.value-b.value).slice(0,5)},n=j(),u=m(),l=Math.round(s.revenue/30),f=s.totalOrders>0?Math.round((s.totalOrders-s.pendingOrders)/s.totalOrders*100):0;return e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-lg overflow-hidden border`,children:[e.jsxs("div",{className:`px-6 py-4 border-b ${t?"border-gray-700":"border-gray-100"}`,children:[e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-800"}`,children:"Performance Analytics"}),e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Real-time data from your business"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("div",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Daily Avg Revenue"}),e.jsxs("div",{className:`text-2xl font-bold ${t?"text-green-400":"text-green-600"}`,children:["$",l]}),e.jsx("div",{className:`text-xs ${t?"text-gray-500":"text-gray-400"} mt-1`,children:"Based on last 30 days"})]}),e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("div",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Order Completion"}),e.jsxs("div",{className:`text-2xl font-bold ${t?"text-blue-400":"text-blue-600"}`,children:[f,"%"]}),e.jsxs("div",{className:`text-xs ${t?"text-gray-500":"text-gray-400"} mt-1`,children:[s.totalOrders-s.pendingOrders," of ",s.totalOrders," orders"]})]})]}),e.jsx(z,{title:"7-Day Sales Trend",description:`Total revenue: $${n.reduce((g,b)=>g+b.value,0)}`,data:n,color:"indigo",darkMode:t}),e.jsx(z,{title:"Revenue by Category",description:"Estimated revenue based on product sales",data:u,color:"green",darkMode:t,type:"pie"}),e.jsxs("div",{className:`mt-4 p-3 rounded-lg ${t?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-100"} border`,children:[e.jsx("div",{className:`text-sm font-medium ${t?"text-blue-300":"text-blue-800"} mb-1`,children:"ðŸ“Š Business Insights"}),e.jsxs("div",{className:`text-xs ${t?"text-blue-200":"text-blue-700"} space-y-1`,children:[e.jsxs("div",{children:["â€¢ Best performing day: ",(d=n.reduce((g,b)=>b.value>g.value?b:g,n[0]))==null?void 0:d.name]}),e.jsxs("div",{children:["â€¢ Top category: ",((c=u[0])==null?void 0:c.name)||"N/A"]}),e.jsxs("div",{children:["â€¢ Avg order value: $",s.totalOrders>0?Math.round(s.revenue/s.totalOrders):0]})]})]})]})]})},G=({products:s,darkMode:t})=>{const[j,m]=v.useState("all"),n=v.useMemo(()=>{switch(j){case"low_stock":return s.filter(l=>l.stock<=10);case"out_of_stock":return s.filter(l=>l.stock===0);case"in_stock":return s.filter(l=>l.stock>10);default:return s}},[s,j]),u={total:s.length,lowStock:s.filter(l=>l.stock<=10&&l.stock>0).length,outOfStock:s.filter(l=>l.stock===0).length,inStock:s.filter(l=>l.stock>10).length};return e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-lg overflow-hidden border`,children:[e.jsxs("div",{className:`px-6 py-4 border-b ${t?"border-gray-700":"border-gray-100"} flex justify-between items-center`,children:[e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-800"}`,children:"Inventory Overview"}),e.jsxs("select",{value:j,onChange:l=>m(l.target.value),className:`px-3 py-1 rounded-md text-sm ${t?"bg-gray-700 border-gray-600 text-gray-200":"bg-white border-gray-300"} border focus:ring-indigo-500 focus:border-indigo-500`,children:[e.jsxs("option",{value:"all",children:["All Products (",u.total,")"]}),e.jsxs("option",{value:"in_stock",children:["In Stock (",u.inStock,")"]}),e.jsxs("option",{value:"low_stock",children:["Low Stock (",u.lowStock,")"]}),e.jsxs("option",{value:"out_of_stock",children:["Out of Stock (",u.outOfStock,")"]})]})]}),e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-blue-400":"text-blue-600"}`,children:u.total}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-green-400":"text-green-600"}`,children:u.inStock}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"In Stock"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-yellow-400":"text-yellow-600"}`,children:u.lowStock}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Low Stock"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-red-400":"text-red-600"}`,children:u.outOfStock}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Out of Stock"})]})]})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:n.length>0?e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n.slice(0,10).map(l=>e.jsx("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:l.name}),e.jsxs("div",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:[l.category," â€¢ $",l.price]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l.stock>10?t?"bg-green-900/30 text-green-400":"bg-green-100 text-green-800":l.stock>0?t?"bg-yellow-900/30 text-yellow-400":"bg-yellow-100 text-yellow-800":t?"bg-red-900/30 text-red-400":"bg-red-100 text-red-800"}`,children:[l.stock," units"]}),e.jsx(O,{to:`/inventory/${l.id}`,className:`text-sm ${t?"text-indigo-400 hover:text-indigo-300":"text-indigo-600 hover:text-indigo-800"} font-medium`,children:"Edit"})]})]})},l.id))}):e.jsx("div",{className:"p-6 text-center",children:e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"No products found for the selected filter."})})}),e.jsx("div",{className:`border-t ${t?"border-gray-700 bg-gray-700":"border-gray-100 bg-gray-50"} px-6 py-3`,children:e.jsxs(O,{to:"/inventory",className:`text-sm font-medium ${t?"text-indigo-400 hover:text-indigo-300":"text-indigo-600 hover:text-indigo-800"} flex items-center justify-center`,children:["Manage Full Inventory",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ml-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})},Q=({darkMode:s,onGenerateReport:t,onScheduleMeeting:j})=>{const[m,n]=v.useState(null),u=[{id:"add-product",to:"/add-product",name:"Add Product",description:"List new products",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),color:"indigo"},{id:"new-order",to:"/create-order",name:"New Order",description:"Create customer order",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),color:"blue"},{id:"manage-inventory",to:"/inventory",name:"Manage Inventory",description:"View all products",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10"})}),color:"green"},{id:"pending-orders",to:"/orders",name:"Process Orders",description:"Manage orders",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),color:"purple"},{id:"user-management",to:"/admin/users",name:"Manage Users",description:"User approvals",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-1a1.5 1.5 0 01-1.5 1.5H9c-.83 0-1.5-.672-1.5-1.5 0-.829.67-1.5 1.5-1.5h12c.83 0 1.5.671 1.5 1.5z"})}),color:"orange"},{id:"generate-report",action:t,name:"Generate Report",description:"Download analytics",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),color:"pink"}];return e.jsxs("div",{className:`${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-lg overflow-hidden border`,children:[e.jsxs("div",{className:`px-6 py-4 border-b ${s?"border-gray-700":"border-gray-100"}`,children:[e.jsx("h2",{className:`text-xl font-bold ${s?"text-white":"text-gray-800"}`,children:"Manager Actions"}),e.jsx("p",{className:`text-xs ${s?"text-gray-400":"text-gray-500"} mt-1`,children:"Quick access to key functions"})]}),e.jsx("div",{className:"p-5 grid grid-cols-2 gap-4",children:u.map((l,f)=>{const d=l.action&&!l.to,c=d?"button":O,g=d?{onClick:l.action}:{to:l.to};return e.jsxs(c,{...g,className:`flex flex-col items-center p-4 rounded-xl 
                hover:bg-${l.color}-${s?"900/20":"50"} 
                transition-all duration-300 transform ${m===f?"scale-105":"scale-100"}
                group border ${s?`border-gray-700 hover:border-${l.color}-800`:`border-gray-100 hover:border-${l.color}-100`}`,onMouseEnter:()=>n(f),onMouseLeave:()=>n(null),children:[e.jsx("div",{className:`h-12 w-12 rounded-full ${s?`bg-${l.color}-900/30`:`bg-${l.color}-100`} 
                flex items-center justify-center mb-3 
                ${s?`group-hover:bg-${l.color}-900/50`:`group-hover:bg-${l.color}-200`} 
                transition-colors`,children:e.jsx("span",{className:`${s?`text-${l.color}-400`:`text-${l.color}-600`}`,children:l.icon})}),e.jsx("span",{className:`text-sm font-medium text-center ${s?`text-gray-200 group-hover:text-${l.color}-400`:`text-gray-800 group-hover:text-${l.color}-700`}`,children:l.name}),e.jsx("span",{className:`text-xs ${s?"text-gray-400":"text-gray-500"} mt-1 text-center`,children:l.description})]},l.id)})})]})},q=()=>{const{darkMode:s}=T(),[t,j]=v.useState({totalProducts:0,totalOrders:0,lowStockProducts:0,allOrders:[],allProducts:[],todayOrders:0,revenue:0,pendingOrders:0}),[m,n]=v.useState(!0),[u,l]=v.useState(null),[f,d]=v.useState(null),c=(o,h="success")=>{d({message:o,type:h}),setTimeout(()=>d(null),3e3)},g=async()=>{try{n(!0);const o=A(S,"products"),r=(await B(o)).docs.map(w=>({id:w.id,...w.data()})),x=r.filter(w=>w.stock<=10).length,a=A(S,"orders"),k=(await B(a)).docs.map(w=>{var R;const $=w.data();return{id:w.id,customerName:$.customerName||"Unknown Customer",total:$.total||0,status:$.status||"pending",createdAt:((R=$.createdAt)==null?void 0:R.toDate())||new Date}}),D=new Date;D.setHours(0,0,0,0);const E=k.filter(w=>{const $=new Date(w.createdAt);return $.setHours(0,0,0,0),$.getTime()===D.getTime()}).length,U=k.reduce((w,$)=>w+$.total,0),F=k.filter(w=>w.status==="pending").length;j({totalProducts:r.length,totalOrders:k.length,lowStockProducts:x,allOrders:k,allProducts:r,todayOrders:E,revenue:U,pendingOrders:F}),n(!1)}catch(o){console.error("Error fetching manager data:",o),l("Failed to load manager data"),n(!1)}};v.useEffect(()=>{g()},[]);const b=v.useCallback(async(o,h)=>{try{await H(P(S,"orders",o),{status:h,updatedAt:new Date}),j(r=>{var x;return{...r,allOrders:r.allOrders.map(a=>a.id===o?{...a,status:h}:a),pendingOrders:h==="pending"?r.pendingOrders+1:((x=r.allOrders.find(a=>a.id===o))==null?void 0:x.status)==="pending"?r.pendingOrders-1:r.pendingOrders}}),c(`Order ${o.slice(0,8)} updated to ${h}`,"success")}catch(r){throw console.error("Error updating order status:",r),c("Failed to update order status","error"),r}},[]),y=v.useCallback(async(o,h)=>{try{const r=L(S);o.forEach(x=>{const a=P(S,"orders",x);r.update(a,{status:h,updatedAt:new Date})}),await r.commit(),j(x=>({...x,allOrders:x.allOrders.map(a=>o.includes(a.id)?{...a,status:h}:a),pendingOrders:x.allOrders.filter(a=>o.includes(a.id)?h==="pending":a.status==="pending").length})),c(`${o.length} orders updated to ${h}`,"success")}catch(r){throw console.error("Error bulk updating orders:",r),c("Failed to bulk update orders","error"),r}},[]),p=v.useCallback(async(o,h)=>{try{const r=L(S);o.forEach(x=>{const a=P(S,"products",x);r.update(a,{stock:h,lastRestocked:new Date})}),await r.commit(),j(x=>({...x,allProducts:x.allProducts.map(a=>o.includes(a.id)?{...a,stock:h}:a),lowStockProducts:x.allProducts.filter(a=>o.includes(a.id)?h<=10:a.stock<=10).length})),c(`${o.length} products restocked with ${h} units each`,"success")}catch(r){throw console.error("Error bulk restocking:",r),c("Failed to bulk restock products","error"),r}},[]),i=()=>{try{const o={generatedAt:new Date().toISOString(),summary:{totalRevenue:t.revenue,totalOrders:t.totalOrders,pendingOrders:t.pendingOrders,completedOrders:t.allOrders.filter(a=>a.status==="completed").length,todayOrders:t.todayOrders,lowStockItems:t.lowStockProducts},orderBreakdown:{pending:t.allOrders.filter(a=>a.status==="pending").length,processing:t.allOrders.filter(a=>a.status==="processing").length,completed:t.allOrders.filter(a=>a.status==="completed").length,cancelled:t.allOrders.filter(a=>a.status==="cancelled").length},inventoryStatus:{totalProducts:t.totalProducts,inStock:t.allProducts.filter(a=>a.stock>10).length,lowStock:t.allProducts.filter(a=>a.stock<=10&&a.stock>0).length,outOfStock:t.allProducts.filter(a=>a.stock===0).length},salesTrends:{last7DaysRevenue:t.allOrders.filter(a=>(new Date-a.createdAt)/864e5<=7).reduce((a,C)=>a+C.total,0)}},h=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),r=URL.createObjectURL(h),x=document.createElement("a");x.href=r,x.download=`manager-report-${new Date().toISOString().split("T")[0]}.json`,x.click(),URL.revokeObjectURL(r),c("Report downloaded successfully","success")}catch{c("Failed to generate report","error")}},N=()=>{c("Team meeting scheduled for tomorrow at 2 PM","success")};return m?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):u?e.jsx("div",{className:`container mx-auto px-4 py-8 ${s?"text-white":"text-gray-800"}`,children:e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-red-500",children:u})})}):e.jsxs("div",{className:`container mx-auto px-4 py-8 max-w-7xl ${s?"text-gray-200":"text-gray-800"}`,children:[f&&e.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${f.type==="success"?s?"bg-green-900 border-green-700 text-green-100":"bg-green-100 border-green-400 text-green-800":s?"bg-red-900 border-red-700 text-red-100":"bg-red-100 border-red-400 text-red-800"} border`,children:f.message}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${s?"text-white":"text-gray-900"}`,children:"Manager Dashboard"}),e.jsx("p",{className:`mt-1 text-sm ${s?"text-gray-400":"text-gray-500"}`,children:"Real-time operations management with bulk actions and smart alerts"})]}),e.jsx("button",{onClick:g,disabled:m,className:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50 transition-colors",children:m?"Refreshing...":"Refresh Data"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[{title:"Total Revenue",value:`$${t.revenue.toFixed(2)}`,icon:"ðŸ’°",color:"green"},{title:"Today's Orders",value:t.todayOrders,icon:"ðŸ“‹",color:"blue"},{title:"Pending Orders",value:t.pendingOrders,icon:"â³",color:"yellow"},{title:"Low Stock Items",value:t.lowStockProducts,icon:"ðŸ“¦",color:"red"}].map((o,h)=>e.jsx("div",{className:`${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-md border p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-500"} uppercase tracking-wide`,children:o.title}),e.jsx("p",{className:`text-2xl font-bold ${s?"text-white":"text-gray-900"} mt-1`,children:o.value})]}),e.jsx("div",{className:`text-3xl p-3 rounded-full bg-${o.color}-${s?"900/30":"100"}`,children:o.icon})]})},h))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(G,{products:t.allProducts,darkMode:s}),e.jsx(_,{orders:t.allOrders,darkMode:s,onUpdateOrderStatus:b,onBulkUpdate:y})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(W,{products:t.allProducts,darkMode:s,onBulkRestock:p}),e.jsx(V,{stats:t,darkMode:s}),e.jsx(Q,{darkMode:s,onGenerateReport:i,onScheduleMeeting:N})]})]})]})};export{q as default};
