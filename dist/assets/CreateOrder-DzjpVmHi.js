import{h as K,i as X,a as ee,u as re,O as te,r as x,c as se,d as ae,g as ie,j as e}from"./index-BBVZjf1E.js";import{c as ne}from"./orderService-BFuIxL7s.js";const me=()=>{const m=K(),$=X(),{user:c}=ee(),{darkMode:r}=re(),{cart:g,clearCart:S}=te(),[k,_]=x.useState([]),[o,j]=x.useState([]),[l,z]=x.useState({name:(c==null?void 0:c.displayName)||"",email:(c==null?void 0:c.email)||"",phone:"",address:"",city:"",zipCode:""}),[a,w]=x.useState({paymentMethod:"credit_card",cardNumber:"",expiryDate:"",cvv:"",cardHolderName:"",accountNumber:"",routingNumber:"",accountHolderName:"",bankName:"",accountType:"checking",billingAddressSame:!0,billingAddress:"",billingCity:"",billingZipCode:""}),[R,P]=x.useState(!0),[A,F]=x.useState(!1),[L,N]=x.useState(""),[h,f]=x.useState(1),[q,U]=x.useState(""),[u,I]=x.useState("direct");x.useEffect(()=>{var t;if((t=$.state)!=null&&t.fromCart&&g.length>0){I("cart");const s=g.map(i=>({...i,quantity:i.quantity}));j(s),f(2)}},[$.state,g]);const y=(()=>{var t,s;return c?(t=c.email)!=null&&t.includes("admin")?"admin":(s=c.email)!=null&&s.includes("business")?"business":"customer":"guest"})();x.useEffect(()=>{Z()},[]);const Z=async()=>{try{P(!0);const t=se(ae,"products"),i=(await ie(t)).docs.map(d=>({id:d.id,...d.data()})).filter(d=>d.stock>0);_(i),P(!1)}catch(t){console.error("Error fetching products:",t),N("Failed to load products"),P(!1)}},M=k.filter(t=>{var s;return t.name.toLowerCase().includes(q.toLowerCase())||((s=t.category)==null?void 0:s.toLowerCase().includes(q.toLowerCase()))}),Y=(t,s)=>{const i=o.findIndex(d=>d.id===t.id);if(i>-1){const d=[...o];d[i].quantity=Math.min(d[i].quantity+s,t.stock),j(d)}else j([...o,{...t,quantity:Math.min(s,t.stock)}])},T=t=>{j(o.filter(s=>s.id!==t))},B=(t,s)=>{if(s<=0){T(t);return}const i=k.find(n=>n.id===t)||o.find(n=>n.id===t),d=o.map(n=>n.id===t?{...n,quantity:Math.min(s,i.stock)}:n);j(d)},E=()=>{let t=0,s=0,i=0;o.forEach(n=>{t+=n.price*n.quantity}),y==="business"&&(s=t*.15),y==="customer"&&(i=(t-s)*.1);const d=t-s+i;return{subtotal:t,discount:s,tax:i,total:d}},C=t=>{const{name:s,value:i}=t.target;z(d=>({...d,[s]:i}))},b=t=>{const{name:s,value:i,type:d,checked:n}=t.target;w(p=>({...p,[s]:d==="checkbox"?n:i}))},V=t=>{const s=t.replace(/\s+/g,"").replace(/[^0-9]/gi,""),i=s.match(/\d{4,16}/g),d=i&&i[0]||"",n=[];for(let p=0,G=d.length;p<G;p+=4)n.push(d.substring(p,p+4));return n.length?n.join(" "):s},J=t=>{const s=t.replace(/\s+/g,"").replace(/[^0-9]/gi,"");return s.length>=2?s.substring(0,2)+(s.length>2?"/"+s.substring(2,4):""):s},D=()=>["name","email","phone","address","city"].every(s=>l[s].trim()!==""),H=()=>a.paymentMethod==="credit_card"?a.cardNumber.replace(/\s/g,"").length>=13&&a.expiryDate.length===5&&a.cvv.length>=3&&a.cardHolderName.trim()!=="":a.accountNumber.trim()!==""&&a.routingNumber.trim()!==""&&a.accountHolderName.trim()!==""&&a.bankName.trim()!=="",O=()=>{if(g.length>0){const t=g.map(s=>({...s,quantity:s.quantity}));j(t),I("cart"),f(2)}},Q=()=>{j([]),I("direct"),f(1)},W=async()=>{if(!c){N("Please sign in to place an order");return}if(o.length===0){N("Please select at least one product");return}if(!D()){N("Please fill in all required customer information");return}if(!H()){N("Please fill in all required payment information");return}try{F(!0),N("");const t=E(),s=a.billingAddressSame?{address:l.address,city:l.city,zipCode:l.zipCode}:{address:a.billingAddress,city:a.billingCity,zipCode:a.billingZipCode},i={customerName:l.name,customerEmail:l.email,customerPhone:l.phone,shippingAddress:{address:l.address,city:l.city,zipCode:l.zipCode},billingAddress:s,paymentInfo:{paymentMethod:a.paymentMethod,...a.paymentMethod==="credit_card"?{cardLastFour:a.cardNumber.slice(-4),cardHolderName:a.cardHolderName,expiryDate:a.expiryDate}:{accountLastFour:a.accountNumber.slice(-4),accountHolderName:a.accountHolderName,bankName:a.bankName,accountType:a.accountType}},userId:c.uid,userRole:y,orderSource:u,items:o.map(n=>({productId:n.id,productName:n.name,price:n.price,quantity:n.quantity,subtotal:n.price*n.quantity})),itemCount:o.reduce((n,p)=>n+p.quantity,0),subtotal:t.subtotal,discount:t.discount,tax:t.tax,total:t.total,status:"pending",paymentStatus:"pending"},d=await ne(i);u==="cart"&&S(),await new Promise(n=>setTimeout(n,2e3)),F(!1),m(`/orders/${d}`,{state:{message:"Order placed successfully!"}})}catch(t){console.error("Error creating order:",t),N(t.message||"Failed to create order. Please try again."),F(!1)}};if(R)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})})});const v=E();return e.jsx("div",{className:`min-h-screen ${r?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:`text-2xl font-bold ${r?"text-white":"text-gray-900"}`,children:"Create New Order"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[g.length>0&&u==="direct"&&e.jsxs("button",{onClick:O,className:`px-4 py-2 border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-600 hover:text-white transition-colors ${r?"border-indigo-400 text-indigo-400 hover:bg-indigo-400 hover:text-gray-900":""}`,children:["Import from Cart (",g.length," items)"]}),u==="cart"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${r?"bg-green-900/30 text-green-400":"bg-green-100 text-green-800"}`,children:"🛒 From Cart"}),e.jsx("button",{onClick:Q,className:`px-3 py-1 text-sm border rounded ${r?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Start Fresh"})]})]})]}),e.jsx("div",{className:"flex items-center mt-2",children:e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${y==="business"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":y==="customer"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400"}`,children:[y==="business"&&"🏢 Business Account - 15% Bulk Discount",y==="customer"&&"👤 Customer Account - 10% Tax Applied",y==="admin"&&"⚙️ Admin Account - No Additional Charges"]})})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex items-center justify-center",children:[{num:1,label:"Select Products",icon:"🛍️"},{num:2,label:"Customer & Payment Info",icon:"📋"},{num:3,label:"Review & Pay",icon:"💳"}].map((t,s)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:`flex items-center px-4 py-2 rounded-lg ${h>=t.num?"bg-indigo-600 text-white":r?"bg-gray-700 text-gray-400":"bg-gray-200 text-gray-600"}`,children:[e.jsx("span",{className:"mr-2",children:t.icon}),e.jsx("span",{className:"font-medium",children:t.label}),t.num===1&&u==="cart"&&e.jsx("span",{className:"ml-2 text-xs bg-green-500 text-white px-2 py-1 rounded-full",children:"From Cart"})]}),s<2&&e.jsx("div",{className:`w-8 h-0.5 mx-2 ${h>t.num?"bg-indigo-600":r?"bg-gray-700":"bg-gray-300"}`})]},t.num))})}),L&&e.jsx("div",{className:`mb-6 p-4 rounded-lg border-l-4 ${r?"bg-red-900/30 border-red-800 text-red-400":"bg-red-50 border-red-400 text-red-700"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2",children:"⚠️"}),e.jsx("p",{className:"text-sm",children:L})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-3",children:[h===1&&e.jsxs("div",{className:`${r?"bg-gray-800":"bg-white"} rounded-xl shadow-lg p-6`,children:[g.length>0&&u==="direct"&&e.jsx("div",{className:`mb-6 p-4 rounded-lg border ${r?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium ${r?"text-blue-400":"text-blue-700"}`,children:"Items in Cart"}),e.jsxs("p",{className:`text-sm ${r?"text-blue-300":"text-blue-600"}`,children:["You have ",g.length," item(s) in your cart. Import them to create an order quickly."]})]}),e.jsx("button",{onClick:O,className:"px-4 py-2 rounded-lg font-medium bg-blue-600 hover:bg-blue-700 text-white",children:"Import Cart"})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Search products...",value:q,onChange:t=>U(t.target.value),className:`block w-full pl-10 pr-3 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300"}`})]})}),e.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Available Products (",M.length,")"]}),M.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📦"}),e.jsx("p",{className:`text-lg ${r?"text-gray-400":"text-gray-500"}`,children:q?"No products found matching your search.":"No products available for order."})]}):e.jsx("div",{className:"space-y-3",children:M.map(t=>e.jsx(de,{product:t,onAddToOrder:Y,darkMode:r,isSelected:o.find(s=>s.id===t.id)},t.id))})]}),h===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${r?"bg-gray-800":"bg-white"} rounded-xl shadow-lg p-6`,children:[e.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"📋"}),"Customer Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-2`,children:"Full Name *"}),e.jsx("input",{type:"text",name:"name",value:l.name,onChange:C,className:`w-full px-4 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-2`,children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:l.email,onChange:C,className:`w-full px-4 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-2`,children:"Phone *"}),e.jsx("input",{type:"tel",name:"phone",value:l.phone,onChange:C,className:`w-full px-4 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-2`,children:"City *"}),e.jsx("input",{type:"text",name:"city",value:l.city,onChange:C,className:`w-full px-4 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-2`,children:"Address *"}),e.jsx("input",{type:"text",name:"address",value:l.address,onChange:C,className:`w-full px-4 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-2`,children:"Zip Code"}),e.jsx("input",{type:"text",name:"zipCode",value:l.zipCode,onChange:C,className:`w-full px-4 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]})]})]}),e.jsxs("div",{className:`${r?"bg-gray-800":"bg-white"} rounded-xl shadow-lg p-6`,children:[e.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"💳"}),"Payment Information"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-3`,children:"Payment Method *"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("label",{className:`flex items-center p-4 border rounded-lg cursor-pointer ${a.paymentMethod==="credit_card"?r?"border-indigo-500 bg-indigo-900/20":"border-indigo-500 bg-indigo-50":r?"border-gray-600":"border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"credit_card",checked:a.paymentMethod==="credit_card",onChange:b,className:"mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"💳 Credit Card"}),e.jsx("div",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:"Visa, MasterCard, etc."})]})]}),e.jsxs("label",{className:`flex items-center p-4 border rounded-lg cursor-pointer ${a.paymentMethod==="bank_account"?r?"border-indigo-500 bg-indigo-900/20":"border-indigo-500 bg-indigo-50":r?"border-gray-600":"border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"bank_account",checked:a.paymentMethod==="bank_account",onChange:b,className:"mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"🏦 Bank Account"}),e.jsx("div",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:"Direct bank transfer"})]})]})]})]}),a.paymentMethod==="credit_card"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-2`,children:"Card Holder Name *"}),e.jsx("input",{type:"text",name:"cardHolderName",value:a.cardHolderName,onChange:b,className:`w-full px-4 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"John Doe",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-2`,children:"Card Number *"}),e.jsx("input",{type:"text",name:"cardNumber",value:a.cardNumber,onChange:t=>{const s=V(t.target.value);w(i=>({...i,cardNumber:s}))},className:`w-full px-4 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"1234 5678 9012 3456",maxLength:"19",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-2`,children:"Expiry Date *"}),e.jsx("input",{type:"text",name:"expiryDate",value:a.expiryDate,onChange:t=>{const s=J(t.target.value);w(i=>({...i,expiryDate:s}))},className:`w-full px-4 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"MM/YY",maxLength:"5",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-2`,children:"CVV *"}),e.jsx("input",{type:"text",name:"cvv",value:a.cvv,onChange:t=>{const s=t.target.value.replace(/\D/g,"");w(i=>({...i,cvv:s}))},className:`w-full px-4 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"123",maxLength:"4",required:!0})]})]}),a.paymentMethod==="bank_account"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-2`,children:"Account Holder Name *"}),e.jsx("input",{type:"text",name:"accountHolderName",value:a.accountHolderName,onChange:b,className:`w-full px-4 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"John Doe",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-2`,children:"Bank Name *"}),e.jsx("input",{type:"text",name:"bankName",value:a.bankName,onChange:b,className:`w-full px-4 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"Chase Bank",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-2`,children:"Account Type *"}),e.jsxs("select",{name:"accountType",value:a.accountType,onChange:b,className:`w-full px-4 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,required:!0,children:[e.jsx("option",{value:"checking",children:"Checking"}),e.jsx("option",{value:"savings",children:"Savings"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-2`,children:"Account Number *"}),e.jsx("input",{type:"text",name:"accountNumber",value:a.accountNumber,onChange:t=>{const s=t.target.value.replace(/\D/g,"");w(i=>({...i,accountNumber:s}))},className:`w-full px-4 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"123456789",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-2`,children:"Routing Number *"}),e.jsx("input",{type:"text",name:"routingNumber",value:a.routingNumber,onChange:t=>{const s=t.target.value.replace(/\D/g,"");w(i=>({...i,routingNumber:s}))},className:`w-full px-4 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,placeholder:"021000021",maxLength:"9",required:!0})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",name:"billingAddressSame",checked:a.billingAddressSame,onChange:b,className:"mr-3"}),e.jsx("label",{className:`text-sm font-medium ${r?"text-gray-300":"text-gray-700"}`,children:"Billing address is the same as shipping address"})]}),!a.billingAddressSame&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-2`,children:"Billing Address *"}),e.jsx("input",{type:"text",name:"billingAddress",value:a.billingAddress,onChange:b,className:`w-full px-4 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,required:!a.billingAddressSame})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-2`,children:"City *"}),e.jsx("input",{type:"text",name:"billingCity",value:a.billingCity,onChange:b,className:`w-full px-4 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,required:!a.billingAddressSame})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"} mb-2`,children:"Zip Code *"}),e.jsx("input",{type:"text",name:"billingZipCode",value:a.billingZipCode,onChange:b,className:`w-full px-4 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,required:!a.billingAddressSame})]})]})]})]})]}),h===3&&e.jsxs("div",{className:`${r?"bg-gray-800":"bg-white"} rounded-xl shadow-lg p-6`,children:[e.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"✅"}),"Review & Confirm Order"]}),u==="cart"&&e.jsx("div",{className:"mb-6",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${r?"bg-green-900/30 text-green-400":"bg-green-100 text-green-800"}`,children:"🛒 Order created from cart items"})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Order Items"}),e.jsx("div",{className:"space-y-3",children:o.map(t=>e.jsxs("div",{className:`flex justify-between items-center p-4 rounded-lg ${r?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-12 h-12 ${r?"bg-gray-600":"bg-gray-200"} rounded-lg flex items-center justify-center`,children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-12 h-12 object-cover rounded-lg"}):e.jsx("span",{children:"📦"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.name}),e.jsxs("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:["$",t.price.toFixed(2)," × ",t.quantity]})]})]}),e.jsxs("p",{className:"font-semibold text-lg",children:["$",(t.price*t.quantity).toFixed(2)]})]},t.id))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Shipping Information"}),e.jsx("div",{className:`p-4 rounded-lg ${r?"bg-gray-700":"bg-gray-50"}`,children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:l.name}),e.jsx("p",{className:r?"text-gray-300":"text-gray-600",children:l.email}),e.jsx("p",{className:r?"text-gray-300":"text-gray-600",children:l.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:r?"text-gray-300":"text-gray-600",children:l.address}),e.jsxs("p",{className:r?"text-gray-300":"text-gray-600",children:[l.city," ",l.zipCode]})]})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Payment Information"}),e.jsx("div",{className:`p-4 rounded-lg ${r?"bg-gray-700":"bg-gray-50"}`,children:a.paymentMethod==="credit_card"?e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"💳 Credit Card"}),e.jsxs("p",{className:r?"text-gray-300":"text-gray-600",children:["•••• •••• •••• ",a.cardNumber.slice(-4)]}),e.jsx("p",{className:r?"text-gray-300":"text-gray-600",children:a.cardHolderName})]}):e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"🏦 Bank Account"}),e.jsxs("p",{className:r?"text-gray-300":"text-gray-600",children:[a.bankName," - •••••",a.accountNumber.slice(-4)]}),e.jsx("p",{className:r?"text-gray-300":"text-gray-600",children:a.accountHolderName})]})})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:`${r?"bg-gray-800":"bg-white"} rounded-xl shadow-lg p-6 sticky top-4`,children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"🛒"}),"Order Summary",u==="cart"&&e.jsx("span",{className:"ml-2 text-xs bg-green-500 text-white px-2 py-1 rounded-full",children:"Cart"})]}),o.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"text-4xl mb-2",children:"🛍️"}),e.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:"No products selected"}),g.length>0&&u==="direct"&&e.jsxs("button",{onClick:O,className:"mt-3 text-sm text-indigo-600 dark:text-indigo-400 hover:underline",children:["Import ",g.length," items from cart"]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:o.map(t=>e.jsxs("div",{className:`p-3 rounded-lg ${r?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("p",{className:"text-sm font-medium truncate pr-2",children:t.name}),e.jsx("button",{onClick:()=>T(t.id),className:"text-red-500 hover:text-red-700 ml-2",children:"×"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>B(t.id,t.quantity-1),className:`w-6 h-6 rounded-full ${r?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} flex items-center justify-center text-sm`,children:"−"}),e.jsx("span",{className:"text-sm font-medium",children:t.quantity}),e.jsx("button",{onClick:()=>B(t.id,t.quantity+1),className:`w-6 h-6 rounded-full ${r?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} flex items-center justify-center text-sm`,children:"+"})]}),e.jsxs("p",{className:"text-sm font-semibold",children:["$",(t.price*t.quantity).toFixed(2)]})]})]},t.id))}),e.jsx("div",{className:`pt-4 border-t ${r?"border-gray-600":"border-gray-200"}`,children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["$",v.subtotal.toFixed(2)]})]}),v.discount>0&&e.jsxs("div",{className:"flex justify-between text-green-600 dark:text-green-400",children:[e.jsx("span",{children:"Business Discount (15%):"}),e.jsxs("span",{children:["-$",v.discount.toFixed(2)]})]}),v.tax>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tax (10%):"}),e.jsxs("span",{children:["$",v.tax.toFixed(2)]})]}),e.jsxs("div",{className:`flex justify-between font-bold text-lg pt-2 border-t ${r?"border-gray-600":"border-gray-200"}`,children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["$",v.total.toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[h===1&&e.jsxs("button",{onClick:()=>f(2),disabled:o.length===0,className:`w-full py-3 px-4 rounded-lg font-medium transition-colors ${o.length===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:["Continue to Customer Info",e.jsx("span",{className:"ml-2",children:"→"})]}),h===2&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>f(3),disabled:!D()||!H(),className:`w-full py-3 px-4 rounded-lg font-medium transition-colors ${!D()||!H()?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:["Review Order",e.jsx("span",{className:"ml-2",children:"→"})]}),e.jsx("button",{onClick:()=>f(1),className:`w-full py-2 px-4 rounded-lg font-medium border ${r?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"← Back to Products"})]}),h===3&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:W,disabled:A,className:`w-full py-3 px-4 rounded-lg font-medium transition-colors ${A?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"} text-white`,children:A?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Place Order • $",v.total.toFixed(2),e.jsx("span",{className:"ml-2",children:"✓"})]})}),e.jsx("button",{onClick:()=>f(2),className:`w-full py-2 px-4 rounded-lg font-medium border ${r?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"← Back to Customer Info"})]}),u==="cart"&&h===1&&e.jsx("button",{onClick:()=>m("/cart"),className:`w-full py-2 px-4 rounded-lg font-medium border ${r?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"← Back to Cart"})]}),e.jsx("div",{className:`mt-4 p-3 rounded-lg ${r?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-200"} border text-xs`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:"🔒"}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${r?"text-blue-400":"text-blue-700"}`,children:"Secure Payment"}),e.jsx("p",{className:`${r?"text-blue-300":"text-blue-600"} mt-1`,children:"Your payment information is encrypted and secure."})]})]})})]})})]})]})})},de=({product:m,onAddToOrder:$,darkMode:c,isSelected:r})=>{const[g,S]=x.useState(1);return e.jsx("div",{className:`border rounded-lg p-4 transition-all hover:shadow-md ${r?c?"border-indigo-500 bg-indigo-900/20":"border-indigo-500 bg-indigo-50":c?"border-gray-600 hover:border-gray-500":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsx("div",{className:`w-12 h-12 ${c?"bg-gray-600":"bg-gray-100"} rounded-lg flex items-center justify-center flex-shrink-0`,children:m.imageUrl?e.jsx("img",{src:m.imageUrl,alt:m.name,className:"w-12 h-12 object-cover rounded-lg"}):e.jsx("span",{className:"text-xl",children:"📦"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold truncate",children:m.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"font-medium text-indigo-600 dark:text-indigo-400",children:["$",m.price.toFixed(2)]}),e.jsxs("span",{className:`${c?"text-gray-400":"text-gray-500"}`,children:["Stock: ",m.stock]}),m.category&&e.jsx("span",{className:`px-2 py-1 rounded text-xs ${c?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:m.category})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:`text-xs ${c?"text-gray-400":"text-gray-500"}`,children:"Qty:"}),e.jsx("input",{type:"number",min:"1",max:m.stock,value:g,onChange:k=>S(Math.max(1,Math.min(m.stock,parseInt(k.target.value)||1))),className:`w-16 px-2 py-1 border rounded text-sm text-center ${c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`})]}),e.jsx("button",{onClick:()=>$(m,g),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:r?"Add More":"Add"})]})]})})};export{me as default};
