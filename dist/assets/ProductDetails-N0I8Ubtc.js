import{M as F,h as A,u as E,V as R,a as q,r as n,e as B,d as v,N as L,q as M,c as O,w as Q,l as z,g as V,j as e,L as d}from"./index-l2F0ffZz.js";const X=()=>{const{id:a}=F(),l=A(),{darkMode:t}=E(),{addToCart:$,cart:y}=R(),{user:w}=q(),[s,k]=n.useState(null),[b,C]=n.useState([]),[S,x]=n.useState(!0),[f,m]=n.useState(null),[c,h]=n.useState(1),[j,P]=n.useState(0);n.useEffect(()=>{T()},[a]);const T=async()=>{try{x(!0),m(null);const r=B(v,"products",a),i=await L(r);if(!i.exists()){m("Product not found"),x(!1);return}const u={id:i.id,...i.data()};if(k(u),u.category){const U=M(O(v,"products"),Q("category","==",u.category),z(4)),D=(await V(U)).docs.map(o=>({id:o.id,...o.data()})).filter(o=>o.id!==a&&o.stock>0);C(D)}x(!1)}catch(r){console.error("Error fetching product:",r),m("Failed to load product details"),x(!1)}},p=()=>{if(c>s.stock){alert(`Only ${s.stock} items available in stock`);return}$(s,c);const r=document.createElement("div");r.className="fixed top-4 right-4 z-50 px-4 py-2 rounded-lg text-white bg-green-500 transform transition-transform duration-300",r.textContent=`Added ${c} ${s.name} to cart!`,document.body.appendChild(r),setTimeout(()=>{r.style.transform="translateX(100%)",setTimeout(()=>document.body.removeChild(r),300)},2e3)},N=()=>{const r=y.find(i=>i.id===a);return r?r.quantity:0},I=()=>{p(),setTimeout(()=>{w?l("/checkout"):l("/login",{state:{from:{pathname:"/checkout"}}})},500)};if(S)return e.jsx("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})})})});if(f||!s)return e.jsx("div",{className:`min-h-screen ${t?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"}`,children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:`p-8 rounded-lg text-center ${t?"bg-gray-800":"bg-white"}`,children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ˜ž"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:f}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-600"} mb-6`,children:"The product you're looking for doesn't exist or has been removed."}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx(d,{to:"/catalog",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Browse Catalog"}),e.jsx("button",{onClick:()=>l(-1),className:`inline-flex items-center px-4 py-2 border ${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500`,children:"Go Back"})]})]})})});const g=s.imageUrl?[s.imageUrl,s.imageUrl,s.imageUrl]:[];return e.jsx("div",{className:`min-h-screen ${t?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("nav",{className:"flex items-center space-x-2 mb-8 text-sm",children:[e.jsx(d,{to:"/catalog",className:`${t?"text-indigo-400 hover:text-indigo-300":"text-indigo-600 hover:text-indigo-800"}`,children:"Catalog"}),e.jsx("span",{className:t?"text-gray-400":"text-gray-500",children:"/"}),s.category&&e.jsxs(e.Fragment,{children:[e.jsx(d,{to:`/catalog?category=${s.category}`,className:`${t?"text-indigo-400 hover:text-indigo-300":"text-indigo-600 hover:text-indigo-800"}`,children:s.category}),e.jsx("span",{className:t?"text-gray-400":"text-gray-500",children:"/"})]}),e.jsx("span",{className:t?"text-gray-300":"text-gray-700",children:s.name})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[e.jsxs("div",{children:[e.jsx("div",{className:`aspect-w-1 aspect-h-1 w-full h-96 ${t?"bg-gray-800":"bg-gray-100"} rounded-xl overflow-hidden mb-4`,children:g.length>0?e.jsx("img",{src:g[j],alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("span",{className:"text-6xl",children:"ðŸ“¦"})})}),g.length>1&&e.jsx("div",{className:"flex space-x-2",children:g.map((r,i)=>e.jsx("button",{onClick:()=>P(i),className:`w-20 h-20 rounded-lg overflow-hidden border-2 ${j===i?"border-indigo-500":t?"border-gray-600":"border-gray-200"}`,children:e.jsx("img",{src:r,alt:`${s.name} ${i+1}`,className:"w-full h-full object-cover"})},i))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"} mb-2`,children:s.name}),e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsxs("span",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"}`,children:["$",Number(s.price).toFixed(2)]}),s.costPrice&&e.jsxs("span",{className:`text-lg line-through ${t?"text-gray-400":"text-gray-500"}`,children:["$",Number(s.costPrice).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[s.category&&e.jsx("span",{className:`px-3 py-1 rounded-full ${t?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:s.category}),s.sku&&e.jsxs("span",{className:`${t?"text-gray-400":"text-gray-500"}`,children:["SKU: ",s.sku]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`w-3 h-3 rounded-full ${s.stock>10?"bg-green-500":s.stock>0?"bg-yellow-500":"bg-red-500"}`}),e.jsx("span",{className:`font-medium ${s.stock>10?"text-green-600 dark:text-green-400":s.stock>0?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:s.stock>10?"In Stock":s.stock>0?`Only ${s.stock} left`:"Out of Stock"})]}),e.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"} mt-1`,children:[s.stock," units available"]})]}),s.description&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-white":"text-gray-900"} mb-2`,children:"Description"}),e.jsx("p",{className:`${t?"text-gray-300":"text-gray-600"} leading-relaxed`,children:s.description})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-white":"text-gray-900"} mb-4`,children:"Product Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.supplier&&e.jsxs("div",{children:[e.jsx("dt",{className:`text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Supplier"}),e.jsx("dd",{className:`text-sm ${t?"text-gray-300":"text-gray-900"}`,children:s.supplier})]}),s.reorderPoint&&e.jsxs("div",{children:[e.jsx("dt",{className:`text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Reorder Point"}),e.jsxs("dd",{className:`text-sm ${t?"text-gray-300":"text-gray-900"}`,children:[s.reorderPoint," units"]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:`text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Category"}),e.jsx("dd",{className:`text-sm ${t?"text-gray-300":"text-gray-900"}`,children:s.category||"Uncategorized"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:`text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Stock Level"}),e.jsxs("dd",{className:`text-sm ${t?"text-gray-300":"text-gray-900"}`,children:[s.stock," units"]})]})]})]}),s.stock>0&&e.jsxs("div",{className:`p-6 rounded-xl ${t?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border`,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Quantity"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>h(Math.max(1,c-1)),className:`w-10 h-10 rounded-full ${t?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300"} flex items-center justify-center transition-colors`,children:"âˆ’"}),e.jsx("input",{type:"number",min:"1",max:s.stock,value:c,onChange:r=>h(Math.max(1,Math.min(s.stock,parseInt(r.target.value)||1))),className:`w-20 text-center py-2 px-3 border rounded-lg ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),e.jsx("button",{onClick:()=>h(Math.min(s.stock,c+1)),className:`w-10 h-10 rounded-full ${t?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300"} flex items-center justify-center transition-colors`,children:"+"})]}),N()>0&&e.jsxs("p",{className:`text-sm ${t?"text-indigo-400":"text-indigo-600"} mt-2`,children:[N()," already in cart"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-lg font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"Total:"}),e.jsxs("span",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:["$",(s.price*c).toFixed(2)]})]}),c>1&&e.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"} text-right`,children:["$",s.price.toFixed(2)," each"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:p,className:"w-full py-3 px-6 bg-indigo-600 text-white text-lg font-medium rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",children:"Add to Cart"}),e.jsx("button",{onClick:I,className:`w-full py-3 px-6 border-2 border-indigo-600 text-indigo-600 text-lg font-medium rounded-lg hover:bg-indigo-600 hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors ${t?"hover:border-indigo-500":""}`,children:"Buy Now"}),e.jsxs(d,{to:"/cart",className:`block w-full py-2 px-6 text-center border ${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} rounded-lg transition-colors`,children:["View Cart (",y.reduce((r,i)=>r+i.quantity,0),")"]})]})]}),s.stock===0&&e.jsxs("div",{className:`p-6 rounded-xl ${t?"bg-red-900/20 border-red-800":"bg-red-50 border-red-200"} border text-center`,children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-red-400":"text-red-700"} mb-2`,children:"Out of Stock"}),e.jsx("p",{className:`${t?"text-red-300":"text-red-600"} mb-4`,children:"This product is currently unavailable."}),e.jsx("button",{className:`px-6 py-2 border rounded-lg ${t?"border-red-600 text-red-400 hover:bg-red-900/30":"border-red-300 text-red-700 hover:bg-red-100"} transition-colors`,onClick:()=>alert("We'll notify you when this product is back in stock!"),children:"Notify When Available"})]})]})]}),b.length>0&&e.jsxs("div",{className:"mt-16",children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"} mb-8`,children:"Related Products"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:b.map(r=>e.jsx(W,{product:r,darkMode:t},r.id))})]})]})})},W=({product:a,darkMode:l})=>e.jsxs(d,{to:`/products/${a.id}`,className:`block ${l?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-white border-gray-200 hover:border-gray-300"} border rounded-xl shadow-md hover:shadow-lg transition-all overflow-hidden group`,children:[e.jsx("div",{className:"aspect-w-1 aspect-h-1 w-full h-48 bg-gray-100 dark:bg-gray-700 relative overflow-hidden",children:a.imageUrl?e.jsx("img",{src:a.imageUrl,alt:a.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("span",{className:"text-4xl",children:"ðŸ“¦"})})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:`font-semibold ${l?"text-white":"text-gray-900"} mb-1 line-clamp-2`,children:a.name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:`text-lg font-bold ${l?"text-white":"text-gray-900"}`,children:["$",Number(a.price).toFixed(2)]}),e.jsxs("span",{className:`text-sm ${l?"text-gray-400":"text-gray-500"}`,children:[a.stock," left"]})]})]})]});export{X as default};
