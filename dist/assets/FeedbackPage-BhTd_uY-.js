import{a as R,r as i,q as _,c as k,d as v,w as $,n as q,g as E,j as e,p as M}from"./index-BBVZjf1E.js";import{c as o}from"./createLucideIcon-D6ZTpStf.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],I=o("circle-alert",B);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Y=o("circle-check-big",U);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],N=o("message-circle",z);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],T=o("send",O);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],w=o("star",H),Q=()=>{const{user:l}=R(),[S,x]=i.useState(!1),[g,b]=i.useState(!1),[h,n]=i.useState(null),[F,y]=i.useState(!1),[p,C]=i.useState([]),[a,m]=i.useState({title:"",message:"",rating:0,category:"general",priority:"medium"}),A=[{value:"general",label:"General Feedback"},{value:"product",label:"Product Related"},{value:"service",label:"Customer Service"},{value:"website",label:"Website/App"},{value:"delivery",label:"Delivery & Shipping"},{value:"billing",label:"Billing & Payment"},{value:"suggestion",label:"Suggestion"},{value:"complaint",label:"Complaint"}],u=[{value:"low",label:"Low",color:"text-green-600"},{value:"medium",label:"Medium",color:"text-yellow-600"},{value:"high",label:"High",color:"text-red-600"}];i.useEffect(()=>{l&&f()},[l]);const f=async()=>{try{x(!0);const t=_(k(v,"feedbacks"),$("userId","==",l.uid),q("createdAt","desc")),d=(await E(t)).docs.map(s=>({id:s.id,...s.data()}));C(d)}catch(t){console.error("Error fetching feedbacks:",t),n("Failed to load your previous feedbacks")}finally{x(!1)}},c=t=>{const{name:r,value:d}=t.target;m(s=>({...s,[r]:d}))},D=t=>{m(r=>({...r,rating:t}))},L=async t=>{if(t.preventDefault(),!a.title.trim()||!a.message.trim()){n("Please fill in both title and message");return}if(a.rating===0){n("Please provide a rating");return}try{b(!0),n(null);const r={...a,userId:l.uid,userEmail:l.email,userName:l.displayName||l.email,createdAt:new Date,status:"pending",adminResponse:null,adminResponseAt:null};await M(k(v,"feedbacks"),r),m({title:"",message:"",rating:0,category:"general",priority:"medium"}),y(!0),setTimeout(()=>y(!1),5e3),f()}catch(r){console.error("Error submitting feedback:",r),n("Failed to submit feedback. Please try again.")}finally{b(!1)}},j=t=>t?(t.toDate?t.toDate():new Date(t)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",P=t=>{switch(t){case"pending":return"text-yellow-600 bg-yellow-100";case"reviewed":return"text-blue-600 bg-blue-100";case"resolved":return"text-green-600 bg-green-100";case"closed":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}};return l?e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Feedback & Support"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"We value your feedback! Help us improve our service by sharing your thoughts and experiences."})]}),F&&e.jsx("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{className:"h-5 w-5 text-green-600 dark:text-green-400 mr-2"}),e.jsx("p",{className:"text-green-800 dark:text-green-200 font-medium",children:"Thank you! Your feedback has been submitted successfully."})]})}),h&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{className:"h-5 w-5 text-red-600 dark:text-red-400 mr-2"}),e.jsx("p",{className:"text-red-800 dark:text-red-200",children:h})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Submit New Feedback"}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title *"}),e.jsx("input",{type:"text",id:"title",name:"title",value:a.title,onChange:c,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",placeholder:"Brief summary of your feedback",maxLength:100,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),e.jsx("select",{id:"category",name:"category",value:a.category,onChange:c,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",children:A.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),e.jsx("select",{id:"priority",name:"priority",value:a.priority,onChange:c,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",children:u.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Overall Rating *"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",onClick:()=>D(t),className:"focus:outline-none",children:e.jsx(w,{className:`h-6 w-6 ${t<=a.rating?"text-yellow-400 fill-current":"text-gray-300 dark:text-gray-600"} hover:text-yellow-400 transition-colors`})},t)),e.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:a.rating>0?`${a.rating}/5`:"Click to rate"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Your Feedback *"}),e.jsx("textarea",{id:"message",name:"message",value:a.message,onChange:c,rows:5,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",placeholder:"Please provide detailed feedback about your experience...",maxLength:1e3,required:!0}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[a.message.length,"/1000 characters"]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:g,className:"w-full md:w-auto flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Submit Feedback"]})})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Your Previous Feedback"}),S?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):p.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(N,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You haven't submitted any feedback yet."})]}):e.jsx("div",{className:"space-y-4",children:p.map(t=>{var r,d;return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${P(t.status)}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsxs("div",{className:"flex items-center mr-4",children:[[1,2,3,4,5].map(s=>e.jsx(w,{className:`h-4 w-4 ${s<=t.rating?"text-yellow-400 fill-current":"text-gray-300"}`},s)),e.jsxs("span",{className:"ml-1 text-sm text-gray-600 dark:text-gray-400",children:[t.rating,"/5"]})]}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 mr-4",children:t.category}),e.jsxs("span",{className:`text-sm font-medium ${(r=u.find(s=>s.value===t.priority))==null?void 0:r.color}`,children:[(d=u.find(s=>s.value===t.priority))==null?void 0:d.label," Priority"]})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:t.message}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Submitted: ",j(t.createdAt)]}),t.adminResponse&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded border-l-4 border-blue-400",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-1",children:"Admin Response:"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:t.adminResponse}),e.jsx("p",{className:"text-xs text-blue-600 dark:te-*+blue-400 mt-1",children:j(t.adminResponseAt)})]})]},t.id)})})]})]}):e.jsx("div",{className:"p-6 max-w-4xl mx-auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(N,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Sign in Required"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please log in to submit feedback or view your previous submissions."})]})})};export{Q as default};
