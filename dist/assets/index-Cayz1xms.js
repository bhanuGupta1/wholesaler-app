const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AdminDashboard-CCEe1jzP.js","assets/users-C33UlmdB.js","assets/createLucideIcon-ZL5jKoAQ.js","assets/shopping-cart-C3-LX7ba.js","assets/dollar-sign-C4Y0PZxW.js","assets/package-CO1katkn.js","assets/proxy-XmAmU5Pj.js","assets/triangle-alert-6lvaV_Xo.js","assets/refresh-cw-2-R4Kr26.js","assets/clock-B_AEtKJB.js","assets/shield-BPQzL7Fy.js","assets/message-circle-B1TfrYIM.js","assets/headphones-ciqvq6ts.js","assets/x-FpGIsn-F.js","assets/download-DPlqKAv_.js","assets/star-BwjKzEor.js","assets/Inventory-CkVBBGuP.js","assets/useAccessControl-ITHTEyn6.js","assets/ProductModal-CkvfUBJD.js","assets/ImageUploader-Cg8xnCPV.js","assets/AddProduct-Dyb2_cki.js","assets/ProductDetail-CZzYcZF0.js","assets/ProductDetails-BiTm5x0c.js","assets/eye-Cznc5Ch1.js","assets/truck-Bt5yrkGF.js","assets/CreateOrder-BRJZjTZK.js","assets/orderService-Ckalb_W1.js","assets/OrderDetails-BfMgE1fl.js","assets/format-CBpsKyOP.js","assets/InvoicePage-C0Rh_CJ-.js","assets/Cart-BfETqEbw.js","assets/trash-2-C65T1DBD.js","assets/tag-DK9DjVU6.js","assets/credit-card-BgVdiJ11.js","assets/Checkout-DKHKjh6m.js","assets/user-tkCuWfrf.js","assets/FeedbackPage-BYpHxImY.js","assets/circle-check-big-C4rwtCxY.js","assets/SupportCenter-DuRORjqj.js","assets/index-Bek8qiMI.js","assets/OrderProcessing-Dxu_XDvU.js","assets/AboutUs-BUZph0bI.js","assets/PrivacyPolicy-BAi3J7O5.js","assets/HelpCenter-E8nIjwVN.js","assets/ContactSupport-BoYa5l-t.js","assets/MyProfile-CydNg44J.js","assets/AdminReports-DJCibDez.js","assets/AdminFeedback-B6v0XOmM.js","assets/search-CXmKKFt2.js","assets/reply-xoIUt20J.js","assets/AdminSupportTickets-BRmb1et8.js","assets/UserSpecificOrders-CLapvxlq.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ID=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Q1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Bv={exports:{}},Qc={},qv={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ya=Symbol.for("react.element"),K1=Symbol.for("react.portal"),Y1=Symbol.for("react.fragment"),X1=Symbol.for("react.strict_mode"),J1=Symbol.for("react.profiler"),Z1=Symbol.for("react.provider"),eT=Symbol.for("react.context"),tT=Symbol.for("react.forward_ref"),nT=Symbol.for("react.suspense"),rT=Symbol.for("react.memo"),sT=Symbol.for("react.lazy"),Mg=Symbol.iterator;function iT(t){return t===null||typeof t!="object"?null:(t=Mg&&t[Mg]||t["@@iterator"],typeof t=="function"?t:null)}var Hv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wv=Object.assign,Gv={};function Ci(t,e,n){this.props=t,this.context=e,this.refs=Gv,this.updater=n||Hv}Ci.prototype.isReactComponent={};Ci.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ci.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qv(){}Qv.prototype=Ci.prototype;function Nf(t,e,n){this.props=t,this.context=e,this.refs=Gv,this.updater=n||Hv}var Sf=Nf.prototype=new Qv;Sf.constructor=Nf;Wv(Sf,Ci.prototype);Sf.isPureReactComponent=!0;var Vg=Array.isArray,Kv=Object.prototype.hasOwnProperty,Rf={current:null},Yv={key:!0,ref:!0,__self:!0,__source:!0};function Xv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Kv.call(e,r)&&!Yv.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ya,type:t,key:i,ref:o,props:s,_owner:Rf.current}}function oT(t,e){return{$$typeof:ya,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Af(t){return typeof t=="object"&&t!==null&&t.$$typeof===ya}function aT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $g=/\/+/g;function id(t,e){return typeof t=="object"&&t!==null&&t.key!=null?aT(""+t.key):e.toString(36)}function Cl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ya:case K1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+id(o,0):r,Vg(s)?(n="",t!=null&&(n=t.replace($g,"$&/")+"/"),Cl(s,e,n,"",function(d){return d})):s!=null&&(Af(s)&&(s=oT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($g,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Vg(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+id(i,l);o+=Cl(i,e,n,u,s)}else if(u=iT(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+id(i,l++),o+=Cl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function el(t,e,n){if(t==null)return t;var r=[],s=0;return Cl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function lT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},Pl={transition:null},cT={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:Pl,ReactCurrentOwner:Rf};function Jv(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:el,forEach:function(t,e,n){el(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return el(t,function(){e++}),e},toArray:function(t){return el(t,function(e){return e})||[]},only:function(t){if(!Af(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Ci;ue.Fragment=Y1;ue.Profiler=J1;ue.PureComponent=Nf;ue.StrictMode=X1;ue.Suspense=nT;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cT;ue.act=Jv;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Wv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Rf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Kv.call(e,u)&&!Yv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:ya,type:t.type,key:s,ref:i,props:r,_owner:o}};ue.createContext=function(t){return t={$$typeof:eT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Z1,_context:t},t.Consumer=t};ue.createElement=Xv;ue.createFactory=function(t){var e=Xv.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:tT,render:t}};ue.isValidElement=Af;ue.lazy=function(t){return{$$typeof:sT,_payload:{_status:-1,_result:t},_init:lT}};ue.memo=function(t,e){return{$$typeof:rT,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=Pl.transition;Pl.transition={};try{t()}finally{Pl.transition=e}};ue.unstable_act=Jv;ue.useCallback=function(t,e){return Nt.current.useCallback(t,e)};ue.useContext=function(t){return Nt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Nt.current.useEffect(t,e)};ue.useId=function(){return Nt.current.useId()};ue.useImperativeHandle=function(t,e,n){return Nt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Nt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Nt.current.useReducer(t,e,n)};ue.useRef=function(t){return Nt.current.useRef(t)};ue.useState=function(t){return Nt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Nt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Nt.current.useTransition()};ue.version="18.3.1";qv.exports=ue;var R=qv.exports;const uT=Q1(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dT=R,hT=Symbol.for("react.element"),fT=Symbol.for("react.fragment"),mT=Object.prototype.hasOwnProperty,pT=dT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gT={key:!0,ref:!0,__self:!0,__source:!0};function Zv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)mT.call(e,r)&&!gT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:hT,type:t,key:i,ref:o,props:s,_owner:pT.current}}Qc.Fragment=fT;Qc.jsx=Zv;Qc.jsxs=Zv;Bv.exports=Qc;var a=Bv.exports,nh={},ex={exports:{}},Qt={},tx={exports:{}},nx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,B){var F=M.length;M.push(B);e:for(;0<F;){var Z=F-1>>>1,ne=M[Z];if(0<s(ne,B))M[Z]=B,M[F]=ne,F=Z;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var B=M[0],F=M.pop();if(F!==B){M[0]=F;e:for(var Z=0,ne=M.length,H=ne>>>1;Z<H;){var $e=2*(Z+1)-1,Ue=M[$e],K=$e+1,xt=M[K];if(0>s(Ue,F))K<ne&&0>s(xt,Ue)?(M[Z]=xt,M[K]=F,Z=K):(M[Z]=Ue,M[$e]=F,Z=$e);else if(K<ne&&0>s(xt,F))M[Z]=xt,M[K]=F,Z=K;else break e}}return B}function s(M,B){var F=M.sortIndex-B.sortIndex;return F!==0?F:M.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,m=null,g=3,x=!1,N=!1,k=!1,C=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(M){for(var B=n(d);B!==null;){if(B.callback===null)r(d);else if(B.startTime<=M)r(d),B.sortIndex=B.expirationTime,e(u,B);else break;B=n(d)}}function j(M){if(k=!1,S(M),!N)if(n(u)!==null)N=!0,ee(D);else{var B=n(d);B!==null&&ye(j,B.startTime-M)}}function D(M,B){N=!1,k&&(k=!1,T(y),y=-1),x=!0;var F=g;try{for(S(B),m=n(u);m!==null&&(!(m.expirationTime>B)||M&&!_());){var Z=m.callback;if(typeof Z=="function"){m.callback=null,g=m.priorityLevel;var ne=Z(m.expirationTime<=B);B=t.unstable_now(),typeof ne=="function"?m.callback=ne:m===n(u)&&r(u),S(B)}else r(u);m=n(u)}if(m!==null)var H=!0;else{var $e=n(d);$e!==null&&ye(j,$e.startTime-B),H=!1}return H}finally{m=null,g=F,x=!1}}var U=!1,E=null,y=-1,v=5,I=-1;function _(){return!(t.unstable_now()-I<v)}function P(){if(E!==null){var M=t.unstable_now();I=M;var B=!0;try{B=E(!0,M)}finally{B?A():(U=!1,E=null)}}else U=!1}var A;if(typeof w=="function")A=function(){w(P)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Q=z.port2;z.port1.onmessage=P,A=function(){Q.postMessage(null)}}else A=function(){C(P,0)};function ee(M){E=M,U||(U=!0,A())}function ye(M,B){y=C(function(){M(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){N||x||(N=!0,ee(D))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(M){switch(g){case 1:case 2:case 3:var B=3;break;default:B=g}var F=g;g=B;try{return M()}finally{g=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,B){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var F=g;g=M;try{return B()}finally{g=F}},t.unstable_scheduleCallback=function(M,B,F){var Z=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Z+F:Z):F=Z,M){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=F+ne,M={id:h++,callback:B,priorityLevel:M,startTime:F,expirationTime:ne,sortIndex:-1},F>Z?(M.sortIndex=F,e(d,M),n(u)===null&&M===n(d)&&(k?(T(y),y=-1):k=!0,ye(j,F-Z))):(M.sortIndex=ne,e(u,M),N||x||(N=!0,ee(D))),M},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(M){var B=g;return function(){var F=g;g=B;try{return M.apply(this,arguments)}finally{g=F}}}})(nx);tx.exports=nx;var yT=tx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vT=R,Gt=yT;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rx=new Set,Uo={};function ks(t,e){pi(t,e),pi(t+"Capture",e)}function pi(t,e){for(Uo[t]=e,t=0;t<e.length;t++)rx.add(e[t])}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rh=Object.prototype.hasOwnProperty,xT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ug={},Fg={};function _T(t){return rh.call(Fg,t)?!0:rh.call(Ug,t)?!1:xT.test(t)?Fg[t]=!0:(Ug[t]=!0,!1)}function wT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ET(t,e,n,r){if(e===null||typeof e>"u"||wT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var kf=/[\-:]([a-z])/g;function Cf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kf,Cf);st[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kf,Cf);st[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kf,Cf);st[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pf(t,e,n,r){var s=st.hasOwnProperty(e)?st[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ET(e,n,s,r)&&(n=null),r||s===null?_T(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var nr=vT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tl=Symbol.for("react.element"),qs=Symbol.for("react.portal"),Hs=Symbol.for("react.fragment"),jf=Symbol.for("react.strict_mode"),sh=Symbol.for("react.profiler"),sx=Symbol.for("react.provider"),ix=Symbol.for("react.context"),Of=Symbol.for("react.forward_ref"),ih=Symbol.for("react.suspense"),oh=Symbol.for("react.suspense_list"),Df=Symbol.for("react.memo"),hr=Symbol.for("react.lazy"),ox=Symbol.for("react.offscreen"),zg=Symbol.iterator;function so(t){return t===null||typeof t!="object"?null:(t=zg&&t[zg]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,od;function po(t){if(od===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);od=e&&e[1]||""}return`
`+od+t}var ad=!1;function ld(t,e){if(!t||ad)return"";ad=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{ad=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?po(t):""}function bT(t){switch(t.tag){case 5:return po(t.type);case 16:return po("Lazy");case 13:return po("Suspense");case 19:return po("SuspenseList");case 0:case 2:case 15:return t=ld(t.type,!1),t;case 11:return t=ld(t.type.render,!1),t;case 1:return t=ld(t.type,!0),t;default:return""}}function ah(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hs:return"Fragment";case qs:return"Portal";case sh:return"Profiler";case jf:return"StrictMode";case ih:return"Suspense";case oh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ix:return(t.displayName||"Context")+".Consumer";case sx:return(t._context.displayName||"Context")+".Provider";case Of:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Df:return e=t.displayName||null,e!==null?e:ah(t.type)||"Memo";case hr:e=t._payload,t=t._init;try{return ah(t(e))}catch{}}return null}function TT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ah(e);case 8:return e===jf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ax(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function IT(t){var e=ax(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nl(t){t._valueTracker||(t._valueTracker=IT(t))}function lx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ax(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function rc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lh(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Bg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cx(t,e){e=e.checked,e!=null&&Pf(t,"checked",e,!1)}function ch(t,e){cx(t,e);var n=Vr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?uh(t,e.type,n):e.hasOwnProperty("defaultValue")&&uh(t,e.type,Vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function uh(t,e,n){(e!=="number"||rc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var go=Array.isArray;function si(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Vr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function dh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(go(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vr(n)}}function ux(t,e){var n=Vr(e.value),r=Vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Wg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function dx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?dx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rl,hx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rl=rl||document.createElement("div"),rl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Io={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NT=["Webkit","ms","Moz","O"];Object.keys(Io).forEach(function(t){NT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Io[e]=Io[t]})});function fx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Io.hasOwnProperty(t)&&Io[t]?(""+e).trim():e+"px"}function mx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=fx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ST=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fh(t,e){if(e){if(ST[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function mh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ph=null;function Lf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gh=null,ii=null,oi=null;function Gg(t){if(t=_a(t)){if(typeof gh!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Zc(e),gh(t.stateNode,t.type,e))}}function px(t){ii?oi?oi.push(t):oi=[t]:ii=t}function gx(){if(ii){var t=ii,e=oi;if(oi=ii=null,Gg(t),e)for(t=0;t<e.length;t++)Gg(e[t])}}function yx(t,e){return t(e)}function vx(){}var cd=!1;function xx(t,e,n){if(cd)return t(e,n);cd=!0;try{return yx(t,e,n)}finally{cd=!1,(ii!==null||oi!==null)&&(vx(),gx())}}function zo(t,e){var n=t.stateNode;if(n===null)return null;var r=Zc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var yh=!1;if(Gn)try{var io={};Object.defineProperty(io,"passive",{get:function(){yh=!0}}),window.addEventListener("test",io,io),window.removeEventListener("test",io,io)}catch{yh=!1}function RT(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var No=!1,sc=null,ic=!1,vh=null,AT={onError:function(t){No=!0,sc=t}};function kT(t,e,n,r,s,i,o,l,u){No=!1,sc=null,RT.apply(AT,arguments)}function CT(t,e,n,r,s,i,o,l,u){if(kT.apply(this,arguments),No){if(No){var d=sc;No=!1,sc=null}else throw Error(q(198));ic||(ic=!0,vh=d)}}function Cs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function _x(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qg(t){if(Cs(t)!==t)throw Error(q(188))}function PT(t){var e=t.alternate;if(!e){if(e=Cs(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Qg(s),t;if(i===r)return Qg(s),e;i=i.sibling}throw Error(q(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function wx(t){return t=PT(t),t!==null?Ex(t):null}function Ex(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ex(t);if(e!==null)return e;t=t.sibling}return null}var bx=Gt.unstable_scheduleCallback,Kg=Gt.unstable_cancelCallback,jT=Gt.unstable_shouldYield,OT=Gt.unstable_requestPaint,ze=Gt.unstable_now,DT=Gt.unstable_getCurrentPriorityLevel,Mf=Gt.unstable_ImmediatePriority,Tx=Gt.unstable_UserBlockingPriority,oc=Gt.unstable_NormalPriority,LT=Gt.unstable_LowPriority,Ix=Gt.unstable_IdlePriority,Kc=null,In=null;function MT(t){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(Kc,t,void 0,(t.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:UT,VT=Math.log,$T=Math.LN2;function UT(t){return t>>>=0,t===0?32:31-(VT(t)/$T|0)|0}var sl=64,il=4194304;function yo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ac(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=yo(l):(i&=o,i!==0&&(r=yo(i)))}else o=n&~s,o!==0?r=yo(o):i!==0&&(r=yo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-un(e),s=1<<n,r|=t[n],e&=~s;return r}function FT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-un(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=FT(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function xh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Nx(){var t=sl;return sl<<=1,!(sl&4194240)&&(sl=64),t}function ud(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function va(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-un(e),t[e]=n}function BT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-un(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Vf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-un(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var xe=0;function Sx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Rx,$f,Ax,kx,Cx,_h=!1,ol=[],Ir=null,Nr=null,Sr=null,Bo=new Map,qo=new Map,mr=[],qT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yg(t,e){switch(t){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":Bo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qo.delete(e.pointerId)}}function oo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=_a(e),e!==null&&$f(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function HT(t,e,n,r,s){switch(e){case"focusin":return Ir=oo(Ir,t,e,n,r,s),!0;case"dragenter":return Nr=oo(Nr,t,e,n,r,s),!0;case"mouseover":return Sr=oo(Sr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Bo.set(i,oo(Bo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,qo.set(i,oo(qo.get(i)||null,t,e,n,r,s)),!0}return!1}function Px(t){var e=us(t.target);if(e!==null){var n=Cs(e);if(n!==null){if(e=n.tag,e===13){if(e=_x(n),e!==null){t.blockedOn=e,Cx(t.priority,function(){Ax(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ph=r,n.target.dispatchEvent(r),ph=null}else return e=_a(n),e!==null&&$f(e),t.blockedOn=n,!1;e.shift()}return!0}function Xg(t,e,n){jl(t)&&n.delete(e)}function WT(){_h=!1,Ir!==null&&jl(Ir)&&(Ir=null),Nr!==null&&jl(Nr)&&(Nr=null),Sr!==null&&jl(Sr)&&(Sr=null),Bo.forEach(Xg),qo.forEach(Xg)}function ao(t,e){t.blockedOn===e&&(t.blockedOn=null,_h||(_h=!0,Gt.unstable_scheduleCallback(Gt.unstable_NormalPriority,WT)))}function Ho(t){function e(s){return ao(s,t)}if(0<ol.length){ao(ol[0],t);for(var n=1;n<ol.length;n++){var r=ol[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ir!==null&&ao(Ir,t),Nr!==null&&ao(Nr,t),Sr!==null&&ao(Sr,t),Bo.forEach(e),qo.forEach(e),n=0;n<mr.length;n++)r=mr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<mr.length&&(n=mr[0],n.blockedOn===null);)Px(n),n.blockedOn===null&&mr.shift()}var ai=nr.ReactCurrentBatchConfig,lc=!0;function GT(t,e,n,r){var s=xe,i=ai.transition;ai.transition=null;try{xe=1,Uf(t,e,n,r)}finally{xe=s,ai.transition=i}}function QT(t,e,n,r){var s=xe,i=ai.transition;ai.transition=null;try{xe=4,Uf(t,e,n,r)}finally{xe=s,ai.transition=i}}function Uf(t,e,n,r){if(lc){var s=wh(t,e,n,r);if(s===null)_d(t,e,r,cc,n),Yg(t,r);else if(HT(s,t,e,n,r))r.stopPropagation();else if(Yg(t,r),e&4&&-1<qT.indexOf(t)){for(;s!==null;){var i=_a(s);if(i!==null&&Rx(i),i=wh(t,e,n,r),i===null&&_d(t,e,r,cc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else _d(t,e,r,null,n)}}var cc=null;function wh(t,e,n,r){if(cc=null,t=Lf(r),t=us(t),t!==null)if(e=Cs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=_x(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cc=t,null}function jx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DT()){case Mf:return 1;case Tx:return 4;case oc:case LT:return 16;case Ix:return 536870912;default:return 16}default:return 16}}var Er=null,Ff=null,Ol=null;function Ox(){if(Ol)return Ol;var t,e=Ff,n=e.length,r,s="value"in Er?Er.value:Er.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ol=s.slice(t,1<r?1-r:void 0)}function Dl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function al(){return!0}function Jg(){return!1}function Kt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?al:Jg,this.isPropagationStopped=Jg,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=al)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=al)},persist:function(){},isPersistent:al}),e}var Pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zf=Kt(Pi),xa=je({},Pi,{view:0,detail:0}),KT=Kt(xa),dd,hd,lo,Yc=je({},xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==lo&&(lo&&t.type==="mousemove"?(dd=t.screenX-lo.screenX,hd=t.screenY-lo.screenY):hd=dd=0,lo=t),dd)},movementY:function(t){return"movementY"in t?t.movementY:hd}}),Zg=Kt(Yc),YT=je({},Yc,{dataTransfer:0}),XT=Kt(YT),JT=je({},xa,{relatedTarget:0}),fd=Kt(JT),ZT=je({},Pi,{animationName:0,elapsedTime:0,pseudoElement:0}),eI=Kt(ZT),tI=je({},Pi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nI=Kt(tI),rI=je({},Pi,{data:0}),e0=Kt(rI),sI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oI[t])?!!e[t]:!1}function Bf(){return aI}var lI=je({},xa,{key:function(t){if(t.key){var e=sI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bf,charCode:function(t){return t.type==="keypress"?Dl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cI=Kt(lI),uI=je({},Yc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t0=Kt(uI),dI=je({},xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bf}),hI=Kt(dI),fI=je({},Pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),mI=Kt(fI),pI=je({},Yc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gI=Kt(pI),yI=[9,13,27,32],qf=Gn&&"CompositionEvent"in window,So=null;Gn&&"documentMode"in document&&(So=document.documentMode);var vI=Gn&&"TextEvent"in window&&!So,Dx=Gn&&(!qf||So&&8<So&&11>=So),n0=" ",r0=!1;function Lx(t,e){switch(t){case"keyup":return yI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ws=!1;function xI(t,e){switch(t){case"compositionend":return Mx(e);case"keypress":return e.which!==32?null:(r0=!0,n0);case"textInput":return t=e.data,t===n0&&r0?null:t;default:return null}}function _I(t,e){if(Ws)return t==="compositionend"||!qf&&Lx(t,e)?(t=Ox(),Ol=Ff=Er=null,Ws=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dx&&e.locale!=="ko"?null:e.data;default:return null}}var wI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function s0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wI[t.type]:e==="textarea"}function Vx(t,e,n,r){px(r),e=uc(e,"onChange"),0<e.length&&(n=new zf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ro=null,Wo=null;function EI(t){Kx(t,0)}function Xc(t){var e=Ks(t);if(lx(e))return t}function bI(t,e){if(t==="change")return e}var $x=!1;if(Gn){var md;if(Gn){var pd="oninput"in document;if(!pd){var i0=document.createElement("div");i0.setAttribute("oninput","return;"),pd=typeof i0.oninput=="function"}md=pd}else md=!1;$x=md&&(!document.documentMode||9<document.documentMode)}function o0(){Ro&&(Ro.detachEvent("onpropertychange",Ux),Wo=Ro=null)}function Ux(t){if(t.propertyName==="value"&&Xc(Wo)){var e=[];Vx(e,Wo,t,Lf(t)),xx(EI,e)}}function TI(t,e,n){t==="focusin"?(o0(),Ro=e,Wo=n,Ro.attachEvent("onpropertychange",Ux)):t==="focusout"&&o0()}function II(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xc(Wo)}function NI(t,e){if(t==="click")return Xc(e)}function SI(t,e){if(t==="input"||t==="change")return Xc(e)}function RI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hn=typeof Object.is=="function"?Object.is:RI;function Go(t,e){if(hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!rh.call(e,s)||!hn(t[s],e[s]))return!1}return!0}function a0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function l0(t,e){var n=a0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=a0(n)}}function Fx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Fx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zx(){for(var t=window,e=rc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=rc(t.document)}return e}function Hf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function AI(t){var e=zx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Fx(n.ownerDocument.documentElement,n)){if(r!==null&&Hf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=l0(n,i);var o=l0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kI=Gn&&"documentMode"in document&&11>=document.documentMode,Gs=null,Eh=null,Ao=null,bh=!1;function c0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bh||Gs==null||Gs!==rc(r)||(r=Gs,"selectionStart"in r&&Hf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ao&&Go(Ao,r)||(Ao=r,r=uc(Eh,"onSelect"),0<r.length&&(e=new zf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Gs)))}function ll(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qs={animationend:ll("Animation","AnimationEnd"),animationiteration:ll("Animation","AnimationIteration"),animationstart:ll("Animation","AnimationStart"),transitionend:ll("Transition","TransitionEnd")},gd={},Bx={};Gn&&(Bx=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function Jc(t){if(gd[t])return gd[t];if(!Qs[t])return t;var e=Qs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Bx)return gd[t]=e[n];return t}var qx=Jc("animationend"),Hx=Jc("animationiteration"),Wx=Jc("animationstart"),Gx=Jc("transitionend"),Qx=new Map,u0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gr(t,e){Qx.set(t,e),ks(e,[t])}for(var yd=0;yd<u0.length;yd++){var vd=u0[yd],CI=vd.toLowerCase(),PI=vd[0].toUpperCase()+vd.slice(1);Gr(CI,"on"+PI)}Gr(qx,"onAnimationEnd");Gr(Hx,"onAnimationIteration");Gr(Wx,"onAnimationStart");Gr("dblclick","onDoubleClick");Gr("focusin","onFocus");Gr("focusout","onBlur");Gr(Gx,"onTransitionEnd");pi("onMouseEnter",["mouseout","mouseover"]);pi("onMouseLeave",["mouseout","mouseover"]);pi("onPointerEnter",["pointerout","pointerover"]);pi("onPointerLeave",["pointerout","pointerover"]);ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jI=new Set("cancel close invalid load scroll toggle".split(" ").concat(vo));function d0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,CT(r,e,void 0,t),t.currentTarget=null}function Kx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;d0(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;d0(s,l,d),i=u}}}if(ic)throw t=vh,ic=!1,vh=null,t}function Ie(t,e){var n=e[Rh];n===void 0&&(n=e[Rh]=new Set);var r=t+"__bubble";n.has(r)||(Yx(e,t,2,!1),n.add(r))}function xd(t,e,n){var r=0;e&&(r|=4),Yx(n,t,r,e)}var cl="_reactListening"+Math.random().toString(36).slice(2);function Qo(t){if(!t[cl]){t[cl]=!0,rx.forEach(function(n){n!=="selectionchange"&&(jI.has(n)||xd(n,!1,t),xd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cl]||(e[cl]=!0,xd("selectionchange",!1,e))}}function Yx(t,e,n,r){switch(jx(e)){case 1:var s=GT;break;case 4:s=QT;break;default:s=Uf}n=s.bind(null,e,n,t),s=void 0,!yh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function _d(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=us(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}xx(function(){var d=i,h=Lf(n),m=[];e:{var g=Qx.get(t);if(g!==void 0){var x=zf,N=t;switch(t){case"keypress":if(Dl(n)===0)break e;case"keydown":case"keyup":x=cI;break;case"focusin":N="focus",x=fd;break;case"focusout":N="blur",x=fd;break;case"beforeblur":case"afterblur":x=fd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Zg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=XT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=hI;break;case qx:case Hx:case Wx:x=eI;break;case Gx:x=mI;break;case"scroll":x=KT;break;case"wheel":x=gI;break;case"copy":case"cut":case"paste":x=nI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=t0}var k=(e&4)!==0,C=!k&&t==="scroll",T=k?g!==null?g+"Capture":null:g;k=[];for(var w=d,S;w!==null;){S=w;var j=S.stateNode;if(S.tag===5&&j!==null&&(S=j,T!==null&&(j=zo(w,T),j!=null&&k.push(Ko(w,j,S)))),C)break;w=w.return}0<k.length&&(g=new x(g,N,null,n,h),m.push({event:g,listeners:k}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",g&&n!==ph&&(N=n.relatedTarget||n.fromElement)&&(us(N)||N[Qn]))break e;if((x||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,x?(N=n.relatedTarget||n.toElement,x=d,N=N?us(N):null,N!==null&&(C=Cs(N),N!==C||N.tag!==5&&N.tag!==6)&&(N=null)):(x=null,N=d),x!==N)){if(k=Zg,j="onMouseLeave",T="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(k=t0,j="onPointerLeave",T="onPointerEnter",w="pointer"),C=x==null?g:Ks(x),S=N==null?g:Ks(N),g=new k(j,w+"leave",x,n,h),g.target=C,g.relatedTarget=S,j=null,us(h)===d&&(k=new k(T,w+"enter",N,n,h),k.target=S,k.relatedTarget=C,j=k),C=j,x&&N)t:{for(k=x,T=N,w=0,S=k;S;S=Us(S))w++;for(S=0,j=T;j;j=Us(j))S++;for(;0<w-S;)k=Us(k),w--;for(;0<S-w;)T=Us(T),S--;for(;w--;){if(k===T||T!==null&&k===T.alternate)break t;k=Us(k),T=Us(T)}k=null}else k=null;x!==null&&h0(m,g,x,k,!1),N!==null&&C!==null&&h0(m,C,N,k,!0)}}e:{if(g=d?Ks(d):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var D=bI;else if(s0(g))if($x)D=SI;else{D=II;var U=TI}else(x=g.nodeName)&&x.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=NI);if(D&&(D=D(t,d))){Vx(m,D,n,h);break e}U&&U(t,g,d),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&uh(g,"number",g.value)}switch(U=d?Ks(d):window,t){case"focusin":(s0(U)||U.contentEditable==="true")&&(Gs=U,Eh=d,Ao=null);break;case"focusout":Ao=Eh=Gs=null;break;case"mousedown":bh=!0;break;case"contextmenu":case"mouseup":case"dragend":bh=!1,c0(m,n,h);break;case"selectionchange":if(kI)break;case"keydown":case"keyup":c0(m,n,h)}var E;if(qf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ws?Lx(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Dx&&n.locale!=="ko"&&(Ws||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ws&&(E=Ox()):(Er=h,Ff="value"in Er?Er.value:Er.textContent,Ws=!0)),U=uc(d,y),0<U.length&&(y=new e0(y,t,null,n,h),m.push({event:y,listeners:U}),E?y.data=E:(E=Mx(n),E!==null&&(y.data=E)))),(E=vI?xI(t,n):_I(t,n))&&(d=uc(d,"onBeforeInput"),0<d.length&&(h=new e0("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=E))}Kx(m,e)})}function Ko(t,e,n){return{instance:t,listener:e,currentTarget:n}}function uc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=zo(t,n),i!=null&&r.unshift(Ko(t,i,s)),i=zo(t,e),i!=null&&r.push(Ko(t,i,s))),t=t.return}return r}function Us(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function h0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=zo(n,i),u!=null&&o.unshift(Ko(n,u,l))):s||(u=zo(n,i),u!=null&&o.push(Ko(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var OI=/\r\n?/g,DI=/\u0000|\uFFFD/g;function f0(t){return(typeof t=="string"?t:""+t).replace(OI,`
`).replace(DI,"")}function ul(t,e,n){if(e=f0(e),f0(t)!==e&&n)throw Error(q(425))}function dc(){}var Th=null,Ih=null;function Nh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sh=typeof setTimeout=="function"?setTimeout:void 0,LI=typeof clearTimeout=="function"?clearTimeout:void 0,m0=typeof Promise=="function"?Promise:void 0,MI=typeof queueMicrotask=="function"?queueMicrotask:typeof m0<"u"?function(t){return m0.resolve(null).then(t).catch(VI)}:Sh;function VI(t){setTimeout(function(){throw t})}function wd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ho(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ho(e)}function Rr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function p0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ji=Math.random().toString(36).slice(2),bn="__reactFiber$"+ji,Yo="__reactProps$"+ji,Qn="__reactContainer$"+ji,Rh="__reactEvents$"+ji,$I="__reactListeners$"+ji,UI="__reactHandles$"+ji;function us(t){var e=t[bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qn]||n[bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=p0(t);t!==null;){if(n=t[bn])return n;t=p0(t)}return e}t=n,n=t.parentNode}return null}function _a(t){return t=t[bn]||t[Qn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ks(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Zc(t){return t[Yo]||null}var Ah=[],Ys=-1;function Qr(t){return{current:t}}function Ne(t){0>Ys||(t.current=Ah[Ys],Ah[Ys]=null,Ys--)}function be(t,e){Ys++,Ah[Ys]=t.current,t.current=e}var $r={},yt=Qr($r),Ot=Qr(!1),ys=$r;function gi(t,e){var n=t.type.contextTypes;if(!n)return $r;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Dt(t){return t=t.childContextTypes,t!=null}function hc(){Ne(Ot),Ne(yt)}function g0(t,e,n){if(yt.current!==$r)throw Error(q(168));be(yt,e),be(Ot,n)}function Xx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(q(108,TT(t)||"Unknown",s));return je({},n,r)}function fc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$r,ys=yt.current,be(yt,t),be(Ot,Ot.current),!0}function y0(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=Xx(t,e,ys),r.__reactInternalMemoizedMergedChildContext=t,Ne(Ot),Ne(yt),be(yt,t)):Ne(Ot),be(Ot,n)}var $n=null,eu=!1,Ed=!1;function Jx(t){$n===null?$n=[t]:$n.push(t)}function FI(t){eu=!0,Jx(t)}function Kr(){if(!Ed&&$n!==null){Ed=!0;var t=0,e=xe;try{var n=$n;for(xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$n=null,eu=!1}catch(s){throw $n!==null&&($n=$n.slice(t+1)),bx(Mf,Kr),s}finally{xe=e,Ed=!1}}return null}var Xs=[],Js=0,mc=null,pc=0,Xt=[],Jt=0,vs=null,Un=1,Fn="";function os(t,e){Xs[Js++]=pc,Xs[Js++]=mc,mc=t,pc=e}function Zx(t,e,n){Xt[Jt++]=Un,Xt[Jt++]=Fn,Xt[Jt++]=vs,vs=t;var r=Un;t=Fn;var s=32-un(r)-1;r&=~(1<<s),n+=1;var i=32-un(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Un=1<<32-un(e)+s|n<<s|r,Fn=i+t}else Un=1<<i|n<<s|r,Fn=t}function Wf(t){t.return!==null&&(os(t,1),Zx(t,1,0))}function Gf(t){for(;t===mc;)mc=Xs[--Js],Xs[Js]=null,pc=Xs[--Js],Xs[Js]=null;for(;t===vs;)vs=Xt[--Jt],Xt[Jt]=null,Fn=Xt[--Jt],Xt[Jt]=null,Un=Xt[--Jt],Xt[Jt]=null}var Wt=null,Bt=null,Se=!1,ln=null;function e_(t,e){var n=Zt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function v0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,Bt=Rr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,Bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=vs!==null?{id:Un,overflow:Fn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Zt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wt=t,Bt=null,!0):!1;default:return!1}}function kh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ch(t){if(Se){var e=Bt;if(e){var n=e;if(!v0(t,e)){if(kh(t))throw Error(q(418));e=Rr(n.nextSibling);var r=Wt;e&&v0(t,e)?e_(r,n):(t.flags=t.flags&-4097|2,Se=!1,Wt=t)}}else{if(kh(t))throw Error(q(418));t.flags=t.flags&-4097|2,Se=!1,Wt=t}}}function x0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function dl(t){if(t!==Wt)return!1;if(!Se)return x0(t),Se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Nh(t.type,t.memoizedProps)),e&&(e=Bt)){if(kh(t))throw t_(),Error(q(418));for(;e;)e_(t,e),e=Rr(e.nextSibling)}if(x0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Bt=Rr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Bt=null}}else Bt=Wt?Rr(t.stateNode.nextSibling):null;return!0}function t_(){for(var t=Bt;t;)t=Rr(t.nextSibling)}function yi(){Bt=Wt=null,Se=!1}function Qf(t){ln===null?ln=[t]:ln.push(t)}var zI=nr.ReactCurrentBatchConfig;function co(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function hl(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _0(t){var e=t._init;return e(t._payload)}function n_(t){function e(T,w){if(t){var S=T.deletions;S===null?(T.deletions=[w],T.flags|=16):S.push(w)}}function n(T,w){if(!t)return null;for(;w!==null;)e(T,w),w=w.sibling;return null}function r(T,w){for(T=new Map;w!==null;)w.key!==null?T.set(w.key,w):T.set(w.index,w),w=w.sibling;return T}function s(T,w){return T=Pr(T,w),T.index=0,T.sibling=null,T}function i(T,w,S){return T.index=S,t?(S=T.alternate,S!==null?(S=S.index,S<w?(T.flags|=2,w):S):(T.flags|=2,w)):(T.flags|=1048576,w)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,w,S,j){return w===null||w.tag!==6?(w=Ad(S,T.mode,j),w.return=T,w):(w=s(w,S),w.return=T,w)}function u(T,w,S,j){var D=S.type;return D===Hs?h(T,w,S.props.children,j,S.key):w!==null&&(w.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===hr&&_0(D)===w.type)?(j=s(w,S.props),j.ref=co(T,w,S),j.return=T,j):(j=zl(S.type,S.key,S.props,null,T.mode,j),j.ref=co(T,w,S),j.return=T,j)}function d(T,w,S,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=kd(S,T.mode,j),w.return=T,w):(w=s(w,S.children||[]),w.return=T,w)}function h(T,w,S,j,D){return w===null||w.tag!==7?(w=ps(S,T.mode,j,D),w.return=T,w):(w=s(w,S),w.return=T,w)}function m(T,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Ad(""+w,T.mode,S),w.return=T,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case tl:return S=zl(w.type,w.key,w.props,null,T.mode,S),S.ref=co(T,null,w),S.return=T,S;case qs:return w=kd(w,T.mode,S),w.return=T,w;case hr:var j=w._init;return m(T,j(w._payload),S)}if(go(w)||so(w))return w=ps(w,T.mode,S,null),w.return=T,w;hl(T,w)}return null}function g(T,w,S,j){var D=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return D!==null?null:l(T,w,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case tl:return S.key===D?u(T,w,S,j):null;case qs:return S.key===D?d(T,w,S,j):null;case hr:return D=S._init,g(T,w,D(S._payload),j)}if(go(S)||so(S))return D!==null?null:h(T,w,S,j,null);hl(T,S)}return null}function x(T,w,S,j,D){if(typeof j=="string"&&j!==""||typeof j=="number")return T=T.get(S)||null,l(w,T,""+j,D);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case tl:return T=T.get(j.key===null?S:j.key)||null,u(w,T,j,D);case qs:return T=T.get(j.key===null?S:j.key)||null,d(w,T,j,D);case hr:var U=j._init;return x(T,w,S,U(j._payload),D)}if(go(j)||so(j))return T=T.get(S)||null,h(w,T,j,D,null);hl(w,j)}return null}function N(T,w,S,j){for(var D=null,U=null,E=w,y=w=0,v=null;E!==null&&y<S.length;y++){E.index>y?(v=E,E=null):v=E.sibling;var I=g(T,E,S[y],j);if(I===null){E===null&&(E=v);break}t&&E&&I.alternate===null&&e(T,E),w=i(I,w,y),U===null?D=I:U.sibling=I,U=I,E=v}if(y===S.length)return n(T,E),Se&&os(T,y),D;if(E===null){for(;y<S.length;y++)E=m(T,S[y],j),E!==null&&(w=i(E,w,y),U===null?D=E:U.sibling=E,U=E);return Se&&os(T,y),D}for(E=r(T,E);y<S.length;y++)v=x(E,T,y,S[y],j),v!==null&&(t&&v.alternate!==null&&E.delete(v.key===null?y:v.key),w=i(v,w,y),U===null?D=v:U.sibling=v,U=v);return t&&E.forEach(function(_){return e(T,_)}),Se&&os(T,y),D}function k(T,w,S,j){var D=so(S);if(typeof D!="function")throw Error(q(150));if(S=D.call(S),S==null)throw Error(q(151));for(var U=D=null,E=w,y=w=0,v=null,I=S.next();E!==null&&!I.done;y++,I=S.next()){E.index>y?(v=E,E=null):v=E.sibling;var _=g(T,E,I.value,j);if(_===null){E===null&&(E=v);break}t&&E&&_.alternate===null&&e(T,E),w=i(_,w,y),U===null?D=_:U.sibling=_,U=_,E=v}if(I.done)return n(T,E),Se&&os(T,y),D;if(E===null){for(;!I.done;y++,I=S.next())I=m(T,I.value,j),I!==null&&(w=i(I,w,y),U===null?D=I:U.sibling=I,U=I);return Se&&os(T,y),D}for(E=r(T,E);!I.done;y++,I=S.next())I=x(E,T,y,I.value,j),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?y:I.key),w=i(I,w,y),U===null?D=I:U.sibling=I,U=I);return t&&E.forEach(function(P){return e(T,P)}),Se&&os(T,y),D}function C(T,w,S,j){if(typeof S=="object"&&S!==null&&S.type===Hs&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case tl:e:{for(var D=S.key,U=w;U!==null;){if(U.key===D){if(D=S.type,D===Hs){if(U.tag===7){n(T,U.sibling),w=s(U,S.props.children),w.return=T,T=w;break e}}else if(U.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===hr&&_0(D)===U.type){n(T,U.sibling),w=s(U,S.props),w.ref=co(T,U,S),w.return=T,T=w;break e}n(T,U);break}else e(T,U);U=U.sibling}S.type===Hs?(w=ps(S.props.children,T.mode,j,S.key),w.return=T,T=w):(j=zl(S.type,S.key,S.props,null,T.mode,j),j.ref=co(T,w,S),j.return=T,T=j)}return o(T);case qs:e:{for(U=S.key;w!==null;){if(w.key===U)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(T,w.sibling),w=s(w,S.children||[]),w.return=T,T=w;break e}else{n(T,w);break}else e(T,w);w=w.sibling}w=kd(S,T.mode,j),w.return=T,T=w}return o(T);case hr:return U=S._init,C(T,w,U(S._payload),j)}if(go(S))return N(T,w,S,j);if(so(S))return k(T,w,S,j);hl(T,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(T,w.sibling),w=s(w,S),w.return=T,T=w):(n(T,w),w=Ad(S,T.mode,j),w.return=T,T=w),o(T)):n(T,w)}return C}var vi=n_(!0),r_=n_(!1),gc=Qr(null),yc=null,Zs=null,Kf=null;function Yf(){Kf=Zs=yc=null}function Xf(t){var e=gc.current;Ne(gc),t._currentValue=e}function Ph(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function li(t,e){yc=t,Kf=Zs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(jt=!0),t.firstContext=null)}function tn(t){var e=t._currentValue;if(Kf!==t)if(t={context:t,memoizedValue:e,next:null},Zs===null){if(yc===null)throw Error(q(308));Zs=t,yc.dependencies={lanes:0,firstContext:t}}else Zs=Zs.next=t;return e}var ds=null;function Jf(t){ds===null?ds=[t]:ds.push(t)}function s_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Jf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Kn(t,r)}function Kn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fr=!1;function Zf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function i_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ar(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Kn(t,n)}return s=r.interleaved,s===null?(e.next=e,Jf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Kn(t,n)}function Ll(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vf(t,n)}}function w0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vc(t,e,n,r){var s=t.updateQueue;fr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,h=d=u=null,l=i;do{var g=l.lane,x=l.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,k=l;switch(g=e,x=n,k.tag){case 1:if(N=k.payload,typeof N=="function"){m=N.call(x,m,g);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=k.payload,g=typeof N=="function"?N.call(x,m,g):N,g==null)break e;m=je({},m,g);break e;case 2:fr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else x={eventTime:x,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=x,u=m):h=h.next=x,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(h===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);_s|=o,t.lanes=o,t.memoizedState=m}}function E0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(q(191,s));s.call(r)}}}var wa={},Nn=Qr(wa),Xo=Qr(wa),Jo=Qr(wa);function hs(t){if(t===wa)throw Error(q(174));return t}function em(t,e){switch(be(Jo,e),be(Xo,t),be(Nn,wa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hh(e,t)}Ne(Nn),be(Nn,e)}function xi(){Ne(Nn),Ne(Xo),Ne(Jo)}function o_(t){hs(Jo.current);var e=hs(Nn.current),n=hh(e,t.type);e!==n&&(be(Xo,t),be(Nn,n))}function tm(t){Xo.current===t&&(Ne(Nn),Ne(Xo))}var Ce=Qr(0);function xc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bd=[];function nm(){for(var t=0;t<bd.length;t++)bd[t]._workInProgressVersionPrimary=null;bd.length=0}var Ml=nr.ReactCurrentDispatcher,Td=nr.ReactCurrentBatchConfig,xs=0,Pe=null,We=null,Xe=null,_c=!1,ko=!1,Zo=0,BI=0;function ct(){throw Error(q(321))}function rm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hn(t[n],e[n]))return!1;return!0}function sm(t,e,n,r,s,i){if(xs=i,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ml.current=t===null||t.memoizedState===null?GI:QI,t=n(r,s),ko){i=0;do{if(ko=!1,Zo=0,25<=i)throw Error(q(301));i+=1,Xe=We=null,e.updateQueue=null,Ml.current=KI,t=n(r,s)}while(ko)}if(Ml.current=wc,e=We!==null&&We.next!==null,xs=0,Xe=We=Pe=null,_c=!1,e)throw Error(q(300));return t}function im(){var t=Zo!==0;return Zo=0,t}function wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Pe.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function nn(){if(We===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Xe===null?Pe.memoizedState:Xe.next;if(e!==null)Xe=e,We=t;else{if(t===null)throw Error(q(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Xe===null?Pe.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function ea(t,e){return typeof e=="function"?e(t):e}function Id(t){var e=nn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=We,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var h=d.lane;if((xs&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Pe.lanes|=h,_s|=h}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,hn(r,e.memoizedState)||(jt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Pe.lanes|=i,_s|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Nd(t){var e=nn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);hn(i,e.memoizedState)||(jt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function a_(){}function l_(t,e){var n=Pe,r=nn(),s=e(),i=!hn(r.memoizedState,s);if(i&&(r.memoizedState=s,jt=!0),r=r.queue,om(d_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,ta(9,u_.bind(null,n,r,s,e),void 0,null),Je===null)throw Error(q(349));xs&30||c_(n,e,s)}return s}function c_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function u_(t,e,n,r){e.value=n,e.getSnapshot=r,h_(e)&&f_(t)}function d_(t,e,n){return n(function(){h_(e)&&f_(t)})}function h_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hn(t,n)}catch{return!0}}function f_(t){var e=Kn(t,1);e!==null&&dn(e,t,1,-1)}function b0(t){var e=wn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:t},e.queue=t,t=t.dispatch=WI.bind(null,Pe,t),[e.memoizedState,t]}function ta(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function m_(){return nn().memoizedState}function Vl(t,e,n,r){var s=wn();Pe.flags|=t,s.memoizedState=ta(1|e,n,void 0,r===void 0?null:r)}function tu(t,e,n,r){var s=nn();r=r===void 0?null:r;var i=void 0;if(We!==null){var o=We.memoizedState;if(i=o.destroy,r!==null&&rm(r,o.deps)){s.memoizedState=ta(e,n,i,r);return}}Pe.flags|=t,s.memoizedState=ta(1|e,n,i,r)}function T0(t,e){return Vl(8390656,8,t,e)}function om(t,e){return tu(2048,8,t,e)}function p_(t,e){return tu(4,2,t,e)}function g_(t,e){return tu(4,4,t,e)}function y_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function v_(t,e,n){return n=n!=null?n.concat([t]):null,tu(4,4,y_.bind(null,e,t),n)}function am(){}function x_(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function __(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function w_(t,e,n){return xs&21?(hn(n,e)||(n=Nx(),Pe.lanes|=n,_s|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,jt=!0),t.memoizedState=n)}function qI(t,e){var n=xe;xe=n!==0&&4>n?n:4,t(!0);var r=Td.transition;Td.transition={};try{t(!1),e()}finally{xe=n,Td.transition=r}}function E_(){return nn().memoizedState}function HI(t,e,n){var r=Cr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},b_(t))T_(e,n);else if(n=s_(t,e,n,r),n!==null){var s=Tt();dn(n,t,r,s),I_(n,e,r)}}function WI(t,e,n){var r=Cr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(b_(t))T_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,hn(l,o)){var u=e.interleaved;u===null?(s.next=s,Jf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=s_(t,e,s,r),n!==null&&(s=Tt(),dn(n,t,r,s),I_(n,e,r))}}function b_(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function T_(t,e){ko=_c=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function I_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vf(t,n)}}var wc={readContext:tn,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},GI={readContext:tn,useCallback:function(t,e){return wn().memoizedState=[t,e===void 0?null:e],t},useContext:tn,useEffect:T0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Vl(4194308,4,y_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Vl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Vl(4,2,t,e)},useMemo:function(t,e){var n=wn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=HI.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=wn();return t={current:t},e.memoizedState=t},useState:b0,useDebugValue:am,useDeferredValue:function(t){return wn().memoizedState=t},useTransition:function(){var t=b0(!1),e=t[0];return t=qI.bind(null,t[1]),wn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,s=wn();if(Se){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),Je===null)throw Error(q(349));xs&30||c_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,T0(d_.bind(null,r,i,t),[t]),r.flags|=2048,ta(9,u_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=wn(),e=Je.identifierPrefix;if(Se){var n=Fn,r=Un;n=(r&~(1<<32-un(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=BI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},QI={readContext:tn,useCallback:x_,useContext:tn,useEffect:om,useImperativeHandle:v_,useInsertionEffect:p_,useLayoutEffect:g_,useMemo:__,useReducer:Id,useRef:m_,useState:function(){return Id(ea)},useDebugValue:am,useDeferredValue:function(t){var e=nn();return w_(e,We.memoizedState,t)},useTransition:function(){var t=Id(ea)[0],e=nn().memoizedState;return[t,e]},useMutableSource:a_,useSyncExternalStore:l_,useId:E_,unstable_isNewReconciler:!1},KI={readContext:tn,useCallback:x_,useContext:tn,useEffect:om,useImperativeHandle:v_,useInsertionEffect:p_,useLayoutEffect:g_,useMemo:__,useReducer:Nd,useRef:m_,useState:function(){return Nd(ea)},useDebugValue:am,useDeferredValue:function(t){var e=nn();return We===null?e.memoizedState=t:w_(e,We.memoizedState,t)},useTransition:function(){var t=Nd(ea)[0],e=nn().memoizedState;return[t,e]},useMutableSource:a_,useSyncExternalStore:l_,useId:E_,unstable_isNewReconciler:!1};function on(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var nu={isMounted:function(t){return(t=t._reactInternals)?Cs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=Cr(t),i=qn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ar(t,i,s),e!==null&&(dn(e,t,s,r),Ll(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=Cr(t),i=qn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ar(t,i,s),e!==null&&(dn(e,t,s,r),Ll(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=Cr(t),s=qn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ar(t,s,r),e!==null&&(dn(e,t,r,n),Ll(e,t,r))}};function I0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Go(n,r)||!Go(s,i):!0}function N_(t,e,n){var r=!1,s=$r,i=e.contextType;return typeof i=="object"&&i!==null?i=tn(i):(s=Dt(e)?ys:yt.current,r=e.contextTypes,i=(r=r!=null)?gi(t,s):$r),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function N0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&nu.enqueueReplaceState(e,e.state,null)}function Oh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Zf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=tn(i):(i=Dt(e)?ys:yt.current,s.context=gi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(jh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&nu.enqueueReplaceState(s,s.state,null),vc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function _i(t,e){try{var n="",r=e;do n+=bT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Sd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Dh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var YI=typeof WeakMap=="function"?WeakMap:Map;function S_(t,e,n){n=qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){bc||(bc=!0,Hh=r),Dh(t,e)},n}function R_(t,e,n){n=qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Dh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Dh(t,e),typeof r!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function S0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new YI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=uN.bind(null,t,e,n),e.then(t,t))}function R0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function A0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qn(-1,1),e.tag=2,Ar(n,e,1))),n.lanes|=1),t)}var XI=nr.ReactCurrentOwner,jt=!1;function bt(t,e,n,r){e.child=t===null?r_(e,null,n,r):vi(e,t.child,n,r)}function k0(t,e,n,r,s){n=n.render;var i=e.ref;return li(e,s),r=sm(t,e,n,r,i,s),n=im(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Yn(t,e,s)):(Se&&n&&Wf(e),e.flags|=1,bt(t,e,r,s),e.child)}function C0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!pm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,A_(t,e,i,r,s)):(t=zl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Go,n(o,r)&&t.ref===e.ref)return Yn(t,e,s)}return e.flags|=1,t=Pr(i,r),t.ref=e.ref,t.return=e,e.child=t}function A_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Go(i,r)&&t.ref===e.ref)if(jt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(jt=!0);else return e.lanes=t.lanes,Yn(t,e,s)}return Lh(t,e,n,r,s)}function k_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(ti,Ft),Ft|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(ti,Ft),Ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,be(ti,Ft),Ft|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,be(ti,Ft),Ft|=r;return bt(t,e,s,n),e.child}function C_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Lh(t,e,n,r,s){var i=Dt(n)?ys:yt.current;return i=gi(e,i),li(e,s),n=sm(t,e,n,r,i,s),r=im(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Yn(t,e,s)):(Se&&r&&Wf(e),e.flags|=1,bt(t,e,n,s),e.child)}function P0(t,e,n,r,s){if(Dt(n)){var i=!0;fc(e)}else i=!1;if(li(e,s),e.stateNode===null)$l(t,e),N_(e,n,r),Oh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=tn(d):(d=Dt(n)?ys:yt.current,d=gi(e,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&N0(e,o,r,d),fr=!1;var g=e.memoizedState;o.state=g,vc(e,r,o,s),u=e.memoizedState,l!==r||g!==u||Ot.current||fr?(typeof h=="function"&&(jh(e,n,h,r),u=e.memoizedState),(l=fr||I0(e,n,l,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,i_(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:on(e.type,l),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=tn(u):(u=Dt(n)?ys:yt.current,u=gi(e,u));var x=n.getDerivedStateFromProps;(h=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&N0(e,o,r,u),fr=!1,g=e.memoizedState,o.state=g,vc(e,r,o,s);var N=e.memoizedState;l!==m||g!==N||Ot.current||fr?(typeof x=="function"&&(jh(e,n,x,r),N=e.memoizedState),(d=fr||I0(e,n,d,r,g,N,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Mh(t,e,n,r,i,s)}function Mh(t,e,n,r,s,i){C_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&y0(e,n,!1),Yn(t,e,i);r=e.stateNode,XI.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=vi(e,t.child,null,i),e.child=vi(e,null,l,i)):bt(t,e,l,i),e.memoizedState=r.state,s&&y0(e,n,!0),e.child}function P_(t){var e=t.stateNode;e.pendingContext?g0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&g0(t,e.context,!1),em(t,e.containerInfo)}function j0(t,e,n,r,s){return yi(),Qf(s),e.flags|=256,bt(t,e,n,r),e.child}var Vh={dehydrated:null,treeContext:null,retryLane:0};function $h(t){return{baseLanes:t,cachePool:null,transitions:null}}function j_(t,e,n){var r=e.pendingProps,s=Ce.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),be(Ce,s&1),t===null)return Ch(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=iu(o,r,0,null),t=ps(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=$h(n),e.memoizedState=Vh,t):lm(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return JI(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Pr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Pr(l,i):(i=ps(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?$h(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Vh,r}return i=t.child,t=i.sibling,r=Pr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function lm(t,e){return e=iu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fl(t,e,n,r){return r!==null&&Qf(r),vi(e,t.child,null,n),t=lm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function JI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Sd(Error(q(422))),fl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=iu({mode:"visible",children:r.children},s,0,null),i=ps(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&vi(e,t.child,null,o),e.child.memoizedState=$h(o),e.memoizedState=Vh,i);if(!(e.mode&1))return fl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(q(419)),r=Sd(i,r,void 0),fl(t,e,o,r)}if(l=(o&t.childLanes)!==0,jt||l){if(r=Je,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Kn(t,s),dn(r,t,s,-1))}return mm(),r=Sd(Error(q(421))),fl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=dN.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Bt=Rr(s.nextSibling),Wt=e,Se=!0,ln=null,t!==null&&(Xt[Jt++]=Un,Xt[Jt++]=Fn,Xt[Jt++]=vs,Un=t.id,Fn=t.overflow,vs=e),e=lm(e,r.children),e.flags|=4096,e)}function O0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ph(t.return,e,n)}function Rd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function O_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(bt(t,e,r.children,n),r=Ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&O0(t,n,e);else if(t.tag===19)O0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(be(Ce,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&xc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Rd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&xc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Rd(e,!0,n,null,i);break;case"together":Rd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $l(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),_s|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=Pr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ZI(t,e,n){switch(e.tag){case 3:P_(e),yi();break;case 5:o_(e);break;case 1:Dt(e.type)&&fc(e);break;case 4:em(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;be(gc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(be(Ce,Ce.current&1),e.flags|=128,null):n&e.child.childLanes?j_(t,e,n):(be(Ce,Ce.current&1),t=Yn(t,e,n),t!==null?t.sibling:null);be(Ce,Ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return O_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),be(Ce,Ce.current),r)break;return null;case 22:case 23:return e.lanes=0,k_(t,e,n)}return Yn(t,e,n)}var D_,Uh,L_,M_;D_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Uh=function(){};L_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,hs(Nn.current);var i=null;switch(n){case"input":s=lh(t,s),r=lh(t,r),i=[];break;case"select":s=je({},s,{value:void 0}),r=je({},r,{value:void 0}),i=[];break;case"textarea":s=dh(t,s),r=dh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=dc)}fh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Uo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Uo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ie("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};M_=function(t,e,n,r){n!==r&&(e.flags|=4)};function uo(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function eN(t,e,n){var r=e.pendingProps;switch(Gf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return Dt(e.type)&&hc(),ut(e),null;case 3:return r=e.stateNode,xi(),Ne(Ot),Ne(yt),nm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(dl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ln!==null&&(Qh(ln),ln=null))),Uh(t,e),ut(e),null;case 5:tm(e);var s=hs(Jo.current);if(n=e.type,t!==null&&e.stateNode!=null)L_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return ut(e),null}if(t=hs(Nn.current),dl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[bn]=e,r[Yo]=i,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(s=0;s<vo.length;s++)Ie(vo[s],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":Bg(r,i),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ie("invalid",r);break;case"textarea":Hg(r,i),Ie("invalid",r)}fh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ul(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ul(r.textContent,l,t),s=["children",""+l]):Uo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ie("scroll",r)}switch(n){case"input":nl(r),qg(r,i,!0);break;case"textarea":nl(r),Wg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=dc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=dx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[bn]=e,t[Yo]=r,D_(t,e,!1,!1),e.stateNode=t;e:{switch(o=mh(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),s=r;break;case"iframe":case"object":case"embed":Ie("load",t),s=r;break;case"video":case"audio":for(s=0;s<vo.length;s++)Ie(vo[s],t);s=r;break;case"source":Ie("error",t),s=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),s=r;break;case"details":Ie("toggle",t),s=r;break;case"input":Bg(t,r),s=lh(t,r),Ie("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=je({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":Hg(t,r),s=dh(t,r),Ie("invalid",t);break;default:s=r}fh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?mx(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&hx(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Fo(t,u):typeof u=="number"&&Fo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Uo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ie("scroll",t):u!=null&&Pf(t,i,u,o))}switch(n){case"input":nl(t),qg(t,r,!1);break;case"textarea":nl(t),Wg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Vr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?si(t,!!r.multiple,i,!1):r.defaultValue!=null&&si(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=dc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)M_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=hs(Jo.current),hs(Nn.current),dl(e)){if(r=e.stateNode,n=e.memoizedProps,r[bn]=e,(i=r.nodeValue!==n)&&(t=Wt,t!==null))switch(t.tag){case 3:ul(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ul(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bn]=e,e.stateNode=r}return ut(e),null;case 13:if(Ne(Ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Se&&Bt!==null&&e.mode&1&&!(e.flags&128))t_(),yi(),e.flags|=98560,i=!1;else if(i=dl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[bn]=e}else yi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),i=!1}else ln!==null&&(Qh(ln),ln=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ce.current&1?Ge===0&&(Ge=3):mm())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return xi(),Uh(t,e),t===null&&Qo(e.stateNode.containerInfo),ut(e),null;case 10:return Xf(e.type._context),ut(e),null;case 17:return Dt(e.type)&&hc(),ut(e),null;case 19:if(Ne(Ce),i=e.memoizedState,i===null)return ut(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)uo(i,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=xc(t),o!==null){for(e.flags|=128,uo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(Ce,Ce.current&1|2),e.child}t=t.sibling}i.tail!==null&&ze()>wi&&(e.flags|=128,r=!0,uo(i,!1),e.lanes=4194304)}else{if(!r)if(t=xc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),uo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Se)return ut(e),null}else 2*ze()-i.renderingStartTime>wi&&n!==1073741824&&(e.flags|=128,r=!0,uo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ze(),e.sibling=null,n=Ce.current,be(Ce,r?n&1|2:n&1),e):(ut(e),null);case 22:case 23:return fm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ft&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function tN(t,e){switch(Gf(e),e.tag){case 1:return Dt(e.type)&&hc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xi(),Ne(Ot),Ne(yt),nm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tm(e),null;case 13:if(Ne(Ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));yi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(Ce),null;case 4:return xi(),null;case 10:return Xf(e.type._context),null;case 22:case 23:return fm(),null;case 24:return null;default:return null}}var ml=!1,ft=!1,nN=typeof WeakSet=="function"?WeakSet:Set,J=null;function ei(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function Fh(t,e,n){try{n()}catch(r){Le(t,e,r)}}var D0=!1;function rN(t,e){if(Th=lc,t=zx(),Hf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,h=0,m=t,g=null;t:for(;;){for(var x;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(x=m.firstChild)!==null;)g=m,m=x;for(;;){if(m===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++h===r&&(u=o),(x=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=x}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ih={focusedElem:t,selectionRange:n},lc=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var k=N.memoizedProps,C=N.memoizedState,T=e.stateNode,w=T.getSnapshotBeforeUpdate(e.elementType===e.type?k:on(e.type,k),C);T.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(j){Le(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return N=D0,D0=!1,N}function Co(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Fh(e,n,i)}s=s.next}while(s!==r)}}function ru(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function zh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function V_(t){var e=t.alternate;e!==null&&(t.alternate=null,V_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bn],delete e[Yo],delete e[Rh],delete e[$I],delete e[UI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $_(t){return t.tag===5||t.tag===3||t.tag===4}function L0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=dc));else if(r!==4&&(t=t.child,t!==null))for(Bh(t,e,n),t=t.sibling;t!==null;)Bh(t,e,n),t=t.sibling}function qh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(qh(t,e,n),t=t.sibling;t!==null;)qh(t,e,n),t=t.sibling}var et=null,an=!1;function ur(t,e,n){for(n=n.child;n!==null;)U_(t,e,n),n=n.sibling}function U_(t,e,n){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(Kc,n)}catch{}switch(n.tag){case 5:ft||ei(n,e);case 6:var r=et,s=an;et=null,ur(t,e,n),et=r,an=s,et!==null&&(an?(t=et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):et.removeChild(n.stateNode));break;case 18:et!==null&&(an?(t=et,n=n.stateNode,t.nodeType===8?wd(t.parentNode,n):t.nodeType===1&&wd(t,n),Ho(t)):wd(et,n.stateNode));break;case 4:r=et,s=an,et=n.stateNode.containerInfo,an=!0,ur(t,e,n),et=r,an=s;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Fh(n,e,o),s=s.next}while(s!==r)}ur(t,e,n);break;case 1:if(!ft&&(ei(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Le(n,e,l)}ur(t,e,n);break;case 21:ur(t,e,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,ur(t,e,n),ft=r):ur(t,e,n);break;default:ur(t,e,n)}}function M0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nN),e.forEach(function(r){var s=hN.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function sn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:et=l.stateNode,an=!1;break e;case 3:et=l.stateNode.containerInfo,an=!0;break e;case 4:et=l.stateNode.containerInfo,an=!0;break e}l=l.return}if(et===null)throw Error(q(160));U_(i,o,s),et=null,an=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Le(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)F_(e,t),e=e.sibling}function F_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(sn(e,t),_n(t),r&4){try{Co(3,t,t.return),ru(3,t)}catch(k){Le(t,t.return,k)}try{Co(5,t,t.return)}catch(k){Le(t,t.return,k)}}break;case 1:sn(e,t),_n(t),r&512&&n!==null&&ei(n,n.return);break;case 5:if(sn(e,t),_n(t),r&512&&n!==null&&ei(n,n.return),t.flags&32){var s=t.stateNode;try{Fo(s,"")}catch(k){Le(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&cx(s,i),mh(l,o);var d=mh(l,i);for(o=0;o<u.length;o+=2){var h=u[o],m=u[o+1];h==="style"?mx(s,m):h==="dangerouslySetInnerHTML"?hx(s,m):h==="children"?Fo(s,m):Pf(s,h,m,d)}switch(l){case"input":ch(s,i);break;case"textarea":ux(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?si(s,!!i.multiple,x,!1):g!==!!i.multiple&&(i.defaultValue!=null?si(s,!!i.multiple,i.defaultValue,!0):si(s,!!i.multiple,i.multiple?[]:"",!1))}s[Yo]=i}catch(k){Le(t,t.return,k)}}break;case 6:if(sn(e,t),_n(t),r&4){if(t.stateNode===null)throw Error(q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){Le(t,t.return,k)}}break;case 3:if(sn(e,t),_n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ho(e.containerInfo)}catch(k){Le(t,t.return,k)}break;case 4:sn(e,t),_n(t);break;case 13:sn(e,t),_n(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(dm=ze())),r&4&&M0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ft=(d=ft)||h,sn(e,t),ft=d):sn(e,t),_n(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(J=t,h=t.child;h!==null;){for(m=J=h;J!==null;){switch(g=J,x=g.child,g.tag){case 0:case 11:case 14:case 15:Co(4,g,g.return);break;case 1:ei(g,g.return);var N=g.stateNode;if(typeof N.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(k){Le(r,n,k)}}break;case 5:ei(g,g.return);break;case 22:if(g.memoizedState!==null){$0(m);continue}}x!==null?(x.return=g,J=x):$0(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=fx("display",o))}catch(k){Le(t,t.return,k)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(k){Le(t,t.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:sn(e,t),_n(t),r&4&&M0(t);break;case 21:break;default:sn(e,t),_n(t)}}function _n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($_(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Fo(s,""),r.flags&=-33);var i=L0(t);qh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=L0(t);Bh(t,l,o);break;default:throw Error(q(161))}}catch(u){Le(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sN(t,e,n){J=t,z_(t)}function z_(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ml;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ft;l=ml;var d=ft;if(ml=o,(ft=u)&&!d)for(J=s;J!==null;)o=J,u=o.child,o.tag===22&&o.memoizedState!==null?U0(s):u!==null?(u.return=o,J=u):U0(s);for(;i!==null;)J=i,z_(i),i=i.sibling;J=s,ml=l,ft=d}V0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):V0(t)}}function V0(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||ru(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ft)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:on(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&E0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}E0(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Ho(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}ft||e.flags&512&&zh(e)}catch(g){Le(e,e.return,g)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function $0(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function U0(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ru(4,e)}catch(u){Le(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Le(e,s,u)}}var i=e.return;try{zh(e)}catch(u){Le(e,i,u)}break;case 5:var o=e.return;try{zh(e)}catch(u){Le(e,o,u)}}}catch(u){Le(e,e.return,u)}if(e===t){J=null;break}var l=e.sibling;if(l!==null){l.return=e.return,J=l;break}J=e.return}}var iN=Math.ceil,Ec=nr.ReactCurrentDispatcher,cm=nr.ReactCurrentOwner,en=nr.ReactCurrentBatchConfig,pe=0,Je=null,qe=null,rt=0,Ft=0,ti=Qr(0),Ge=0,na=null,_s=0,su=0,um=0,Po=null,Ct=null,dm=0,wi=1/0,Vn=null,bc=!1,Hh=null,kr=null,pl=!1,br=null,Tc=0,jo=0,Wh=null,Ul=-1,Fl=0;function Tt(){return pe&6?ze():Ul!==-1?Ul:Ul=ze()}function Cr(t){return t.mode&1?pe&2&&rt!==0?rt&-rt:zI.transition!==null?(Fl===0&&(Fl=Nx()),Fl):(t=xe,t!==0||(t=window.event,t=t===void 0?16:jx(t.type)),t):1}function dn(t,e,n,r){if(50<jo)throw jo=0,Wh=null,Error(q(185));va(t,n,r),(!(pe&2)||t!==Je)&&(t===Je&&(!(pe&2)&&(su|=n),Ge===4&&pr(t,rt)),Lt(t,r),n===1&&pe===0&&!(e.mode&1)&&(wi=ze()+500,eu&&Kr()))}function Lt(t,e){var n=t.callbackNode;zT(t,e);var r=ac(t,t===Je?rt:0);if(r===0)n!==null&&Kg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Kg(n),e===1)t.tag===0?FI(F0.bind(null,t)):Jx(F0.bind(null,t)),MI(function(){!(pe&6)&&Kr()}),n=null;else{switch(Sx(r)){case 1:n=Mf;break;case 4:n=Tx;break;case 16:n=oc;break;case 536870912:n=Ix;break;default:n=oc}n=Y_(n,B_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function B_(t,e){if(Ul=-1,Fl=0,pe&6)throw Error(q(327));var n=t.callbackNode;if(ci()&&t.callbackNode!==n)return null;var r=ac(t,t===Je?rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ic(t,r);else{e=r;var s=pe;pe|=2;var i=H_();(Je!==t||rt!==e)&&(Vn=null,wi=ze()+500,ms(t,e));do try{lN();break}catch(l){q_(t,l)}while(!0);Yf(),Ec.current=i,pe=s,qe!==null?e=0:(Je=null,rt=0,e=Ge)}if(e!==0){if(e===2&&(s=xh(t),s!==0&&(r=s,e=Gh(t,s))),e===1)throw n=na,ms(t,0),pr(t,r),Lt(t,ze()),n;if(e===6)pr(t,r);else{if(s=t.current.alternate,!(r&30)&&!oN(s)&&(e=Ic(t,r),e===2&&(i=xh(t),i!==0&&(r=i,e=Gh(t,i))),e===1))throw n=na,ms(t,0),pr(t,r),Lt(t,ze()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:as(t,Ct,Vn);break;case 3:if(pr(t,r),(r&130023424)===r&&(e=dm+500-ze(),10<e)){if(ac(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Sh(as.bind(null,t,Ct,Vn),e);break}as(t,Ct,Vn);break;case 4:if(pr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-un(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iN(r/1960))-r,10<r){t.timeoutHandle=Sh(as.bind(null,t,Ct,Vn),r);break}as(t,Ct,Vn);break;case 5:as(t,Ct,Vn);break;default:throw Error(q(329))}}}return Lt(t,ze()),t.callbackNode===n?B_.bind(null,t):null}function Gh(t,e){var n=Po;return t.current.memoizedState.isDehydrated&&(ms(t,e).flags|=256),t=Ic(t,e),t!==2&&(e=Ct,Ct=n,e!==null&&Qh(e)),t}function Qh(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function oN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!hn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pr(t,e){for(e&=~um,e&=~su,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-un(e),r=1<<n;t[n]=-1,e&=~r}}function F0(t){if(pe&6)throw Error(q(327));ci();var e=ac(t,0);if(!(e&1))return Lt(t,ze()),null;var n=Ic(t,e);if(t.tag!==0&&n===2){var r=xh(t);r!==0&&(e=r,n=Gh(t,r))}if(n===1)throw n=na,ms(t,0),pr(t,e),Lt(t,ze()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,as(t,Ct,Vn),Lt(t,ze()),null}function hm(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(wi=ze()+500,eu&&Kr())}}function ws(t){br!==null&&br.tag===0&&!(pe&6)&&ci();var e=pe;pe|=1;var n=en.transition,r=xe;try{if(en.transition=null,xe=1,t)return t()}finally{xe=r,en.transition=n,pe=e,!(pe&6)&&Kr()}}function fm(){Ft=ti.current,Ne(ti)}function ms(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,LI(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(Gf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hc();break;case 3:xi(),Ne(Ot),Ne(yt),nm();break;case 5:tm(r);break;case 4:xi();break;case 13:Ne(Ce);break;case 19:Ne(Ce);break;case 10:Xf(r.type._context);break;case 22:case 23:fm()}n=n.return}if(Je=t,qe=t=Pr(t.current,null),rt=Ft=e,Ge=0,na=null,um=su=_s=0,Ct=Po=null,ds!==null){for(e=0;e<ds.length;e++)if(n=ds[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ds=null}return t}function q_(t,e){do{var n=qe;try{if(Yf(),Ml.current=wc,_c){for(var r=Pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}_c=!1}if(xs=0,Xe=We=Pe=null,ko=!1,Zo=0,cm.current=null,n===null||n.return===null){Ge=1,na=e,qe=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=rt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=R0(o);if(x!==null){x.flags&=-257,A0(x,o,l,i,e),x.mode&1&&S0(i,d,e),e=x,u=d;var N=e.updateQueue;if(N===null){var k=new Set;k.add(u),e.updateQueue=k}else N.add(u);break e}else{if(!(e&1)){S0(i,d,e),mm();break e}u=Error(q(426))}}else if(Se&&l.mode&1){var C=R0(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),A0(C,o,l,i,e),Qf(_i(u,l));break e}}i=u=_i(u,l),Ge!==4&&(Ge=2),Po===null?Po=[i]:Po.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=S_(i,u,e);w0(i,T);break e;case 1:l=u;var w=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(kr===null||!kr.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=R_(i,l,e);w0(i,j);break e}}i=i.return}while(i!==null)}G_(n)}catch(D){e=D,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function H_(){var t=Ec.current;return Ec.current=wc,t===null?wc:t}function mm(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),Je===null||!(_s&268435455)&&!(su&268435455)||pr(Je,rt)}function Ic(t,e){var n=pe;pe|=2;var r=H_();(Je!==t||rt!==e)&&(Vn=null,ms(t,e));do try{aN();break}catch(s){q_(t,s)}while(!0);if(Yf(),pe=n,Ec.current=r,qe!==null)throw Error(q(261));return Je=null,rt=0,Ge}function aN(){for(;qe!==null;)W_(qe)}function lN(){for(;qe!==null&&!jT();)W_(qe)}function W_(t){var e=K_(t.alternate,t,Ft);t.memoizedProps=t.pendingProps,e===null?G_(t):qe=e,cm.current=null}function G_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tN(n,e),n!==null){n.flags&=32767,qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,qe=null;return}}else if(n=eN(n,e,Ft),n!==null){qe=n;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Ge===0&&(Ge=5)}function as(t,e,n){var r=xe,s=en.transition;try{en.transition=null,xe=1,cN(t,e,n,r)}finally{en.transition=s,xe=r}return null}function cN(t,e,n,r){do ci();while(br!==null);if(pe&6)throw Error(q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(BT(t,i),t===Je&&(qe=Je=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||pl||(pl=!0,Y_(oc,function(){return ci(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=en.transition,en.transition=null;var o=xe;xe=1;var l=pe;pe|=4,cm.current=null,rN(t,n),F_(n,t),AI(Ih),lc=!!Th,Ih=Th=null,t.current=n,sN(n),OT(),pe=l,xe=o,en.transition=i}else t.current=n;if(pl&&(pl=!1,br=t,Tc=s),i=t.pendingLanes,i===0&&(kr=null),MT(n.stateNode),Lt(t,ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(bc)throw bc=!1,t=Hh,Hh=null,t;return Tc&1&&t.tag!==0&&ci(),i=t.pendingLanes,i&1?t===Wh?jo++:(jo=0,Wh=t):jo=0,Kr(),null}function ci(){if(br!==null){var t=Sx(Tc),e=en.transition,n=xe;try{if(en.transition=null,xe=16>t?16:t,br===null)var r=!1;else{if(t=br,br=null,Tc=0,pe&6)throw Error(q(331));var s=pe;for(pe|=4,J=t.current;J!==null;){var i=J,o=i.child;if(J.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(J=d;J!==null;){var h=J;switch(h.tag){case 0:case 11:case 15:Co(8,h,i)}var m=h.child;if(m!==null)m.return=h,J=m;else for(;J!==null;){h=J;var g=h.sibling,x=h.return;if(V_(h),h===d){J=null;break}if(g!==null){g.return=x,J=g;break}J=x}}}var N=i.alternate;if(N!==null){var k=N.child;if(k!==null){N.child=null;do{var C=k.sibling;k.sibling=null,k=C}while(k!==null)}}J=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,J=o;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Co(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,J=T;break e}J=i.return}}var w=t.current;for(J=w;J!==null;){o=J;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,J=S;else e:for(o=w;J!==null;){if(l=J,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ru(9,l)}}catch(D){Le(l,l.return,D)}if(l===o){J=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,J=j;break e}J=l.return}}if(pe=s,Kr(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(Kc,t)}catch{}r=!0}return r}finally{xe=n,en.transition=e}}return!1}function z0(t,e,n){e=_i(n,e),e=S_(t,e,1),t=Ar(t,e,1),e=Tt(),t!==null&&(va(t,1,e),Lt(t,e))}function Le(t,e,n){if(t.tag===3)z0(t,t,n);else for(;e!==null;){if(e.tag===3){z0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(kr===null||!kr.has(r))){t=_i(n,t),t=R_(e,t,1),e=Ar(e,t,1),t=Tt(),e!==null&&(va(e,1,t),Lt(e,t));break}}e=e.return}}function uN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,Je===t&&(rt&n)===n&&(Ge===4||Ge===3&&(rt&130023424)===rt&&500>ze()-dm?ms(t,0):um|=n),Lt(t,e)}function Q_(t,e){e===0&&(t.mode&1?(e=il,il<<=1,!(il&130023424)&&(il=4194304)):e=1);var n=Tt();t=Kn(t,e),t!==null&&(va(t,e,n),Lt(t,n))}function dN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Q_(t,n)}function hN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),Q_(t,n)}var K_;K_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ot.current)jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return jt=!1,ZI(t,e,n);jt=!!(t.flags&131072)}else jt=!1,Se&&e.flags&1048576&&Zx(e,pc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$l(t,e),t=e.pendingProps;var s=gi(e,yt.current);li(e,n),s=sm(null,e,r,t,s,n);var i=im();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dt(r)?(i=!0,fc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zf(e),s.updater=nu,e.stateNode=s,s._reactInternals=e,Oh(e,r,t,n),e=Mh(null,e,r,!0,i,n)):(e.tag=0,Se&&i&&Wf(e),bt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch($l(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=mN(r),t=on(r,t),s){case 0:e=Lh(null,e,r,t,n);break e;case 1:e=P0(null,e,r,t,n);break e;case 11:e=k0(null,e,r,t,n);break e;case 14:e=C0(null,e,r,on(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:on(r,s),Lh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:on(r,s),P0(t,e,r,s,n);case 3:e:{if(P_(e),t===null)throw Error(q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,i_(t,e),vc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=_i(Error(q(423)),e),e=j0(t,e,r,n,s);break e}else if(r!==s){s=_i(Error(q(424)),e),e=j0(t,e,r,n,s);break e}else for(Bt=Rr(e.stateNode.containerInfo.firstChild),Wt=e,Se=!0,ln=null,n=r_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yi(),r===s){e=Yn(t,e,n);break e}bt(t,e,r,n)}e=e.child}return e;case 5:return o_(e),t===null&&Ch(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Nh(r,s)?o=null:i!==null&&Nh(r,i)&&(e.flags|=32),C_(t,e),bt(t,e,o,n),e.child;case 6:return t===null&&Ch(e),null;case 13:return j_(t,e,n);case 4:return em(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=vi(e,null,r,n):bt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:on(r,s),k0(t,e,r,s,n);case 7:return bt(t,e,e.pendingProps,n),e.child;case 8:return bt(t,e,e.pendingProps.children,n),e.child;case 12:return bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,be(gc,r._currentValue),r._currentValue=o,i!==null)if(hn(i.value,o)){if(i.children===s.children&&!Ot.current){e=Yn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=qn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Ph(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(q(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ph(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}bt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,li(e,n),s=tn(s),r=r(s),e.flags|=1,bt(t,e,r,n),e.child;case 14:return r=e.type,s=on(r,e.pendingProps),s=on(r.type,s),C0(t,e,r,s,n);case 15:return A_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:on(r,s),$l(t,e),e.tag=1,Dt(r)?(t=!0,fc(e)):t=!1,li(e,n),N_(e,r,s),Oh(e,r,s,n),Mh(null,e,r,!0,t,n);case 19:return O_(t,e,n);case 22:return k_(t,e,n)}throw Error(q(156,e.tag))};function Y_(t,e){return bx(t,e)}function fN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(t,e,n,r){return new fN(t,e,n,r)}function pm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mN(t){if(typeof t=="function")return pm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Of)return 11;if(t===Df)return 14}return 2}function Pr(t,e){var n=t.alternate;return n===null?(n=Zt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")pm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Hs:return ps(n.children,s,i,e);case jf:o=8,s|=8;break;case sh:return t=Zt(12,n,e,s|2),t.elementType=sh,t.lanes=i,t;case ih:return t=Zt(13,n,e,s),t.elementType=ih,t.lanes=i,t;case oh:return t=Zt(19,n,e,s),t.elementType=oh,t.lanes=i,t;case ox:return iu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case sx:o=10;break e;case ix:o=9;break e;case Of:o=11;break e;case Df:o=14;break e;case hr:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Zt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ps(t,e,n,r){return t=Zt(7,t,r,e),t.lanes=n,t}function iu(t,e,n,r){return t=Zt(22,t,r,e),t.elementType=ox,t.lanes=n,t.stateNode={isHidden:!1},t}function Ad(t,e,n){return t=Zt(6,t,null,e),t.lanes=n,t}function kd(t,e,n){return e=Zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pN(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ud(0),this.expirationTimes=ud(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ud(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gm(t,e,n,r,s,i,o,l,u){return t=new pN(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Zt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zf(i),t}function gN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function X_(t){if(!t)return $r;t=t._reactInternals;e:{if(Cs(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(Dt(n))return Xx(t,n,e)}return e}function J_(t,e,n,r,s,i,o,l,u){return t=gm(n,r,!0,t,s,i,o,l,u),t.context=X_(null),n=t.current,r=Tt(),s=Cr(n),i=qn(r,s),i.callback=e??null,Ar(n,i,s),t.current.lanes=s,va(t,s,r),Lt(t,r),t}function ou(t,e,n,r){var s=e.current,i=Tt(),o=Cr(s);return n=X_(n),e.context===null?e.context=n:e.pendingContext=n,e=qn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ar(s,e,o),t!==null&&(dn(t,s,o,i),Ll(t,s,o)),o}function Nc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function B0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ym(t,e){B0(t,e),(t=t.alternate)&&B0(t,e)}function yN(){return null}var Z_=typeof reportError=="function"?reportError:function(t){console.error(t)};function vm(t){this._internalRoot=t}au.prototype.render=vm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));ou(t,e,null,null)};au.prototype.unmount=vm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ws(function(){ou(null,t,null,null)}),e[Qn]=null}};function au(t){this._internalRoot=t}au.prototype.unstable_scheduleHydration=function(t){if(t){var e=kx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<mr.length&&e!==0&&e<mr[n].priority;n++);mr.splice(n,0,t),n===0&&Px(t)}};function xm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function lu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function q0(){}function vN(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Nc(o);i.call(d)}}var o=J_(e,r,t,0,null,!1,!1,"",q0);return t._reactRootContainer=o,t[Qn]=o.current,Qo(t.nodeType===8?t.parentNode:t),ws(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Nc(u);l.call(d)}}var u=gm(t,0,!1,null,null,!1,!1,"",q0);return t._reactRootContainer=u,t[Qn]=u.current,Qo(t.nodeType===8?t.parentNode:t),ws(function(){ou(e,u,n,r)}),u}function cu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Nc(o);l.call(u)}}ou(e,o,t,s)}else o=vN(n,e,t,s,r);return Nc(o)}Rx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=yo(e.pendingLanes);n!==0&&(Vf(e,n|1),Lt(e,ze()),!(pe&6)&&(wi=ze()+500,Kr()))}break;case 13:ws(function(){var r=Kn(t,1);if(r!==null){var s=Tt();dn(r,t,1,s)}}),ym(t,1)}};$f=function(t){if(t.tag===13){var e=Kn(t,134217728);if(e!==null){var n=Tt();dn(e,t,134217728,n)}ym(t,134217728)}};Ax=function(t){if(t.tag===13){var e=Cr(t),n=Kn(t,e);if(n!==null){var r=Tt();dn(n,t,e,r)}ym(t,e)}};kx=function(){return xe};Cx=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}};gh=function(t,e,n){switch(e){case"input":if(ch(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Zc(r);if(!s)throw Error(q(90));lx(r),ch(r,s)}}}break;case"textarea":ux(t,n);break;case"select":e=n.value,e!=null&&si(t,!!n.multiple,e,!1)}};yx=hm;vx=ws;var xN={usingClientEntryPoint:!1,Events:[_a,Ks,Zc,px,gx,hm]},ho={findFiberByHostInstance:us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_N={bundleType:ho.bundleType,version:ho.version,rendererPackageName:ho.rendererPackageName,rendererConfig:ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wx(t),t===null?null:t.stateNode},findFiberByHostInstance:ho.findFiberByHostInstance||yN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gl.isDisabled&&gl.supportsFiber)try{Kc=gl.inject(_N),In=gl}catch{}}Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xN;Qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xm(e))throw Error(q(200));return gN(t,e,null,n)};Qt.createRoot=function(t,e){if(!xm(t))throw Error(q(299));var n=!1,r="",s=Z_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=gm(t,1,!1,null,null,n,!1,r,s),t[Qn]=e.current,Qo(t.nodeType===8?t.parentNode:t),new vm(e)};Qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=wx(e),t=t===null?null:t.stateNode,t};Qt.flushSync=function(t){return ws(t)};Qt.hydrate=function(t,e,n){if(!lu(e))throw Error(q(200));return cu(null,t,e,!0,n)};Qt.hydrateRoot=function(t,e,n){if(!xm(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Z_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=J_(e,null,t,1,n??null,s,!1,i,o),t[Qn]=e.current,Qo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new au(e)};Qt.render=function(t,e,n){if(!lu(e))throw Error(q(200));return cu(null,t,e,!1,n)};Qt.unmountComponentAtNode=function(t){if(!lu(t))throw Error(q(40));return t._reactRootContainer?(ws(function(){cu(null,null,t,!1,function(){t._reactRootContainer=null,t[Qn]=null})}),!0):!1};Qt.unstable_batchedUpdates=hm;Qt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!lu(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return cu(t,e,n,!1,r)};Qt.version="18.3.1-next-f1338f8080-20240426";function ew(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ew)}catch(t){console.error(t)}}ew(),ex.exports=Qt;var wN=ex.exports,H0=wN;nh.createRoot=H0.createRoot,nh.hydrateRoot=H0.hydrateRoot;const EN="modulepreload",bN=function(t){return"/"+t},W0={},ae=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=bN(u),u in W0)return;W0[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":EN,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((g,x)=>{m.addEventListener("load",g),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var _m={};Object.defineProperty(_m,"__esModule",{value:!0});_m.parse=kN;_m.serialize=CN;const TN=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,IN=/^[\u0021-\u003A\u003C-\u007E]*$/,NN=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,SN=/^[\u0020-\u003A\u003D-\u007E]*$/,RN=Object.prototype.toString,AN=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function kN(t,e){const n=new AN,r=t.length;if(r<2)return n;const s=(e==null?void 0:e.decode)||PN;let i=0;do{const o=t.indexOf("=",i);if(o===-1)break;const l=t.indexOf(";",i),u=l===-1?r:l;if(o>u){i=t.lastIndexOf(";",o-1)+1;continue}const d=G0(t,i,o),h=Q0(t,o,d),m=t.slice(d,h);if(n[m]===void 0){let g=G0(t,o+1,u),x=Q0(t,u,g);const N=s(t.slice(g,x));n[m]=N}i=u+1}while(i<r);return n}function G0(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function Q0(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function CN(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!TN.test(t))throw new TypeError(`argument name is invalid: ${t}`);const s=r(e);if(!IN.test(s))throw new TypeError(`argument val is invalid: ${e}`);let i=t+"="+s;if(!n)return i;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);i+="; Max-Age="+n.maxAge}if(n.domain){if(!NN.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);i+="; Domain="+n.domain}if(n.path){if(!SN.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);i+="; Path="+n.path}if(n.expires){if(!jN(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);i+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.partitioned&&(i+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return i}function PN(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function jN(t){return RN.call(t)==="[object Date]"}var K0="popstate";function ON(t={}){function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Kh("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ra(s)}return LN(e,n,null,t)}function Re(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DN(){return Math.random().toString(36).substring(2,10)}function Y0(t,e){return{usr:t.state,key:t.key,idx:e}}function Kh(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Oi(e):e,state:n,key:e&&e.key||r||DN()}}function ra({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Oi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function LN(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l="POP",u=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function m(){l="POP";let C=h(),T=C==null?null:C-d;d=C,u&&u({action:l,location:k.location,delta:T})}function g(C,T){l="PUSH";let w=Kh(k.location,C,T);d=h()+1;let S=Y0(w,d),j=k.createHref(w);try{o.pushState(S,"",j)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(j)}i&&u&&u({action:l,location:k.location,delta:1})}function x(C,T){l="REPLACE";let w=Kh(k.location,C,T);d=h();let S=Y0(w,d),j=k.createHref(w);o.replaceState(S,"",j),i&&u&&u({action:l,location:k.location,delta:0})}function N(C){let T=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof C=="string"?C:ra(C);return w=w.replace(/ $/,"%20"),Re(T,`No window.location.(origin|href) available to create URL for href: ${w}`),new URL(w,T)}let k={get action(){return l},get location(){return t(s,o)},listen(C){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(K0,m),u=C,()=>{s.removeEventListener(K0,m),u=null}},createHref(C){return e(s,C)},createURL:N,encodeLocation(C){let T=N(C);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:g,replace:x,go(C){return o.go(C)}};return k}function tw(t,e,n="/"){return MN(t,e,n,!1)}function MN(t,e,n,r){let s=typeof e=="string"?Oi(e):e,i=Xn(s.pathname||"/",n);if(i==null)return null;let o=nw(t);VN(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=KN(i);l=GN(o[u],d,r)}return l}function nw(t,e=[],n=[],r=""){let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Re(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let d=Hn([r,u.relativePath]),h=n.concat(u);i.children&&i.children.length>0&&(Re(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),nw(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:HN(d,i.index),routesMeta:h})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of rw(i.path))s(i,o,u)}),e}function rw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=rw(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function VN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:WN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var $N=/^:[\w-]+$/,UN=3,FN=2,zN=1,BN=10,qN=-2,X0=t=>t==="*";function HN(t,e){let n=t.split("/"),r=n.length;return n.some(X0)&&(r+=qN),e&&(r+=FN),n.filter(s=>!X0(s)).reduce((s,i)=>s+($N.test(i)?UN:i===""?zN:BN),r)}function WN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function GN(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",m=Sc({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),g=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=Sc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Hn([i,m.pathname]),pathnameBase:ZN(Hn([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Hn([i,m.pathnameBase]))}return o}function Sc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=QN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:m},g)=>{if(h==="*"){let N=l[g]||"";o=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const x=l[g];return m&&!x?d[h]=void 0:d[h]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function QN(t,e=!1,n=!0){fn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function KN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Xn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function YN(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Oi(t):t;return{pathname:n?n.startsWith("/")?n:XN(n,e):e,search:eS(r),hash:tS(s)}}function XN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Cd(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function JN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function wm(t){let e=JN(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Em(t,e,n,r=!1){let s;typeof t=="string"?s=Oi(t):(s={...t},Re(!s.pathname||!s.pathname.includes("?"),Cd("?","pathname","search",s)),Re(!s.pathname||!s.pathname.includes("#"),Cd("#","pathname","hash",s)),Re(!s.search||!s.search.includes("#"),Cd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=YN(s,l),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var Hn=t=>t.join("/").replace(/\/\/+/g,"/"),ZN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),eS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,tS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function nS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var sw=["POST","PUT","PATCH","DELETE"];new Set(sw);var rS=["GET",...sw];new Set(rS);var Di=R.createContext(null);Di.displayName="DataRouter";var uu=R.createContext(null);uu.displayName="DataRouterState";var iw=R.createContext({isTransitioning:!1});iw.displayName="ViewTransition";var sS=R.createContext(new Map);sS.displayName="Fetchers";var iS=R.createContext(null);iS.displayName="Await";var yn=R.createContext(null);yn.displayName="Navigation";var Ea=R.createContext(null);Ea.displayName="Location";var vn=R.createContext({outlet:null,matches:[],isDataRoute:!1});vn.displayName="Route";var bm=R.createContext(null);bm.displayName="RouteError";function oS(t,{relative:e}={}){Re(Li(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=R.useContext(yn),{hash:s,pathname:i,search:o}=ba(t,{relative:e}),l=i;return n!=="/"&&(l=i==="/"?n:Hn([n,i])),r.createHref({pathname:l,search:o,hash:s})}function Li(){return R.useContext(Ea)!=null}function Mt(){return Re(Li(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Ea).location}var ow="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function aw(t){R.useContext(yn).static||R.useLayoutEffect(t)}function rr(){let{isDataRoute:t}=R.useContext(vn);return t?xS():aS()}function aS(){Re(Li(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(Di),{basename:e,navigator:n}=R.useContext(yn),{matches:r}=R.useContext(vn),{pathname:s}=Mt(),i=JSON.stringify(wm(r)),o=R.useRef(!1);return aw(()=>{o.current=!0}),R.useCallback((u,d={})=>{if(fn(o.current,ow),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=Em(u,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Hn([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,s,t])}R.createContext(null);function ND(){let{matches:t}=R.useContext(vn),e=t[t.length-1];return e?e.params:{}}function ba(t,{relative:e}={}){let{matches:n}=R.useContext(vn),{pathname:r}=Mt(),s=JSON.stringify(wm(n));return R.useMemo(()=>Em(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function lS(t,e){return lw(t,e)}function lw(t,e,n,r){var w;Re(Li(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:i}=R.useContext(yn),{matches:o}=R.useContext(vn),l=o[o.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",m=l&&l.route;{let S=m&&m.path||"";cw(d,!m||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let g=Mt(),x;if(e){let S=typeof e=="string"?Oi(e):e;Re(h==="/"||((w=S.pathname)==null?void 0:w.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${S.pathname}" was given in the \`location\` prop.`),x=S}else x=g;let N=x.pathname||"/",k=N;if(h!=="/"){let S=h.replace(/^\//,"").split("/");k="/"+N.replace(/^\//,"").split("/").slice(S.length).join("/")}let C=!i&&n&&n.matches&&n.matches.length>0?n.matches:tw(t,{pathname:k});fn(m||C!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),fn(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=fS(C&&C.map(S=>Object.assign({},S,{params:Object.assign({},u,S.params),pathname:Hn([h,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?h:Hn([h,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),o,n,r);return e&&T?R.createElement(Ea.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},T):T}function cS(){let t=vS(),e=nS(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=R.createElement(R.Fragment,null,R.createElement("p",null,"💿 Hey developer 👋"),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:i},"ErrorBoundary")," or"," ",R.createElement("code",{style:i},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:s},n):null,o)}var uS=R.createElement(cS,null),dS=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?R.createElement(vn.Provider,{value:this.props.routeContext},R.createElement(bm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function hS({routeContext:t,match:e,children:n}){let r=R.useContext(Di);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(vn.Provider,{value:t},n)}function fS(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,i=n==null?void 0:n.errors;if(i!=null){let u=s.findIndex(d=>d.route.id&&(i==null?void 0:i[d.route.id])!==void 0);Re(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let o=!1,l=-1;if(n)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:m}=n,g=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!m||m[d.route.id]===void 0);if(d.route.lazy||g){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,d,h)=>{let m,g=!1,x=null,N=null;n&&(m=i&&d.route.id?i[d.route.id]:void 0,x=d.route.errorElement||uS,o&&(l<0&&h===0?(cw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,N=null):l===h&&(g=!0,N=d.route.hydrateFallbackElement||null)));let k=e.concat(s.slice(0,h+1)),C=()=>{let T;return m?T=x:g?T=N:d.route.Component?T=R.createElement(d.route.Component,null):d.route.element?T=d.route.element:T=u,R.createElement(hS,{match:d,routeContext:{outlet:u,matches:k,isDataRoute:n!=null},children:T})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?R.createElement(dS,{location:n.location,revalidation:n.revalidation,component:x,error:m,children:C(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):C()},null)}function Tm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mS(t){let e=R.useContext(Di);return Re(e,Tm(t)),e}function pS(t){let e=R.useContext(uu);return Re(e,Tm(t)),e}function gS(t){let e=R.useContext(vn);return Re(e,Tm(t)),e}function Im(t){let e=gS(t),n=e.matches[e.matches.length-1];return Re(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function yS(){return Im("useRouteId")}function vS(){var r;let t=R.useContext(bm),e=pS("useRouteError"),n=Im("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function xS(){let{router:t}=mS("useNavigate"),e=Im("useNavigate"),n=R.useRef(!1);return aw(()=>{n.current=!0}),R.useCallback(async(s,i={})=>{fn(n.current,ow),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var J0={};function cw(t,e,n){!e&&!J0[t]&&(J0[t]=!0,fn(!1,n))}R.memo(_S);function _S({routes:t,future:e,state:n}){return lw(t,void 0,n,e)}function ni({to:t,replace:e,state:n,relative:r}){Re(Li(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=R.useContext(yn);fn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=R.useContext(vn),{pathname:o}=Mt(),l=rr(),u=Em(t,wm(i),o,r==="path"),d=JSON.stringify(u);return R.useEffect(()=>{l(JSON.parse(d),{replace:e,state:n,relative:r})},[l,d,r,e,n]),null}function Y(t){Re(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function wS({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){Re(!Li(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=R.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=Oi(n));let{pathname:u="/",search:d="",hash:h="",state:m=null,key:g="default"}=n,x=R.useMemo(()=>{let N=Xn(u,o);return N==null?null:{location:{pathname:N,search:d,hash:h,state:m,key:g},navigationType:r}},[o,u,d,h,m,g,r]);return fn(x!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:R.createElement(yn.Provider,{value:l},R.createElement(Ea.Provider,{children:e,value:x}))}function yl({children:t,location:e}){return lS(Yh(t),e)}function Yh(t,e=[]){let n=[];return R.Children.forEach(t,(r,s)=>{if(!R.isValidElement(r))return;let i=[...e,s];if(r.type===R.Fragment){n.push.apply(n,Yh(r.props.children,i));return}Re(r.type===Y,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Re(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Yh(r.props.children,i)),n.push(o)}),n}var Bl="get",ql="application/x-www-form-urlencoded";function du(t){return t!=null&&typeof t.tagName=="string"}function ES(t){return du(t)&&t.tagName.toLowerCase()==="button"}function bS(t){return du(t)&&t.tagName.toLowerCase()==="form"}function TS(t){return du(t)&&t.tagName.toLowerCase()==="input"}function IS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function NS(t,e){return t.button===0&&(!e||e==="_self")&&!IS(t)}var vl=null;function SS(){if(vl===null)try{new FormData(document.createElement("form"),0),vl=!1}catch{vl=!0}return vl}var RS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Pd(t){return t!=null&&!RS.has(t)?(fn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ql}"`),null):t}function AS(t,e){let n,r,s,i,o;if(bS(t)){let l=t.getAttribute("action");r=l?Xn(l,e):null,n=t.getAttribute("method")||Bl,s=Pd(t.getAttribute("enctype"))||ql,i=new FormData(t)}else if(ES(t)||TS(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(r=u?Xn(u,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Bl,s=Pd(t.getAttribute("formenctype"))||Pd(l.getAttribute("enctype"))||ql,i=new FormData(l,t),!SS()){let{name:d,type:h,value:m}=t;if(h==="image"){let g=d?`${d}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else d&&i.append(d,m)}}else{if(du(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Bl,r=null,s=ql,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}function Nm(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function kS(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function CS(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function PS(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await kS(i,n);return o.links?o.links():[]}return[]}));return LS(r.flat(1).filter(CS).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Z0(t,e,n,r,s,i){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,l=(u,d)=>{var h;return n[d].pathname!==u.pathname||((h=n[d].route.path)==null?void 0:h.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>o(u,d)||l(u,d)):i==="data"?e.filter((u,d)=>{var m;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,d)||l(u,d))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function jS(t,e,{includeHydrateFallback:n}={}){return OS(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function OS(t){return[...new Set(t)]}function DS(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function LS(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(DS(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}var MS=new Set([100,101,204,205]);function VS(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Xn(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function uw(){let t=R.useContext(Di);return Nm(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function $S(){let t=R.useContext(uu);return Nm(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Sm=R.createContext(void 0);Sm.displayName="FrameworkContext";function dw(){let t=R.useContext(Sm);return Nm(t,"You must render this element inside a <HydratedRouter> element"),t}function US(t,e){let n=R.useContext(Sm),[r,s]=R.useState(!1),[i,o]=R.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:m}=e,g=R.useRef(null);R.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let k=T=>{T.forEach(w=>{o(w.isIntersecting)})},C=new IntersectionObserver(k,{threshold:.5});return g.current&&C.observe(g.current),()=>{C.disconnect()}}},[t]),R.useEffect(()=>{if(r){let k=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(k)}}},[r]);let x=()=>{s(!0)},N=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,g,{}]:[i,g,{onFocus:fo(l,x),onBlur:fo(u,N),onMouseEnter:fo(d,x),onMouseLeave:fo(h,N),onTouchStart:fo(m,x)}]:[!1,g,{}]}function fo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function FS({page:t,...e}){let{router:n}=uw(),r=R.useMemo(()=>tw(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?R.createElement(BS,{page:t,matches:r,...e}):null}function zS(t){let{manifest:e,routeModules:n}=dw(),[r,s]=R.useState([]);return R.useEffect(()=>{let i=!1;return PS(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function BS({page:t,matches:e,...n}){let r=Mt(),{manifest:s,routeModules:i}=dw(),{basename:o}=uw(),{loaderData:l,matches:u}=$S(),d=R.useMemo(()=>Z0(t,e,u,s,r,"data"),[t,e,u,s,r]),h=R.useMemo(()=>Z0(t,e,u,s,r,"assets"),[t,e,u,s,r]),m=R.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let N=new Set,k=!1;if(e.forEach(T=>{var S;let w=s.routes[T.route.id];!w||!w.hasLoader||(!d.some(j=>j.route.id===T.route.id)&&T.route.id in l&&((S=i[T.route.id])!=null&&S.shouldRevalidate)||w.hasClientLoader?k=!0:N.add(T.route.id))}),N.size===0)return[];let C=VS(t,o);return k&&N.size>0&&C.searchParams.set("_routes",e.filter(T=>N.has(T.route.id)).map(T=>T.route.id).join(",")),[C.pathname+C.search]},[o,l,r,s,d,e,t,i]),g=R.useMemo(()=>jS(h,s),[h,s]),x=zS(h);return R.createElement(R.Fragment,null,m.map(N=>R.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...n})),g.map(N=>R.createElement("link",{key:N,rel:"modulepreload",href:N,...n})),x.map(({key:N,link:k})=>R.createElement("link",{key:N,...k})))}function qS(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var hw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hw&&(window.__reactRouterVersion="7.5.3")}catch{}function HS({basename:t,children:e,window:n}){let r=R.useRef();r.current==null&&(r.current=ON({window:n,v5Compat:!0}));let s=r.current,[i,o]=R.useState({action:s.action,location:s.location}),l=R.useCallback(u=>{R.startTransition(()=>o(u))},[o]);return R.useLayoutEffect(()=>s.listen(l),[s,l]),R.createElement(wS,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var fw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ce=R.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:m,...g},x){let{basename:N}=R.useContext(yn),k=typeof d=="string"&&fw.test(d),C,T=!1;if(typeof d=="string"&&k&&(C=d,hw))try{let v=new URL(window.location.href),I=d.startsWith("//")?new URL(v.protocol+d):new URL(d),_=Xn(I.pathname,N);I.origin===v.origin&&_!=null?d=_+I.search+I.hash:T=!0}catch{fn(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=oS(d,{relative:s}),[S,j,D]=US(r,g),U=KS(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:s,viewTransition:m});function E(v){e&&e(v),v.defaultPrevented||U(v)}let y=R.createElement("a",{...g,...D,href:C||w,onClick:T||i?e:E,ref:qS(x,j),target:u,"data-discover":!k&&n==="render"?"true":void 0});return S&&!k?R.createElement(R.Fragment,null,y,R.createElement(FS,{page:w})):y});ce.displayName="Link";var WS=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:l,children:u,...d},h){let m=ba(o,{relative:d.relative}),g=Mt(),x=R.useContext(uu),{navigator:N,basename:k}=R.useContext(yn),C=x!=null&&eR(m)&&l===!0,T=N.encodeLocation?N.encodeLocation(m).pathname:m.pathname,w=g.pathname,S=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(w=w.toLowerCase(),S=S?S.toLowerCase():null,T=T.toLowerCase()),S&&k&&(S=Xn(S,k)||S);const j=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let D=w===T||!s&&w.startsWith(T)&&w.charAt(j)==="/",U=S!=null&&(S===T||!s&&S.startsWith(T)&&S.charAt(T.length)==="/"),E={isActive:D,isPending:U,isTransitioning:C},y=D?e:void 0,v;typeof r=="function"?v=r(E):v=[r,D?"active":null,U?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let I=typeof i=="function"?i(E):i;return R.createElement(ce,{...d,"aria-current":y,className:v,ref:h,style:I,to:o,viewTransition:l},typeof u=="function"?u(E):u)});WS.displayName="NavLink";var GS=R.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=Bl,action:l,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:m,...g},x)=>{let N=JS(),k=ZS(l,{relative:d}),C=o.toLowerCase()==="get"?"get":"post",T=typeof l=="string"&&fw.test(l),w=S=>{if(u&&u(S),S.defaultPrevented)return;S.preventDefault();let j=S.nativeEvent.submitter,D=(j==null?void 0:j.getAttribute("formmethod"))||o;N(j||S.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:s,state:i,relative:d,preventScrollReset:h,viewTransition:m})};return R.createElement("form",{ref:x,method:C,action:k,onSubmit:r?u:w,...g,"data-discover":!T&&t==="render"?"true":void 0})});GS.displayName="Form";function QS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mw(t){let e=R.useContext(Di);return Re(e,QS(t)),e}function KS(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let l=rr(),u=Mt(),d=ba(t,{relative:i});return R.useCallback(h=>{if(NS(h,e)){h.preventDefault();let m=n!==void 0?n:ra(u)===ra(d);l(t,{replace:m,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[u,l,d,n,r,e,t,s,i,o])}var YS=0,XS=()=>`__${String(++YS)}__`;function JS(){let{router:t}=mw("useSubmit"),{basename:e}=R.useContext(yn),n=yS();return R.useCallback(async(r,s={})=>{let{action:i,method:o,encType:l,formData:u,body:d}=AS(r,e);if(s.navigate===!1){let h=s.fetcherKey||XS();await t.fetch(h,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function ZS(t,{relative:e}={}){let{basename:n}=R.useContext(yn),r=R.useContext(vn);Re(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...ba(t||".",{relative:e})},o=Mt();if(t==null){i.search=o.search;let l=new URLSearchParams(i.search),u=l.getAll("index");if(u.some(h=>h==="")){l.delete("index"),u.filter(m=>m).forEach(m=>l.append("index",m));let h=l.toString();i.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Hn([n,i.pathname])),ra(i)}function eR(t,e={}){let n=R.useContext(iw);Re(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=mw("useViewTransitionState"),s=ba(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Xn(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Xn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Sc(s.pathname,o)!=null||Sc(s.pathname,i)!=null}new TextEncoder;[...MS];const tR=()=>{};var ey={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},nR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},gw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,x=d&63;u||(x=64,o||(g=64)),r.push(n[h],n[m],n[g],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||m==null)throw new rR;const g=i<<2|l>>4;if(r.push(g),d!==64){const x=l<<4&240|d>>2;if(r.push(x),m!==64){const N=d<<6&192|m;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sR=function(t){const e=pw(t);return gw.encodeByteArray(e,!0)},Rc=function(t){return sR(t).replace(/\./g,"")},yw=function(t){try{return gw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=()=>iR().__FIREBASE_DEFAULTS__,aR=()=>{if(typeof process>"u"||typeof ey>"u")return;const t=ey.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yw(t[1]);return e&&JSON.parse(e)},hu=()=>{try{return tR()||oR()||aR()||lR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vw=t=>{var e,n;return(n=(e=hu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},xw=t=>{const e=vw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_w=()=>{var t;return(t=hu())===null||t===void 0?void 0:t.config},ww=t=>{var e;return(e=hu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Rc(JSON.stringify(n)),Rc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function dR(){var t;const e=(t=hu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pR(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gR(){return!dR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yR(){try{return typeof indexedDB=="object"}catch{return!1}}function vR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR="FirebaseError";class On extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xR,Object.setPrototypeOf(this,On.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ta.prototype.create)}}class Ta{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?_R(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new On(s,l,r)}}function _R(t,e){return t.replace(wR,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const wR=/\{\$([^}]+)}/g;function ER(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Es(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(ty(i)&&ty(o)){if(!Es(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ty(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function _o(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function bR(t,e){const n=new TR(t,e);return n.subscribe.bind(n)}class TR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");IR(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=jd),s.error===void 0&&(s.error=jd),s.complete===void 0&&(s.complete=jd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t){return t&&t._delegate?t._delegate:t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t){return t.endsWith(".cloudworkstations.dev")}async function Rm(t){return(await fetch(t,{credentials:"include"})).ok}class Ur{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new cR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RR(e))try{this.getOrInitializeService({instanceIdentifier:ls})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ls){return this.instances.has(e)}getOptions(e=ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ls){return this.component?this.component.multipleInstances?e:ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SR(t){return t===ls?void 0:t}function RR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new NR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const kR={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},CR=de.INFO,PR={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},jR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=PR[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Am{constructor(e){this.name=e,this._logLevel=CR,this._logHandler=jR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const OR=(t,e)=>e.some(n=>t instanceof n);let ny,ry;function DR(){return ny||(ny=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LR(){return ry||(ry=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bw=new WeakMap,Xh=new WeakMap,Tw=new WeakMap,Od=new WeakMap,km=new WeakMap;function MR(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(jr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&bw.set(n,t)}).catch(()=>{}),km.set(e,t),e}function VR(t){if(Xh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Xh.set(t,e)}let Jh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Tw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $R(t){Jh=t(Jh)}function UR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Dd(this),e,...n);return Tw.set(r,e.sort?e.sort():[e]),jr(r)}:LR().includes(t)?function(...e){return t.apply(Dd(this),e),jr(bw.get(this))}:function(...e){return jr(t.apply(Dd(this),e))}}function FR(t){return typeof t=="function"?UR(t):(t instanceof IDBTransaction&&VR(t),OR(t,DR())?new Proxy(t,Jh):t)}function jr(t){if(t instanceof IDBRequest)return MR(t);if(Od.has(t))return Od.get(t);const e=FR(t);return e!==t&&(Od.set(t,e),km.set(e,t)),e}const Dd=t=>km.get(t);function zR(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=jr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(jr(o.result),u.oldVersion,u.newVersion,jr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const BR=["get","getKey","getAll","getAllKeys","count"],qR=["put","add","delete","clear"],Ld=new Map;function sy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ld.get(e))return Ld.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=qR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||BR.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Ld.set(e,i),i}$R(t=>({...t,get:(e,n,r)=>sy(e,n)||t.get(e,n,r),has:(e,n)=>!!sy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(WR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function WR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zh="@firebase/app",iy="0.12.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn=new Am("@firebase/app"),GR="@firebase/app-compat",QR="@firebase/analytics-compat",KR="@firebase/analytics",YR="@firebase/app-check-compat",XR="@firebase/app-check",JR="@firebase/auth",ZR="@firebase/auth-compat",eA="@firebase/database",tA="@firebase/data-connect",nA="@firebase/database-compat",rA="@firebase/functions",sA="@firebase/functions-compat",iA="@firebase/installations",oA="@firebase/installations-compat",aA="@firebase/messaging",lA="@firebase/messaging-compat",cA="@firebase/performance",uA="@firebase/performance-compat",dA="@firebase/remote-config",hA="@firebase/remote-config-compat",fA="@firebase/storage",mA="@firebase/storage-compat",pA="@firebase/firestore",gA="@firebase/vertexai",yA="@firebase/firestore-compat",vA="firebase",xA="11.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="[DEFAULT]",_A={[Zh]:"fire-core",[GR]:"fire-core-compat",[KR]:"fire-analytics",[QR]:"fire-analytics-compat",[XR]:"fire-app-check",[YR]:"fire-app-check-compat",[JR]:"fire-auth",[ZR]:"fire-auth-compat",[eA]:"fire-rtdb",[tA]:"fire-data-connect",[nA]:"fire-rtdb-compat",[rA]:"fire-fn",[sA]:"fire-fn-compat",[iA]:"fire-iid",[oA]:"fire-iid-compat",[aA]:"fire-fcm",[lA]:"fire-fcm-compat",[cA]:"fire-perf",[uA]:"fire-perf-compat",[dA]:"fire-rc",[hA]:"fire-rc-compat",[fA]:"fire-gcs",[mA]:"fire-gcs-compat",[pA]:"fire-fst",[yA]:"fire-fst-compat",[gA]:"fire-vertex","fire-js":"fire-js",[vA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=new Map,wA=new Map,tf=new Map;function oy(t,e){try{t.container.addComponent(e)}catch(n){Jn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bs(t){const e=t.name;if(tf.has(e))return Jn.debug(`There were multiple attempts to register component ${e}.`),!1;tf.set(e,t);for(const n of Ac.values())oy(n,t);for(const n of wA.values())oy(n,t);return!0}function fu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Or=new Ta("app","Firebase",EA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=xA;function Iw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ef,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Or.create("bad-app-name",{appName:String(s)});if(n||(n=_w()),!n)throw Or.create("no-options");const i=Ac.get(s);if(i){if(Es(n,i.options)&&Es(r,i.config))return i;throw Or.create("duplicate-app",{appName:s})}const o=new AR(s);for(const u of tf.values())o.addComponent(u);const l=new bA(n,r,o);return Ac.set(s,l),l}function Cm(t=ef){const e=Ac.get(t);if(!e&&t===ef&&_w())return Iw();if(!e)throw Or.create("no-app",{appName:t});return e}function Sn(t,e,n){var r;let s=(r=_A[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jn.warn(l.join(" "));return}bs(new Ur(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="firebase-heartbeat-database",IA=1,sa="firebase-heartbeat-store";let Md=null;function Nw(){return Md||(Md=zR(TA,IA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Or.create("idb-open",{originalErrorMessage:t.message})})),Md}async function NA(t){try{const n=(await Nw()).transaction(sa),r=await n.objectStore(sa).get(Sw(t));return await n.done,r}catch(e){if(e instanceof On)Jn.warn(e.message);else{const n=Or.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Jn.warn(n.message)}}}async function ay(t,e){try{const r=(await Nw()).transaction(sa,"readwrite");await r.objectStore(sa).put(e,Sw(t)),await r.done}catch(n){if(n instanceof On)Jn.warn(n.message);else{const r=Or.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Jn.warn(r.message)}}}function Sw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=1024,RA=30;class AA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ly();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>RA){const o=PA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Jn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ly(),{heartbeatsToSend:r,unsentEntries:s}=kA(this._heartbeatsCache.heartbeats),i=Rc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Jn.warn(n),""}}}function ly(){return new Date().toISOString().substring(0,10)}function kA(t,e=SA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),cy(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),cy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class CA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yR()?vR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await NA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ay(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ay(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function cy(t){return Rc(JSON.stringify({version:2,heartbeats:t})).length}function PA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t){bs(new Ur("platform-logger",e=>new HR(e),"PRIVATE")),bs(new Ur("heartbeat",e=>new AA(e),"PRIVATE")),Sn(Zh,iy,t),Sn(Zh,iy,"esm2017"),Sn("fire-js","")}jA("");function Pm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Rw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OA=Rw,Aw=new Ta("auth","Firebase",Rw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=new Am("@firebase/auth");function DA(t,...e){kc.logLevel<=de.WARN&&kc.warn(`Auth (${Ps}): ${t}`,...e)}function Hl(t,...e){kc.logLevel<=de.ERROR&&kc.error(`Auth (${Ps}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t,...e){throw jm(t,...e)}function Rn(t,...e){return jm(t,...e)}function kw(t,e,n){const r=Object.assign(Object.assign({},OA()),{[e]:n});return new Ta("auth","Firebase",r).create(e,{appName:t.name})}function Wn(t){return kw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Aw.create(t,...e)}function re(t,e,...n){if(!t)throw jm(e,...n)}function zn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hl(e),new Error(e)}function Zn(t,e){t||zn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function LA(){return uy()==="http:"||uy()==="https:"}function uy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LA()||fR()||"connection"in navigator)?navigator.onLine:!0}function VA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zn(n>e,"Short delay should be less than long delay!"),this.isMobile=uR()||mR()}get(){return MA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t,e){Zn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],FA=new Na(3e4,6e4);function sr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function xn(t,e,n,r,s={}){return Pw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Ia(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return hR()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Mi(t.emulatorConfig.host)&&(d.credentials="include"),Cw.fetch()(await jw(t,t.config.apiHost,n,l),d)})}async function Pw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},$A),e);try{const s=new BA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw xl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw xl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw xl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw xl(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw kw(t,h,d);mn(t,h)}}catch(s){if(s instanceof On)throw s;mn(t,"network-request-failed",{message:String(s)})}}async function Sa(t,e,n,r,s={}){const i=await xn(t,e,n,r,s);return"mfaPendingCredential"in i&&mn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function jw(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Om(t.config,s):`${t.config.apiScheme}://${s}`;return UA.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function zA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class BA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Rn(this.auth,"network-request-failed")),FA.get())})}}function xl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Rn(t,e,r);return s.customData._tokenResponse=n,s}function dy(t){return t!==void 0&&t.enterprise!==void 0}class qA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return zA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function HA(t,e){return xn(t,"GET","/v2/recaptchaConfig",sr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(t,e){return xn(t,"POST","/v1/accounts:delete",e)}async function Cc(t,e){return xn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GA(t,e=!1){const n=_e(t),r=await n.getIdToken(e),s=Dm(r);re(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Oo(Vd(s.auth_time)),issuedAtTime:Oo(Vd(s.iat)),expirationTime:Oo(Vd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Vd(t){return Number(t)*1e3}function Dm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hl("JWT malformed, contained fewer than 3 sections"),null;try{const s=yw(n);return s?JSON.parse(s):(Hl("Failed to decode base64 JWT payload"),null)}catch(s){return Hl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function hy(t){const e=Dm(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ts(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof On&&QA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function QA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oo(this.lastLoginAt),this.creationTime=Oo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ts(t,Cc(n,{idToken:r}));re(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Ow(i.providerUserInfo):[],l=XA(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),h=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new rf(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function YA(t){const e=_e(t);await Pc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Ow(t){return t.map(e=>{var{providerId:n}=e,r=Pm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(t,e){const n=await Pw(t,{},async()=>{const r=Ia({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await jw(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Cw.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZA(t,e){return xn(t,"POST","/v2/accounts:revokeToken",sr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");const n=hy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await JA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ui;return r&&(re(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(re(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(re(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ui,this.toJSON())}_performRefresh(){return zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class cn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Pm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ts(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return GA(this,e)}reload(){return YA(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new cn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Pc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zt(this.auth.app))return Promise.reject(Wn(this.auth));const e=await this.getIdToken();return await Ts(this,WA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,d,h;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,x=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(l=n.tenantId)!==null&&l!==void 0?l:void 0,C=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,T=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:j,isAnonymous:D,providerData:U,stsTokenManager:E}=n;re(S&&E,e,"internal-error");const y=ui.fromJSON(this.name,E);re(typeof S=="string",e,"internal-error"),dr(m,e.name),dr(g,e.name),re(typeof j=="boolean",e,"internal-error"),re(typeof D=="boolean",e,"internal-error"),dr(x,e.name),dr(N,e.name),dr(k,e.name),dr(C,e.name),dr(T,e.name),dr(w,e.name);const v=new cn({uid:S,auth:e,email:g,emailVerified:j,displayName:m,isAnonymous:D,photoURL:N,phoneNumber:x,tenantId:k,stsTokenManager:y,createdAt:T,lastLoginAt:w});return U&&Array.isArray(U)&&(v.providerData=U.map(I=>Object.assign({},I))),C&&(v._redirectEventId=C),v}static async _fromIdTokenResponse(e,n,r=!1){const s=new ui;s.updateFromServerResponse(n);const i=new cn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Pc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];re(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Ow(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new ui;l.updateFromIdToken(r);const u=new cn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new rf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy=new Map;function Bn(t){Zn(t instanceof Function,"Expected a class definition");let e=fy.get(t);return e?(Zn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Dw.type="NONE";const my=Dw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(t,e,n){return`firebase:${t}:${e}:${n}`}class di{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Wl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Wl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Cc(this.auth,{idToken:e}).catch(()=>{});return n?cn._fromGetAccountInfoResponse(this.auth,n,e):null}return cn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new di(Bn(my),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Bn(my);const o=Wl(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(o);if(h){let m;if(typeof h=="string"){const g=await Cc(e,{idToken:h}).catch(()=>{});if(!g)break;m=await cn._fromGetAccountInfoResponse(e,g,h)}else m=cn._fromJSON(e,h);d!==i&&(l=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new di(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new di(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($w(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Lw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Fw(e))return"Blackberry";if(zw(e))return"Webos";if(Mw(e))return"Safari";if((e.includes("chrome/")||Vw(e))&&!e.includes("edge/"))return"Chrome";if(Uw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Lw(t=vt()){return/firefox\//i.test(t)}function Mw(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Vw(t=vt()){return/crios\//i.test(t)}function $w(t=vt()){return/iemobile/i.test(t)}function Uw(t=vt()){return/android/i.test(t)}function Fw(t=vt()){return/blackberry/i.test(t)}function zw(t=vt()){return/webos/i.test(t)}function Lm(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function e2(t=vt()){var e;return Lm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function t2(){return pR()&&document.documentMode===10}function Bw(t=vt()){return Lm(t)||Uw(t)||zw(t)||Fw(t)||/windows phone/i.test(t)||$w(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t,e=[]){let n;switch(t){case"Browser":n=py(vt());break;case"Worker":n=`${py(vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ps}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2(t,e={}){return xn(t,"GET","/v2/passwordPolicy",sr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=6;class i2{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:s2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gy(this),this.idTokenSubscription=new gy(this),this.beforeStateQueue=new n2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Aw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Bn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await di.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Cc(this,{idToken:e}),r=await cn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(zt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Pc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zt(this.app))return Promise.reject(Wn(this));const n=e?_e(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zt(this.app)?Promise.reject(Wn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zt(this.app)?Promise.reject(Wn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await r2(this),n=new i2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ta("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ZA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Bn(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await di.create(this,[Bn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(zt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&DA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Yr(t){return _e(t)}class gy{constructor(e){this.auth=e,this.observer=null,this.addObserver=bR(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function a2(t){mu=t}function Hw(t){return mu.loadJS(t)}function l2(){return mu.recaptchaEnterpriseScript}function c2(){return mu.gapiScript}function u2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class d2{constructor(){this.enterprise=new h2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class h2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const f2="recaptcha-enterprise",Ww="NO_RECAPTCHA";class m2{constructor(e){this.type=f2,this.auth=Yr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{HA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new qA(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;dy(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(Ww)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new d2().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&dy(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=l2();u.length!==0&&(u+=l),Hw(u).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function yy(t,e,n,r=!1,s=!1){const i=new m2(t);let o;if(s)o=Ww;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function jc(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await yy(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await yy(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(t,e){const n=fu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Es(i,e??{}))return s;mn(s,"already-initialized")}return n.initialize({options:e})}function g2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Bn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function y2(t,e,n){const r=Yr(t);re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Gw(e),{host:o,port:l}=v2(e),u=l===null?"":`:${l}`,d={url:`${i}//${o}${u}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),re(Es(d,r.config.emulator)&&Es(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,x2(),Mi(o)&&Rm(`${i}//${o}${u}`)}function Gw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function v2(t){const e=Gw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:vy(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:vy(o)}}}function vy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function x2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zn("not implemented")}_getIdTokenResponse(e){return zn("not implemented")}_linkToIdToken(e,n){return zn("not implemented")}_getReauthenticationResolver(e){return zn("not implemented")}}async function _2(t,e){return xn(t,"POST","/v1/accounts:update",e)}async function w2(t,e){return xn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E2(t,e){return Sa(t,"POST","/v1/accounts:signInWithPassword",sr(t,e))}async function b2(t,e){return xn(t,"POST","/v1/accounts:sendOobCode",sr(t,e))}async function T2(t,e){return b2(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I2(t,e){return Sa(t,"POST","/v1/accounts:signInWithEmailLink",sr(t,e))}async function N2(t,e){return Sa(t,"POST","/v1/accounts:signInWithEmailLink",sr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends Mm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ia(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ia(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jc(e,n,"signInWithPassword",E2);case"emailLink":return I2(e,{email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jc(e,r,"signUpPassword",w2);case"emailLink":return N2(e,{idToken:n,email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hi(t,e){return Sa(t,"POST","/v1/accounts:signInWithIdp",sr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="http://localhost";class Is extends Mm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Is(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Pm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Is(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return hi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,hi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,hi(e,n)}buildRequest(){const e={requestUri:S2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ia(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function A2(t){const e=xo(_o(t)).link,n=e?xo(_o(e)).deep_link_id:null,r=xo(_o(t)).deep_link_id;return(r?xo(_o(r)).link:null)||r||n||e||t}class Vm{constructor(e){var n,r,s,i,o,l;const u=xo(_o(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,m=R2((s=u.mode)!==null&&s!==void 0?s:null);re(d&&h&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=h,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=A2(e);try{return new Vm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(){this.providerId=Vi.PROVIDER_ID}static credential(e,n){return ia._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Vm.parseLink(n);return re(r,"argument-error"),ia._fromEmailAndCode(e,r.code,r.tenantId)}}Vi.PROVIDER_ID="password";Vi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra extends Qw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Ra{constructor(){super("facebook.com")}static credential(e){return Is._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gr.credential(e.oauthAccessToken)}catch{return null}}}gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";gr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Ra{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Is._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return yr.credential(n,r)}catch{return null}}}yr.GOOGLE_SIGN_IN_METHOD="google.com";yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Ra{constructor(){super("github.com")}static credential(e){return Is._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.GITHUB_SIGN_IN_METHOD="github.com";vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Ra{constructor(){super("twitter.com")}static credential(e,n){return Is._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return xr.credential(n,r)}catch{return null}}}xr.TWITTER_SIGN_IN_METHOD="twitter.com";xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k2(t,e){return Sa(t,"POST","/v1/accounts:signUp",sr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await cn._fromIdTokenResponse(e,r,s),o=xy(r);return new Ns({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=xy(r);return new Ns({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function xy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends On{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Oc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Oc(e,n,r,s)}}function Kw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Oc._fromErrorAndOperation(t,i,e,r):i})}async function C2(t,e,n=!1){const r=await Ts(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ns._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(t,e,n=!1){const{auth:r}=t;if(zt(r.app))return Promise.reject(Wn(r));const s="reauthenticate";try{const i=await Ts(t,Kw(r,s,e,t),n);re(i.idToken,r,"internal-error");const o=Dm(i.idToken);re(o,r,"internal-error");const{sub:l}=o;return re(t.uid===l,r,"user-mismatch"),Ns._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&mn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yw(t,e,n=!1){if(zt(t.app))return Promise.reject(Wn(t));const r="signIn",s=await Kw(t,r,e),i=await Ns._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function j2(t,e){return Yw(Yr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xw(t){const e=Yr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Jw(t,e,n){const r=Yr(t);await jc(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",T2)}async function Zw(t,e,n){if(zt(t.app))return Promise.reject(Wn(t));const r=Yr(t),o=await jc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",k2).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Xw(t),u}),l=await Ns._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function O2(t,e,n){return zt(t.app)?Promise.reject(Wn(t)):j2(_e(t),Vi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Xw(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D2(t,e){return xn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eE(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=_e(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ts(r,D2(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function SD(t,e){return L2(_e(t),null,e)}async function L2(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await Ts(t,_2(r,i));await t._updateTokensIfNecessary(o,!0)}function M2(t,e,n,r){return _e(t).onIdTokenChanged(e,n,r)}function V2(t,e,n){return _e(t).beforeAuthStateChanged(e,n)}function $2(t,e,n,r){return _e(t).onAuthStateChanged(e,n,r)}function U2(t){return _e(t).signOut()}const Dc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Dc,"1"),this.storage.removeItem(Dc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=1e3,z2=10;class nE extends tE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);t2()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,z2):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},F2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nE.type="LOCAL";const B2=nE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE extends tE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}rE.type="SESSION";const sE=rE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new pu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),u=await q2(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const d=$m("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return window}function W2(t){An().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(){return typeof An().WorkerGlobalScope<"u"&&typeof An().importScripts=="function"}async function G2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Q2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function K2(){return iE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="firebaseLocalStorageDb",Y2=1,Lc="firebaseLocalStorage",aE="fbase_key";class Aa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gu(t,e){return t.transaction([Lc],e?"readwrite":"readonly").objectStore(Lc)}function X2(){const t=indexedDB.deleteDatabase(oE);return new Aa(t).toPromise()}function sf(){const t=indexedDB.open(oE,Y2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Lc,{keyPath:aE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Lc)?e(r):(r.close(),await X2(),e(await sf()))})})}async function _y(t,e,n){const r=gu(t,!0).put({[aE]:e,value:n});return new Aa(r).toPromise()}async function J2(t,e){const n=gu(t,!1).get(e),r=await new Aa(n).toPromise();return r===void 0?null:r.value}function wy(t,e){const n=gu(t,!0).delete(e);return new Aa(n).toPromise()}const Z2=800,ek=3;class lE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ek)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pu._getInstance(K2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await G2(),!this.activeServiceWorker)return;this.sender=new H2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Q2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sf();return await _y(e,Dc,"1"),await wy(e,Dc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>_y(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>J2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=gu(s,!1).getAll();return new Aa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Z2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lE.type="LOCAL";const tk=lE;new Na(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t,e){return e?Bn(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um extends Mm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return hi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return hi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rk(t){return Yw(t.auth,new Um(t),t.bypassAuthState)}function sk(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),P2(n,new Um(t),t.bypassAuthState)}async function ik(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),C2(n,new Um(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rk;case"linkViaPopup":case"linkViaRedirect":return ik;case"reauthViaPopup":case"reauthViaRedirect":return sk;default:mn(this.auth,"internal-error")}}resolve(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=new Na(2e3,1e4);class ri extends cE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ri.currentPopupAction&&ri.currentPopupAction.cancel(),ri.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Zn(this.filter.length===1,"Popup operations only handle one event");const e=$m();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Rn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Rn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ri.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ok.get())};e()}}ri.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak="pendingRedirect",Gl=new Map;class lk extends cE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Gl.get(this.auth._key());if(!e){try{const r=await ck(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Gl.set(this.auth._key(),e)}return this.bypassAuthState||Gl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ck(t,e){const n=hk(e),r=dk(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function uk(t,e){Gl.set(t._key(),e)}function dk(t){return Bn(t._redirectPersistence)}function hk(t){return Wl(ak,t.config.apiKey,t.name)}async function fk(t,e,n=!1){if(zt(t.app))return Promise.reject(Wn(t));const r=Yr(t),s=nk(r,e),o=await new lk(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=10*60*1e3;class pk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!uE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Rn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ey(e))}saveEventToCache(e){this.cachedEventUids.add(Ey(e)),this.lastProcessedEventTime=Date.now()}}function Ey(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function uE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yk(t,e={}){return xn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xk=/^https?/;async function _k(t){if(t.config.emulator)return;const{authorizedDomains:e}=await yk(t);for(const n of e)try{if(wk(n))return}catch{}mn(t,"unauthorized-domain")}function wk(t){const e=nf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!xk.test(n))return!1;if(vk.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=new Na(3e4,6e4);function by(){const t=An().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function bk(t){return new Promise((e,n)=>{var r,s,i;function o(){by(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{by(),n(Rn(t,"network-request-failed"))},timeout:Ek.get()})}if(!((s=(r=An().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=An().gapi)===null||i===void 0)&&i.load)o();else{const l=u2("iframefcb");return An()[l]=()=>{gapi.load?o():n(Rn(t,"network-request-failed"))},Hw(`${c2()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Ql=null,e})}let Ql=null;function Tk(t){return Ql=Ql||bk(t),Ql}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=new Na(5e3,15e3),Nk="__/auth/iframe",Sk="emulator/auth/iframe",Rk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ak=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kk(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Om(e,Sk):`https://${t.config.authDomain}/${Nk}`,r={apiKey:e.apiKey,appName:t.name,v:Ps},s=Ak.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ia(r).slice(1)}`}async function Ck(t){const e=await Tk(t),n=An().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:kk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rk,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Rn(t,"network-request-failed"),l=An().setTimeout(()=>{i(o)},Ik.get());function u(){An().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jk=500,Ok=600,Dk="_blank",Lk="http://localhost";class Ty{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Mk(t,e,n,r=jk,s=Ok){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},Pk),{width:r.toString(),height:s.toString(),top:i,left:o}),d=vt().toLowerCase();n&&(l=Vw(d)?Dk:n),Lw(d)&&(e=e||Lk,u.scrollbars="yes");const h=Object.entries(u).reduce((g,[x,N])=>`${g}${x}=${N},`,"");if(e2(d)&&l!=="_self")return Vk(e||"",l),new Ty(null);const m=window.open(e||"",l,h);re(m,t,"popup-blocked");try{m.focus()}catch{}return new Ty(m)}function Vk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="__/auth/handler",Uk="emulator/auth/handler",Fk=encodeURIComponent("fac");async function Iy(t,e,n,r,s,i){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ps,eventId:s};if(e instanceof Qw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ER(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof Ra){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),d=u?`#${Fk}=${encodeURIComponent(u)}`:"";return`${zk(t)}?${Ia(l).slice(1)}${d}`}function zk({config:t}){return t.emulator?Om(t,Uk):`https://${t.authDomain}/${$k}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="webStorageSupport";class Bk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sE,this._completeRedirectFn=fk,this._overrideRedirectResult=uk}async _openPopup(e,n,r,s){var i;Zn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Iy(e,n,r,nf(),s);return Mk(e,o,$m())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Iy(e,n,r,nf(),s);return W2(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Zn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Ck(e),r=new pk(e);return n.register("authEvent",s=>(re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($d,{type:$d},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[$d];o!==void 0&&n(!!o),mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_k(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Bw()||Mw()||Lm()}}const qk=Bk;var Ny="@firebase/auth",Sy="1.10.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Gk(t){bs(new Ur("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qw(t)},d=new o2(r,s,i,u);return g2(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),bs(new Ur("auth-internal",e=>{const n=Yr(e.getProvider("auth").getImmediate());return(r=>new Hk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Sn(Ny,Sy,Wk(t)),Sn(Ny,Sy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=5*60,Kk=ww("authIdTokenMaxAge")||Qk;let Ry=null;const Yk=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Kk)return;const s=n==null?void 0:n.token;Ry!==s&&(Ry=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Xk(t=Cm()){const e=fu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=p2(t,{popupRedirectResolver:qk,persistence:[tk,B2,sE]}),r=ww("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Yk(i.toString());V2(n,o,()=>o(n.currentUser)),M2(n,l=>o(l))}}const s=vw("auth");return s&&y2(n,`http://${s}`),n}function Jk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}a2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Rn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Jk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Gk("Browser");var Ay=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dr,dE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function v(){}v.prototype=y.prototype,E.D=y.prototype,E.prototype=new v,E.prototype.constructor=E,E.C=function(I,_,P){for(var A=Array(arguments.length-2),z=2;z<arguments.length;z++)A[z-2]=arguments[z];return y.prototype[_].apply(I,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,y,v){v||(v=0);var I=Array(16);if(typeof y=="string")for(var _=0;16>_;++_)I[_]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(_=0;16>_;++_)I[_]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=E.g[0],v=E.g[1],_=E.g[2];var P=E.g[3],A=y+(P^v&(_^P))+I[0]+3614090360&4294967295;y=v+(A<<7&4294967295|A>>>25),A=P+(_^y&(v^_))+I[1]+3905402710&4294967295,P=y+(A<<12&4294967295|A>>>20),A=_+(v^P&(y^v))+I[2]+606105819&4294967295,_=P+(A<<17&4294967295|A>>>15),A=v+(y^_&(P^y))+I[3]+3250441966&4294967295,v=_+(A<<22&4294967295|A>>>10),A=y+(P^v&(_^P))+I[4]+4118548399&4294967295,y=v+(A<<7&4294967295|A>>>25),A=P+(_^y&(v^_))+I[5]+1200080426&4294967295,P=y+(A<<12&4294967295|A>>>20),A=_+(v^P&(y^v))+I[6]+2821735955&4294967295,_=P+(A<<17&4294967295|A>>>15),A=v+(y^_&(P^y))+I[7]+4249261313&4294967295,v=_+(A<<22&4294967295|A>>>10),A=y+(P^v&(_^P))+I[8]+1770035416&4294967295,y=v+(A<<7&4294967295|A>>>25),A=P+(_^y&(v^_))+I[9]+2336552879&4294967295,P=y+(A<<12&4294967295|A>>>20),A=_+(v^P&(y^v))+I[10]+4294925233&4294967295,_=P+(A<<17&4294967295|A>>>15),A=v+(y^_&(P^y))+I[11]+2304563134&4294967295,v=_+(A<<22&4294967295|A>>>10),A=y+(P^v&(_^P))+I[12]+1804603682&4294967295,y=v+(A<<7&4294967295|A>>>25),A=P+(_^y&(v^_))+I[13]+4254626195&4294967295,P=y+(A<<12&4294967295|A>>>20),A=_+(v^P&(y^v))+I[14]+2792965006&4294967295,_=P+(A<<17&4294967295|A>>>15),A=v+(y^_&(P^y))+I[15]+1236535329&4294967295,v=_+(A<<22&4294967295|A>>>10),A=y+(_^P&(v^_))+I[1]+4129170786&4294967295,y=v+(A<<5&4294967295|A>>>27),A=P+(v^_&(y^v))+I[6]+3225465664&4294967295,P=y+(A<<9&4294967295|A>>>23),A=_+(y^v&(P^y))+I[11]+643717713&4294967295,_=P+(A<<14&4294967295|A>>>18),A=v+(P^y&(_^P))+I[0]+3921069994&4294967295,v=_+(A<<20&4294967295|A>>>12),A=y+(_^P&(v^_))+I[5]+3593408605&4294967295,y=v+(A<<5&4294967295|A>>>27),A=P+(v^_&(y^v))+I[10]+38016083&4294967295,P=y+(A<<9&4294967295|A>>>23),A=_+(y^v&(P^y))+I[15]+3634488961&4294967295,_=P+(A<<14&4294967295|A>>>18),A=v+(P^y&(_^P))+I[4]+3889429448&4294967295,v=_+(A<<20&4294967295|A>>>12),A=y+(_^P&(v^_))+I[9]+568446438&4294967295,y=v+(A<<5&4294967295|A>>>27),A=P+(v^_&(y^v))+I[14]+3275163606&4294967295,P=y+(A<<9&4294967295|A>>>23),A=_+(y^v&(P^y))+I[3]+4107603335&4294967295,_=P+(A<<14&4294967295|A>>>18),A=v+(P^y&(_^P))+I[8]+1163531501&4294967295,v=_+(A<<20&4294967295|A>>>12),A=y+(_^P&(v^_))+I[13]+2850285829&4294967295,y=v+(A<<5&4294967295|A>>>27),A=P+(v^_&(y^v))+I[2]+4243563512&4294967295,P=y+(A<<9&4294967295|A>>>23),A=_+(y^v&(P^y))+I[7]+1735328473&4294967295,_=P+(A<<14&4294967295|A>>>18),A=v+(P^y&(_^P))+I[12]+2368359562&4294967295,v=_+(A<<20&4294967295|A>>>12),A=y+(v^_^P)+I[5]+4294588738&4294967295,y=v+(A<<4&4294967295|A>>>28),A=P+(y^v^_)+I[8]+2272392833&4294967295,P=y+(A<<11&4294967295|A>>>21),A=_+(P^y^v)+I[11]+1839030562&4294967295,_=P+(A<<16&4294967295|A>>>16),A=v+(_^P^y)+I[14]+4259657740&4294967295,v=_+(A<<23&4294967295|A>>>9),A=y+(v^_^P)+I[1]+2763975236&4294967295,y=v+(A<<4&4294967295|A>>>28),A=P+(y^v^_)+I[4]+1272893353&4294967295,P=y+(A<<11&4294967295|A>>>21),A=_+(P^y^v)+I[7]+4139469664&4294967295,_=P+(A<<16&4294967295|A>>>16),A=v+(_^P^y)+I[10]+3200236656&4294967295,v=_+(A<<23&4294967295|A>>>9),A=y+(v^_^P)+I[13]+681279174&4294967295,y=v+(A<<4&4294967295|A>>>28),A=P+(y^v^_)+I[0]+3936430074&4294967295,P=y+(A<<11&4294967295|A>>>21),A=_+(P^y^v)+I[3]+3572445317&4294967295,_=P+(A<<16&4294967295|A>>>16),A=v+(_^P^y)+I[6]+76029189&4294967295,v=_+(A<<23&4294967295|A>>>9),A=y+(v^_^P)+I[9]+3654602809&4294967295,y=v+(A<<4&4294967295|A>>>28),A=P+(y^v^_)+I[12]+3873151461&4294967295,P=y+(A<<11&4294967295|A>>>21),A=_+(P^y^v)+I[15]+530742520&4294967295,_=P+(A<<16&4294967295|A>>>16),A=v+(_^P^y)+I[2]+3299628645&4294967295,v=_+(A<<23&4294967295|A>>>9),A=y+(_^(v|~P))+I[0]+4096336452&4294967295,y=v+(A<<6&4294967295|A>>>26),A=P+(v^(y|~_))+I[7]+1126891415&4294967295,P=y+(A<<10&4294967295|A>>>22),A=_+(y^(P|~v))+I[14]+2878612391&4294967295,_=P+(A<<15&4294967295|A>>>17),A=v+(P^(_|~y))+I[5]+4237533241&4294967295,v=_+(A<<21&4294967295|A>>>11),A=y+(_^(v|~P))+I[12]+1700485571&4294967295,y=v+(A<<6&4294967295|A>>>26),A=P+(v^(y|~_))+I[3]+2399980690&4294967295,P=y+(A<<10&4294967295|A>>>22),A=_+(y^(P|~v))+I[10]+4293915773&4294967295,_=P+(A<<15&4294967295|A>>>17),A=v+(P^(_|~y))+I[1]+2240044497&4294967295,v=_+(A<<21&4294967295|A>>>11),A=y+(_^(v|~P))+I[8]+1873313359&4294967295,y=v+(A<<6&4294967295|A>>>26),A=P+(v^(y|~_))+I[15]+4264355552&4294967295,P=y+(A<<10&4294967295|A>>>22),A=_+(y^(P|~v))+I[6]+2734768916&4294967295,_=P+(A<<15&4294967295|A>>>17),A=v+(P^(_|~y))+I[13]+1309151649&4294967295,v=_+(A<<21&4294967295|A>>>11),A=y+(_^(v|~P))+I[4]+4149444226&4294967295,y=v+(A<<6&4294967295|A>>>26),A=P+(v^(y|~_))+I[11]+3174756917&4294967295,P=y+(A<<10&4294967295|A>>>22),A=_+(y^(P|~v))+I[2]+718787259&4294967295,_=P+(A<<15&4294967295|A>>>17),A=v+(P^(_|~y))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(_+(A<<21&4294967295|A>>>11))&4294967295,E.g[2]=E.g[2]+_&4294967295,E.g[3]=E.g[3]+P&4294967295}r.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var v=y-this.blockSize,I=this.B,_=this.h,P=0;P<y;){if(_==0)for(;P<=v;)s(this,E,P),P+=this.blockSize;if(typeof E=="string"){for(;P<y;)if(I[_++]=E.charCodeAt(P++),_==this.blockSize){s(this,I),_=0;break}}else for(;P<y;)if(I[_++]=E[P++],_==this.blockSize){s(this,I),_=0;break}}this.h=_,this.o+=y},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var v=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=v&255,v/=256;for(this.u(E),E=Array(16),y=v=0;4>y;++y)for(var I=0;32>I;I+=8)E[v++]=this.g[y]>>>I&255;return E};function i(E,y){var v=l;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=y(E)}function o(E,y){this.h=y;for(var v=[],I=!0,_=E.length-1;0<=_;_--){var P=E[_]|0;I&&P==y||(v[_]=P,I=!1)}this.g=v}var l={};function u(E){return-128<=E&&128>E?i(E,function(y){return new o([y|0],0>y?-1:0)}):new o([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return C(d(-E));for(var y=[],v=1,I=0;E>=v;I++)y[I]=E/v|0,v*=4294967296;return new o(y,0)}function h(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return C(h(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=d(Math.pow(y,8)),I=m,_=0;_<E.length;_+=8){var P=Math.min(8,E.length-_),A=parseInt(E.substring(_,_+P),y);8>P?(P=d(Math.pow(y,P)),I=I.j(P).add(d(A))):(I=I.j(v),I=I.add(d(A)))}return I}var m=u(0),g=u(1),x=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-C(this).m();for(var E=0,y=1,v=0;v<this.g.length;v++){var I=this.i(v);E+=(0<=I?I:4294967296+I)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(N(this))return"0";if(k(this))return"-"+C(this).toString(E);for(var y=d(Math.pow(E,6)),v=this,I="";;){var _=j(v,y).g;v=T(v,_.j(y));var P=((0<v.g.length?v.g[0]:v.h)>>>0).toString(E);if(v=_,N(v))return P+I;for(;6>P.length;)P="0"+P;I=P+I}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function N(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function k(E){return E.h==-1}t.l=function(E){return E=T(this,E),k(E)?-1:N(E)?0:1};function C(E){for(var y=E.g.length,v=[],I=0;I<y;I++)v[I]=~E.g[I];return new o(v,~E.h).add(g)}t.abs=function(){return k(this)?C(this):this},t.add=function(E){for(var y=Math.max(this.g.length,E.g.length),v=[],I=0,_=0;_<=y;_++){var P=I+(this.i(_)&65535)+(E.i(_)&65535),A=(P>>>16)+(this.i(_)>>>16)+(E.i(_)>>>16);I=A>>>16,P&=65535,A&=65535,v[_]=A<<16|P}return new o(v,v[v.length-1]&-2147483648?-1:0)};function T(E,y){return E.add(C(y))}t.j=function(E){if(N(this)||N(E))return m;if(k(this))return k(E)?C(this).j(C(E)):C(C(this).j(E));if(k(E))return C(this.j(C(E)));if(0>this.l(x)&&0>E.l(x))return d(this.m()*E.m());for(var y=this.g.length+E.g.length,v=[],I=0;I<2*y;I++)v[I]=0;for(I=0;I<this.g.length;I++)for(var _=0;_<E.g.length;_++){var P=this.i(I)>>>16,A=this.i(I)&65535,z=E.i(_)>>>16,Q=E.i(_)&65535;v[2*I+2*_]+=A*Q,w(v,2*I+2*_),v[2*I+2*_+1]+=P*Q,w(v,2*I+2*_+1),v[2*I+2*_+1]+=A*z,w(v,2*I+2*_+1),v[2*I+2*_+2]+=P*z,w(v,2*I+2*_+2)}for(I=0;I<y;I++)v[I]=v[2*I+1]<<16|v[2*I];for(I=y;I<2*y;I++)v[I]=0;return new o(v,0)};function w(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function S(E,y){this.g=E,this.h=y}function j(E,y){if(N(y))throw Error("division by zero");if(N(E))return new S(m,m);if(k(E))return y=j(C(E),y),new S(C(y.g),C(y.h));if(k(y))return y=j(E,C(y)),new S(C(y.g),y.h);if(30<E.g.length){if(k(E)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var v=g,I=y;0>=I.l(E);)v=D(v),I=D(I);var _=U(v,1),P=U(I,1);for(I=U(I,2),v=U(v,2);!N(I);){var A=P.add(I);0>=A.l(E)&&(_=_.add(v),P=A),I=U(I,1),v=U(v,1)}return y=T(E,_.j(y)),new S(_,y)}for(_=m;0<=E.l(y);){for(v=Math.max(1,Math.floor(E.m()/y.m())),I=Math.ceil(Math.log(v)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),P=d(v),A=P.j(y);k(A)||0<A.l(E);)v-=I,P=d(v),A=P.j(y);N(P)&&(P=g),_=_.add(P),E=T(E,A)}return new S(_,E)}t.A=function(E){return j(this,E).h},t.and=function(E){for(var y=Math.max(this.g.length,E.g.length),v=[],I=0;I<y;I++)v[I]=this.i(I)&E.i(I);return new o(v,this.h&E.h)},t.or=function(E){for(var y=Math.max(this.g.length,E.g.length),v=[],I=0;I<y;I++)v[I]=this.i(I)|E.i(I);return new o(v,this.h|E.h)},t.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),v=[],I=0;I<y;I++)v[I]=this.i(I)^E.i(I);return new o(v,this.h^E.h)};function D(E){for(var y=E.g.length+1,v=[],I=0;I<y;I++)v[I]=E.i(I)<<1|E.i(I-1)>>>31;return new o(v,E.h)}function U(E,y){var v=y>>5;y%=32;for(var I=E.g.length-v,_=[],P=0;P<I;P++)_[P]=0<y?E.i(P+v)>>>y|E.i(P+v+1)<<32-y:E.i(P+v);return new o(_,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,dE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Dr=o}).apply(typeof Ay<"u"?Ay:typeof self<"u"?self:typeof window<"u"?window:{});var _l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hE,wo,fE,Kl,of,mE,pE,gE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,p){return c==Array.prototype||c==Object.prototype||(c[f]=p.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof _l=="object"&&_l];for(var f=0;f<c.length;++f){var p=c[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(c,f){if(f)e:{var p=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var O=c[b];if(!(O in p))break e;p=p[O]}c=c[c.length-1],b=p[c],f=f(b),f!=b&&f!=null&&e(p,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var p=0,b=!1,O={next:function(){if(!b&&p<c.length){var L=p++;return{value:f(L,c[L]),done:!1}}return b=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(c){return c||function(){return i(this,function(f,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function d(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,p){return c.call.apply(c.bind,arguments)}function m(c,f,p){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,b),c.apply(f,O)}}return function(){return c.apply(f,arguments)}}function g(c,f,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,g.apply(null,arguments)}function x(c,f){var p=Array.prototype.slice.call(arguments,1);return function(){var b=p.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function N(c,f){function p(){}p.prototype=f.prototype,c.aa=f.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(b,O,L){for(var W=Array(arguments.length-2),we=2;we<arguments.length;we++)W[we-2]=arguments[we];return f.prototype[O].apply(b,W)}}function k(c){const f=c.length;if(0<f){const p=Array(f);for(let b=0;b<f;b++)p[b]=c[b];return p}return[]}function C(c,f){for(let p=1;p<arguments.length;p++){const b=arguments[p];if(u(b)){const O=c.length||0,L=b.length||0;c.length=O+L;for(let W=0;W<L;W++)c[O+W]=b[W]}else c.push(b)}}class T{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function w(c){return/^[\s\xa0]*$/.test(c)}function S(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function j(c){return j[" "](c),c}j[" "]=function(){};var D=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function U(c,f,p){for(const b in c)f.call(p,c[b],b,c)}function E(c,f){for(const p in c)f.call(void 0,c[p],p,c)}function y(c){const f={};for(const p in c)f[p]=c[p];return f}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,f){let p,b;for(let O=1;O<arguments.length;O++){b=arguments[O];for(p in b)c[p]=b[p];for(let L=0;L<v.length;L++)p=v[L],Object.prototype.hasOwnProperty.call(b,p)&&(c[p]=b[p])}}function _(c){var f=1;c=c.split(":");const p=[];for(;0<f&&c.length;)p.push(c.shift()),f--;return c.length&&p.push(c.join(":")),p}function P(c){l.setTimeout(()=>{throw c},0)}function A(){var c=B;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class z{constructor(){this.h=this.g=null}add(f,p){const b=Q.get();b.set(f,p),this.h?this.h.next=b:this.g=b,this.h=b}}var Q=new T(()=>new ee,c=>c.reset());class ee{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,M=!1,B=new z,F=()=>{const c=l.Promise.resolve(void 0);ye=()=>{c.then(Z)}};var Z=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(p){P(p)}var f=Q;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}M=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var $e=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const p=()=>{};l.addEventListener("test",p,f),l.removeEventListener("test",p,f)}catch{}return c}();function Ue(c,f){if(H.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(D){e:{try{j(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else p=="mouseover"?f=c.fromElement:p=="mouseout"&&(f=c.toElement);this.relatedTarget=f,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:K[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ue.aa.h.call(this)}}N(Ue,H);var K={2:"touch",3:"pen",4:"mouse"};Ue.prototype.h=function(){Ue.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var xt="closure_listenable_"+(1e6*Math.random()|0),Vt=0;function Ae(c,f,p,b,O){this.listener=c,this.proxy=null,this.src=f,this.type=p,this.capture=!!b,this.ha=O,this.key=++Vt,this.da=this.fa=!1}function Yt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function At(c){this.src=c,this.g={},this.h=0}At.prototype.add=function(c,f,p,b,O){var L=c.toString();c=this.g[L],c||(c=this.g[L]=[],this.h++);var W=or(c,f,b,O);return-1<W?(f=c[W],p||(f.fa=!1)):(f=new Ae(f,this.src,L,!!b,O),f.fa=p,c.push(f)),f};function Zr(c,f){var p=f.type;if(p in c.g){var b=c.g[p],O=Array.prototype.indexOf.call(b,f,void 0),L;(L=0<=O)&&Array.prototype.splice.call(b,O,1),L&&(Yt(f),c.g[p].length==0&&(delete c.g[p],c.h--))}}function or(c,f,p,b){for(var O=0;O<c.length;++O){var L=c[O];if(!L.da&&L.listener==f&&L.capture==!!p&&L.ha==b)return O}return-1}var es="closure_lm_"+(1e6*Math.random()|0),$u={};function Vp(c,f,p,b,O){if(Array.isArray(f)){for(var L=0;L<f.length;L++)Vp(c,f[L],p,b,O);return null}return p=Fp(p),c&&c[xt]?c.K(f,p,d(b)?!!b.capture:!1,O):x1(c,f,p,!1,b,O)}function x1(c,f,p,b,O,L){if(!f)throw Error("Invalid event type");var W=d(O)?!!O.capture:!!O,we=Fu(c);if(we||(c[es]=we=new At(c)),p=we.add(f,p,b,W,L),p.proxy)return p;if(b=_1(),p.proxy=b,b.src=c,b.listener=p,c.addEventListener)$e||(O=W),O===void 0&&(O=!1),c.addEventListener(f.toString(),b,O);else if(c.attachEvent)c.attachEvent(Up(f.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return p}function _1(){function c(p){return f.call(c.src,c.listener,p)}const f=w1;return c}function $p(c,f,p,b,O){if(Array.isArray(f))for(var L=0;L<f.length;L++)$p(c,f[L],p,b,O);else b=d(b)?!!b.capture:!!b,p=Fp(p),c&&c[xt]?(c=c.i,f=String(f).toString(),f in c.g&&(L=c.g[f],p=or(L,p,b,O),-1<p&&(Yt(L[p]),Array.prototype.splice.call(L,p,1),L.length==0&&(delete c.g[f],c.h--)))):c&&(c=Fu(c))&&(f=c.g[f.toString()],c=-1,f&&(c=or(f,p,b,O)),(p=-1<c?f[c]:null)&&Uu(p))}function Uu(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[xt])Zr(f.i,c);else{var p=c.type,b=c.proxy;f.removeEventListener?f.removeEventListener(p,b,c.capture):f.detachEvent?f.detachEvent(Up(p),b):f.addListener&&f.removeListener&&f.removeListener(b),(p=Fu(f))?(Zr(p,c),p.h==0&&(p.src=null,f[es]=null)):Yt(c)}}}function Up(c){return c in $u?$u[c]:$u[c]="on"+c}function w1(c,f){if(c.da)c=!0;else{f=new Ue(f,this);var p=c.listener,b=c.ha||c.src;c.fa&&Uu(c),c=p.call(b,f)}return c}function Fu(c){return c=c[es],c instanceof At?c:null}var zu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fp(c){return typeof c=="function"?c:(c[zu]||(c[zu]=function(f){return c.handleEvent(f)}),c[zu])}function ot(){ne.call(this),this.i=new At(this),this.M=this,this.F=null}N(ot,ne),ot.prototype[xt]=!0,ot.prototype.removeEventListener=function(c,f,p,b){$p(this,c,f,p,b)};function _t(c,f){var p,b=c.F;if(b)for(p=[];b;b=b.F)p.push(b);if(c=c.M,b=f.type||f,typeof f=="string")f=new H(f,c);else if(f instanceof H)f.target=f.target||c;else{var O=f;f=new H(b,c),I(f,O)}if(O=!0,p)for(var L=p.length-1;0<=L;L--){var W=f.g=p[L];O=Va(W,b,!0,f)&&O}if(W=f.g=c,O=Va(W,b,!0,f)&&O,O=Va(W,b,!1,f)&&O,p)for(L=0;L<p.length;L++)W=f.g=p[L],O=Va(W,b,!1,f)&&O}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var p=c.g[f],b=0;b<p.length;b++)Yt(p[b]);delete c.g[f],c.h--}}this.F=null},ot.prototype.K=function(c,f,p,b){return this.i.add(String(c),f,!1,p,b)},ot.prototype.L=function(c,f,p,b){return this.i.add(String(c),f,!0,p,b)};function Va(c,f,p,b){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,L=0;L<f.length;++L){var W=f[L];if(W&&!W.da&&W.capture==p){var we=W.listener,Ze=W.ha||W.src;W.fa&&Zr(c.i,W),O=we.call(Ze,b)!==!1&&O}}return O&&!b.defaultPrevented}function zp(c,f,p){if(typeof c=="function")p&&(c=g(c,p));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(c,f||0)}function Bp(c){c.g=zp(()=>{c.g=null,c.i&&(c.i=!1,Bp(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class E1 extends ne{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Bp(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hi(c){ne.call(this),this.h=c,this.g={}}N(Hi,ne);var qp=[];function Hp(c){U(c.g,function(f,p){this.g.hasOwnProperty(p)&&Uu(f)},c),c.g={}}Hi.prototype.N=function(){Hi.aa.N.call(this),Hp(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bu=l.JSON.stringify,b1=l.JSON.parse,T1=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function qu(){}qu.prototype.h=null;function Wp(c){return c.h||(c.h=c.i())}function Gp(){}var Wi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hu(){H.call(this,"d")}N(Hu,H);function Wu(){H.call(this,"c")}N(Wu,H);var ts={},Qp=null;function $a(){return Qp=Qp||new ot}ts.La="serverreachability";function Kp(c){H.call(this,ts.La,c)}N(Kp,H);function Gi(c){const f=$a();_t(f,new Kp(f))}ts.STAT_EVENT="statevent";function Yp(c,f){H.call(this,ts.STAT_EVENT,c),this.stat=f}N(Yp,H);function wt(c){const f=$a();_t(f,new Yp(f,c))}ts.Ma="timingevent";function Xp(c,f){H.call(this,ts.Ma,c),this.size=f}N(Xp,H);function Qi(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},f)}function Ki(){this.g=!0}Ki.prototype.xa=function(){this.g=!1};function I1(c,f,p,b,O,L){c.info(function(){if(c.g)if(L)for(var W="",we=L.split("&"),Ze=0;Ze<we.length;Ze++){var ge=we[Ze].split("=");if(1<ge.length){var at=ge[0];ge=ge[1];var lt=at.split("_");W=2<=lt.length&&lt[1]=="type"?W+(at+"="+ge+"&"):W+(at+"=redacted&")}}else W=null;else W=L;return"XMLHTTP REQ ("+b+") [attempt "+O+"]: "+f+`
`+p+`
`+W})}function N1(c,f,p,b,O,L,W){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+O+"]: "+f+`
`+p+`
`+L+" "+W})}function Ls(c,f,p,b){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+R1(c,p)+(b?" "+b:"")})}function S1(c,f){c.info(function(){return"TIMEOUT: "+f})}Ki.prototype.info=function(){};function R1(c,f){if(!c.g)return f;if(!f)return null;try{var p=JSON.parse(f);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var b=p[c];if(!(2>b.length)){var O=b[1];if(Array.isArray(O)&&!(1>O.length)){var L=O[0];if(L!="noop"&&L!="stop"&&L!="close")for(var W=1;W<O.length;W++)O[W]=""}}}}return Bu(p)}catch{return f}}var Ua={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gu;function Fa(){}N(Fa,qu),Fa.prototype.g=function(){return new XMLHttpRequest},Fa.prototype.i=function(){return{}},Gu=new Fa;function ar(c,f,p,b){this.j=c,this.i=f,this.l=p,this.R=b||1,this.U=new Hi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zp}function Zp(){this.i=null,this.g="",this.h=!1}var eg={},Qu={};function Ku(c,f,p){c.L=1,c.v=Ha(Ln(f)),c.m=p,c.P=!0,tg(c,null)}function tg(c,f){c.F=Date.now(),za(c),c.A=Ln(c.v);var p=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),pg(p.i,"t",b),c.C=0,p=c.j.J,c.h=new Zp,c.g=jg(c.j,p?f:null,!c.m),0<c.O&&(c.M=new E1(g(c.Y,c,c.g),c.O)),f=c.U,p=c.g,b=c.ca;var O="readystatechange";Array.isArray(O)||(O&&(qp[0]=O.toString()),O=qp);for(var L=0;L<O.length;L++){var W=Vp(p,O[L],b||f.handleEvent,!1,f.h||f);if(!W)break;f.g[W.key]=W}f=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),Gi(),I1(c.i,c.u,c.A,c.l,c.R,c.m)}ar.prototype.ca=function(c){c=c.target;const f=this.M;f&&Mn(c)==3?f.j():this.Y(c)},ar.prototype.Y=function(c){try{if(c==this.g)e:{const lt=Mn(this.g);var f=this.g.Ba();const $s=this.g.Z();if(!(3>lt)&&(lt!=3||this.g&&(this.h.h||this.g.oa()||Eg(this.g)))){this.J||lt!=4||f==7||(f==8||0>=$s?Gi(3):Gi(2)),Yu(this);var p=this.g.Z();this.X=p;t:if(ng(this)){var b=Eg(this.g);c="";var O=b.length,L=Mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ns(this),Yi(this);var W="";break t}this.h.i=new l.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,c+=this.h.i.decode(b[f],{stream:!(L&&f==O-1)});b.length=0,this.h.g+=c,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=p==200,N1(this.i,this.u,this.A,this.l,this.R,lt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var we,Ze=this.g;if((we=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(we)){var ge=we;break t}}ge=null}if(p=ge)Ls(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xu(this,p);else{this.o=!1,this.s=3,wt(12),ns(this),Yi(this);break e}}if(this.P){p=!0;let rn;for(;!this.J&&this.C<W.length;)if(rn=A1(this,W),rn==Qu){lt==4&&(this.s=4,wt(14),p=!1),Ls(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==eg){this.s=4,wt(15),Ls(this.i,this.l,W,"[Invalid Chunk]"),p=!1;break}else Ls(this.i,this.l,rn,null),Xu(this,rn);if(ng(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||W.length!=0||this.h.h||(this.s=1,wt(16),p=!1),this.o=this.o&&p,!p)Ls(this.i,this.l,W,"[Invalid Chunked Response]"),ns(this),Yi(this);else if(0<W.length&&!this.W){this.W=!0;var at=this.j;at.g==this&&at.ba&&!at.M&&(at.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),rd(at),at.M=!0,wt(11))}}else Ls(this.i,this.l,W,null),Xu(this,W);lt==4&&ns(this),this.o&&!this.J&&(lt==4?Ag(this.j,this):(this.o=!1,za(this)))}else W1(this.g),p==400&&0<W.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),ns(this),Yi(this)}}}catch{}finally{}};function ng(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function A1(c,f){var p=c.C,b=f.indexOf(`
`,p);return b==-1?Qu:(p=Number(f.substring(p,b)),isNaN(p)?eg:(b+=1,b+p>f.length?Qu:(f=f.slice(b,b+p),c.C=b+p,f)))}ar.prototype.cancel=function(){this.J=!0,ns(this)};function za(c){c.S=Date.now()+c.I,rg(c,c.I)}function rg(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Qi(g(c.ba,c),f)}function Yu(c){c.B&&(l.clearTimeout(c.B),c.B=null)}ar.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(S1(this.i,this.A),this.L!=2&&(Gi(),wt(17)),ns(this),this.s=2,Yi(this)):rg(this,this.S-c)};function Yi(c){c.j.G==0||c.J||Ag(c.j,c)}function ns(c){Yu(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,Hp(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function Xu(c,f){try{var p=c.j;if(p.G!=0&&(p.g==c||Ju(p.h,c))){if(!c.K&&Ju(p.h,c)&&p.G==3){try{var b=p.Da.g.parse(f)}catch{b=null}if(Array.isArray(b)&&b.length==3){var O=b;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)Xa(p),Ka(p);else break e;nd(p),wt(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=Qi(g(p.Za,p),6e3));if(1>=og(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ss(p,11)}else if((c.K||p.g==c)&&Xa(p),!w(f))for(O=p.Da.g.parse(f),f=0;f<O.length;f++){let ge=O[f];if(p.T=ge[0],ge=ge[1],p.G==2)if(ge[0]=="c"){p.K=ge[1],p.ia=ge[2];const at=ge[3];at!=null&&(p.la=at,p.j.info("VER="+p.la));const lt=ge[4];lt!=null&&(p.Aa=lt,p.j.info("SVER="+p.Aa));const $s=ge[5];$s!=null&&typeof $s=="number"&&0<$s&&(b=1.5*$s,p.L=b,p.j.info("backChannelRequestTimeoutMs_="+b)),b=p;const rn=c.g;if(rn){const Za=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Za){var L=b.h;L.g||Za.indexOf("spdy")==-1&&Za.indexOf("quic")==-1&&Za.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Zu(L,L.h),L.h=null))}if(b.D){const sd=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;sd&&(b.ya=sd,Te(b.I,b.D,sd))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),b=p;var W=c;if(b.qa=Pg(b,b.J?b.ia:null,b.W),W.K){ag(b.h,W);var we=W,Ze=b.L;Ze&&(we.I=Ze),we.B&&(Yu(we),za(we)),b.g=W}else Sg(b);0<p.i.length&&Ya(p)}else ge[0]!="stop"&&ge[0]!="close"||ss(p,7);else p.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?ss(p,7):td(p):ge[0]!="noop"&&p.l&&p.l.ta(ge),p.v=0)}}Gi(4)}catch{}}var k1=class{constructor(c,f){this.g=c,this.map=f}};function sg(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ig(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function og(c){return c.h?1:c.g?c.g.size:0}function Ju(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function Zu(c,f){c.g?c.g.add(f):c.h=f}function ag(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}sg.prototype.cancel=function(){if(this.i=lg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function lg(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const p of c.g.values())f=f.concat(p.D);return f}return k(c.i)}function C1(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var f=[],p=c.length,b=0;b<p;b++)f.push(c[b]);return f}f=[],p=0;for(b in c)f[p++]=c[b];return f}function P1(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var f=[];c=c.length;for(var p=0;p<c;p++)f.push(p);return f}f=[],p=0;for(const b in c)f[p++]=b;return f}}}function cg(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var p=P1(c),b=C1(c),O=b.length,L=0;L<O;L++)f.call(void 0,b[L],p&&p[L],c)}var ug=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function j1(c,f){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var b=c[p].indexOf("="),O=null;if(0<=b){var L=c[p].substring(0,b);O=c[p].substring(b+1)}else L=c[p];f(L,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function rs(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof rs){this.h=c.h,Ba(this,c.j),this.o=c.o,this.g=c.g,qa(this,c.s),this.l=c.l;var f=c.i,p=new Zi;p.i=f.i,f.g&&(p.g=new Map(f.g),p.h=f.h),dg(this,p),this.m=c.m}else c&&(f=String(c).match(ug))?(this.h=!1,Ba(this,f[1]||"",!0),this.o=Xi(f[2]||""),this.g=Xi(f[3]||"",!0),qa(this,f[4]),this.l=Xi(f[5]||"",!0),dg(this,f[6]||"",!0),this.m=Xi(f[7]||"")):(this.h=!1,this.i=new Zi(null,this.h))}rs.prototype.toString=function(){var c=[],f=this.j;f&&c.push(Ji(f,hg,!0),":");var p=this.g;return(p||f=="file")&&(c.push("//"),(f=this.o)&&c.push(Ji(f,hg,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(Ji(p,p.charAt(0)=="/"?L1:D1,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",Ji(p,V1)),c.join("")};function Ln(c){return new rs(c)}function Ba(c,f,p){c.j=p?Xi(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function qa(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function dg(c,f,p){f instanceof Zi?(c.i=f,$1(c.i,c.h)):(p||(f=Ji(f,M1)),c.i=new Zi(f,c.h))}function Te(c,f,p){c.i.set(f,p)}function Ha(c){return Te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Xi(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ji(c,f,p){return typeof c=="string"?(c=encodeURI(c).replace(f,O1),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function O1(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var hg=/[#\/\?@]/g,D1=/[#\?:]/g,L1=/[#\?]/g,M1=/[#\?@]/g,V1=/#/g;function Zi(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function lr(c){c.g||(c.g=new Map,c.h=0,c.i&&j1(c.i,function(f,p){c.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}t=Zi.prototype,t.add=function(c,f){lr(this),this.i=null,c=Ms(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(f),this.h+=1,this};function fg(c,f){lr(c),f=Ms(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function mg(c,f){return lr(c),f=Ms(c,f),c.g.has(f)}t.forEach=function(c,f){lr(this),this.g.forEach(function(p,b){p.forEach(function(O){c.call(f,O,b,this)},this)},this)},t.na=function(){lr(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),p=[];for(let b=0;b<f.length;b++){const O=c[b];for(let L=0;L<O.length;L++)p.push(f[b])}return p},t.V=function(c){lr(this);let f=[];if(typeof c=="string")mg(this,c)&&(f=f.concat(this.g.get(Ms(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)f=f.concat(c[p])}return f},t.set=function(c,f){return lr(this),this.i=null,c=Ms(this,c),mg(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function pg(c,f,p){fg(c,f),0<p.length&&(c.i=null,c.g.set(Ms(c,f),k(p)),c.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var p=0;p<f.length;p++){var b=f[p];const L=encodeURIComponent(String(b)),W=this.V(b);for(b=0;b<W.length;b++){var O=L;W[b]!==""&&(O+="="+encodeURIComponent(String(W[b]))),c.push(O)}}return this.i=c.join("&")};function Ms(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function $1(c,f){f&&!c.j&&(lr(c),c.i=null,c.g.forEach(function(p,b){var O=b.toLowerCase();b!=O&&(fg(this,b),pg(this,O,p))},c)),c.j=f}function U1(c,f){const p=new Ki;if(l.Image){const b=new Image;b.onload=x(cr,p,"TestLoadImage: loaded",!0,f,b),b.onerror=x(cr,p,"TestLoadImage: error",!1,f,b),b.onabort=x(cr,p,"TestLoadImage: abort",!1,f,b),b.ontimeout=x(cr,p,"TestLoadImage: timeout",!1,f,b),l.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else f(!1)}function F1(c,f){const p=new Ki,b=new AbortController,O=setTimeout(()=>{b.abort(),cr(p,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:b.signal}).then(L=>{clearTimeout(O),L.ok?cr(p,"TestPingServer: ok",!0,f):cr(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),cr(p,"TestPingServer: error",!1,f)})}function cr(c,f,p,b,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),b(p)}catch{}}function z1(){this.g=new T1}function B1(c,f,p){const b=p||"";try{cg(c,function(O,L){let W=O;d(O)&&(W=Bu(O)),f.push(b+L+"="+encodeURIComponent(W))})}catch(O){throw f.push(b+"type="+encodeURIComponent("_badmap")),O}}function Wa(c){this.l=c.Ub||null,this.j=c.eb||!1}N(Wa,qu),Wa.prototype.g=function(){return new Ga(this.l,this.j)},Wa.prototype.i=function(c){return function(){return c}}({});function Ga(c,f){ot.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Ga,ot),t=Ga.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,to(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,eo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,to(this)),this.g&&(this.readyState=3,to(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gg(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function gg(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?eo(this):to(this),this.readyState==3&&gg(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,eo(this))},t.Qa=function(c){this.g&&(this.response=c,eo(this))},t.ga=function(){this.g&&eo(this)};function eo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,to(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=f.next();return c.join(`\r
`)};function to(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ga.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function yg(c){let f="";return U(c,function(p,b){f+=b,f+=":",f+=p,f+=`\r
`}),f}function ed(c,f,p){e:{for(b in p){var b=!1;break e}b=!0}b||(p=yg(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):Te(c,f,p))}function De(c){ot.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(De,ot);var q1=/^https?$/i,H1=["POST","PUT"];t=De.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,p,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gu.g(),this.v=this.o?Wp(this.o):Wp(Gu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(L){vg(this,L);return}if(c=p||"",p=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var O in b)p.set(O,b[O]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const L of b.keys())p.set(L,b.get(L));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(p.keys()).find(L=>L.toLowerCase()=="content-type"),O=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(H1,f,void 0))||b||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,W]of p)this.g.setRequestHeader(L,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wg(this),this.u=!0,this.g.send(c),this.u=!1}catch(L){vg(this,L)}};function vg(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,xg(c),Qa(c)}function xg(c){c.A||(c.A=!0,_t(c,"complete"),_t(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,_t(this,"complete"),_t(this,"abort"),Qa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qa(this,!0)),De.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?_g(this):this.bb())},t.bb=function(){_g(this)};function _g(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Mn(c)!=4||c.Z()!=2)){if(c.u&&Mn(c)==4)zp(c.Ea,0,c);else if(_t(c,"readystatechange"),Mn(c)==4){c.h=!1;try{const W=c.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var b;if(b=W===0){var O=String(c.D).match(ug)[1]||null;!O&&l.self&&l.self.location&&(O=l.self.location.protocol.slice(0,-1)),b=!q1.test(O?O.toLowerCase():"")}p=b}if(p)_t(c,"complete"),_t(c,"success");else{c.m=6;try{var L=2<Mn(c)?c.g.statusText:""}catch{L=""}c.l=L+" ["+c.Z()+"]",xg(c)}}finally{Qa(c)}}}}function Qa(c,f){if(c.g){wg(c);const p=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||_t(c,"ready");try{p.onreadystatechange=b}catch{}}}function wg(c){c.I&&(l.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Mn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Mn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),b1(f)}};function Eg(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function W1(c){const f={};c=(c.g&&2<=Mn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(w(c[b]))continue;var p=_(c[b]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const L=f[O]||[];f[O]=L,L.push(p)}E(f,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function no(c,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||f}function bg(c){this.Aa=0,this.i=[],this.j=new Ki,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=no("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=no("baseRetryDelayMs",5e3,c),this.cb=no("retryDelaySeedMs",1e4,c),this.Wa=no("forwardChannelMaxRetries",2,c),this.wa=no("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new sg(c&&c.concurrentRequestLimit),this.Da=new z1,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=bg.prototype,t.la=8,t.G=1,t.connect=function(c,f,p,b){wt(0),this.W=c,this.H=f||{},p&&b!==void 0&&(this.H.OSID=p,this.H.OAID=b),this.F=this.X,this.I=Pg(this,null,this.W),Ya(this)};function td(c){if(Tg(c),c.G==3){var f=c.U++,p=Ln(c.I);if(Te(p,"SID",c.K),Te(p,"RID",f),Te(p,"TYPE","terminate"),ro(c,p),f=new ar(c,c.j,f),f.L=2,f.v=Ha(Ln(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=f.v,p=!0),p||(f.g=jg(f.j,null),f.g.ea(f.v)),f.F=Date.now(),za(f)}Cg(c)}function Ka(c){c.g&&(rd(c),c.g.cancel(),c.g=null)}function Tg(c){Ka(c),c.u&&(l.clearTimeout(c.u),c.u=null),Xa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function Ya(c){if(!ig(c.h)&&!c.s){c.s=!0;var f=c.Ga;ye||F(),M||(ye(),M=!0),B.add(f,c),c.B=0}}function G1(c,f){return og(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Qi(g(c.Ga,c,f),kg(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const O=new ar(this,this.j,c);let L=this.o;if(this.S&&(L?(L=y(L),I(L,this.S)):L=this.S),this.m!==null||this.O||(O.H=L,L=null),this.P)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var b=this.i[p];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(f+=b,4096<f){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=Ng(this,O,f),p=Ln(this.I),Te(p,"RID",c),Te(p,"CVER",22),this.D&&Te(p,"X-HTTP-Session-Id",this.D),ro(this,p),L&&(this.O?f="headers="+encodeURIComponent(String(yg(L)))+"&"+f:this.m&&ed(p,this.m,L)),Zu(this.h,O),this.Ua&&Te(p,"TYPE","init"),this.P?(Te(p,"$req",f),Te(p,"SID","null"),O.T=!0,Ku(O,p,null)):Ku(O,p,f),this.G=2}}else this.G==3&&(c?Ig(this,c):this.i.length==0||ig(this.h)||Ig(this))};function Ig(c,f){var p;f?p=f.l:p=c.U++;const b=Ln(c.I);Te(b,"SID",c.K),Te(b,"RID",p),Te(b,"AID",c.T),ro(c,b),c.m&&c.o&&ed(b,c.m,c.o),p=new ar(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),f&&(c.i=f.D.concat(c.i)),f=Ng(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Zu(c.h,p),Ku(p,b,f)}function ro(c,f){c.H&&U(c.H,function(p,b){Te(f,b,p)}),c.l&&cg({},function(p,b){Te(f,b,p)})}function Ng(c,f,p){p=Math.min(c.i.length,p);var b=c.l?g(c.l.Na,c.l,c):null;e:{var O=c.i;let L=-1;for(;;){const W=["count="+p];L==-1?0<p?(L=O[0].g,W.push("ofs="+L)):L=0:W.push("ofs="+L);let we=!0;for(let Ze=0;Ze<p;Ze++){let ge=O[Ze].g;const at=O[Ze].map;if(ge-=L,0>ge)L=Math.max(0,O[Ze].g-100),we=!1;else try{B1(at,W,"req"+ge+"_")}catch{b&&b(at)}}if(we){b=W.join("&");break e}}}return c=c.i.splice(0,p),f.D=c,b}function Sg(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;ye||F(),M||(ye(),M=!0),B.add(f,c),c.v=0}}function nd(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Qi(g(c.Fa,c),kg(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Rg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Qi(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),Ka(this),Rg(this))};function rd(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function Rg(c){c.g=new ar(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=Ln(c.qa);Te(f,"RID","rpc"),Te(f,"SID",c.K),Te(f,"AID",c.T),Te(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&Te(f,"TO",c.ja),Te(f,"TYPE","xmlhttp"),ro(c,f),c.m&&c.o&&ed(f,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=Ha(Ln(f)),p.m=null,p.P=!0,tg(p,c)}t.Za=function(){this.C!=null&&(this.C=null,Ka(this),nd(this),wt(19))};function Xa(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function Ag(c,f){var p=null;if(c.g==f){Xa(c),rd(c),c.g=null;var b=2}else if(Ju(c.h,f))p=f.D,ag(c.h,f),b=1;else return;if(c.G!=0){if(f.o)if(b==1){p=f.m?f.m.length:0,f=Date.now()-f.F;var O=c.B;b=$a(),_t(b,new Xp(b,p)),Ya(c)}else Sg(c);else if(O=f.s,O==3||O==0&&0<f.X||!(b==1&&G1(c,f)||b==2&&nd(c)))switch(p&&0<p.length&&(f=c.h,f.i=f.i.concat(p)),O){case 1:ss(c,5);break;case 4:ss(c,10);break;case 3:ss(c,6);break;default:ss(c,2)}}}function kg(c,f){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*f}function ss(c,f){if(c.j.info("Error code "+f),f==2){var p=g(c.fb,c),b=c.Xa;const O=!b;b=new rs(b||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ba(b,"https"),Ha(b),O?U1(b.toString(),p):F1(b.toString(),p)}else wt(2);c.G=0,c.l&&c.l.sa(f),Cg(c),Tg(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Cg(c){if(c.G=0,c.ka=[],c.l){const f=lg(c.h);(f.length!=0||c.i.length!=0)&&(C(c.ka,f),C(c.ka,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.ra()}}function Pg(c,f,p){var b=p instanceof rs?Ln(p):new rs(p);if(b.g!="")f&&(b.g=f+"."+b.g),qa(b,b.s);else{var O=l.location;b=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var L=new rs(null);b&&Ba(L,b),f&&(L.g=f),O&&qa(L,O),p&&(L.l=p),b=L}return p=c.D,f=c.ya,p&&f&&Te(b,p,f),Te(b,"VER",c.la),ro(c,b),b}function jg(c,f,p){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new De(new Wa({eb:p})):new De(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Og(){}t=Og.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ja(){}Ja.prototype.g=function(c,f){return new $t(c,f)};function $t(c,f){ot.call(this),this.g=new bg(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!w(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!w(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Vs(this)}N($t,ot),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){td(this.g)},$t.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=Bu(c),c=p);f.i.push(new k1(f.Ya++,c)),f.G==3&&Ya(f)},$t.prototype.N=function(){this.g.l=null,delete this.j,td(this.g),delete this.g,$t.aa.N.call(this)};function Dg(c){Hu.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const p in f){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}N(Dg,Hu);function Lg(){Wu.call(this),this.status=1}N(Lg,Wu);function Vs(c){this.g=c}N(Vs,Og),Vs.prototype.ua=function(){_t(this.g,"a")},Vs.prototype.ta=function(c){_t(this.g,new Dg(c))},Vs.prototype.sa=function(c){_t(this.g,new Lg)},Vs.prototype.ra=function(){_t(this.g,"b")},Ja.prototype.createWebChannel=Ja.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,gE=function(){return new Ja},pE=function(){return $a()},mE=ts,of={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ua.NO_ERROR=0,Ua.TIMEOUT=8,Ua.HTTP_ERROR=6,Kl=Ua,Jp.COMPLETE="complete",fE=Jp,Gp.EventType=Wi,Wi.OPEN="a",Wi.CLOSE="b",Wi.ERROR="c",Wi.MESSAGE="d",ot.prototype.listen=ot.prototype.K,wo=Gp,De.prototype.listenOnce=De.prototype.L,De.prototype.getLastError=De.prototype.Ka,De.prototype.getLastErrorCode=De.prototype.Ba,De.prototype.getStatus=De.prototype.Z,De.prototype.getResponseJson=De.prototype.Oa,De.prototype.getResponseText=De.prototype.oa,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Ha,hE=De}).apply(typeof _l<"u"?_l:typeof self<"u"?self:typeof window<"u"?window:{});const ky="@firebase/firestore",Cy="4.7.12";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $i="11.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new Am("@firebase/firestore");function Fs(){return Ss.logLevel}function X(t,...e){if(Ss.logLevel<=de.DEBUG){const n=e.map(Fm);Ss.debug(`Firestore (${$i}): ${t}`,...n)}}function er(t,...e){if(Ss.logLevel<=de.ERROR){const n=e.map(Fm);Ss.error(`Firestore (${$i}): ${t}`,...n)}}function Ei(t,...e){if(Ss.logLevel<=de.WARN){const n=e.map(Fm);Ss.warn(`Firestore (${$i}): ${t}`,...n)}}function Fm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,yE(t,r,n)}function yE(t,e,n){let r=`FIRESTORE (${$i}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw er(r),new Error(r)}function ve(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||yE(e,s,r)}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends On{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ht.UNAUTHENTICATED))}shutdown(){}}class eC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class tC{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new kn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new kn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new kn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new vE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new ht(e)}}class nC{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class rC{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new nC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Py{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ve(this.o===void 0,3512);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Py(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Py(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=iC(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function af(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return le(r,s);{const i=xE(),o=oC(i.encode(jy(t,n)),i.encode(jy(e,n)));return o!==0?o:le(r,s)}}n+=r>65535?2:1}return le(t.length,e.length)}function jy(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function oC(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return le(t[n],e[n]);return le(t.length,e.length)}function bi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy=-62135596800,Dy=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Dy);return new Qe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Oy)throw new G(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Dy}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Oy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{static fromTimestamp(e){return new oe(e)}static min(){return new oe(new Qe(0,0))}static max(){return new oe(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="__name__";class En{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return En.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof En?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=En.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return le(e.length,n.length)}static compareSegments(e,n){const r=En.isNumericId(e),s=En.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?En.extractNumericId(e).compare(En.extractNumericId(n)):af(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Dr.fromString(e.substring(4,e.length-2))}}class Ee extends En{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const aC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends En{construct(e,n,r){return new nt(e,n,r)}static isValidIdentifier(e){return aC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ly}static keyField(){return new nt([Ly])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new G(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new G(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Ee.fromString(e))}static fromName(e){return new te(Ee.fromString(e).popFirst(5))}static empty(){return new te(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Ee(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=-1;function lC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=oe.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new Fr(s,te.empty(),e)}function cC(t){return new Fr(t.readTime,t.key,oa)}class Fr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fr(oe.min(),te.empty(),oa)}static max(){return new Fr(oe.max(),te.empty(),oa)}}function uC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ui(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==dC)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(s=>s?$.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new $((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(h=>{o[d]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new $((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function fC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}yu.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=-1;function vu(t){return t==null}function Mc(t){return t===0&&1/t==-1/0}function mC(t){return typeof t=="number"&&Number.isInteger(t)&&!Mc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="";function pC(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=My(e)),e=gC(t.get(n),e);return My(e)}function gC(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case wE:n+="";break;default:n+=i}}return n}function My(t){return t+wE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yC(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function EE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.comparator=e,this.root=n||tt.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tt.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wl(this.root,e,this.comparator,!1)}getReverseIterator(){return new wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wl(this.root,e,this.comparator,!0)}}class wl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??tt.RED,this.left=s??tt.EMPTY,this.right=i??tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new tt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return tt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw se(27949);return e+(this.isRed()?0:1)}}tt.EMPTY=null,tt.RED=!0,tt.BLACK=!1;tt.EMPTY=new class{constructor(){this.size=0}get key(){throw se(57766)}get value(){throw se(16141)}get color(){throw se(16727)}get left(){throw se(29726)}get right(){throw se(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $y(this.data.getIterator())}getIteratorFrom(e){return new $y(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ke(this.comparator);return n.data=e,n}}class $y{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new qt([])}unionWith(e){let n=new Ke(nt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new qt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new bE("Invalid base64 string: "+i):i}}(e);return new it(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new it(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const vC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zr(t){if(ve(!!t,39018),typeof t=="string"){let e=0;const n=vC.exec(t);if(ve(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Br(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="server_timestamp",IE="__type__",NE="__previous_value__",SE="__local_write_time__";function xu(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[IE])===null||n===void 0?void 0:n.stringValue)===TE}function _u(t){const e=t.mapValue.fields[NE];return xu(e)?_u(e):e}function aa(t){const e=zr(t.mapValue.fields[SE].timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n,r,s,i,o,l,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const Vc="(default)";class la{constructor(e,n){this.projectId=e,this.database=n||Vc}static empty(){return new la("","")}get isDefaultDatabase(){return this.database===Vc}isEqual(e){return e instanceof la&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="__type__",_C="__max__",El={mapValue:{}},AE="__vector__",$c="value";function qr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xu(t)?4:EC(t)?9007199254740991:wC(t)?10:11:se(28295,{value:t})}function jn(t,e){if(t===e)return!0;const n=qr(t);if(n!==qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return aa(t).isEqual(aa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=zr(s.timestampValue),l=zr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Br(s.bytesValue).isEqual(Br(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Fe(s.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(s.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Fe(s.integerValue)===Fe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Fe(s.doubleValue),l=Fe(i.doubleValue);return o===l?Mc(o)===Mc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return bi(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Vy(o)!==Vy(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!jn(o[u],l[u])))return!1;return!0}(t,e);default:return se(52216,{left:t})}}function ca(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function Ti(t,e){if(t===e)return 0;const n=qr(t),r=qr(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Fe(i.integerValue||i.doubleValue),u=Fe(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Uy(t.timestampValue,e.timestampValue);case 4:return Uy(aa(t),aa(e));case 5:return af(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Br(i),u=Br(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=le(l[d],u[d]);if(h!==0)return h}return le(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=le(Fe(i.latitude),Fe(o.latitude));return l!==0?l:le(Fe(i.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Fy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,h;const m=i.fields||{},g=o.fields||{},x=(l=m[$c])===null||l===void 0?void 0:l.arrayValue,N=(u=g[$c])===null||u===void 0?void 0:u.arrayValue,k=le(((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0,((h=N==null?void 0:N.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:Fy(x,N)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===El.mapValue&&o===El.mapValue)return 0;if(i===El.mapValue)return 1;if(o===El.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const g=af(u[m],h[m]);if(g!==0)return g;const x=Ti(l[u[m]],d[h[m]]);if(x!==0)return x}return le(u.length,h.length)}(t.mapValue,e.mapValue);default:throw se(23264,{Pe:n})}}function Uy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=zr(t),r=zr(e),s=le(n.seconds,r.seconds);return s!==0?s:le(n.nanos,r.nanos)}function Fy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ti(n[s],r[s]);if(i)return i}return le(n.length,r.length)}function Ii(t){return lf(t)}function lf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=zr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Br(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=lf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${lf(n.fields[o])}`;return s+"}"}(t.mapValue):se(61005,{value:t})}function Yl(t){switch(qr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_u(t);return e?16+Yl(e):16;case 5:return 2*t.stringValue.length;case 6:return Br(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Yl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Xr(r.fields,(i,o)=>{s+=i.length+Yl(o)}),s}(t.mapValue);default:throw se(13486,{value:t})}}function Uc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function cf(t){return!!t&&"integerValue"in t}function Bm(t){return!!t&&"arrayValue"in t}function zy(t){return!!t&&"nullValue"in t}function By(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xl(t){return!!t&&"mapValue"in t}function wC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[RE])===null||n===void 0?void 0:n.stringValue)===AE}function Do(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Xr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Do(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Do(t.arrayValue.values[n]);return e}return Object.assign({},t)}function EC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===_C}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.value=e}static empty(){return new Pt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Do(n)}setAll(e){let n=nt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Do(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Xl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Xl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Xr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Pt(Do(this.value))}}function kE(t){const e=[];return Xr(t.fields,(n,r)=>{const s=new nt([n]);if(Xl(r)){const i=kE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new qt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new mt(e,0,oe.min(),oe.min(),oe.min(),Pt.empty(),0)}static newFoundDocument(e,n,r,s){return new mt(e,1,n,oe.min(),r,s,0)}static newNoDocument(e,n){return new mt(e,2,n,oe.min(),oe.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,oe.min(),oe.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n){this.position=e,this.inclusive=n}}function qy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Ti(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Hy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n="asc"){this.field=e,this.dir=n}}function bC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{}class He extends CE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new IC(e,n,r):n==="array-contains"?new RC(e,r):n==="in"?new AC(e,r):n==="not-in"?new kC(e,r):n==="array-contains-any"?new CC(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new NC(e,r):new SC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ti(n,this.value)):n!==null&&qr(this.value)===qr(n)&&this.matchesComparison(Ti(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pn extends CE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new pn(e,n)}matches(e){return PE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function PE(t){return t.op==="and"}function jE(t){return TC(t)&&PE(t)}function TC(t){for(const e of t.filters)if(e instanceof pn)return!1;return!0}function uf(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+Ii(t.value);if(jE(t))return t.filters.map(e=>uf(e)).join(",");{const e=t.filters.map(n=>uf(n)).join(",");return`${t.op}(${e})`}}function OE(t,e){return t instanceof He?function(r,s){return s instanceof He&&r.op===s.op&&r.field.isEqual(s.field)&&jn(r.value,s.value)}(t,e):t instanceof pn?function(r,s){return s instanceof pn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&OE(o,s.filters[l]),!0):!1}(t,e):void se(19439)}function DE(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${Ii(n.value)}`}(t):t instanceof pn?function(n){return n.op.toString()+" {"+n.getFilters().map(DE).join(" ,")+"}"}(t):"Filter"}class IC extends He{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class NC extends He{constructor(e,n){super(e,"in",n),this.keys=LE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class SC extends He{constructor(e,n){super(e,"not-in",n),this.keys=LE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function LE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class RC extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bm(n)&&ca(n.arrayValue,this.value)}}class AC extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ca(this.value.arrayValue,n)}}class kC extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(ca(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ca(this.value.arrayValue,n)}}class CC extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ca(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Ie=null}}function Wy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new PC(t,e,n,r,s,i,o)}function qm(t){const e=ie(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>uf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),vu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ii(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ii(r)).join(",")),e.Ie=n}return e.Ie}function Hm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!OE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Hy(t.startAt,e.startAt)&&Hy(t.endAt,e.endAt)}function df(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function jC(t,e,n,r,s,i,o,l){return new js(t,e,n,r,s,i,o,l)}function wu(t){return new js(t)}function Gy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Wm(t){return t.collectionGroup!==null}function fi(t){const e=ie(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ke(nt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new ua(i,r))}),n.has(nt.keyField().canonicalString())||e.Ee.push(new ua(nt.keyField(),r))}return e.Ee}function Cn(t){const e=ie(t);return e.de||(e.de=ME(e,fi(t))),e.de}function OC(t){const e=ie(t);return e.Ae||(e.Ae=ME(e,t.explicitOrderBy)),e.Ae}function ME(t,e){if(t.limitType==="F")return Wy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ua(s.field,i)});const n=t.endAt?new Ni(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ni(t.startAt.position,t.startAt.inclusive):null;return Wy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function hf(t,e){const n=t.filters.concat([e]);return new js(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fc(t,e,n){return new js(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Eu(t,e){return Hm(Cn(t),Cn(e))&&t.limitType===e.limitType}function VE(t){return`${qm(Cn(t))}|lt:${t.limitType}`}function zs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>DE(s)).join(", ")}]`),vu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ii(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ii(s)).join(",")),`Target(${r})`}(Cn(t))}; limitType=${t.limitType})`}function bu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of fi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=qy(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,fi(r),s)||r.endAt&&!function(o,l,u){const d=qy(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,fi(r),s))}(t,e)}function DC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $E(t){return(e,n)=>{let r=!1;for(const s of fi(t)){const i=LC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function LC(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Ti(u,d):se(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Xr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return EE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=new Oe(te.comparator);function tr(){return MC}const UE=new Oe(te.comparator);function Eo(...t){let e=UE;for(const n of t)e=e.insert(n.key,n);return e}function FE(t){let e=UE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function fs(){return Lo()}function zE(){return Lo()}function Lo(){return new Os(t=>t.toString(),(t,e)=>t.isEqual(e))}const VC=new Oe(te.comparator),$C=new Ke(te.comparator);function he(...t){let e=$C;for(const n of t)e=e.add(n);return e}const UC=new Ke(le);function FC(){return UC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mc(e)?"-0":e}}function BE(t){return{integerValue:""+t}}function qE(t,e){return mC(e)?BE(e):Gm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(){this._=void 0}}function zC(t,e,n){return t instanceof da?function(s,i){const o={fields:{[IE]:{stringValue:TE},[SE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&xu(i)&&(i=_u(i)),i&&(o.fields[NE]=i),{mapValue:o}}(n,e):t instanceof ha?WE(t,e):t instanceof fa?GE(t,e):function(s,i){const o=HE(s,i),l=Qy(o)+Qy(s.Re);return cf(o)&&cf(s.Re)?BE(l):Gm(s.serializer,l)}(t,e)}function BC(t,e,n){return t instanceof ha?WE(t,e):t instanceof fa?GE(t,e):n}function HE(t,e){return t instanceof ma?function(r){return cf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class da extends Tu{}class ha extends Tu{constructor(e){super(),this.elements=e}}function WE(t,e){const n=QE(e);for(const r of t.elements)n.some(s=>jn(s,r))||n.push(r);return{arrayValue:{values:n}}}class fa extends Tu{constructor(e){super(),this.elements=e}}function GE(t,e){let n=QE(e);for(const r of t.elements)n=n.filter(s=>!jn(s,r));return{arrayValue:{values:n}}}class ma extends Tu{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Qy(t){return Fe(t.integerValue||t.doubleValue)}function QE(t){return Bm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n){this.field=e,this.transform=n}}function qC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ha&&s instanceof ha||r instanceof fa&&s instanceof fa?bi(r.elements,s.elements,jn):r instanceof ma&&s instanceof ma?jn(r.Re,s.Re):r instanceof da&&s instanceof da}(t.transform,e.transform)}class HC{constructor(e,n){this.version=e,this.transformResults=n}}class It{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new It}static exists(e){return new It(void 0,e)}static updateTime(e){return new It(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Iu{}function YE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nu(t.key,It.none()):new ka(t.key,t.data,It.none());{const n=t.data,r=Pt.empty();let s=new Ke(nt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Jr(t.key,r,new qt(s.toArray()),It.none())}}function WC(t,e,n){t instanceof ka?function(s,i,o){const l=s.value.clone(),u=Yy(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Jr?function(s,i,o){if(!Jl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Yy(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(XE(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Mo(t,e,n,r){return t instanceof ka?function(i,o,l,u){if(!Jl(i.precondition,o))return l;const d=i.value.clone(),h=Xy(i.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Jr?function(i,o,l,u){if(!Jl(i.precondition,o))return l;const d=Xy(i.fieldTransforms,u,o),h=o.data;return h.setAll(XE(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return Jl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function GC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=HE(r.transform,s||null);i!=null&&(n===null&&(n=Pt.empty()),n.set(r.field,i))}return n||null}function Ky(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&bi(r,s,(i,o)=>qC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ka extends Iu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Jr extends Iu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function XE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Yy(t,e,n){const r=new Map;ve(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,BC(o,l,n[s]))}return r}function Xy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,zC(i,o,e))}return r}class Nu extends Iu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QC extends Iu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&WC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Mo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Mo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=zE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=YE(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&bi(this.mutations,e.mutations,(n,r)=>Ky(n,r))&&bi(this.baseMutations,e.baseMutations,(n,r)=>Ky(n,r))}}class Qm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ve(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return VC}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Qm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,me;function ZC(t){switch(t){case V.OK:return se(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return se(15467,{code:t})}}function JE(t){if(t===void 0)return er("GRPC error has no .code"),V.UNKNOWN;switch(t){case Be.OK:return V.OK;case Be.CANCELLED:return V.CANCELLED;case Be.UNKNOWN:return V.UNKNOWN;case Be.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Be.INTERNAL:return V.INTERNAL;case Be.UNAVAILABLE:return V.UNAVAILABLE;case Be.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Be.NOT_FOUND:return V.NOT_FOUND;case Be.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Be.ABORTED:return V.ABORTED;case Be.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Be.DATA_LOSS:return V.DATA_LOSS;default:return se(39323,{code:t})}}(me=Be||(Be={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=new Dr([4294967295,4294967295],0);function Jy(t){const e=xE().encode(t),n=new dE;return n.update(e),new Uint8Array(n.digest())}function Zy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Dr([n,r],0),new Dr([s,i],0)]}class Km{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new bo(`Invalid padding: ${n}`);if(r<0)throw new bo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new bo(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Dr.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(Dr.fromNumber(r)));return s.compare(eP)===1&&(s=new Dr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Jy(e),[r,s]=Zy(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.be(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Km(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.pe===0)return;const n=Jy(e),[r,s]=Zy(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class bo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ca.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Su(oe.min(),s,new Oe(le),tr(),he())}}class Ca{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ca(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class ZE{constructor(e,n){this.targetId=e,this.Ce=n}}class eb{constructor(e,n,r=it.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ev{constructor(){this.Fe=0,this.Me=tv(),this.xe=it.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=he(),n=he(),r=he();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:se(38017,{changeType:i})}}),new Ca(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=tv()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ve(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class tP{constructor(e){this.ze=e,this.je=new Map,this.He=tr(),this.Je=bl(),this.Ye=bl(),this.Ze=new Oe(le)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:se(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(df(i))if(r===0){const o=new te(i.path);this.tt(n,o,mt.newNoDocument(o,oe.min()))}else ve(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const l=this.ct(e),u=l?this.lt(l,e,o):1;if(u!==0){this.st(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Br(r).toUint8Array()}catch(u){if(u instanceof bE)return Ei("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Km(o,s,i)}catch(u){return Ei(u instanceof bo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.pe===0?null:l}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,o)=>{const l=this._t(o);if(l){if(i.current&&df(l.target)){const u=new te(l.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,mt.newNoDocument(u,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let r=he();this.Ye.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this._t(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new Su(e,n,this.Ze,this.He,r);return this.He=tr(),this.Je=bl(),this.Ye=bl(),this.Ze=new Oe(le),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new ev,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Ke(le),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Ke(le),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new ev),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function bl(){return new Oe(te.comparator)}function tv(){return new Oe(te.comparator)}const nP={asc:"ASCENDING",desc:"DESCENDING"},rP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sP={and:"AND",or:"OR"};class iP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ff(t,e){return t.useProto3Json||vu(e)?e:{value:e}}function zc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oP(t,e){return zc(t,e.toTimestamp())}function Pn(t){return ve(!!t,49232),oe.fromTimestamp(function(n){const r=zr(n);return new Qe(r.seconds,r.nanos)}(t))}function Ym(t,e){return mf(t,e).canonicalString()}function mf(t,e){const n=function(s){return new Ee(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function nb(t){const e=Ee.fromString(t);return ve(lb(e),10190,{key:e.toString()}),e}function pf(t,e){return Ym(t.databaseId,e.path)}function Ud(t,e){const n=nb(e);if(n.get(1)!==t.databaseId.projectId)throw new G(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(sb(n))}function rb(t,e){return Ym(t.databaseId,e)}function aP(t){const e=nb(t);return e.length===4?Ee.emptyPath():sb(e)}function gf(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sb(t){return ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function nv(t,e,n){return{name:pf(t,e),fields:n.value.mapValue.fields}}function lP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:se(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(ve(h===void 0||typeof h=="string",58123),it.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),it.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?V.UNKNOWN:JE(d.code);return new G(h,d.message||"")}(o);n=new eb(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ud(t,r.document.name),i=Pn(r.document.updateTime),o=r.document.createTime?Pn(r.document.createTime):oe.min(),l=new Pt({mapValue:{fields:r.document.fields}}),u=mt.newFoundDocument(s,i,o,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Zl(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ud(t,r.document),i=r.readTime?Pn(r.readTime):oe.min(),o=mt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Zl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ud(t,r.document),i=r.removedTargetIds||[];n=new Zl([],i,s,null)}else{if(!("filter"in e))return se(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new JC(s,i),l=r.targetId;n=new ZE(l,o)}}return n}function cP(t,e){let n;if(e instanceof ka)n={update:nv(t,e.key,e.value)};else if(e instanceof Nu)n={delete:pf(t,e.key)};else if(e instanceof Jr)n={update:nv(t,e.key,e.data),updateMask:vP(e.fieldMask)};else{if(!(e instanceof QC))return se(16599,{ft:e.type});n={verify:pf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof da)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ha)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof fa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ma)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw se(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:oP(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:se(27497)}(t,e.precondition)),n}function uP(t,e){return t&&t.length>0?(ve(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Pn(s.updateTime):Pn(i);return o.isEqual(oe.min())&&(o=Pn(i)),new HC(o,s.transformResults||[])}(n,e))):[]}function dP(t,e){return{documents:[rb(t,e.path)]}}function ib(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rb(t,s);const i=function(d){if(d.length!==0)return ab(pn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(g){return{field:_r(g.field),direction:pP(g.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=ff(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:s}}function hP(t,e,n,r){const{gt:s,parent:i}=ib(t,e),o={},l=[];let u=0;return n.forEach(d=>{const h="aggregate_"+u++;o[h]=d.alias,d.aggregateType==="count"?l.push({alias:h,count:{}}):d.aggregateType==="avg"?l.push({alias:h,avg:{field:_r(d.fieldPath)}}):d.aggregateType==="sum"&&l.push({alias:h,sum:{field:_r(d.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:l,structuredQuery:s.structuredQuery},parent:s.parent},yt:o,parent:i}}function fP(t){let e=aP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ve(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(m){const g=ob(m);return g instanceof pn&&jE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(N){return new ua(Bs(N.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,vu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,x=m.values||[];return new Ni(x,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,x=m.values||[];return new Ni(x,g)}(n.endAt)),jC(e,s,o,i,l,"F",u,d)}function mP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ob(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Bs(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Bs(n.unaryFilter.field);return He.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Bs(n.unaryFilter.field);return He.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Bs(n.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return se(61313);default:return se(60726)}}(t):t.fieldFilter!==void 0?function(n){return He.create(Bs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return se(58110);default:return se(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return pn.create(n.compositeFilter.filters.map(r=>ob(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return se(1026)}}(n.compositeFilter.op))}(t):se(30097,{filter:t})}function pP(t){return nP[t]}function gP(t){return rP[t]}function yP(t){return sP[t]}function _r(t){return{fieldPath:t.canonicalString()}}function Bs(t){return nt.fromServerFormat(t.fieldPath)}function ab(t){return t instanceof He?function(n){if(n.op==="=="){if(By(n.value))return{unaryFilter:{field:_r(n.field),op:"IS_NAN"}};if(zy(n.value))return{unaryFilter:{field:_r(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(By(n.value))return{unaryFilter:{field:_r(n.field),op:"IS_NOT_NAN"}};if(zy(n.value))return{unaryFilter:{field:_r(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_r(n.field),op:gP(n.op),value:n.value}}}(t):t instanceof pn?function(n){const r=n.getFilters().map(s=>ab(s));return r.length===1?r[0]:{compositeFilter:{op:yP(n.op),filters:r}}}(t):se(54877,{filter:t})}function vP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function lb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n,r,s,i=oe.min(),o=oe.min(),l=it.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e){this.wt=e}}function _P(t){const e=fP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this.yn=new EP}addToCollectionParentIndex(e,n){return this.yn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.yn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Fr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Fr.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class EP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ke(Ee.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ke(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cb=41943040;class kt{static withCacheSize(e){return new kt(e,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(cb,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Si(0)}static ir(){return new Si(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="LruGarbageCollector",bP=1048576;function iv([t,e],[n,r]){const s=le(t,n);return s===0?le(e,r):s}class TP{constructor(e){this.cr=e,this.buffer=new Ke(iv),this.lr=0}hr(){return++this.lr}Pr(e){const n=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();iv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class IP{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){X(sv,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fi(n)?X(sv,"Ignoring IndexedDB error during garbage collection: ",n):await Ui(n)}await this.Ir(3e5)})}}class NP{constructor(e,n){this.Er=e,this.params=n}calculateTargetCount(e,n){return this.Er.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(yu.le);const r=new TP(n);return this.Er.forEachTarget(e,s=>r.Pr(s.sequenceNumber)).next(()=>this.Er.Ar(e,s=>r.Pr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Er.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Er.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(rv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rv):this.Rr(e,n))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,n){let r,s,i,o,l,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Fs()<=de.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function SP(t,e){return new NP(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.changes=new Os(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Mo(r.mutation,s,qt.empty(),Qe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const s=fs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Eo();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=fs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=tr();const o=Lo(),l=function(){return Lo()}();return n.forEach((u,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Jr)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Mo(h.mutation,d,h.mutation.getFieldMask(),Qe.now())):o.set(d.key,qt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var m;return l.set(d,new AP(h,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Lo();let s=new Oe((o,l)=>o-l),i=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||qt.empty();h=l.applyToLocalView(d,h),r.set(u,h);const m=(s.get(l.batchId)||he()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,m=zE();h.forEach(g=>{if(!i.has(g)){const x=YE(n.get(g),r.get(g));x!==null&&m.set(g,x),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Wm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):$.resolve(fs());let l=oa,u=i;return o.next(d=>$.forEach(d,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,he())).next(h=>({batchId:l,changes:FE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=Eo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Eo();return this.indexManager.getCollectionParents(e,i).next(l=>$.forEach(l,u=>{const d=function(m,g){return new js(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,mt.newInvalidDocument(h)))});let l=Eo();return o.forEach((u,d)=>{const h=i.get(u);h!==void 0&&Mo(h.mutation,d,qt.empty(),Qe.now()),bu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,n){return $.resolve(this.Fr.get(n))}saveBundleMetadata(e,n){return this.Fr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Pn(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Mr.get(n))}saveNamedQuery(e,n){return this.Mr.set(n.name,function(s){return{name:s.name,query:_P(s.bundledQuery),readTime:Pn(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.overlays=new Oe(te.comparator),this.Or=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=fs();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Or.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Or.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const s=fs(),i=n.length+1,o=new te(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Oe((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=fs(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=fs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return $.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Or.get(s.largestBatchId).delete(r.key);this.Or.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new YC(n,r));let i=this.Or.get(n);i===void 0&&(i=he(),this.Or.set(n,i)),this.Or.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(){this.Nr=new Ke(Ye.Br),this.Lr=new Ke(Ye.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,n){const r=new Ye(e,n);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Qr(new Ye(e,n))}$r(e,n){e.forEach(r=>this.removeReference(r,n))}Ur(e){const n=new te(new Ee([])),r=new Ye(n,e),s=new Ye(n,e+1),i=[];return this.Lr.forEachInRange([r,s],o=>{this.Qr(o),i.push(o.key)}),i}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const n=new te(new Ee([])),r=new Ye(n,e),s=new Ye(n,e+1);let i=he();return this.Lr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ye(e,0),r=this.Nr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ye{constructor(e,n){this.key=e,this.Gr=n}static Br(e,n){return te.comparator(e.key,n.key)||le(e.Gr,n.Gr)}static kr(e,n){return le(e.Gr,n.Gr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Jn=1,this.zr=new Ke(Ye.Br)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new KC(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.zr=this.zr.add(new Ye(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.jr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Hr(r),i=s<0?0:s;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?zm:this.Jn-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ye(n,0),s=new Ye(n,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([r,s],o=>{const l=this.jr(o.Gr);i.push(l)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ke(le);return n.forEach(s=>{const i=new Ye(s,0),o=new Ye(s,Number.POSITIVE_INFINITY);this.zr.forEachInRange([i,o],l=>{r=r.add(l.Gr)})}),$.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new Ye(new te(i),0);let l=new Ke(le);return this.zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Gr)),!0)},o),$.resolve(this.Jr(l))}Jr(e){const n=[];return e.forEach(r=>{const s=this.jr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ve(this.Yr(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return $.forEach(n.mutations,s=>{const i=new Ye(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,n){const r=new Ye(n,0),s=this.zr.firstAfterOrEqual(r);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Yr(e,n){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const n=this.Hr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e){this.Zr=e,this.docs=function(){return new Oe(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Zr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let r=tr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():mt.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=tr();const o=n.path,l=new te(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||uC(cC(h),r)<=0||(s.has(h.key)||bu(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,r,s){se(9500)}Xr(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new LP(this)}getSize(e){return $.resolve(this.size)}}class LP extends RP{constructor(e){super(),this.vr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.vr.addEntry(e,s)):this.vr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.vr.getEntry(e,n)}getAllFromCache(e,n){return this.vr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e){this.persistence=e,this.ei=new Os(n=>qm(n),Hm),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.ti=0,this.ni=new Xm,this.targetCount=0,this.ri=Si.rr()}forEachTarget(e,n){return this.ei.forEach((r,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ti&&(this.ti=n),$.resolve()}ar(e){this.ei.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ri=new Si(n),this.highestTargetId=n),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,n){return this.ar(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.ar(n),$.resolve()}removeTargetData(e,n){return this.ei.delete(n.target),this.ni.Ur(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ei.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ei.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),$.waitFor(i).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.ei.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.ni.qr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.ni.$r(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ni.Ur(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ni.Wr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.ni.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,n){this.ii={},this.overlays={},this.si=new yu(0),this.oi=!1,this.oi=!0,this._i=new jP,this.referenceDelegate=e(this),this.ai=new MP(this),this.indexManager=new wP,this.remoteDocumentCache=function(s){return new DP(s)}(r=>this.referenceDelegate.ui(r)),this.serializer=new xP(n),this.ci=new CP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new PP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ii[e.toKey()];return r||(r=new OP(n,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new VP(this.si.next());return this.referenceDelegate.li(),r(s).next(i=>this.referenceDelegate.hi(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Pi(e,n){return $.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,n)))}}class VP extends hC{constructor(e){super(),this.currentSequenceNumber=e}}class Jm{constructor(e){this.persistence=e,this.Ti=new Xm,this.Ii=null}static Ei(e){return new Jm(e)}get di(){if(this.Ii)return this.Ii;throw se(60996)}addReference(e,n,r){return this.Ti.addReference(r,n),this.di.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Ti.removeReference(r,n),this.di.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ti.Ur(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}li(){this.Ii=new Set}hi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.di,r=>{const s=te.fromPath(r);return this.Ai(e,s).next(i=>{i||n.removeEntry(s,oe.min())})}).next(()=>(this.Ii=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ai(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}ui(e){return 0}Ai(e,n){return $.or([()=>$.resolve(this.Ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Pi(e,n)])}}class Bc{constructor(e,n){this.persistence=e,this.Ri=new Os(r=>pC(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=SP(this,n)}static Ei(e,n){return new Bc(e,n)}li(){}hi(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}Vr(e){let n=0;return this.Ar(e,r=>{n++}).next(()=>n)}Ar(e,n){return $.forEach(this.Ri,(r,s)=>this.gr(e,r,s).next(i=>i?$.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Xr(e,o=>this.gr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,oe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.Ri.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.Ri.set(n,e.currentSequenceNumber),$.resolve()}ui(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Yl(e.data.value)),n}gr(e,n,r){return $.or([()=>this.persistence.Pi(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.Ri.get(n);return $.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ls=r,this.hs=s}static Ps(e,n){let r=he(),s=he();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Zm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return gR()?8:fC(vt())>0?6:4}()}initialize(e,n){this.As=e,this.indexManager=n,this.Ts=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Rs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Vs(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new $P;return this.fs(e,n,o).next(l=>{if(i.result=l,this.Is)return this.gs(e,n,o,l.size)})}).next(()=>i.result)}gs(e,n,r,s){return r.documentReadCount<this.Es?(Fs()<=de.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",zs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),$.resolve()):(Fs()<=de.DEBUG&&X("QueryEngine","Query:",zs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Fs()<=de.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",zs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cn(n))):$.resolve())}Rs(e,n){if(Gy(n))return $.resolve(null);let r=Cn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Fc(n,null,"F"),r=Cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=he(...i);return this.As.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ps(n,l);return this.ys(n,d,o,u.readTime)?this.Rs(e,Fc(n,null,"F")):this.ws(e,d,n,u)}))})))}Vs(e,n,r,s){return Gy(n)||s.isEqual(oe.min())?$.resolve(null):this.As.getDocuments(e,r).next(i=>{const o=this.ps(n,i);return this.ys(n,o,r,s)?$.resolve(null):(Fs()<=de.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),zs(n)),this.ws(e,o,n,lC(s,oa)).next(l=>l))})}ps(e,n){let r=new Ke($E(e));return n.forEach((s,i)=>{bu(e,i)&&(r=r.add(i))}),r}ys(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}fs(e,n,r){return Fs()<=de.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",zs(n)),this.As.getDocumentsMatchingQuery(e,n,Fr.min(),r)}ws(e,n,r,s){return this.As.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="LocalStore",FP=3e8;class zP{constructor(e,n,r,s){this.persistence=e,this.bs=n,this.serializer=s,this.Ss=new Oe(le),this.Ds=new Os(i=>qm(i),Hm),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kP(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ss))}}function BP(t,e,n,r){return new zP(t,e,n,r)}async function db(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Fs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=he();for(const d of s){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ms:d,removedBatchIds:o,addedBatchIds:l}))})})}function qP(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const m=d.batch,g=m.keys();let x=$.resolve();return g.forEach(N=>{x=x.next(()=>h.getEntry(u,N)).next(k=>{const C=d.docVersions.get(N);ve(C!==null,48541),k.version.compareTo(C)<0&&(m.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),h.addEntry(k)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=he();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function hb(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ai.getLastRemoteSnapshotVersion(n))}function HP(t,e){const n=ie(t),r=e.snapshotVersion;let s=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Cs.newChangeBuffer({trackRemovals:!0});s=n.Ss;const l=[];e.targetChanges.forEach((h,m)=>{const g=s.get(m);if(!g)return;l.push(n.ai.removeMatchingKeys(i,h.removedDocuments,m).next(()=>n.ai.addMatchingKeys(i,h.addedDocuments,m)));let x=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?x=x.withResumeToken(it.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):h.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(h.resumeToken,r)),s=s.insert(m,x),function(k,C,T){return k.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=FP?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(g,x,h)&&l.push(n.ai.updateTargetData(i,x))});let u=tr(),d=he();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(WP(i,o,e.documentUpdates).next(h=>{u=h.xs,d=h.Os})),!r.isEqual(oe.min())){const h=n.ai.getLastRemoteSnapshotVersion(i).next(m=>n.ai.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return $.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Ss=s,i))}function WP(t,e,n){let r=he(),s=he();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=tr();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(oe.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):X(ep,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{xs:o,Os:s}})}function GP(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=zm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function QP(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.ai.getTargetData(r,e).next(i=>i?(s=i,$.resolve(s)):n.ai.allocateTargetId(r).next(o=>(s=new Tr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.ai.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ss.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(r.targetId,r),n.Ds.set(e,r.targetId)),r})}async function yf(t,e,n){const r=ie(t),s=r.Ss.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Fi(o))throw o;X(ep,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(s.target)}function ov(t,e,n){const r=ie(t);let s=oe.min(),i=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const m=ie(u),g=m.Ds.get(h);return g!==void 0?$.resolve(m.Ss.get(g)):m.ai.getTargetData(d,h)}(r,o,Cn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.bs.getDocumentsMatchingQuery(o,e,n?s:oe.min(),n?i:he())).next(l=>(KP(r,DC(e),l),{documents:l,Ns:i})))}function KP(t,e,n){let r=t.vs.get(e)||oe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.vs.set(e,r)}class av{constructor(){this.activeTargetIds=FC()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YP{constructor(){this.So=new av,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,n,r){this.Do[e]=n}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new av,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="ConnectivityMonitor";class cv{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){X(lv,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){X(lv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tl=null;function vf(){return Tl===null?Tl=function(){return 268435456+Math.round(2147483648*Math.random())}():Tl++,"0x"+Tl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="RestConnection",JP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZP{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Lo=n+"://"+e.host,this.ko=`projects/${r}/databases/${s}`,this.qo=this.databaseId.database===Vc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Qo(e,n,r,s,i){const o=vf(),l=this.$o(e,n.toUriEncodedString());X(Fd,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(u,s,i);const{host:d}=new URL(l),h=Mi(d);return this.Ko(e,l,u,r,h).then(m=>(X(Fd,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Ei(Fd,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}Wo(e,n,r,s,i,o){return this.Qo(e,n,r,s,i)}Uo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$i}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}$o(e,n){const r=JP[e];return`${this.Lo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt="WebChannelConnection";class tj extends ZP{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,n,r,s,i){const o=vf();return new Promise((l,u)=>{const d=new hE;d.setWithCredentials(!0),d.listenOnce(fE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Kl.NO_ERROR:const m=d.getResponseJson();X(dt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case Kl.TIMEOUT:X(dt,`RPC '${e}' ${o} timed out`),u(new G(V.DEADLINE_EXCEEDED,"Request time out"));break;case Kl.HTTP_ERROR:const g=d.getStatus();if(X(dt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const N=x==null?void 0:x.error;if(N&&N.status&&N.message){const k=function(T){const w=T.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(w)>=0?w:V.UNKNOWN}(N.status);u(new G(k,N.message))}else u(new G(V.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new G(V.UNAVAILABLE,"Connection failed."));break;default:se(9055,{s_:e,streamId:o,o_:d.getLastErrorCode(),__:d.getLastError()})}}finally{X(dt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);X(dt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",h,r,15)})}a_(e,n,r){const s=vf(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gE(),l=pE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Uo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=i.join("");X(dt,`Creating RPC '${e}' stream ${s}: ${h}`,u);const m=o.createWebChannel(h,u);let g=!1,x=!1;const N=new ej({Go:C=>{x?X(dt,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(g||(X(dt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),X(dt,`RPC '${e}' stream ${s} sending:`,C),m.send(C))},zo:()=>m.close()}),k=(C,T,w)=>{C.listen(T,S=>{try{w(S)}catch(j){setTimeout(()=>{throw j},0)}})};return k(m,wo.EventType.OPEN,()=>{x||(X(dt,`RPC '${e}' stream ${s} transport opened.`),N.t_())}),k(m,wo.EventType.CLOSE,()=>{x||(x=!0,X(dt,`RPC '${e}' stream ${s} transport closed`),N.r_())}),k(m,wo.EventType.ERROR,C=>{x||(x=!0,Ei(dt,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),N.r_(new G(V.UNAVAILABLE,"The operation could not be completed")))}),k(m,wo.EventType.MESSAGE,C=>{var T;if(!x){const w=C.data[0];ve(!!w,16349);const S=w,j=(S==null?void 0:S.error)||((T=S[0])===null||T===void 0?void 0:T.error);if(j){X(dt,`RPC '${e}' stream ${s} received error:`,j);const D=j.status;let U=function(v){const I=Be[v];if(I!==void 0)return JE(I)}(D),E=j.message;U===void 0&&(U=V.INTERNAL,E="Unknown error status: "+D+" with message "+j.message),x=!0,N.r_(new G(U,E)),m.close()}else X(dt,`RPC '${e}' stream ${s} received:`,w),N.i_(w)}}),k(l,mE.STAT_EVENT,C=>{C.stat===of.PROXY?X(dt,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===of.NOPROXY&&X(dt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.n_()},0),N}}function zd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t){return new iP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,n,r=1e3,s=1.5,i=6e4){this.bi=e,this.timerId=n,this.u_=r,this.c_=s,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const n=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.h_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,s,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="PersistentStream";class mb{constructor(e,n,r,s,i,o,l,u){this.bi=e,this.R_=r,this.V_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new fb(e,n)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,n){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(er(n.toString()),er("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(n)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),n=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.m_===n&&this.B_(r,s)},r=>{e(()=>{const s=new G(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(s)})})}B_(e,n){const r=this.N_(this.m_);this.stream=this.k_(e,n),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(s=>{r(()=>this.L_(s))}),this.stream.onMessage(s=>{r(()=>++this.p_==1?this.q_(s):this.onNext(s))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return X(uv,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return n=>{this.bi.enqueueAndForget(()=>this.m_===e?n():(X(uv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nj extends mb{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}k_(e,n){return this.connection.a_("Listen",e,n)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const n=lP(this.serializer,e),r=function(i){if(!("targetChange"in i))return oe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?Pn(o.readTime):oe.min()}(e);return this.listener.Q_(n,r)}U_(e){const n={};n.database=gf(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=df(u)?{documents:dP(i,u)}:{query:ib(i,u).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=tb(i,o.resumeToken);const d=ff(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(oe.min())>0){l.readTime=zc(i,o.snapshotVersion.toTimestamp());const d=ff(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=mP(this.serializer,e);r&&(n.labels=r),this.F_(n)}K_(e){const n={};n.database=gf(this.serializer),n.removeTarget=e,this.F_(n)}}class rj extends mb{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,n){return this.connection.a_("Write",e,n)}q_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const n=uP(e.writeResults,e.commitTime),r=Pn(e.commitTime);return this.listener.j_(r,n)}H_(){const e={};e.database=gf(this.serializer),this.F_(e)}G_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>cP(this.serializer,r))};this.F_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{}class ij extends sj{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.J_=!1}Y_(){if(this.J_)throw new G(V.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,n,r,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Qo(e,mf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(V.UNKNOWN,i.toString())})}Wo(e,n,r,s,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Wo(e,mf(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(V.UNKNOWN,o.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class oj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(er(n),this.ea=!1):X("OnlineStateTracker",n)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="RemoteStore";class aj{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo(o=>{r.enqueueAndForget(async()=>{Ds(this)&&(X(Rs,"Restarting streams for network reachability change."),await async function(u){const d=ie(u);d.aa.add(4),await Pa(d),d.la.set("Unknown"),d.aa.delete(4),await Au(d)}(this))})}),this.la=new oj(r,s)}}async function Au(t){if(Ds(t))for(const e of t.ua)await e(!0)}async function Pa(t){for(const e of t.ua)await e(!1)}function pb(t,e){const n=ie(t);n._a.has(e.targetId)||(n._a.set(e.targetId,e),sp(n)?rp(n):zi(n).b_()&&np(n,e))}function tp(t,e){const n=ie(t),r=zi(n);n._a.delete(e),r.b_()&&gb(n,e),n._a.size===0&&(r.b_()?r.v_():Ds(n)&&n.la.set("Unknown"))}function np(t,e){if(t.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zi(t).U_(e)}function gb(t,e){t.ha.Ke(e),zi(t).K_(e)}function rp(t){t.ha=new tP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t._a.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),zi(t).start(),t.la.ta()}function sp(t){return Ds(t)&&!zi(t).w_()&&t._a.size>0}function Ds(t){return ie(t).aa.size===0}function yb(t){t.ha=void 0}async function lj(t){t.la.set("Online")}async function cj(t){t._a.forEach((e,n)=>{np(t,e)})}async function uj(t,e){yb(t),sp(t)?(t.la.ia(e),rp(t)):t.la.set("Unknown")}async function dj(t,e,n){if(t.la.set("Online"),e instanceof eb&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s._a.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s._a.delete(l),s.ha.removeTarget(l))}(t,e)}catch(r){X(Rs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await qc(t,r)}else if(e instanceof Zl?t.ha.Xe(e):e instanceof ZE?t.ha.ot(e):t.ha.nt(e),!n.isEqual(oe.min()))try{const r=await hb(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.ha.It(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=i._a.get(d);h&&i._a.set(d,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const h=i._a.get(u);if(!h)return;i._a.set(u,h.withResumeToken(it.EMPTY_BYTE_STRING,h.snapshotVersion)),gb(i,u);const m=new Tr(h.target,u,d,h.sequenceNumber);np(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){X(Rs,"Failed to raise snapshot:",r),await qc(t,r)}}async function qc(t,e,n){if(!Fi(e))throw e;t.aa.add(1),await Pa(t),t.la.set("Offline"),n||(n=()=>hb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X(Rs,"Retrying IndexedDB access"),await n(),t.aa.delete(1),await Au(t)})}function vb(t,e){return e().catch(n=>qc(t,n,e))}async function ku(t){const e=ie(t),n=Hr(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:zm;for(;hj(e);)try{const s=await GP(e.localStore,r);if(s===null){e.oa.length===0&&n.v_();break}r=s.batchId,fj(e,s)}catch(s){await qc(e,s)}xb(e)&&_b(e)}function hj(t){return Ds(t)&&t.oa.length<10}function fj(t,e){t.oa.push(e);const n=Hr(t);n.b_()&&n.W_&&n.G_(e.mutations)}function xb(t){return Ds(t)&&!Hr(t).w_()&&t.oa.length>0}function _b(t){Hr(t).start()}async function mj(t){Hr(t).H_()}async function pj(t){const e=Hr(t);for(const n of t.oa)e.G_(n.mutations)}async function gj(t,e,n){const r=t.oa.shift(),s=Qm.from(r,e,n);await vb(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ku(t)}async function yj(t,e){e&&Hr(t).W_&&await async function(r,s){if(function(o){return ZC(o)&&o!==V.ABORTED}(s.code)){const i=r.oa.shift();Hr(r).D_(),await vb(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ku(r)}}(t,e),xb(t)&&_b(t)}async function dv(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),X(Rs,"RemoteStore received new credentials");const r=Ds(n);n.aa.add(3),await Pa(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.aa.delete(3),await Au(n)}async function vj(t,e){const n=ie(t);e?(n.aa.delete(2),await Au(n)):e||(n.aa.add(2),await Pa(n),n.la.set("Unknown"))}function zi(t){return t.Pa||(t.Pa=function(n,r,s){const i=ie(n);return i.Y_(),new nj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{jo:lj.bind(null,t),Jo:cj.bind(null,t),Zo:uj.bind(null,t),Q_:dj.bind(null,t)}),t.ua.push(async e=>{e?(t.Pa.D_(),sp(t)?rp(t):t.la.set("Unknown")):(await t.Pa.stop(),yb(t))})),t.Pa}function Hr(t){return t.Ta||(t.Ta=function(n,r,s){const i=ie(n);return i.Y_(),new rj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{jo:()=>Promise.resolve(),Jo:mj.bind(null,t),Zo:yj.bind(null,t),z_:pj.bind(null,t),j_:gj.bind(null,t)}),t.ua.push(async e=>{e?(t.Ta.D_(),await ku(t)):(await t.Ta.stop(),t.oa.length>0&&(X(Rs,`Stopping write stream with ${t.oa.length} pending writes`),t.oa=[]))})),t.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new ip(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function op(t,e){if(er("AsyncQueue",`${e}: ${t}`),Fi(t))return new G(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{static emptySet(e){return new mi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=Eo(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof mi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new mi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(){this.Ia=new Oe(te.comparator)}track(e){const n=e.doc.key,r=this.Ia.get(n);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(n,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(n):e.type===1&&r.type===2?this.Ia=this.Ia.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):se(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(n,e)}da(){const e=[];return this.Ia.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ri{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ri(e,n,mi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class _j{constructor(){this.queries=fv(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(n,r){const s=ie(n),i=s.queries;s.queries=fv(),i.forEach((o,l)=>{for(const u of l.Ra)u.onError(r)})})(this,new G(V.ABORTED,"Firestore shutting down"))}}function fv(){return new Os(t=>VE(t),Eu)}async function ap(t,e){const n=ie(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Va()&&e.ma()&&(r=2):(i=new xj,r=e.ma()?0:1);try{switch(r){case 0:i.Aa=await n.onListen(s,!0);break;case 1:i.Aa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=op(o,`Initialization of query '${zs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Ra.push(e),e.ga(n.onlineState),i.Aa&&e.pa(i.Aa)&&cp(n)}async function lp(t,e){const n=ie(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Ra.indexOf(e);o>=0&&(i.Ra.splice(o,1),i.Ra.length===0?s=e.ma()?0:1:!i.Va()&&e.ma()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wj(t,e){const n=ie(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Ra)l.pa(s)&&(r=!0);o.Aa=s}}r&&cp(n)}function Ej(t,e,n){const r=ie(t),s=r.queries.get(e);if(s)for(const i of s.Ra)i.onError(n);r.queries.delete(e)}function cp(t){t.fa.forEach(e=>{e.next()})}var xf,mv;(mv=xf||(xf={})).ya="default",mv.Cache="cache";class up{constructor(e,n,r){this.query=e,this.wa=n,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ri(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ba?this.Da(e)&&(this.wa.next(e),n=!0):this.va(e,this.onlineState)&&(this.Ca(e),n=!0),this.Sa=e,n}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let n=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),n=!0),n}va(e,n){if(!e.fromCache||!this.ma())return!0;const r=n!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const n=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ca(e){e=Ri.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==xf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e){this.key=e}}class Eb{constructor(e){this.key=e}}class bj{constructor(e,n){this.query=e,this.qa=n,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=he(),this.mutatedKeys=he(),this.Ua=$E(e),this.Ka=new mi(this.Ua)}get Wa(){return this.qa}Ga(e,n){const r=n?n.za:new hv,s=n?n.Ka:this.Ka;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,m)=>{const g=s.get(h),x=bu(this.query,m)?m:null,N=!!g&&this.mutatedKeys.has(g.key),k=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let C=!1;g&&x?g.data.isEqual(x.data)?N!==k&&(r.track({type:3,doc:x}),C=!0):this.ja(g,x)||(r.track({type:2,doc:x}),C=!0,(u&&this.Ua(x,u)>0||d&&this.Ua(x,d)<0)&&(l=!0)):!g&&x?(r.track({type:0,doc:x}),C=!0):g&&!x&&(r.track({type:1,doc:g}),C=!0,(u||d)&&(l=!0)),C&&(x?(o=o.add(x),i=k?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ka:o,za:r,ys:l,mutatedKeys:i}}ja(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const o=e.za.da();o.sort((h,m)=>function(x,N){const k=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se(20277,{Vt:C})}};return k(x)-k(N)}(h.type,m.type)||this.Ua(h.doc,m.doc)),this.Ha(r),s=s!=null&&s;const l=n&&!s?this.Ja():[],u=this.$a.size===0&&this.current&&!s?1:0,d=u!==this.Qa;return this.Qa=u,o.length!==0||d?{snapshot:new Ri(this.query,e.Ka,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:l}:{Ya:l}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new hv,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(n=>this.qa=this.qa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qa=this.qa.delete(n)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=he(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const n=[];return e.forEach(r=>{this.$a.has(r)||n.push(new Eb(r))}),this.$a.forEach(r=>{e.has(r)||n.push(new wb(r))}),n}Xa(e){this.qa=e.Ns,this.$a=he();const n=this.Ga(e.documents);return this.applyChanges(n,!0)}eu(){return Ri.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const dp="SyncEngine";class Tj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Ij{constructor(e){this.key=e,this.tu=!1}}class Nj{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.nu={},this.ru=new Os(l=>VE(l),Eu),this.iu=new Map,this.su=new Set,this.ou=new Oe(te.comparator),this._u=new Map,this.au=new Xm,this.uu={},this.cu=new Map,this.lu=Si.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function Sj(t,e,n=!0){const r=Rb(t);let s;const i=r.ru.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.eu()):s=await bb(r,e,n,!0),s}async function Rj(t,e){const n=Rb(t);await bb(n,e,!0,!1)}async function bb(t,e,n,r){const s=await QP(t.localStore,Cn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await Aj(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&pb(t.remoteStore,s),l}async function Aj(t,e,n,r,s){t.Pu=(m,g,x)=>async function(k,C,T,w){let S=C.view.Ga(T);S.ys&&(S=await ov(k.localStore,C.query,!1).then(({documents:E})=>C.view.Ga(E,S)));const j=w&&w.targetChanges.get(C.targetId),D=w&&w.targetMismatches.get(C.targetId)!=null,U=C.view.applyChanges(S,k.isPrimaryClient,j,D);return gv(k,C.targetId,U.Ya),U.snapshot}(t,m,g,x);const i=await ov(t.localStore,e,!0),o=new bj(e,i.Ns),l=o.Ga(i.documents),u=Ca.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);gv(t,n,d.Ya);const h=new Tj(e,n,o);return t.ru.set(e,h),t.iu.has(n)?t.iu.get(n).push(e):t.iu.set(n,[e]),d.snapshot}async function kj(t,e,n){const r=ie(t),s=r.ru.get(e),i=r.iu.get(s.targetId);if(i.length>1)return r.iu.set(s.targetId,i.filter(o=>!Eu(o,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await yf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&tp(r.remoteStore,s.targetId),_f(r,s.targetId)}).catch(Ui)):(_f(r,s.targetId),await yf(r.localStore,s.targetId,!0))}async function Cj(t,e){const n=ie(t),r=n.ru.get(e),s=n.iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tp(n.remoteStore,r.targetId))}async function Pj(t,e,n){const r=$j(t);try{const s=await function(o,l){const u=ie(o),d=Qe.now(),h=l.reduce((x,N)=>x.add(N.key),he());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let N=tr(),k=he();return u.Cs.getEntries(x,h).next(C=>{N=C,N.forEach((T,w)=>{w.isValidDocument()||(k=k.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,N)).next(C=>{m=C;const T=[];for(const w of l){const S=GC(w,m.get(w.key).overlayedDocument);S!=null&&T.push(new Jr(w.key,S,kE(S.value.mapValue),It.exists(!0)))}return u.mutationQueue.addMutationBatch(x,d,T,l)}).next(C=>{g=C;const T=C.applyToLocalDocumentSet(m,k);return u.documentOverlayCache.saveOverlays(x,C.batchId,T)})}).then(()=>({batchId:g.batchId,changes:FE(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.uu[o.currentUser.toKey()];d||(d=new Oe(le)),d=d.insert(l,u),o.uu[o.currentUser.toKey()]=d}(r,s.batchId,n),await ja(r,s.changes),await ku(r.remoteStore)}catch(s){const i=op(s,"Failed to persist write");n.reject(i)}}async function Tb(t,e){const n=ie(t);try{const r=await HP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n._u.get(i);o&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.tu=!0:s.modifiedDocuments.size>0?ve(o.tu,14607):s.removedDocuments.size>0&&(ve(o.tu,42227),o.tu=!1))}),await ja(n,r,e)}catch(r){await Ui(r)}}function pv(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ru.forEach((i,o)=>{const l=o.view.ga(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=ie(o);u.onlineState=l;let d=!1;u.queries.forEach((h,m)=>{for(const g of m.Ra)g.ga(l)&&(d=!0)}),d&&cp(u)}(r.eventManager,e),s.length&&r.nu.Q_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jj(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r._u.get(e),i=s&&s.key;if(i){let o=new Oe(te.comparator);o=o.insert(i,mt.newNoDocument(i,oe.min()));const l=he().add(i),u=new Su(oe.min(),new Map,new Oe(le),o,l);await Tb(r,u),r.ou=r.ou.remove(i),r._u.delete(e),hp(r)}else await yf(r.localStore,e,!1).then(()=>_f(r,e,n)).catch(Ui)}async function Oj(t,e){const n=ie(t),r=e.batch.batchId;try{const s=await qP(n.localStore,e);Nb(n,r,null),Ib(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ja(n,s)}catch(s){await Ui(s)}}async function Dj(t,e,n){const r=ie(t);try{const s=await function(o,l){const u=ie(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(ve(m!==null,37113),h=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);Nb(r,e,n),Ib(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ja(r,s)}catch(s){await Ui(s)}}function Ib(t,e){(t.cu.get(e)||[]).forEach(n=>{n.resolve()}),t.cu.delete(e)}function Nb(t,e,n){const r=ie(t);let s=r.uu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.uu[r.currentUser.toKey()]=s}}function _f(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.iu.get(e))t.ru.delete(r),n&&t.nu.Tu(r,n);t.iu.delete(e),t.isPrimaryClient&&t.au.Ur(e).forEach(r=>{t.au.containsKey(r)||Sb(t,r)})}function Sb(t,e){t.su.delete(e.path.canonicalString());const n=t.ou.get(e);n!==null&&(tp(t.remoteStore,n),t.ou=t.ou.remove(e),t._u.delete(n),hp(t))}function gv(t,e,n){for(const r of n)r instanceof wb?(t.au.addReference(r.key,e),Lj(t,r)):r instanceof Eb?(X(dp,"Document no longer in limbo: "+r.key),t.au.removeReference(r.key,e),t.au.containsKey(r.key)||Sb(t,r.key)):se(19791,{Iu:r})}function Lj(t,e){const n=e.key,r=n.path.canonicalString();t.ou.get(n)||t.su.has(r)||(X(dp,"New document in limbo: "+n),t.su.add(r),hp(t))}function hp(t){for(;t.su.size>0&&t.ou.size<t.maxConcurrentLimboResolutions;){const e=t.su.values().next().value;t.su.delete(e);const n=new te(Ee.fromString(e)),r=t.lu.next();t._u.set(r,new Ij(n)),t.ou=t.ou.insert(n,r),pb(t.remoteStore,new Tr(Cn(wu(n.path)),r,"TargetPurposeLimboResolution",yu.le))}}async function ja(t,e,n){const r=ie(t),s=[],i=[],o=[];r.ru.isEmpty()||(r.ru.forEach((l,u)=>{o.push(r.Pu(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Zm.Ps(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.nu.Q_(s),await async function(u,d){const h=ie(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>$.forEach(d,g=>$.forEach(g.ls,x=>h.persistence.referenceDelegate.addReference(m,g.targetId,x)).next(()=>$.forEach(g.hs,x=>h.persistence.referenceDelegate.removeReference(m,g.targetId,x)))))}catch(m){if(!Fi(m))throw m;X(ep,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const x=h.Ss.get(g),N=x.snapshotVersion,k=x.withLastLimboFreeSnapshotVersion(N);h.Ss=h.Ss.insert(g,k)}}}(r.localStore,i))}async function Mj(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){X(dp,"User change. New user:",e.toKey());const r=await db(n.localStore,e);n.currentUser=e,function(i,o){i.cu.forEach(l=>{l.forEach(u=>{u.reject(new G(V.CANCELLED,o))})}),i.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ja(n,r.Ms)}}function Vj(t,e){const n=ie(t),r=n._u.get(e);if(r&&r.tu)return he().add(r.key);{let s=he();const i=n.iu.get(e);if(!i)return s;for(const o of i){const l=n.ru.get(o);s=s.unionWith(l.view.Wa)}return s}}function Rb(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jj.bind(null,e),e.nu.Q_=wj.bind(null,e.eventManager),e.nu.Tu=Ej.bind(null,e.eventManager),e}function $j(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Oj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dj.bind(null,e),e}class Hc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ru(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,n){return null}fu(e,n){return null}Vu(e){return BP(this.persistence,new UP,e.initialUser,this.serializer)}Ru(e){return new ub(Jm.Ei,this.serializer)}Au(e){return new YP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hc.provider={build:()=>new Hc};class Uj extends Hc{constructor(e){super(),this.cacheSizeBytes=e}mu(e,n){ve(this.persistence.referenceDelegate instanceof Bc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new IP(r,e.asyncQueue,n)}Ru(e){const n=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new ub(r=>Bc.Ei(r,n),this.serializer)}}class wf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>pv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mj.bind(null,this.syncEngine),await vj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _j}()}createDatastore(e){const n=Ru(e.databaseInfo.databaseId),r=function(i){return new tj(i)}(e.databaseInfo);return function(i,o,l,u){return new ij(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new aj(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>pv(this.syncEngine,n,0),function(){return cv.C()?new cv:new XP}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,h){const m=new Nj(s,i,o,l,u,d);return h&&(m.hu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ie(s);X(Rs,"RemoteStore shutting down."),i.aa.add(5),await Pa(i),i.ca.shutdown(),i.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}wf.provider={build:()=>new wf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):er("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="FirestoreClient";class Fj{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ht.UNAUTHENTICATED,this.clientId=_E.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{X(Wr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X(Wr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=op(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Bd(t,e){t.asyncQueue.verifyOperationInProgress(),X(Wr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await db(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function yv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zj(t);X(Wr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>dv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>dv(e.remoteStore,s)),t._onlineComponents=e}async function zj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X(Wr,"Using user provided OfflineComponentProvider");try{await Bd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ei("Error using user provided cache. Falling back to memory cache: "+n),await Bd(t,new Hc)}}else X(Wr,"Using default OfflineComponentProvider"),await Bd(t,new Uj(void 0));return t._offlineComponents}async function mp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X(Wr,"Using user provided OnlineComponentProvider"),await yv(t,t._uninitializedComponentsProvider._online)):(X(Wr,"Using default OnlineComponentProvider"),await yv(t,new wf))),t._onlineComponents}function Bj(t){return mp(t).then(e=>e.syncEngine)}function qj(t){return mp(t).then(e=>e.datastore)}async function Wc(t){const e=await mp(t),n=e.eventManager;return n.onListen=Sj.bind(null,e.syncEngine),n.onUnlisten=kj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Rj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Cj.bind(null,e.syncEngine),n}function Hj(t,e,n={}){const r=new kn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const h=new fp({next:g=>{h.yu(),o.enqueueAndForget(()=>lp(i,m));const x=g.docs.has(l);!x&&g.fromCache?d.reject(new G(V.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&g.fromCache&&u&&u.source==="server"?d.reject(new G(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new up(wu(l.path),h,{includeMetadataChanges:!0,Fa:!0});return ap(i,m)}(await Wc(t),t.asyncQueue,e,n,r)),r.promise}function Wj(t,e,n={}){const r=new kn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const h=new fp({next:g=>{h.yu(),o.enqueueAndForget(()=>lp(i,m)),g.fromCache&&u.source==="server"?d.reject(new G(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new up(l,h,{includeMetadataChanges:!0,Fa:!0});return ap(i,m)}(await Wc(t),t.asyncQueue,e,n,r)),r.promise}function Gj(t,e,n){const r=new kn;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await qj(t);r.resolve(async function(o,l,u){var d;const h=ie(o),{request:m,yt:g,parent:x}=hP(h.serializer,OC(l),u);h.connection.Bo||delete m.parent;const N=(await h.Wo("RunAggregationQuery",h.serializer.databaseId,x,m,1)).filter(C=>!!C.result);ve(N.length===1,64727);const k=(d=N[0].result)===null||d===void 0?void 0:d.aggregateFields;return Object.keys(k).reduce((C,T)=>(C[g[T]]=k[T],C),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(t,e,n){if(!n)throw new G(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Qj(t,e,n,r){if(e===!0&&r===!0)throw new G(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xv(t){if(!te.isDocumentKey(t))throw new G(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _v(t){if(te.isDocumentKey(t))throw new G(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Cu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se(12329,{type:typeof t})}function pt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cu(t);throw new G(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Kj(t,e){if(e<=0)throw new G(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="firestore.googleapis.com",wv=!0;class Ev{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Cb,this.ssl=wv}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:wv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bP)throw new G(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Qj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ab((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ev({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ev(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Zk;switch(r.type){case"firstParty":return new rC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=vv.get(n);r&&(X("ComponentProvider","Removing Datastore"),vv.delete(n),r.terminate())}(this),Promise.resolve()}}function Yj(t,e,n,r={}){var s;t=pt(t,Pu);const i=Mi(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&Rm(`https://${u}`),o.host!==Cb&&o.host!==u&&Ei("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:r});if(!Es(d,l)&&(t._setSettings(d),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=ht.MOCK_USER;else{h=Ew(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new G(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ht(g)}t._authCredentials=new eC(new vE(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Dn(this.firestore,e,this._query)}}class gt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}}class Lr extends Dn{constructor(e,n,r){super(e,n,wu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new te(e))}withConverter(e){return new Lr(this.firestore,e,this._path)}}function ec(t,e,...n){if(t=_e(t),kb("collection","path",e),t instanceof Pu){const r=Ee.fromString(e,...n);return _v(r),new Lr(t,null,r)}{if(!(t instanceof gt||t instanceof Lr))throw new G(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return _v(r),new Lr(t.firestore,null,r)}}function Vo(t,e,...n){if(t=_e(t),arguments.length===1&&(e=_E.newId()),kb("doc","path",e),t instanceof Pu){const r=Ee.fromString(e,...n);return xv(r),new gt(t,null,new te(r))}{if(!(t instanceof gt||t instanceof Lr))throw new G(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return xv(r),new gt(t.firestore,t instanceof Lr?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="AsyncQueue";class Tv{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new fb(this,"async_queue_retry"),this.ju=()=>{const r=zd();r&&X(bv,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const n=zd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const n=zd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const n=new kn;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Fi(e))throw e;X(bv,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const n=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,er("INTERNAL UNHANDLED ERROR: ",Iv(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=n,n}enqueueAfterDelay(e,n,r){this.Ju(),this.zu.indexOf(e)>-1&&(n=0);const s=ip.createAndSchedule(this,e,n,r,i=>this.Xu(i));return this.Uu.push(s),s}Ju(){this.Ku&&se(47125,{ec:Iv(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const n of this.Uu)if(n.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const n=this.Uu.indexOf(e);this.Uu.splice(n,1)}}function Iv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class gn extends Pu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Tv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Tv(e),this._firestoreClient=void 0,await e}}}function Xj(t,e){const n=typeof t=="object"?t:Cm(),r=typeof t=="string"?t:Vc,s=fu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=xw("firestore");i&&Yj(s,...i)}return s}function Bi(t){if(t._terminated)throw new G(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Jj(t),t._firestoreClient}function Jj(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,h){return new xC(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Ab(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new Fj(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class e4{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ai(it.fromBase64String(e))}catch(n){throw new G(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ai(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=/^__.*__$/;class n4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Jr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ka(e,this.data,n,this.fieldTransforms)}}class Pb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Jr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se(40011,{oc:t})}}class yp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this._c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new yp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ac({path:r,cc:!1});return s.lc(e),s}hc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ac({path:r,cc:!1});return s._c(),s}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Gc(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(jb(this.oc)&&t4.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class r4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ru(e)}dc(e,n,r,s=!1){return new yp({oc:e,methodName:n,Ec:r,path:nt.emptyPath(),cc:!1,Ic:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qi(t){const e=t._freezeSettings(),n=Ru(t._databaseId);return new r4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vp(t,e,n,r,s,i={}){const o=t.dc(i.merge||i.mergeFields?2:0,e,n,s);wp("Data must be an object, but it was:",o,r);const l=Mb(r,o);let u,d;if(i.merge)u=new qt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const m of i.mergeFields){const g=Ef(e,m,n);if(!o.contains(g))throw new G(V.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);$b(h,g)||h.push(g)}u=new qt(h),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new n4(new Pt(l),u,d)}class ju extends Da{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ju}}class xp extends Da{_toFieldTransform(e){return new KE(e.path,new da)}isEqual(e){return e instanceof xp}}class _p extends Da{constructor(e,n){super(e),this.Rc=n}_toFieldTransform(e){const n=new ma(e.serializer,qE(e.serializer,this.Rc));return new KE(e.path,n)}isEqual(e){return e instanceof _p&&this.Rc===e.Rc}}function Ob(t,e,n,r){const s=t.dc(1,e,n);wp("Data must be an object, but it was:",s,r);const i=[],o=Pt.empty();Xr(r,(u,d)=>{const h=Ep(e,u,n);d=_e(d);const m=s.hc(h);if(d instanceof ju)i.push(h);else{const g=La(d,m);g!=null&&(i.push(h),o.set(h,g))}});const l=new qt(i);return new Pb(o,l,s.fieldTransforms)}function Db(t,e,n,r,s,i){const o=t.dc(1,e,n),l=[Ef(e,r,n)],u=[s];if(i.length%2!=0)throw new G(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Ef(e,i[g])),u.push(i[g+1]);const d=[],h=Pt.empty();for(let g=l.length-1;g>=0;--g)if(!$b(d,l[g])){const x=l[g];let N=u[g];N=_e(N);const k=o.hc(x);if(N instanceof ju)d.push(x);else{const C=La(N,k);C!=null&&(d.push(x),h.set(x,C))}}const m=new qt(d);return new Pb(h,m,o.fieldTransforms)}function Lb(t,e,n,r=!1){return La(n,t.dc(r?4:3,e))}function La(t,e){if(Vb(t=_e(t)))return wp("Unsupported field value:",e,t),Mb(t,e);if(t instanceof Da)return function(r,s){if(!jb(s.oc))throw s.Tc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Tc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=La(l,s.Pc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=_e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Qe.fromDate(r);return{timestampValue:zc(s.serializer,i)}}if(r instanceof Qe){const i=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zc(s.serializer,i)}}if(r instanceof pp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ai)return{bytesValue:tb(s.serializer,r._byteString)};if(r instanceof gt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Tc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ym(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof gp)return function(o,l){return{mapValue:{fields:{[RE]:{stringValue:AE},[$c]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Tc("VectorValues must only contain numeric values.");return Gm(l.serializer,d)})}}}}}}(r,s);throw s.Tc(`Unsupported field value: ${Cu(r)}`)}(t,e)}function Mb(t,e){const n={};return EE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xr(t,(r,s)=>{const i=La(s,e.uc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Vb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof pp||t instanceof Ai||t instanceof gt||t instanceof Da||t instanceof gp)}function wp(t,e,n){if(!Vb(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Cu(n);throw r==="an object"?e.Tc(t+" a custom object"):e.Tc(t+" "+r)}}function Ef(t,e,n){if((e=_e(e))instanceof Oa)return e._internalPath;if(typeof e=="string")return Ep(t,e);throw Gc("Field path arguments must be of type string or ",t,!1,void 0,n)}const s4=new RegExp("[~\\*/\\[\\]]");function Ep(t,e,n){if(e.search(s4)>=0)throw Gc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Oa(...e.split("."))._internalPath}catch{throw Gc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Gc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new G(V.INVALID_ARGUMENT,l+t+u)}function $b(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new i4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ou("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class i4 extends bp{data(){return super.data()}}function Ou(t,e){return typeof e=="string"?Ep(t,e):e instanceof Oa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tp{}class Du extends Tp{}function Il(t,e,...n){let r=[];e instanceof Tp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Ip).length,l=i.filter(u=>u instanceof Lu).length;if(o>1||o>0&&l>0)throw new G(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Lu extends Du{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Lu(e,n,r)}_apply(e){const n=this._parse(e);return Fb(e._query,n),new Dn(e.firestore,e.converter,hf(e._query,n))}_parse(e){const n=qi(e.firestore);return function(i,o,l,u,d,h,m){let g;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new G(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Rv(m,h);const N=[];for(const k of m)N.push(Sv(u,i,k));g={arrayValue:{values:N}}}else g=Sv(u,i,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Rv(m,h),g=Lb(l,o,m,h==="in"||h==="not-in");return He.create(d,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function AD(t,e,n){const r=e,s=Ou("where",t);return Lu._create(s,r,n)}class Ip extends Tp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ip(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:pn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)Fb(o,u),o=hf(o,u)}(e._query,n),new Dn(e.firestore,e.converter,hf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Np extends Du{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Np(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new G(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ua(i,o)}(e._query,this._field,this._direction);return new Dn(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new js(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function qd(t,e="asc"){const n=e,r=Ou("orderBy",t);return Np._create(r,n)}class Sp extends Du{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Sp(e,n,r)}_apply(e){return new Dn(e.firestore,e.converter,Fc(e._query,this._limit,this._limitType))}}function Nl(t){return Kj("limit",t),Sp._create("limit",t,"F")}class Rp extends Du{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Rp(e,n,r)}_apply(e){const n=o4(e,this.type,this._docOrFields,this._inclusive);return new Dn(e.firestore,e.converter,function(s,i){return new js(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function kD(...t){return Rp._create("startAfter",t,!1)}function o4(t,e,n,r){if(n[0]=_e(n[0]),n[0]instanceof bp)return function(i,o,l,u,d){if(!u)throw new G(V.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const h=[];for(const m of fi(i))if(m.field.isKeyField())h.push(Uc(o,u.key));else{const g=u.data.field(m.field);if(xu(g))throw new G(V.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const x=m.field.canonicalString();throw new G(V.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}h.push(g)}return new Ni(h,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=qi(t.firestore);return function(o,l,u,d,h,m){const g=o.explicitOrderBy;if(h.length>g.length)throw new G(V.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let N=0;N<h.length;N++){const k=h[N];if(g[N].field.isKeyField()){if(typeof k!="string")throw new G(V.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof k}`);if(!Wm(o)&&k.indexOf("/")!==-1)throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${k}' contains a slash.`);const C=o.path.child(Ee.fromString(k));if(!te.isDocumentKey(C))throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const T=new te(C);x.push(Uc(l,T))}else{const C=Lb(u,d,k);x.push(C)}}return new Ni(x,m)}(t._query,t.firestore._databaseId,s,e,n,r)}}function Sv(t,e,n){if(typeof(n=_e(n))=="string"){if(n==="")throw new G(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wm(e)&&n.indexOf("/")!==-1)throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!te.isDocumentKey(r))throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Uc(t,new te(r))}if(n instanceof gt)return Uc(t,n._key);throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cu(n)}.`)}function Rv(t,e){if(!Array.isArray(t)||t.length===0)throw new G(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Fb(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class a4{convertValue(e,n="none"){switch(qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Xr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[$c].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Fe(o.doubleValue));return new gp(i)}convertGeoPoint(e){return new pp(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=_u(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(aa(e));default:return null}}convertTimestamp(e){const n=zr(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);ve(lb(r),9688,{name:e});const s=new la(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||er(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function l4(){return new Zj("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zb extends bp{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new tc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ou("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class tc extends zb{data(e={}){return super.data(e)}}class Bb{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new To(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new tc(this._firestore,this._userDataWriter,r.key,r,new To(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new tc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new To(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new tc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new To(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:c4(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function c4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t){t=pt(t,gt);const e=pt(t.firestore,gn);return Hj(Bi(e),t._key).then(n=>qb(e,t,n))}class Mu extends a4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ai(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,n)}}function Hd(t){t=pt(t,Dn);const e=pt(t.firestore,gn),n=Bi(e),r=new Mu(e);return Ub(t._query),Wj(n,t._query).then(s=>new Bb(e,r,t,s))}function bf(t,e,n){t=pt(t,gt);const r=pt(t.firestore,gn),s=Ap(t.converter,e,n);return Ma(r,[vp(qi(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,It.none())])}function u4(t,e,n,...r){t=pt(t,gt);const s=pt(t.firestore,gn),i=qi(s);let o;return o=typeof(e=_e(e))=="string"||e instanceof Oa?Db(i,"updateDoc",t._key,e,n,r):Ob(i,"updateDoc",t._key,e),Ma(s,[o.toMutation(t._key,It.exists(!0))])}function CD(t){return Ma(pt(t.firestore,gn),[new Nu(t._key,It.none())])}function d4(t,e){const n=pt(t.firestore,gn),r=Vo(t),s=Ap(t.converter,e);return Ma(n,[vp(qi(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,It.exists(!1))]).then(()=>r)}function PD(t,...e){var n,r,s;t=_e(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Nv(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Nv(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,d,h;if(t instanceof gt)d=pt(t.firestore,gn),h=wu(t._key.path),u={next:m=>{e[o]&&e[o](qb(d,t,m))},error:e[o+1],complete:e[o+2]};else{const m=pt(t,Dn);d=pt(m.firestore,gn),h=m._query;const g=new Mu(d);u={next:x=>{e[o]&&e[o](new Bb(d,g,m,x))},error:e[o+1],complete:e[o+2]},Ub(t._query)}return function(g,x,N,k){const C=new fp(k),T=new up(x,C,N);return g.asyncQueue.enqueueAndForget(async()=>ap(await Wc(g),T)),()=>{C.yu(),g.asyncQueue.enqueueAndForget(async()=>lp(await Wc(g),T))}}(Bi(d),h,l,u)}function Ma(t,e){return function(r,s){const i=new kn;return r.asyncQueue.enqueueAndForget(async()=>Pj(await Bj(r),s,i)),i.promise}(Bi(t),e)}function qb(t,e,n){const r=n.docs.get(e._key),s=new Mu(t);return new zb(t,s,e._key,r,new To(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t){return h4(t,{count:l4()})}function h4(t,e){const n=pt(t.firestore,gn),r=Bi(n),s=yC(e,(i,o)=>new XC(o,i.aggregateType,i._internalFieldPath));return Gj(r,t._query,s).then(i=>function(l,u,d){const h=new Mu(l);return new e4(u,h,d)}(n,t,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=qi(e)}set(e,n,r){this._verifyNotCommitted();const s=Wd(e,this._firestore),i=Ap(s.converter,n,r),o=vp(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,It.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Wd(e,this._firestore);let o;return o=typeof(n=_e(n))=="string"||n instanceof Oa?Db(this._dataReader,"WriteBatch.update",i._key,n,r,s):Ob(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,It.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Wd(e,this._firestore);return this._mutations=this._mutations.concat(new Nu(n._key,It.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wd(t,e){if((t=_e(t)).firestore!==e)throw new G(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function kv(){return new xp("serverTimestamp")}function OD(t){return new _p("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(t){return Bi(t=pt(t,gn)),new f4(t,e=>Ma(t,e))}(function(e,n=!0){(function(s){$i=s})(Ps),bs(new Ur("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new gn(new tC(r.getProvider("auth-internal")),new sC(o,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new G(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new la(d.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Sn(ky,Cy,e),Sn(ky,Cy,"esm2017")})();var m4="firebase",p4="11.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn(m4,p4,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="firebasestorage.googleapis.com",Wb="storageBucket",g4=2*60*1e3,y4=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve extends On{constructor(e,n,r=0){super(Gd(e),`Firebase Storage: ${n} (${Gd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ve.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Gd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Me;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Me||(Me={}));function Gd(t){return"storage/"+t}function kp(){const t="An unknown error occurred, please check the error payload for server response.";return new Ve(Me.UNKNOWN,t)}function v4(t){return new Ve(Me.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function x4(t){return new Ve(Me.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _4(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ve(Me.UNAUTHENTICATED,t)}function w4(){return new Ve(Me.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function E4(t){return new Ve(Me.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function b4(){return new Ve(Me.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function T4(){return new Ve(Me.CANCELED,"User canceled the upload/download.")}function I4(t){return new Ve(Me.INVALID_URL,"Invalid URL '"+t+"'.")}function N4(t){return new Ve(Me.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function S4(){return new Ve(Me.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Wb+"' property when initializing the app?")}function R4(){return new Ve(Me.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function A4(){return new Ve(Me.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function k4(t){return new Ve(Me.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Tf(t){return new Ve(Me.INVALID_ARGUMENT,t)}function Gb(){return new Ve(Me.APP_DELETED,"The Firebase app was deleted.")}function C4(t){return new Ve(Me.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $o(t,e){return new Ve(Me.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function mo(t){throw new Ve(Me.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ht.makeFromUrl(e,n)}catch{return new Ht(e,"")}if(r.path==="")return r;throw N4(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(j){j.path_=decodeURIComponent(j.path)}const h="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",x=new RegExp(`^https?://${m}/${h}/b/${s}/o${g}`,"i"),N={bucket:1,path:3},k=n===Hb?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",T=new RegExp(`^https?://${k}/${s}/${C}`,"i"),S=[{regex:l,indices:u,postModify:i},{regex:x,indices:N,postModify:d},{regex:T,indices:{bucket:1,path:2},postModify:d}];for(let j=0;j<S.length;j++){const D=S[j],U=D.regex.exec(e);if(U){const E=U[D.indices.bucket];let y=U[D.indices.path];y||(y=""),r=new Ht(E,y),D.postModify(r);break}}if(r==null)throw I4(e);return r}}class P4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let d=!1;function h(...C){d||(d=!0,e.apply(null,C))}function m(C){s=setTimeout(()=>{s=null,t(x,u())},C)}function g(){i&&clearTimeout(i)}function x(C,...T){if(d){g();return}if(C){g(),h.call(null,C,...T);return}if(u()||o){g(),h.call(null,C,...T);return}r<64&&(r*=2);let S;l===1?(l=2,S=0):S=(r+Math.random())*1e3,m(S)}let N=!1;function k(C){N||(N=!0,g(),!d&&(s!==null?(C||(l=2),clearTimeout(s),m(0)):C||(l=1)))}return m(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function O4(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(t){return t!==void 0}function L4(t){return typeof t=="object"&&!Array.isArray(t)}function Cp(t){return typeof t=="string"||t instanceof String}function Cv(t){return Pp()&&t instanceof Blob}function Pp(){return typeof Blob<"u"}function Pv(t,e,n,r){if(r<e)throw Tf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Tf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Qb(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var gs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(gs||(gs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n,r,s,i,o,l,u,d,h,m,g=!0,x=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=g,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,k)=>{this.resolve_=N,this.reject_=k,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Sl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===gs.NO_ERROR,u=i.getStatus();if(!l||M4(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===gs.ABORT;r(!1,new Sl(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Sl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());D4(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=kp();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?Gb():T4();o(u)}else{const u=b4();o(u)}};this.canceled_?n(!1,new Sl(!1,null,!0)):this.backoffId_=j4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&O4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Sl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function $4(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function U4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function F4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function z4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function B4(t,e,n,r,s,i,o=!0,l=!1){const u=Qb(t.urlParams),d=t.url+u,h=Object.assign({},t.headers);return F4(h,e),$4(h,n),U4(h,i),z4(h,r),new V4(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function H4(...t){const e=q4();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Pp())return new Blob(t);throw new Ve(Me.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function W4(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(t){if(typeof atob>"u")throw k4("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qd{constructor(e,n){this.data=e,this.contentType=n||null}}function Q4(t,e){switch(t){case Tn.RAW:return new Qd(Kb(e));case Tn.BASE64:case Tn.BASE64URL:return new Qd(Yb(t,e));case Tn.DATA_URL:return new Qd(Y4(e),X4(e))}throw kp()}function Kb(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function K4(t){let e;try{e=decodeURIComponent(t)}catch{throw $o(Tn.DATA_URL,"Malformed data URL.")}return Kb(e)}function Yb(t,e){switch(t){case Tn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw $o(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Tn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw $o(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=G4(e)}catch(s){throw s.message.includes("polyfill")?s:$o(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Xb{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw $o(Tn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=J4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Y4(t){const e=new Xb(t);return e.base64?Yb(Tn.BASE64,e.rest):K4(e.rest)}function X4(t){return new Xb(t).contentType}function J4(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n){let r=0,s="";Cv(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Cv(this.data_)){const r=this.data_,s=W4(r,e,n);return s===null?null:new wr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new wr(r,!0)}}static getBlob(...e){if(Pp()){const n=e.map(r=>r instanceof wr?r.data_:r);return new wr(H4.apply(null,n))}else{const n=e.map(o=>Cp(o)?Q4(Tn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new wr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(t){let e;try{e=JSON.parse(t)}catch{return null}return L4(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function eO(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Zb(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(t,e){return e}class Et{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||tO}}let Rl=null;function nO(t){return!Cp(t)||t.length<2?t:Zb(t)}function e1(){if(Rl)return Rl;const t=[];t.push(new Et("bucket")),t.push(new Et("generation")),t.push(new Et("metageneration")),t.push(new Et("name","fullPath",!0));function e(i,o){return nO(o)}const n=new Et("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Et("size");return s.xform=r,t.push(s),t.push(new Et("timeCreated")),t.push(new Et("updated")),t.push(new Et("md5Hash",null,!0)),t.push(new Et("cacheControl",null,!0)),t.push(new Et("contentDisposition",null,!0)),t.push(new Et("contentEncoding",null,!0)),t.push(new Et("contentLanguage",null,!0)),t.push(new Et("contentType",null,!0)),t.push(new Et("metadata","customMetadata",!0)),Rl=t,Rl}function rO(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Ht(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function sO(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return rO(r,t),r}function t1(t,e,n){const r=Jb(e);return r===null?null:sO(t,r,n)}function iO(t,e,n,r){const s=Jb(e);if(s===null||!Cp(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const h=t.bucket,m=t.fullPath,g="/b/"+o(h)+"/o/"+o(m),x=jp(g,n,r),N=Qb({alt:"media",token:d});return x+N})[0]}function oO(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class n1{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(t){if(!t)throw kp()}function aO(t,e){function n(r,s){const i=t1(t,s,e);return r1(i!==null),i}return n}function lO(t,e){function n(r,s){const i=t1(t,s,e);return r1(i!==null),iO(i,s,t.host,t._protocol)}return n}function s1(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=w4():s=_4():n.getStatus()===402?s=x4(t.bucket):n.getStatus()===403?s=E4(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function cO(t){const e=s1(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=v4(t.path)),i.serverResponse=s.serverResponse,i}return n}function uO(t,e,n){const r=e.fullServerUrl(),s=jp(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new n1(s,i,lO(t,n),o);return l.errorHandler=cO(e),l}function dO(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function hO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=dO(null,e)),r}function fO(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let S="";for(let j=0;j<2;j++)S=S+Math.random().toString().slice(2);return S}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const d=hO(e,r,s),h=oO(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",x=wr.getBlob(m,r,g);if(x===null)throw R4();const N={name:d.fullPath},k=jp(i,t.host,t._protocol),C="POST",T=t.maxUploadRetryTime,w=new n1(k,C,aO(t,n),T);return w.urlParams=N,w.headers=o,w.body=x.uploadData(),w.errorHandler=s1(e),w}class mO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=gs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=gs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=gs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw mo("cannot .send() more than once");if(Mi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw mo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class pO extends mO{initXhr(){this.xhr_.responseType="text"}}function i1(){return new pO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n){this._service=e,n instanceof Ht?this._location=n:this._location=Ht.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new As(e,n)}get root(){const e=new Ht(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Zb(this._location.path)}get storage(){return this._service}get parent(){const e=Z4(this._location.path);if(e===null)return null;const n=new Ht(this._location.bucket,e);return new As(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw C4(e)}}function gO(t,e,n){t._throwIfRoot("uploadBytes");const r=fO(t.storage,t._location,e1(),new wr(e,!0),n);return t.storage.makeRequestWithTokens(r,i1).then(s=>({metadata:s,ref:t}))}function yO(t){t._throwIfRoot("getDownloadURL");const e=uO(t.storage,t._location,e1());return t.storage.makeRequestWithTokens(e,i1).then(n=>{if(n===null)throw A4();return n})}function vO(t,e){const n=eO(t._location.path,e),r=new Ht(t._location.bucket,n);return new As(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(t){return/^[A-Za-z]+:\/\//.test(t)}function _O(t,e){return new As(t,e)}function o1(t,e){if(t instanceof Op){const n=t;if(n._bucket==null)throw S4();const r=new As(n,n._bucket);return e!=null?o1(r,e):r}else return e!==void 0?vO(t,e):t}function wO(t,e){if(e&&xO(e)){if(t instanceof Op)return _O(t,e);throw Tf("To use ref(service, url), the first argument must be a Storage instance.")}else return o1(t,e)}function jv(t,e){const n=e==null?void 0:e[Wb];return n==null?null:Ht.makeFromBucketSpec(n,t)}function EO(t,e,n,r={}){t.host=`${e}:${n}`;const s=Mi(e);s&&Rm(`https://${t.host}`),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Ew(i,t.app.options.projectId))}class Op{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=Hb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=g4,this._maxUploadRetryTime=y4,this._requests=new Set,s!=null?this._bucket=Ht.makeFromBucketSpec(s,this._host):this._bucket=jv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ht.makeFromBucketSpec(this._url,e):this._bucket=jv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Pv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Pv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(zt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new As(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new P4(Gb());{const o=B4(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Ov="@firebase/storage",Dv="0.13.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="storage";function LD(t,e,n){return t=_e(t),gO(t,e,n)}function MD(t){return t=_e(t),yO(t)}function VD(t,e){return t=_e(t),wO(t,e)}function bO(t=Cm(),e){t=_e(t);const r=fu(t,a1).getImmediate({identifier:e}),s=xw("storage");return s&&TO(r,...s),r}function TO(t,e,n,r={}){EO(t,e,n,r)}function IO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Op(n,r,s,e,Ps)}function NO(){bs(new Ur(a1,IO,"PUBLIC").setMultipleInstances(!0)),Sn(Ov,Dv,""),Sn(Ov,Dv,"esm2017")}NO();const SO={apiKey:"AIzaSyC_kUWaN1D5n9BeRSTsKf7wdS6-4CHREAo",authDomain:"wholesaler-app-841b7.firebaseapp.com",projectId:"wholesaler-app-841b7",storageBucket:"wholesaler-app-841b7.firebasestorage.app",messagingSenderId:"188437846114",appId:"1:188437846114:web:44eab90f30351e2bd3993b"},Dp=Iw(SO),Mr=Xj(Dp),cs=Xk(Dp),$D=bO(Dp),l1=R.createContext(null),RO=({children:t})=>{const[e,n]=R.useState(null),[r,s]=R.useState(!0),[i,o]=R.useState(null),[l,u]=R.useState("guest"),[d,h]=R.useState(null),[m,g]=R.useState({});R.useEffect(()=>{const E=$2(cs,async y=>{if(s(!0),o(null),y)try{const v=Vo(Mr,"users",y.uid),I=await Av(v);if(I.exists()){const _=I.data(),P=_.requiresApproval||!1,A=_.approved||!1,z=_.status||"active";if(!P||A){const ee={...y,..._,canAccess:!0};n(ee),u(_.accountType||"user"),h({required:P,approved:A,status:z,canAccess:!0}),g(_.permissions||{}),await u4(v,{lastLogin:new Date,isActive:!0})}else{const ee={uid:y.uid,email:y.email,displayName:_.displayName,accountType:_.accountType,status:z,canAccess:!1,requiresApproval:!0,approved:!1};n(ee),u("pending"),h({required:!0,approved:!1,status:z,canAccess:!1,message:x(z)}),g({})}}else{await bf(v,{uid:y.uid,email:y.email,displayName:y.displayName||y.email.split("@")[0],accountType:"user",approved:!0,status:"active",requiresApproval:!1,permissions:{canCreateOrders:!0,canManageInventory:!1,canViewAllOrders:!1,canApproveUsers:!1,canManageUsers:!1},createdAt:new Date,updatedAt:new Date,isActive:!0});const _={...y,accountType:"user",approved:!0,canAccess:!0};n(_),u("user"),h({required:!1,approved:!0,status:"active",canAccess:!0}),g({canCreateOrders:!0,canManageInventory:!1,canViewAllOrders:!1,canApproveUsers:!1,canManageUsers:!1})}}catch(v){console.error("Error fetching user data:",v),o("Failed to load user data"),n({...y,canAccess:!0,accountType:"user"}),u("user"),h({required:!1,approved:!0,status:"active",canAccess:!0})}else n(null),u("guest"),h(null),g({});s(!1)});return()=>E()},[]);const x=E=>{switch(E){case"pending_approval":return"Your account is pending admin approval. You will receive an email notification once approved.";case"rejected":return"Your account application was rejected. Please contact support for more information.";case"suspended":return"Your account has been suspended. Please contact support for assistance.";default:return"Your account requires approval before you can access the system."}},N=async(E,y,v=!1)=>{try{return s(!0),o(null),(await O2(cs,E,y)).user}catch(I){let _="Login failed. Please try again.";switch(I.code){case"auth/user-not-found":_="No account found with this email address.";break;case"auth/wrong-password":_="Incorrect password. Please try again.";break;case"auth/invalid-email":_="Invalid email address format.";break;case"auth/user-disabled":_="This account has been disabled. Please contact support.";break;case"auth/too-many-requests":_="Too many failed login attempts. Please try again later.";break;default:_=I.message||"Login failed. Please try again."}throw o(_),new Error(_)}finally{s(!1)}},k=async(E,y,v)=>{try{s(!0),o(null);const I=await Zw(cs,E,y);return v&&await eE(I.user,{displayName:v}),await bf(Vo(Mr,"users",I.user.uid),{uid:I.user.uid,email:E,displayName:v||E.split("@")[0],accountType:"user",approved:!0,status:"active",requiresApproval:!1,permissions:{canCreateOrders:!0,canManageInventory:!1,canViewAllOrders:!1,canApproveUsers:!1,canManageUsers:!1},createdAt:new Date,updatedAt:new Date,isActive:!0}),I.user}catch(I){let _="Registration failed. Please try again.";switch(I.code){case"auth/email-already-in-use":_="An account with this email already exists.";break;case"auth/weak-password":_="Password is too weak. Please choose a stronger password.";break;case"auth/invalid-email":_="Invalid email address format.";break;default:_=I.message||"Registration failed. Please try again."}throw o(_),new Error(_)}finally{s(!1)}},C=async()=>{try{o(null),await U2(cs)}catch(E){throw o(E.message),E}},T=async E=>{try{s(!0),o(null),await Jw(cs,E)}catch(y){let v="Failed to send password reset email.";switch(y.code){case"auth/user-not-found":v="No account found with this email address.";break;case"auth/invalid-email":v="Invalid email address format.";break;default:v=y.message||"Failed to send password reset email."}throw o(v),new Error(v)}finally{s(!1)}},w=E=>m[E]===!0,U={user:e,loading:r,error:i,userRole:l,approvalStatus:d,permissions:m,login:N,logout:C,register:k,resetPassword:T,hasPermission:w,canAccess:(E=null,y=null)=>!(!e||!e.canAccess||E&&l!==E||y&&!w(y)),refreshUserData:async()=>{if(e)try{const E=Vo(Mr,"users",e.uid),y=await Av(E);if(y.exists()){const v=y.data(),I={...e,...v,canAccess:v.approved||!v.requiresApproval};n(I),u(v.accountType||"user"),h({required:v.requiresApproval||!1,approved:v.approved||!1,status:v.status||"active",canAccess:v.approved||!v.requiresApproval}),g(v.permissions||{})}}catch(E){console.error("Error refreshing user data:",E)}},clearError:()=>{o(null)}};return a.jsx(l1.Provider,{value:U,children:t})},c1=R.createContext(null),AO=({children:t})=>{const[e,n]=R.useState(()=>{const s=localStorage.getItem("wholesaler-theme");return s?s==="dark":!!(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)}),r=()=>{n(s=>!s)};return R.useEffect(()=>{localStorage.setItem("wholesaler-theme",e?"dark":"light"),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e]),R.useEffect(()=>{const s=window.matchMedia("(prefers-color-scheme: dark)"),i=o=>{localStorage.getItem("wholesaler-theme")||n(o.matches)};return s.addEventListener?s.addEventListener("change",i):s.addListener(i),()=>{s.removeEventListener?s.removeEventListener("change",i):s.removeListener(i)}},[]),a.jsx(c1.Provider,{value:{darkMode:e,toggleDarkMode:r},children:t})},Rt=()=>{const t=R.useContext(c1);if(t===null)throw new Error("useTheme must be used within a ThemeProvider");return t},ir=()=>{const t=R.useContext(l1);if(t===null)throw new Error("useAuth must be used within an AuthProvider");return t},u1=R.createContext(),kO=({children:t})=>{const{user:e}=ir(),[n,r]=R.useState([]),[s,i]=R.useState(!1),o=E=>E?`wholesaler-cart-${E}`:"wholesaler-cart-guest",l=E=>{try{i(!0);const y=o(E),v=localStorage.getItem(y);if(v){const I=JSON.parse(v);r(I)}else r([])}catch(y){console.error("Error loading cart from localStorage:",y),r([])}finally{i(!1)}},u=(E,y)=>{try{const v=o(E);localStorage.setItem(v,JSON.stringify(y))}catch(v){console.error("Error saving cart to localStorage:",v)}},d=()=>{try{localStorage.removeItem("wholesaler-cart-guest"),localStorage.removeItem("wholesaler-cart")}catch(E){console.error("Error clearing guest cart:",E)}};R.useEffect(()=>{l(e==null?void 0:e.uid),e!=null&&e.uid&&d()},[e==null?void 0:e.uid]),R.useEffect(()=>{s||u(e==null?void 0:e.uid,n)},[n,e==null?void 0:e.uid,s]);const h=(E,y=1)=>{r(v=>v.find(_=>_.id===E.id)?v.map(_=>_.id===E.id?{..._,quantity:Math.min(_.quantity+y,E.stock)}:_):[...v,{...E,quantity:Math.min(y,E.stock)}])},m=E=>{r(y=>y.filter(v=>v.id!==E))},g=(E,y)=>{if(y<=0){m(E);return}r(v=>v.map(I=>{if(I.id===E){const _=I.stock||999;return{...I,quantity:Math.min(y,_)}}return I}))},x=()=>{r([])},N=async()=>{try{const E=localStorage.getItem("wholesaler-cart-guest");if(E&&(e!=null&&e.uid)){const y=JSON.parse(E);y.length>0&&(r(v=>{const I=[...v];return y.forEach(_=>{const P=I.find(A=>A.id===_.id);P?P.quantity=Math.min(P.quantity+_.quantity,_.stock||999):I.push(_)}),I}),d())}}catch(E){console.error("Error transferring guest cart:",E)}};R.useEffect(()=>{e!=null&&e.uid&&N()},[e==null?void 0:e.uid]);const k=()=>n.reduce((E,y)=>E+y.price*y.quantity,0),U={cart:n,isLoading:s,addToCart:h,removeFromCart:m,updateQuantity:g,clearCart:x,getCartTotal:k,getCartItemCount:()=>n.reduce((E,y)=>E+y.quantity,0),isInCart:E=>n.some(y=>y.id===E),getCartItem:E=>n.find(y=>y.id===E),validateCartStock:async E=>{const y=[];for(const v of n){const I=E.find(_=>_.id===v.id);I?v.quantity>I.stock&&y.push({...v,issue:`Only ${I.stock} items available`,maxAvailable:I.stock}):y.push({...v,issue:"Product no longer available"})}return y},fixCartQuantities:E=>{r(y=>y.map(v=>{const I=E.find(_=>_.id===v.id);return I&&v.quantity>I.stock?{...v,quantity:Math.max(1,I.stock)}:v}).filter(v=>{const I=E.find(_=>_.id===v.id);return I&&I.stock>0}))},transferGuestCart:N,getCartInfo:()=>({userId:(e==null?void 0:e.uid)||"guest",cartKey:o(e==null?void 0:e.uid),itemCount:n.length,total:k(),isLoading:s})};return a.jsx(u1.Provider,{value:U,children:t})},d1=()=>{const t=R.useContext(u1);if(!t)throw new Error("useCart must be used within a CartProvider");return t},CO=t=>{if(!t)return!1;const e=t.accountType==="admin",n=t.accountType==="manager",r=t.accountType==="business"&&t.businessType==="seller",s=t.accountType==="business"&&t.businessType==="buyer",i=t.accountType==="user";return s||i?!1:e||n||r},Lp=t=>{if(!t)return!1;const e=t.accountType==="admin",n=t.accountType==="manager",r=t.accountType==="business"&&t.businessType==="seller",s=t.accountType==="business"&&t.businessType==="buyer",i=t.accountType==="user";return s||i?!1:e||n||r},PO=t=>{if(!t)return!1;const e=t.accountType==="admin",n=t.accountType==="manager";return e||n},h1=t=>{if(!t)return!1;const e=t.accountType==="admin",n=t.accountType==="manager";return e||n},jO=t=>{if(!t)return!1;const e=t.accountType==="admin",n=t.accountType==="manager";return e||n},OO=t=>Lp(t),DO=t=>{if(!t)return!1;const e=t.accountType==="admin",n=t.accountType==="manager";return e||n},f1=t=>t?t.accountType==="admin":!1,m1=t=>{if(!t)return!1;const e=t.accountType==="admin",n=t.accountType==="manager";return e||n},pa=t=>{if(!t)return!1;const e=t.accountType==="admin",n=t.accountType==="manager";return!(e||n)},ki=t=>{if(!t)return!0;const e=t.accountType==="admin",n=t.accountType==="manager";return!(e||n)},p1=t=>ki(t),LO=t=>{if(!t)return!1;const e=t.accountType==="admin",n=t.accountType==="manager",r=t.accountType==="business";return e||n||r},UD=t=>t?t.accountType==="admin"?"Administrator":t.accountType==="manager"?"Manager":t.accountType==="business"?t.businessType==="seller"?"Business Seller":t.businessType==="buyer"?"Business Buyer":"Business User":"Customer":"Guest",FD=t=>{const e=[{name:"Dashboard",path:"/",icon:"🏠",available:!0},{name:"Catalog",path:"/catalog",icon:"📋",available:!0}];return ki(t)&&e.push({name:"Cart",path:"/cart",icon:"🛒",available:!0}),t&&(pa(t)&&e.push({name:"Orders",path:"/orders",icon:"📦",available:!0}),h1(t)&&!pa(t)&&e.push({name:"All Orders",path:"/orders",icon:"📦",available:!0}),Lp(t)&&e.push({name:"Inventory",path:"/inventory",icon:"📊",available:!0},{name:"Add Product",path:"/add-product",icon:"➕",available:!0}),m1(t)&&e.push({name:"Manager Panel",path:"/manager",icon:"👔",available:!0}),f1(t)&&e.push({name:"Admin Panel",path:"/admin",icon:"⚙️",available:!0})),e.filter(n=>n.available)},Ut={MANAGE_PRODUCTS:"canManageProducts",ACCESS_INVENTORY:"canAccessInventory",VIEW_ALL_PRODUCTS:"canViewAllProducts",VIEW_ALL_ORDERS:"canViewAllOrders",DELETE_ORDERS:"canDeleteOrders",MANAGE_INVENTORY:"canManageInventory",APPROVE_USERS:"canApproveUsers",ACCESS_ADMIN_PANEL:"canAccessAdminPanel",ACCESS_MANAGER_PANEL:"canAccessManagerPanel",CREATE_ORDERS:"canCreateOrders",ACCESS_CART:"canAccessCart",ACCESS_CHECKOUT:"canAccessCheckout",MANAGE_BUSINESS_SETTINGS:"canManageBusinessSettings"},zD=(t,e)=>{switch(e){case Ut.MANAGE_PRODUCTS:return CO(t);case Ut.ACCESS_INVENTORY:return Lp(t);case Ut.VIEW_ALL_PRODUCTS:return PO(t);case Ut.VIEW_ALL_ORDERS:return h1(t);case Ut.DELETE_ORDERS:return jO(t);case Ut.MANAGE_INVENTORY:return OO(t);case Ut.APPROVE_USERS:return DO(t);case Ut.ACCESS_ADMIN_PANEL:return f1(t);case Ut.ACCESS_MANAGER_PANEL:return m1(t);case Ut.CREATE_ORDERS:return pa(t);case Ut.ACCESS_CART:return ki(t);case Ut.ACCESS_CHECKOUT:return p1(t);case Ut.MANAGE_BUSINESS_SETTINGS:return LO(t);default:return!1}},ga=({className:t=""})=>{const{darkMode:e,toggleDarkMode:n}=Rt();return a.jsxs("button",{onClick:n,className:`relative inline-flex items-center rounded-full transition-all duration-300 focus:outline-none ${t} ${e?"bg-gradient-to-r from-cyan-500 to-purple-500 shadow-lg shadow-cyan-500/25":"bg-gradient-to-r from-blue-500 to-purple-500 shadow-lg shadow-blue-500/25"}`,style:{width:"56px",height:"28px"},"aria-pressed":e,"aria-label":e?"Switch to neumorphism theme":"Switch to cyberpunk theme",title:e?"Switch to Light Theme":"Switch to Dark Theme",children:[a.jsx("div",{className:`absolute inset-0 rounded-full opacity-75 ${e?"bg-gradient-to-r from-cyan-400 to-purple-400":"bg-gradient-to-r from-blue-400 to-purple-400"} animate-pulse`}),a.jsx("span",{className:`relative inline-block h-6 w-6 transform rounded-full transition-all duration-300 shadow-lg ${e?"translate-x-7 bg-black border-2 border-cyan-400":"translate-x-0.5 bg-white border-2 border-blue-400"}`,style:{boxShadow:e?"0 0 15px rgba(0, 255, 255, 0.5)":"0 4px 8px rgba(0, 0, 0, 0.1)"},children:a.jsx("div",{className:"flex items-center justify-center h-full w-full",children:e?a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-cyan-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-orange-500",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})}),a.jsx("span",{className:"sr-only",children:e?"Switch to Light Neumorphism Theme":"Switch to Dark Cyberpunk Theme"}),a.jsx("div",{className:`absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap ${e?"text-cyan-400":"text-blue-600"}`,children:e?"Cyberpunk":"Neumorphism"})]})},MO=({showAsModal:t=!1,onClose:e=null})=>{const n=rr(),{cart:r,getCartTotal:s,getCartItemCount:i}=d1(),{user:o}=ir(),{darkMode:l}=Rt(),u=s(),d=i(),h=()=>{n("/checkout"),e&&e()},m=()=>{o?n("/create-order",{state:{fromCart:!0}}):n("/login",{state:{from:{pathname:"/create-order",state:{fromCart:!0}}}}),e&&e()},x=(()=>{var k,C;return o?(k=o.email)!=null&&k.includes("admin")?"admin":(C=o.email)!=null&&C.includes("business")?"business":"customer":"guest"})(),N=a.jsxs("div",{className:`${l?"bg-gray-800 text-white":"bg-white text-gray-900"} ${t?"p-6 rounded-xl shadow-xl max-w-2xl w-full mx-4":"p-6"}`,children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:`text-2xl font-bold ${l?"text-white":"text-gray-900"} mb-2`,children:"Choose Your Checkout Experience"}),a.jsx("p",{className:`${l?"text-gray-300":"text-gray-600"}`,children:"Select the checkout process that best fits your needs"})]}),a.jsxs("div",{className:`mb-6 p-4 rounded-lg ${l?"bg-gray-700":"bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{children:a.jsxs("span",{className:`text-sm ${l?"text-gray-300":"text-gray-600"}`,children:[d," item",d!==1?"s":""," in cart"]})}),a.jsxs("div",{className:`text-lg font-bold ${l?"text-white":"text-gray-900"}`,children:["$",u.toFixed(2)]})]}),x==="business"&&a.jsx("div",{className:`mt-2 text-xs ${l?"text-green-400":"text-green-600"}`,children:"🏢 Business account - 15% bulk discount will be applied"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx("div",{className:`border-2 rounded-xl p-6 cursor-pointer transition-all hover:shadow-lg ${l?"border-gray-600 hover:border-indigo-500 bg-gray-700 hover:bg-gray-600":"border-gray-200 hover:border-indigo-500 bg-white hover:bg-gray-50"}`,onClick:h,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl mb-4",children:"⚡"}),a.jsx("h3",{className:`text-xl font-semibold mb-3 ${l?"text-white":"text-gray-900"}`,children:"Quick Checkout"}),a.jsx("p",{className:`text-sm mb-4 ${l?"text-gray-300":"text-gray-600"}`,children:"Fast, streamlined process perfect for guests and regular purchases"}),a.jsxs("div",{className:`text-xs ${l?"text-gray-400":"text-gray-500"} space-y-1 mb-6`,children:[a.jsx("div",{children:"✅ 3-step process"}),a.jsx("div",{children:"✅ Multiple payment methods"}),a.jsx("div",{children:"✅ Express delivery options"}),a.jsx("div",{children:"✅ Mobile optimized"}),!o&&a.jsx("div",{className:"text-green-600",children:"✅ No account required (Guest checkout)"})]}),a.jsxs("button",{className:"w-full py-3 px-4 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:["Continue as ",o?"User":"Guest"]})]})}),a.jsx("div",{className:`border-2 rounded-xl p-6 cursor-pointer transition-all hover:shadow-lg ${l?"border-gray-600 hover:border-purple-500 bg-gray-700 hover:bg-gray-600":"border-gray-200 hover:border-purple-500 bg-white hover:bg-gray-50"}`,onClick:m,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl mb-4",children:"🎯"}),a.jsx("h3",{className:`text-xl font-semibold mb-3 ${l?"text-white":"text-gray-900"}`,children:"Advanced Order"}),a.jsx("p",{className:`text-sm mb-4 ${l?"text-gray-300":"text-gray-600"}`,children:"Full-featured ordering with advanced business options (Account required)"}),a.jsxs("div",{className:`text-xs ${l?"text-gray-400":"text-gray-500"} space-y-1 mb-6`,children:[a.jsx("div",{children:"✅ Detailed order customization"}),a.jsx("div",{children:"✅ Multiple payment methods"}),a.jsx("div",{children:"✅ Business account features"}),a.jsx("div",{children:"✅ Bulk order management"}),a.jsx("div",{children:"✅ Advanced delivery options"}),!o&&a.jsx("div",{className:"text-orange-600",children:"🔒 Account required"})]}),a.jsx("button",{className:"w-full py-3 px-4 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:o?"Create Order":"Sign In & Create Order"})]})})]}),a.jsx("div",{className:`mt-6 p-4 rounded-lg ${l?"bg-blue-900/20 border border-blue-800":"bg-blue-50 border border-blue-200"}`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"text-2xl mr-3",children:"💡"}),a.jsxs("div",{children:[a.jsx("h4",{className:`font-medium ${l?"text-blue-400":"text-blue-700"} mb-1`,children:"Not sure which to choose?"}),a.jsx("p",{className:`text-sm ${l?"text-blue-300":"text-blue-600"}`,children:o?x==="business"?"As a business user, we recommend the Advanced Order for bulk discounts and business features.":"Quick Checkout is perfect for most users. Choose Advanced Order if you need detailed customization or business features.":"Quick Checkout lets you purchase as a guest without creating an account. Advanced Order requires sign-in but offers more features and business options."})]})]})}),t&&e&&a.jsx("div",{className:"flex justify-end mt-6",children:a.jsx("button",{onClick:e,className:`px-4 py-2 border rounded-lg ${l?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Cancel"})})]});return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:N}):N},If=({intensity:t=1,enableGlitch:e=!0})=>{const{darkMode:n}=Rt(),[r,s]=R.useState([]),[i,o]=R.useState([]),[l,u]=R.useState([]),[d,h]=R.useState(0),m=["📦","🏢","💼","📊","🔗","⚡","🌐","🎯","💹","🔄","💰","📈"],g=["ANALYZING MARKET PATTERNS","WHO CONTROLS THE SUPPLY CHAIN","DIGITAL TRANSFORMATION DETECTED","TRUST NO VENDOR","THE COMMERCIAL INVASION","QUANTUM COMMERCE NETWORK"];return R.useEffect(()=>{const x=Array.from({length:8},(C,T)=>({id:T,x:Math.random()*100,y:Math.random()*100,icon:m[Math.floor(Math.random()*m.length)],size:.8+Math.random()*.4,rotation:Math.random()*360,morphSpeed:.5+Math.random()*1,glitchPhase:Math.random()*Math.PI*2}));s(x);const N=Array.from({length:15},(C,T)=>({id:T,x:Math.random()*100,y:Math.random()*100,vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3,pulse:Math.random()*Math.PI*2,hue:Math.random()*60+(n?180:200),intensity:Math.random()}));o(N);const k=Array.from({length:4},(C,T)=>({id:T,x:25+Math.random()*50,y:25+Math.random()*50,size:20+Math.random()*30,morphPhase:Math.random()*Math.PI*2,speed:.3+Math.random()*.4,hue:n?180+Math.random()*80:200+Math.random()*60}));u(k)},[n]),R.useEffect(()=>{const N=setInterval(()=>{s(k=>k.map(C=>({...C,glitchPhase:C.glitchPhase+C.morphSpeed*.02,rotation:C.rotation+C.morphSpeed*.5,icon:Math.random()<.003?m[Math.floor(Math.random()*m.length)]:C.icon}))),o(k=>k.map(C=>({...C,x:C.x+C.vx,y:C.y+C.vy,pulse:C.pulse+.05,vx:C.x<=0||C.x>=100?-C.vx:C.vx,vy:C.y<=0||C.y>=100?-C.vy:C.vy,intensity:Math.sin(C.pulse)*.5+.5}))),u(k=>k.map(C=>({...C,morphPhase:C.morphPhase+C.speed*.01,x:C.x+Math.sin(C.morphPhase)*.05,y:C.y+Math.cos(C.morphPhase*.7)*.05,size:C.size+Math.sin(C.morphPhase*2)*3}))),e&&h(k=>Math.random()<.01?Math.random()*5:k*.95)},50);return()=>clearInterval(N)},[e]),a.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",style:{opacity:t},children:[a.jsx("div",{className:"absolute inset-0 opacity-20",children:a.jsxs("svg",{className:"w-full h-full",children:[a.jsxs("defs",{children:[a.jsxs("filter",{id:"secretInvasionGooey",children:[a.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"8"}),a.jsx("feColorMatrix",{mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 15 -7"}),a.jsx("feBlend",{in:"SourceGraphic",in2:"gooey"})]}),a.jsxs("radialGradient",{id:"morphingGradient",cx:"50%",cy:"50%",children:[a.jsx("stop",{offset:"0%",stopColor:n?"#00FFFF":"#4F46E5",stopOpacity:"0.6"}),a.jsx("stop",{offset:"50%",stopColor:n?"#FF00FF":"#7C3AED",stopOpacity:"0.4"}),a.jsx("stop",{offset:"100%",stopColor:n?"#FFFF00":"#3B82F6",stopOpacity:"0.2"})]})]}),a.jsx("g",{filter:"url(#secretInvasionGooey)",children:l.map(x=>a.jsx("circle",{cx:`${x.x}%`,cy:`${x.y}%`,r:`${x.size}%`,fill:"url(#morphingGradient)",style:{transform:`scale(${.8+Math.sin(x.morphPhase)*.3})`,filter:`hue-rotate(${x.hue+x.morphPhase*10}deg)`,opacity:.6+Math.sin(x.morphPhase*.5)*.2}},x.id))})]})}),a.jsx("div",{className:"absolute inset-0",children:r.map(x=>a.jsxs("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2",style:{left:`${x.x}%`,top:`${x.y}%`,fontSize:`${x.size*2}rem`,transform:`translate(-50%, -50%) rotate(${x.rotation}deg) scale(${.8+Math.sin(x.glitchPhase)*.2})`,filter:`
                hue-rotate(${x.glitchPhase*30}deg) 
                brightness(${1.2+Math.sin(x.glitchPhase*2)*.3})
                ${d>2?`blur(${d*.5}px)`:""}
              `,textShadow:n?`0 0 ${10+d*5}px #00FFFF, 0 0 ${20+d*10}px #FF00FF`:`0 0 ${8+d*3}px #4F46E5, 0 0 ${15+d*6}px #7C3AED`,opacity:.3+Math.sin(x.glitchPhase)*.2,animation:d>3?"morphGlitch 0.1s infinite":"none"},children:[x.icon,d>1&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute inset-0",style:{color:n?"#FF00FF":"#EC4899",transform:`translate(${d}px, -${d}px)`,opacity:.7,filter:"blur(0.5px)"},children:x.icon}),a.jsx("div",{className:"absolute inset-0",style:{color:n?"#00FFFF":"#06B6D4",transform:`translate(-${d}px, ${d}px)`,opacity:.5,filter:"blur(0.5px)"},children:x.icon})]})]},x.id))}),a.jsxs("div",{className:"absolute inset-0",children:[i.map(x=>a.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${x.x}%`,top:`${x.y}%`,background:`radial-gradient(circle, hsl(${x.hue}, 100%, 70%) 0%, transparent 70%)`,opacity:x.intensity*.6,boxShadow:`0 0 ${8+x.intensity*10}px hsl(${x.hue}, 100%, 70%)`,transform:`scale(${.5+x.intensity*.8})`,filter:`hue-rotate(${x.pulse*20}deg)`}},x.id)),a.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-30",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"connectionGradient",children:[a.jsx("stop",{offset:"0%",stopColor:n?"#00FFFF":"#4F46E5",stopOpacity:"0"}),a.jsx("stop",{offset:"50%",stopColor:n?"#FF00FF":"#7C3AED",stopOpacity:"0.8"}),a.jsx("stop",{offset:"100%",stopColor:n?"#FFFF00":"#3B82F6",stopOpacity:"0"})]})}),i.slice(0,8).map((x,N)=>{const k=i[(N+1)%8];return a.jsx("line",{x1:`${x.x}%`,y1:`${x.y}%`,x2:`${k.x}%`,y2:`${k.y}%`,stroke:"url(#connectionGradient)",strokeWidth:"1",opacity:Math.max(x.intensity,k.intensity)*.5},N)})]})]}),e&&d>3&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsx("div",{className:`text-center ${n?"text-cyan-400":"text-indigo-600"} font-mono text-lg font-bold`,style:{textShadow:n?"0 0 10px #00FFFF, 0 0 20px #FF00FF":"0 0 8px #4F46E5, 0 0 15px #7C3AED",opacity:(d-3)*.3,filter:`blur(${Math.max(0,d-4)}px)`,animation:"textFlicker 0.1s infinite"},children:g[Math.floor(Math.random()*g.length)]})}),a.jsx("style",{jsx:!0,children:`
        @keyframes morphGlitch {
          0%, 100% { 
            transform: translate(-50%, -50%) rotate(0deg) scale(1) skew(0deg); 
          }
          25% { 
            transform: translate(-50%, -50%) rotate(2deg) scale(1.1) skew(1deg); 
          }
          50% { 
            transform: translate(-50%, -50%) rotate(-1deg) scale(0.9) skew(-0.5deg); 
          }
          75% { 
            transform: translate(-50%, -50%) rotate(1deg) scale(1.05) skew(0.5deg); 
          }
        }

        @keyframes textFlicker {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.3; }
        }
      `})]})},Vu=R.createContext(null),Lv=({children:t,onOpenChange:e})=>{const[n,r]=R.useState(!1),s=R.useRef(null),i=R.useRef(null),o=R.useRef(null),l=h=>{r(h),e==null||e(h)};R.useEffect(()=>{if(!n)return;const h=g=>{var x,N;(x=s.current)!=null&&x.contains(g.target)||(N=i.current)!=null&&N.contains(g.target)||l(!1)},m=g=>{var x;g.key==="Escape"&&(l(!1),(x=s.current)==null||x.focus())};return document.addEventListener("mousedown",h,!0),document.addEventListener("keydown",m),()=>{document.removeEventListener("mousedown",h,!0),document.removeEventListener("keydown",m)}},[n]);const u=Mt();R.useEffect(()=>{l(!1)},[u]);const d={isOpen:n,setIsOpen:l,triggerRef:s,contentRef:i,timeoutRef:o};return a.jsx(Vu.Provider,{value:d,children:a.jsx("div",{className:"relative",children:t})})},Mv=({children:t,className:e="",...n})=>{const{isOpen:r,setIsOpen:s,triggerRef:i}=R.useContext(Vu),o=u=>{u.preventDefault(),u.stopPropagation(),s(!r)},l=u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),s(!r))};return a.jsx("button",{ref:i,onClick:o,onKeyDown:l,"aria-expanded":r,"aria-haspopup":"true",className:e,...n,children:t})},Vv=({children:t,className:e="",align:n="right",...r})=>{const{isOpen:s,contentRef:i}=R.useContext(Vu);if(!s)return null;const o={left:"left-0",right:"right-0",center:"left-1/2 transform -translate-x-1/2"};return a.jsx("div",{ref:i,className:`absolute top-full mt-2 z-[9999] min-w-max ${o[n]} ${e}`,role:"menu","aria-orientation":"vertical",style:{position:"absolute"},...r,children:a.jsx("div",{className:"animate-slideDown",children:t})})},is=({children:t,onSelect:e,className:n="",disabled:r=!1,...s})=>{const{setIsOpen:i}=R.useContext(Vu),o=u=>{u.preventDefault(),u.stopPropagation(),!r&&(i(!1),Promise.resolve().then(()=>{e==null||e(u)}))},l=u=>{(u.key==="Enter"||u.key===" ")&&o(u)};return a.jsx("button",{onClick:o,onKeyDown:l,disabled:r,role:"menuitem",className:`w-full text-left ${r?"opacity-50 cursor-not-allowed":""} ${n}`,...s,children:t})},VO=({sidebarOpen:t,setSidebarOpen:e})=>{const n=Mt(),r=rr(),{user:s,logout:i}=ir(),{darkMode:o}=Rt(),{cart:l,getCartItemCount:u,getCartTotal:d}=d1(),[h,m]=R.useState(!1),[g,x]=R.useState(!1),[N,k]=R.useState(!1),C=z=>n.pathname===z,T=u(),w=d(),S=ki(s),j=pa(s),D=(z,Q={})=>{r(z,Q)},U=()=>{if(!s)return"/guest-dashboard";switch(s.accountType){case"admin":return"/admin-dashboard";case"manager":return"/manager-dashboard";case"business":return"/business-dashboard";case"user":return"/user-dashboard";default:return"/guest-dashboard"}},E=()=>{const z=[{to:U(),icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6",label:o?"NEURAL HUB":"Dashboard"}];return s?(z.push({to:"/catalog",icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",label:o?"PRODUCT MATRIX":"Products"}),s.accountType==="admin"?z.push({to:"/admin/users",icon:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z",label:o?"USER CONTROL":"User Management"},{to:"/admin/deals",icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z",label:o?"DEAL NEXUS":"Deal Management"},{to:"/inventory",icon:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4",label:o?"INVENTORY CORE":"Inventory"}):s.accountType==="manager"?z.push({to:"/inventory",icon:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4",label:o?"INVENTORY CORE":"Inventory"}):s.accountType==="business"?s.businessType==="seller"?z.push({to:"/inventory",icon:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4",label:o?"MY INVENTORY":"My Products"}):z.push({to:"/orders",icon:"M9 5H7a2 2 0 00-2 2v6a2 2 0 002 2h6a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2",label:o?"PURCHASE HISTORY":"Purchase History"}):s.accountType==="user"&&z.push({to:"/user-dashboard",icon:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z",label:o?"MY ACCOUNT":"My Account"}),z.push({to:"/orders",icon:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z",label:o?"ORDER STREAM":"Orders"}),z.push({to:"/feedback",icon:"M7 8h10M7 12h6m-6 4h8M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",label:o?"FEEDBACK MATRIX":"Feedback"})):z.push({to:"/catalog",icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",label:o?"PRODUCT MATRIX":"Browse Products"},{to:"/about-us",icon:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",label:o?"ABOUT NEURAL":"About Us"}),z};R.useEffect(()=>{const z=()=>{k(window.scrollY>10)};return window.addEventListener("scroll",z),()=>window.removeEventListener("scroll",z)},[]);const y=()=>{D("/profile")},v=()=>{D("/settings")},I=()=>{D("/qr-tools")},_=async()=>{try{await i(),D("/login",{replace:!0})}catch(z){console.error("Error signing out:",z),D("/login",{replace:!0})}},P=()=>{j?x(!0):D("/checkout")},A=o?"cyber":"neumorph";return a.jsxs("div",{className:`sticky top-0 z-50 transition-all duration-500 ${N?`${A}-navbar-scrolled shadow-2xl`:""}`,children:[a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:a.jsx(If,{intensity:.6,enableGlitch:o})}),a.jsxs("div",{className:`${A}-navbar-wrapper relative overflow-visible`,children:[o&&a.jsx("div",{className:"cyber-navbar-glow animate-pulse"}),!o&&a.jsx("div",{className:"neumorph-navbar-glow animate-pulse"}),a.jsx("div",{className:`py-3 px-4 transition-all duration-500 backdrop-blur-md relative overflow-hidden ${o?"bg-gradient-to-r from-gray-900/95 via-cyan-900/20 to-gray-900/95 border-b border-cyan-500/30":"bg-gradient-to-r from-indigo-600/90 via-blue-600/85 to-purple-600/90 border-b border-indigo-300/50"}`,children:a.jsxs("div",{className:"container mx-auto flex items-center justify-between text-sm relative z-10",children:[a.jsx("p",{className:`hidden md:block font-medium transition-all duration-300 ${o?"text-cyan-200 cyber-glow":"text-white neumorph-text-shadow"}`,children:o?"🚀 NEURAL WHOLESALER | QUANTUM INVENTORY MANAGEMENT WITH QR PROTOCOLS":"✨ MEGA WHOLESALER | Premium Inventory Management with QR Tools"}),a.jsx("div",{className:"flex items-center space-x-3",children:[{href:"/help-center",text:o?"HELP MATRIX":"Help Center"},{href:"/contact-support",text:o?"NEURAL SUPPORT":"Contact Support"},{to:"/qr-tools",text:o?"QR PROTOCOLS":"QR Tools",icon:"📱"}].map((z,Q)=>a.jsxs("div",{className:"flex items-center",children:[Q>0&&a.jsx("span",{className:`${o?"text-cyan-500":"text-indigo-200"}`,children:"|"}),z.to?a.jsxs(ce,{to:z.to,className:`ml-3 transition-all duration-300 hover:scale-110 flex items-center group ${o?"text-cyan-300 hover:text-cyan-100 hover:text-glow":"text-white hover:text-indigo-100"}`,children:[z.icon&&a.jsx("span",{className:"mr-1 group-hover:scale-125 transition-transform duration-300",children:z.icon}),a.jsx("span",{className:"font-medium",children:z.text})]}):a.jsx(ce,{to:z.href,className:`ml-3 transition-all duration-300 hover:scale-110 ${o?"text-cyan-300 hover:text-cyan-100 hover:text-glow":"text-white hover:text-indigo-100"}`,children:a.jsx("span",{className:"font-medium",children:z.text})})]},Q))})]})}),a.jsx("nav",{className:`relative z-10 transition-all duration-500 backdrop-blur-lg overflow-visible ${o?"bg-gradient-to-r from-gray-900/95 via-cyan-900/10 to-gray-900/95":"bg-gradient-to-r from-indigo-700/95 via-blue-700/90 to-purple-700/95"}`,children:a.jsx("div",{className:"container mx-auto px-4 py-4 relative z-20",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center space-x-3 group",children:[a.jsxs("div",{className:`${A}-logo transition-all duration-300 group-hover:scale-110 relative overflow-hidden w-12 h-12 ${o?"":"bg-indigo-400 border-4 border-indigo-600"}`,children:[o&&a.jsx("div",{className:"logo-glow"}),!o&&a.jsx("div",{className:"neumorph-logo-glow"}),a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-8 w-8 transition-all duration-300 ${o?"text-cyan-400":"text-white"}`,viewBox:"0 0 20 20",fill:"currentColor",children:[a.jsx("path",{d:"M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"}),a.jsx("path",{d:"M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H14a1 1 0 001-1V5a1 1 0 00-1-1H3zM14 7h-4v4h4V7zm1-2a2 2 0 012 2v10a2 2 0 01-2 2H3a2 2 0 01-2-2V5a2 2 0 012-2h12z"})]})]}),a.jsx(ce,{to:"/",className:`transition-all duration-300 group-hover:scale-110 ${o?"cyber-title text-cyan-400 cyber-glow text-3xl":"neumorph-title text-white text-3xl"} font-bold hover:transform hover:rotate-1`,style:{textShadow:o?"none":"2px 2px 4px rgba(0,0,0,0.7)"},children:o?"NEURAL WHOLESALER":"MEGA WHOLESALER"})]}),a.jsxs("div",{className:"hidden md:flex items-center space-x-6 relative",children:[E().map(z=>a.jsxs(ce,{to:z.to,className:`transition-all duration-300 hover:scale-110 font-medium flex items-center relative group ${C(z.to)?o?"text-cyan-400 cyber-glow border-b-2 border-cyan-400":"text-white border-b-2 border-white neumorph-text-shadow":o?"text-cyan-200 hover:text-cyan-100 hover:cyber-glow":"text-indigo-100 hover:text-white hover:neumorph-text-shadow"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 transition-transform duration-300 group-hover:rotate-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:z.icon})}),a.jsx("span",{className:"font-bold tracking-wide",children:z.label})]},z.to)),a.jsx("div",{className:`h-8 w-px transition-all duration-300 ${o?"bg-cyan-500/50":"bg-indigo-300/50"}`}),S&&a.jsx("div",{className:"relative",children:a.jsxs(Lv,{onOpenChange:()=>{},children:[a.jsxs(Mv,{className:`relative transition-all duration-300 hover:scale-110 group inline-flex items-center gap-2 px-6 py-3 font-bold text-lg rounded-lg ${o?"bg-cyan-600 hover:bg-cyan-500 text-black border-2 border-cyan-400 shadow-lg shadow-cyan-500/25":"bg-indigo-500 hover:bg-indigo-400 text-white border-2 border-indigo-600 shadow-lg shadow-indigo-500/50"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 group-hover:animate-bounce",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m2.6 8L6 5H3m4 8a2 2 0 100 4 2 2 0 000-4zm10 0a2 2 0 100 4 2 2 0 000-4z"})}),a.jsx("span",{children:o?"CART MATRIX":"Cart"}),T>0&&a.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center font-bold animate-bounce",children:T>99?"99+":T})]}),a.jsxs(Vv,{className:`w-80 ${o?"cyber-card border-cyan-500/50":"neumorph-card"} rounded-xl shadow-2xl py-2`,children:[o&&a.jsx("div",{className:"card-glow"}),a.jsxs("div",{className:`px-4 py-3 border-b ${o?"border-cyan-700/50":"border-gray-200"}`,children:[a.jsxs("h3",{className:`text-lg font-bold ${o?"cyber-title text-cyan-400 cyber-glow":"neumorph-title text-gray-900"}`,children:[o?"CART MATRIX":"Shopping Cart"," (",T,")"]}),w>0&&a.jsxs("p",{className:`text-sm font-medium ${o?"text-cyan-200":"text-gray-500"}`,children:["Total: $",w.toFixed(2)]})]}),l.length===0?a.jsxs("div",{className:"px-4 py-6 text-center",children:[a.jsx("div",{className:"text-4xl mb-2 animate-bounce",children:"🛒"}),a.jsx("p",{className:`text-sm font-medium mb-3 ${o?"text-cyan-300":"text-gray-500"}`,children:o?"CART MATRIX EMPTY":"Your cart is empty"}),a.jsx(is,{onSelect:()=>D("/catalog"),className:`inline-block transition-all duration-300 hover:scale-105 px-4 py-2 rounded ${o?"text-cyan-400 hover:text-cyan-300 cyber-glow":"text-indigo-600 hover:text-indigo-800"} text-sm hover:underline font-bold`,children:o?"BROWSE PRODUCTS":"Browse Products"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"max-h-60 overflow-y-auto",children:[l.slice(0,3).map(z=>a.jsx("div",{className:`px-4 py-3 transition-all duration-300 ${o?"hover:bg-cyan-900/20":"hover:bg-gray-50"}`,children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center transition-all duration-300 hover:scale-110 ${o?"bg-gray-800 border border-cyan-600/50":"bg-gray-200"}`,children:z.imageUrl?a.jsx("img",{src:z.imageUrl,alt:z.name,className:"w-12 h-12 object-cover rounded-lg"}):a.jsx("span",{className:"text-lg",children:"📦"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`text-sm font-bold truncate ${o?"text-cyan-100":"text-gray-900"}`,children:z.name}),a.jsxs("p",{className:`text-xs font-medium ${o?"text-cyan-300":"text-gray-500"}`,children:["Qty: ",z.quantity," × $",z.price.toFixed(2)]})]}),a.jsxs("div",{className:`text-sm font-bold ${o?"text-cyan-400 cyber-glow":"text-gray-900"}`,children:["$",(z.price*z.quantity).toFixed(2)]})]})},z.id)),l.length>3&&a.jsx("div",{className:`px-4 py-2 text-center border-t ${o?"border-cyan-700/50 text-cyan-300":"border-gray-200 text-gray-500"}`,children:a.jsxs("span",{className:"text-sm font-medium",children:["+",l.length-3," more item",l.length-3!==1?"s":""]})})]}),a.jsxs("div",{className:`px-4 py-3 border-t ${o?"border-cyan-700/50":"border-gray-200"} space-y-2`,children:[a.jsx(is,{onSelect:P,className:`${A}-btn ${A}-btn-primary w-full py-3 transition-all duration-300 hover:scale-105 rounded text-center`,children:a.jsxs("span",{className:"font-bold",children:[o?"PROCESS ORDER":"Checkout"," ($",w.toFixed(2),")"]})}),a.jsx(is,{onSelect:()=>D("/cart"),className:`${A}-btn ${A}-btn-outline w-full py-3 transition-all duration-300 hover:scale-105 rounded text-center`,children:a.jsx("span",{className:"font-bold",children:o?"VIEW CART MATRIX":"View Cart"})})]})]})]})]})}),j&&a.jsxs(ce,{to:"/create-order",className:`transition-all duration-300 hover:scale-110 group inline-flex items-center gap-2 px-6 py-3 font-bold text-lg rounded-lg ${o?"bg-yellow-600 hover:bg-yellow-500 text-black border-2 border-yellow-400 shadow-lg shadow-yellow-500/25":"bg-blue-500 hover:bg-blue-400 text-white border-2 border-blue-600 shadow-lg shadow-blue-500/50"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 group-hover:rotate-90 transition-transform duration-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),a.jsx("span",{children:o?"NEW ORDER":"New Order"})]}),a.jsx("div",{className:"flex items-center",children:a.jsx(ga,{})}),s?a.jsx("div",{className:"relative",children:a.jsxs(Lv,{onOpenChange:()=>{},children:[a.jsxs(Mv,{className:"flex items-center space-x-2 focus:outline-none group transition-all duration-300 hover:scale-110",children:[a.jsx("div",{className:`h-12 w-12 rounded-full p-0.5 shadow-lg overflow-hidden transition-all duration-300 group-hover:ring-4 ${o?"bg-cyan-600 ring-cyan-400/50 cyber-glow":"bg-indigo-500 ring-indigo-400/50 neumorph-elevated"}`,children:a.jsx("div",{className:`h-full w-full rounded-full flex items-center justify-center font-bold text-lg ${o?"bg-gray-900 text-cyan-400":"bg-white text-indigo-700"}`,children:s.displayName?s.displayName.charAt(0).toUpperCase():"U"})}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 transition-all duration-300 ${o?"text-cyan-400":"text-indigo-100"}`,viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),a.jsxs(Vv,{className:`w-72 ${o?"cyber-card border-cyan-500/50":"neumorph-card"} rounded-xl shadow-2xl py-2`,children:[o&&a.jsx("div",{className:"card-glow"}),a.jsxs("div",{className:`px-4 py-3 border-b ${o?"border-cyan-700/50":"border-gray-200"}`,children:[a.jsx("p",{className:`text-sm font-medium ${o?"text-cyan-300":"text-gray-500"}`,children:o?"NEURAL ACCESS GRANTED":"Signed in as"}),a.jsx("p",{className:`text-sm font-bold truncate ${o?"text-cyan-100 cyber-glow":"text-gray-900"}`,children:s.email}),a.jsx("p",{className:`text-xs font-bold ${s.accountType==="admin"?"text-red-400":s.accountType==="manager"?"text-purple-400":"text-green-400"}`,children:s.accountType==="admin"?"👑 ADMINISTRATOR":s.accountType==="manager"?"👔 MANAGER":s.accountType==="business"?"🏢 BUSINESS USER":"👤 REGULAR USER"})]}),a.jsxs("div",{className:"py-1",children:[a.jsxs(is,{onSelect:y,className:`flex items-center px-4 py-3 text-sm font-medium transition-all duration-300 hover:scale-105 group ${o?"text-cyan-200 hover:bg-cyan-900/20 hover:text-cyan-100":"text-gray-700 hover:bg-indigo-50 hover:text-indigo-700"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 mr-3 transition-all duration-300 group-hover:rotate-12 ${o?"text-cyan-400":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),a.jsx("span",{className:"font-bold",children:o?"NEURAL PROFILE":"Your Profile"})]}),a.jsxs(is,{onSelect:v,className:`flex items-center px-4 py-3 text-sm font-medium transition-all duration-300 hover:scale-105 group ${o?"text-cyan-200 hover:bg-cyan-900/20 hover:text-cyan-100":"text-gray-700 hover:bg-indigo-50 hover:text-indigo-700"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 mr-3 transition-all duration-300 group-hover:rotate-12 ${o?"text-cyan-400":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),a.jsx("span",{className:"font-bold",children:o?"SYSTEM CONFIG":"Settings"})]}),a.jsxs(is,{onSelect:I,className:`flex items-center px-4 py-3 text-sm font-medium transition-all duration-300 hover:scale-105 group ${o?"text-cyan-200 hover:bg-cyan-900/20 hover:text-cyan-100":"text-gray-700 hover:bg-indigo-50 hover:text-indigo-700"}`,children:[a.jsx("span",{className:"mr-3 text-lg animate-pulse",children:"📱"}),a.jsx("span",{className:"font-bold",children:o?"QR PROTOCOLS":"QR Tools"})]})]}),a.jsx("div",{className:`py-1 border-t ${o?"border-cyan-700/50":"border-gray-200"}`,children:a.jsxs(is,{onSelect:_,className:`flex w-full items-center px-4 py-3 text-sm font-bold transition-all duration-300 hover:scale-105 group ${o?"text-red-400 hover:bg-red-900/30 hover:text-red-300":"text-gray-700 hover:bg-red-50 hover:text-red-700"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 mr-3 transition-all duration-300 group-hover:rotate-180 ${o?"text-red-400":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),o?"DISCONNECT":"Sign out"]})})]})]})}):a.jsxs(ce,{to:"/login",className:`transition-all duration-300 hover:scale-110 group inline-flex items-center gap-2 px-6 py-3 font-bold text-lg rounded-lg ${o?"bg-cyan-600 hover:bg-cyan-500 text-black border-2 border-cyan-400 shadow-lg shadow-cyan-500/25":"bg-purple-600 hover:bg-purple-500 text-white border-2 border-purple-700 shadow-lg shadow-purple-600/50"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 group-hover:rotate-12 transition-transform duration-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),a.jsx("span",{children:o?"NEURAL ACCESS":"Sign In"})]})]}),a.jsxs("div",{className:"md:hidden flex items-center space-x-3",children:[S&&a.jsxs(ce,{to:"/cart",className:`relative transition-all duration-300 hover:scale-110 w-14 h-14 rounded-full flex items-center justify-center ${o?"bg-cyan-600 hover:bg-cyan-500 text-black border-2 border-cyan-400":"bg-indigo-500 hover:bg-indigo-400 text-white border-3 border-indigo-600"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m2.6 8L6 5H3m4 8a2 2 0 100 4 2 2 0 000-4zm10 0a2 2 0 100 4 2 2 0 000-4z"})}),T>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold animate-bounce",children:T>9?"9+":T})]}),a.jsx(ce,{to:"/qr-tools",className:`transition-all duration-300 hover:scale-110 w-14 h-14 rounded-full flex items-center justify-center ${o?"bg-purple-600 hover:bg-purple-500 text-white border-2 border-purple-400":"bg-blue-500 hover:bg-blue-400 text-white border-3 border-blue-600"}`,title:"QR Tools",children:a.jsx("span",{className:"text-lg",children:"📱"})}),a.jsx(ga,{className:"mr-2"}),a.jsx("button",{onClick:()=>m(!h),className:`transition-all duration-300 hover:scale-110 w-14 h-14 rounded-full flex items-center justify-center ${o?"bg-gray-700 hover:bg-gray-600 text-cyan-400 border-2 border-gray-600":"bg-purple-600 hover:bg-purple-500 text-white border-3 border-purple-700"}`,children:h?a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 transition-transform duration-300 rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 transition-transform duration-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})})]})]})})}),h&&a.jsx("div",{className:`md:hidden backdrop-blur-lg animate-slideInDown ${o?"bg-gradient-to-r from-gray-900/98 to-cyan-900/20 border-b border-cyan-500/30":"bg-gradient-to-r from-indigo-700/98 to-purple-700/20 border-b border-indigo-300/50"}`,children:a.jsxs("div",{className:"py-3 px-4 space-y-1",children:[E().map((z,Q)=>a.jsx("button",{onClick:()=>{m(!1),D(z.to)},className:`block w-full text-left px-4 py-3 rounded-lg transition-all duration-300 hover:scale-105 font-bold ${C(z.to)?o?"bg-cyan-900/30 text-cyan-400 border border-cyan-600/50":"bg-indigo-600/30 text-white border border-indigo-400/50":o?"text-cyan-200 hover:bg-cyan-900/20 hover:text-cyan-100":"text-indigo-100 hover:bg-indigo-600/20 hover:text-white"}`,children:z.label},z.to)),j&&a.jsx("button",{onClick:()=>{m(!1),D("/create-order")},className:`block w-full text-left px-4 py-3 rounded-lg transition-all duration-300 hover:scale-105 font-bold ${o?"text-cyan-200 hover:bg-cyan-900/20 hover:text-cyan-100":"text-indigo-100 hover:bg-indigo-600/20 hover:text-white"}`,children:o?"NEW ORDER":"New Order"}),s?a.jsxs("div",{className:`pt-4 pb-3 border-t ${o?"border-cyan-700/50":"border-indigo-300/50"} space-y-2`,children:[a.jsx("div",{className:"px-4 py-2",children:a.jsx("p",{className:`text-sm font-medium ${o?"text-cyan-300":"text-indigo-200"}`,children:s.email})}),a.jsx("button",{onClick:()=>{m(!1),y()},className:`block w-full text-left px-4 py-3 rounded-lg transition-all duration-300 hover:scale-105 font-bold ${o?"text-cyan-200 hover:bg-cyan-900/20 hover:text-cyan-100":"text-indigo-100 hover:bg-indigo-600/20 hover:text-white"}`,children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),a.jsx("span",{children:o?"NEURAL PROFILE":"Your Profile"})]})}),a.jsx("button",{onClick:()=>{m(!1),v()},className:`block w-full text-left px-4 py-3 rounded-lg transition-all duration-300 hover:scale-105 font-bold ${o?"text-cyan-200 hover:bg-cyan-900/20 hover:text-cyan-100":"text-indigo-100 hover:bg-indigo-600/20 hover:text-white"}`,children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),a.jsx("span",{children:o?"SYSTEM CONFIG":"Settings"})]})}),a.jsx("button",{onClick:()=>{m(!1),I()},className:`block w-full text-left px-4 py-3 rounded-lg transition-all duration-300 hover:scale-105 font-bold ${o?"text-cyan-200 hover:bg-cyan-900/20 hover:text-cyan-100":"text-indigo-100 hover:bg-indigo-600/20 hover:text-white"}`,children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-lg",children:"📱"}),a.jsx("span",{children:o?"QR PROTOCOLS":"QR Tools"})]})}),a.jsx("button",{onClick:()=>{m(!1),_()},className:`block w-full text-left px-4 py-3 rounded-lg transition-all duration-300 hover:scale-105 font-bold ${o?"text-red-400 hover:bg-red-900/30":"text-red-600 hover:bg-red-500/20"}`,children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),a.jsx("span",{children:o?"DISCONNECT":"Sign out"})]})})]}):a.jsx("button",{onClick:()=>{m(!1),D("/login")},className:`block w-full text-center py-3 mt-4 font-bold rounded-lg transition-all duration-300 hover:scale-105 ${o?"bg-cyan-600 hover:bg-cyan-500 text-black":"bg-indigo-600 hover:bg-indigo-500 text-white"}`,children:o?"NEURAL ACCESS":"Sign In"})]})})]}),g&&a.jsx(MO,{showAsModal:!0,onClose:()=>x(!1)}),a.jsx("style",{jsx:!0,children:`
        @keyframes slideDown {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        @keyframes slideInDown {
          from {
            opacity: 0;
            transform: translateY(-20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        .animate-slideDown {
          animation: slideDown 0.2s ease-out;
        }
        
        .animate-slideInDown {
          animation: slideInDown 0.3s ease-out;
        }
      `})]})},fe=({children:t})=>{const[e,n]=R.useState(!1),[r,s]=R.useState(!1),i=Mt(),o=rr(),{user:l,logout:u,userRole:d}=ir(),{darkMode:h}=Rt(),m=R.useRef(null),g=R.useRef(null),x=w=>i.pathname===w,N=h?"cyber":"neumorph",k=h?"cyberpunk":"neumorph";R.useEffect(()=>{const w=()=>{s(window.scrollY>10)};return window.addEventListener("scroll",w),()=>window.removeEventListener("scroll",w)},[]);const C=async()=>{try{await u(),n(!1),o("/login")}catch(w){console.error("Error signing out:",w)}},T=i.pathname==="/login"||i.pathname==="/signup"||i.pathname==="/register"||i.pathname==="/forgot-password";return R.useEffect(()=>{if(!h)return;const w=m.current;if(!w)return;const S=w.getContext("2d"),j=()=>{w.width=window.innerWidth,w.height=window.innerHeight};j();const D=[],U=60;for(let v=0;v<U;v++)D.push({x:Math.random()*w.width,y:Math.random()*w.height,vx:(Math.random()-.5)*.8,vy:(Math.random()-.5)*.8,size:Math.random()*2+1,pulse:Math.random()*Math.PI*2,color:`hsl(${180+Math.random()*60}, 100%, 50%)`,energy:Math.random()});const E=()=>{S.fillStyle="rgba(0, 0, 0, 0.03)",S.fillRect(0,0,w.width,w.height),D.forEach((v,I)=>{v.x+=v.vx,v.y+=v.vy,v.pulse+=.02,v.energy=Math.sin(v.pulse)*.5+.5,(v.x<0||v.x>w.width)&&(v.vx*=-1),(v.y<0||v.y>w.height)&&(v.vy*=-1);const _=v.size+v.energy*3,P=S.createRadialGradient(v.x,v.y,0,v.x,v.y,_);P.addColorStop(0,v.color),P.addColorStop(1,"transparent"),S.fillStyle=P,S.beginPath(),S.arc(v.x,v.y,_,0,Math.PI*2),S.fill(),D.forEach((A,z)=>{if(I!==z){const Q=v.x-A.x,ee=v.y-A.y,ye=Math.sqrt(Q*Q+ee*ee);if(ye<100){const M=(1-ye/100)*v.energy*.2;S.beginPath(),S.moveTo(v.x,v.y),S.lineTo(A.x,A.y),S.strokeStyle=`rgba(0, 255, 255, ${M})`,S.lineWidth=1,S.stroke()}}})}),requestAnimationFrame(E)};E();const y=()=>{j()};return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[h]),R.useEffect(()=>{if(!h)return;const w=g.current;if(!w)return;const S=w.getContext("2d"),j=()=>{w.width=window.innerWidth,w.height=window.innerHeight};j();const E="アァカサタナハマヤャラワガザダバパイィキシチニヒミリヰギジヂビピウゥクスツヌフムユュルグズブヅプエェケセテネヘメレヱゲゼデベペオォコソトノホモヨョロヲゴゾドボポヴッン"+"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",y=12,v=w.width/y,I=[];for(let z=0;z<v;z++)I[z]=Math.random()*w.height/y;const P=setInterval(()=>{S.fillStyle="rgba(0, 0, 0, 0.03)",S.fillRect(0,0,w.width,w.height),S.font=y+"px monospace";for(let z=0;z<I.length;z++){const Q=E.charAt(Math.floor(Math.random()*E.length)),ee=S.createLinearGradient(0,I[z]*y-15,0,I[z]*y);ee.addColorStop(0,"#00FFFF"),ee.addColorStop(.5,"#00FF88"),ee.addColorStop(1,"rgba(0, 255, 255, 0.05)"),S.fillStyle=ee,S.fillText(Q,z*y,I[z]*y),I[z]*y>w.height&&Math.random()>.98&&(I[z]=0),I[z]++}},80),A=()=>{j()};return window.addEventListener("resize",A),()=>{clearInterval(P),window.removeEventListener("resize",A)}},[h]),T?a.jsxs("div",{className:`${k}-login-wrapper`,children:[a.jsx(If,{intensity:.7,enableGlitch:h}),h&&a.jsxs(a.Fragment,{children:[a.jsx("canvas",{ref:m,className:"fixed inset-0 pointer-events-none z-0"}),a.jsx("canvas",{ref:g,className:"fixed inset-0 pointer-events-none z-1 opacity-5"}),a.jsx("div",{className:"fixed inset-0 pointer-events-none z-2 opacity-10",children:a.jsx("div",{className:"cyberpunk-grid"})}),a.jsx("div",{className:"fixed inset-0 pointer-events-none z-3",children:a.jsx("div",{className:"scanlines"})})]}),!h&&a.jsx("div",{className:"fixed inset-0 pointer-events-none z-2 opacity-30",children:a.jsx("div",{className:"neumorph-grid"})}),a.jsx("main",{className:"relative z-10",children:t})]}):a.jsxs("div",{className:`${k}-layout-wrapper`,children:[a.jsx("style",{children:`
        /* Force transparency with higher specificity */
        .layout-wrapper .force-transparent.main-content-wrapper,
        .layout-wrapper .force-transparent.neumorph-main-content-wrapper,
        .layout-wrapper main .force-transparent {
          background: transparent !important;
          border: none !important;
          backdrop-filter: none !important;
          box-shadow: none !important;
          border-radius: 0 !important;
          min-height: auto !important;
        }
      `}),a.jsx(If,{intensity:h?.8:.6,enableGlitch:h}),h?a.jsxs(a.Fragment,{children:[a.jsx("canvas",{ref:m,className:"fixed inset-0 pointer-events-none z-0"}),a.jsx("canvas",{ref:g,className:"fixed inset-0 pointer-events-none z-1 opacity-8"}),a.jsx("div",{className:"fixed inset-0 pointer-events-none z-2 opacity-15",children:a.jsx("div",{className:"cyberpunk-grid"})}),a.jsx("div",{className:"fixed inset-0 pointer-events-none z-3",children:a.jsx("div",{className:"scanlines"})})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 pointer-events-none z-2 opacity-20",children:a.jsx("div",{className:"neumorph-grid"})}),a.jsx("div",{className:"fixed inset-0 pointer-events-none z-3 opacity-10",children:a.jsx("div",{className:"neumorph-gradient"})})]}),a.jsxs("div",{className:`${k}-layout-content layout-wrapper relative z-10 min-h-screen flex flex-col`,children:[a.jsx("div",{className:`sticky top-0 z-40 transition-all duration-300 ${r?`${N}-navbar-scrolled shadow-lg`:""}`,children:a.jsxs("div",{className:`${N}-navbar-wrapper`,children:[h&&a.jsx("div",{className:"cyber-navbar-glow"}),!h&&a.jsx("div",{className:"neumorph-navbar-glow"}),a.jsx("div",{className:"relative z-50",children:a.jsx(VO,{sidebarOpen:e,setSidebarOpen:n})})]})}),e&&a.jsx("div",{className:`fixed inset-0 z-20 ${h?"bg-black bg-opacity-70 backdrop-blur-sm":"bg-white bg-opacity-70 backdrop-blur-sm"} lg:hidden`,onClick:()=>n(!1)}),a.jsxs("button",{className:`${N}-fab-button fixed bottom-6 right-6 z-30 lg:hidden`,onClick:()=>n(!e),"aria-label":"Toggle sidebar",children:[h&&a.jsx("div",{className:"fab-glow"}),!h&&a.jsx("div",{className:"neumorph-fab-glow"}),a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})]}),a.jsxs("div",{className:`${N}-sidebar fixed inset-y-0 left-0 transform ${e?"translate-x-0":"-translate-x-full"} lg:hidden z-30 w-64 transition-transform duration-300 ease-in-out`,children:[h&&a.jsx("div",{className:"sidebar-glow"}),!h&&a.jsx("div",{className:"neumorph-sidebar-glow"}),a.jsxs("div",{className:`${h?"sidebar-content":"neumorph-sidebar-content"} p-6`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsxs("div",{className:`${N}-logo`,children:[h&&a.jsx("div",{className:"logo-glow"}),!h&&a.jsx("div",{className:"neumorph-logo-glow"}),a.jsxs("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{d:"M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"}),a.jsx("path",{d:"M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H14a1 1 0 001-1V5a1 1 0 00-1-1H3z"})]})]}),a.jsx("h2",{className:`ml-3 text-xl font-bold ${h?"text-cyan-400 cyber-glow":"text-indigo-600 neumorph-text-shadow"}`,children:"WHOLESALER"})]}),a.jsx("button",{className:`${N}-close-btn`,onClick:()=>n(!1),"aria-label":"Close sidebar",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l?a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:`${N}-user-card`,children:[h&&a.jsx("div",{className:"user-card-glow"}),!h&&a.jsx("div",{className:"neumorph-user-card-glow"}),a.jsxs("div",{className:`${h?"user-avatar":"neumorph-user-avatar"}`,children:[h&&a.jsx("div",{className:"avatar-glow"}),!h&&a.jsx("div",{className:"neumorph-avatar-glow"}),l.displayName?l.displayName.charAt(0).toUpperCase():"U"]}),a.jsxs("div",{className:"user-info",children:[a.jsx("p",{className:h?"user-name":"neumorph-user-name",children:l.displayName||"User"}),a.jsx("p",{className:h?"user-email":"neumorph-user-email",children:l.email}),a.jsx("p",{className:h?"user-role":"neumorph-user-role",children:d})]})]})}):a.jsx("div",{className:"mb-8 flex justify-center",children:a.jsxs(ce,{to:"/login",className:`${N}-btn ${N}-btn-primary`,children:[a.jsx("span",{className:h?"btn-text":"neumorph-btn-text",children:"SIGN IN"}),h&&a.jsx("div",{className:"btn-glow"}),!h&&a.jsx("div",{className:"neumorph-btn-glow"})]})}),a.jsx("nav",{className:"space-y-2",children:[{to:"/",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6",label:"DASHBOARD"},{to:"/inventory",icon:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4",label:"INVENTORY"},{to:"/orders",icon:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z",label:"ORDERS"},{to:"/create-order",icon:"M12 6v6m0 0v6m0-6h6m-6 0H6",label:"NEW ORDER"}].map(w=>a.jsxs(ce,{to:w.to,className:`${N}-nav-link ${x(w.to)?"active":""}`,onClick:()=>n(!1),children:[h&&a.jsx("div",{className:"nav-link-glow"}),!h&&a.jsx("div",{className:"neumorph-nav-link-glow"}),a.jsx("svg",{className:h?"nav-icon":"neumorph-nav-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:w.icon})}),a.jsx("span",{children:w.label})]},w.to))}),a.jsxs("div",{className:`mt-10 pt-6 border-t ${h?"border-cyan-900/30":"border-gray-300"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:`text-xs font-semibold uppercase tracking-wider ${h?"text-gray-400":"text-gray-600"}`,children:h?"NEURAL THEME":"Interface Theme"}),a.jsx(ga,{})]}),l&&a.jsxs("button",{onClick:C,className:`${N}-signout-btn w-full`,children:[h&&a.jsx("div",{className:"signout-glow"}),!h&&a.jsx("div",{className:"neumorph-signout-glow"}),a.jsx("svg",{className:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),a.jsx("span",{children:h?"DISCONNECT":"Sign Out"})]})]})]})]}),a.jsx("main",{className:"flex-grow py-6 px-4 relative z-1",children:a.jsx("div",{className:`${h?"main-content-wrapper":"neumorph-main-content-wrapper"} force-transparent`,children:t})}),a.jsxs("footer",{className:`${N}-footer relative z-10 mt-auto`,children:[h&&a.jsx("div",{className:"footer-glow"}),!h&&a.jsx("div",{className:"neumorph-footer-glow"}),a.jsx("div",{className:h?"footer-content":"neumorph-footer-content",children:a.jsxs("div",{className:"container mx-auto px-4 md:px-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[a.jsxs("div",{children:[a.jsx("h3",{className:h?"footer-heading":"neumorph-footer-heading",children:h?"CORPORATION":"Company"}),a.jsxs("ul",{className:h?"footer-links":"neumorph-footer-links",children:[a.jsx("li",{children:a.jsx(ce,{to:"/about-us",className:h?"footer-link":"neumorph-footer-link",children:h?"About Neural Corp":"About Us"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:h?"footer-link":"neumorph-footer-link",children:h?"Digital Careers":"Careers"})}),a.jsx("li",{children:a.jsx(ce,{to:"/privacy-policy",className:h?"footer-link":"neumorph-footer-link",children:h?"Privacy Protocol":"Privacy Policy"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:h?"footer-heading":"neumorph-footer-heading",children:h?"RESOURCES":"Resources"}),a.jsxs("ul",{className:h?"footer-links":"neumorph-footer-links",children:[a.jsx("li",{children:a.jsx(ce,{to:"/documentation",className:h?"footer-link":"neumorph-footer-link",children:h?"Neural Documentation":"Documentation"})}),a.jsx("li",{children:a.jsx(ce,{to:"/support-center",className:h?"footer-link":"neumorph-footer-link",children:h?"Support Matrix":"Support Center"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:h?"footer-heading":"neumorph-footer-heading",children:h?"FEATURES":"Features"}),a.jsxs("ul",{className:h?"footer-links":"neumorph-footer-links",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:h?"footer-link":"neumorph-footer-link",children:h?"Quantum Inventory":"Inventory Management"})}),a.jsx("li",{children:a.jsx(ce,{to:"/order-processing",className:h?"footer-link":"neumorph-footer-link",children:h?"Neural Processing":"Order Processing"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:h?"footer-heading":"neumorph-footer-heading",children:h?"CONNECT":"Contact"}),a.jsxs("ul",{className:h?"footer-links":"neumorph-footer-links",children:[a.jsxs("li",{className:h?"footer-contact":"neumorph-footer-contact",children:[a.jsx("svg",{className:h?"contact-icon":"neumorph-contact-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),h?"+1 (555) NEURAL":"+1 (555) 123-4567"]}),a.jsxs("li",{className:h?"footer-contact":"neumorph-footer-contact",children:[a.jsx("svg",{className:h?"contact-icon":"neumorph-contact-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),h?"contact@neural-corp.net":"hello@wholesaler.com"]})]}),a.jsx("div",{className:h?"cyber-social-links":"neumorph-social-links",children:["FB","TW","LI"].map(w=>a.jsxs("a",{href:"#",className:h?"social-link":"neumorph-social-link",children:[h&&a.jsx("div",{className:"social-glow"}),!h&&a.jsx("div",{className:"neumorph-social-glow"}),w]},w))})]})]}),a.jsxs("div",{className:h?"footer-bottom":"neumorph-footer-bottom",children:[a.jsxs("p",{className:h?"footer-copyright":"neumorph-footer-copyright",children:["© ",new Date().getFullYear()," ",h?"NEURAL WHOLESALER CORP. ALL RIGHTS RESERVED.":"Wholesaler Inc. All rights reserved."]}),a.jsx("div",{className:h?"footer-made-by":"neumorph-footer-made-by",children:a.jsx("p",{children:h?"ENGINEERED WITH ⚡ BY THE NEURAL TEAM":"Made with ❤️ by our team"})})]})]})})]})]})]})},$O=()=>{const t=rr(),{login:e,error:n,loading:r,user:s,approvalStatus:i,clearError:o}=ir(),{darkMode:l}=Rt(),u=R.useRef(null),d=R.useRef(null),[h,m]=R.useState({email:"",password:""}),[g,x]=R.useState(""),[N,k]=R.useState(!1),[C,T]=R.useState(!1),[w,S]=R.useState(!1),[j,D]=R.useState(!1),[U,E]=R.useState(!1),[y,v]=R.useState(!1),[I,_]=R.useState(""),[P,A]=R.useState(!1);R.useEffect(()=>{const M=u.current;if(!M)return;const B=M.getContext("2d"),F=()=>{M.width=window.innerWidth,M.height=window.innerHeight};F();const Z="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZアイウエオカキクケコサシスセソタチツテトナニヌネノ",ne=14,H=Math.floor(M.width/ne),$e=Array(H).fill(0).map(()=>Math.random()*M.height/ne),Ue=Array(H).fill(0).map(()=>.5+Math.random()*1),K=Array(H).fill(0).map(()=>Math.random()),Vt=setInterval(()=>{B.fillStyle=l?"rgba(0, 0, 0, 0.08)":"rgba(240, 240, 243, 0.12)",B.fillRect(0,0,M.width,M.height),B.font=`${ne}px 'Orbitron', monospace`;for(let Ae=0;Ae<$e.length;Ae++){const Yt=Z[Math.floor(Math.random()*Z.length)];K[Ae]+=(Math.random()-.5)*.1,K[Ae]=Math.max(.3,Math.min(1,K[Ae]));const At=K[Ae];l?B.fillStyle=`rgba(0, 255, 255, ${At})`:B.fillStyle=`rgba(34, 102, 187, ${At*.6})`,B.fillText(Yt,Ae*ne,$e[Ae]*ne),$e[Ae]+=Ue[Ae],$e[Ae]*ne>M.height&&Math.random()>.975&&($e[Ae]=0,Ue[Ae]=.5+Math.random()*1)}},50);return window.addEventListener("resize",F),()=>{clearInterval(Vt),window.removeEventListener("resize",F)}},[l]),R.useEffect(()=>{const M=d.current;if(!M)return;const B=M.getContext("2d"),F=()=>{M.width=window.innerWidth,M.height=window.innerHeight};F();const Z=Array(60).fill(0).map(()=>({x:Math.random()*M.width,y:Math.random()*M.height,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,size:Math.random()*3+1,pulse:Math.random()*Math.PI*2,color:l?`hsl(${180+Math.random()*80}, 100%, ${50+Math.random()*30}%)`:`hsl(${200+Math.random()*60}, 70%, ${40+Math.random()*20}%)`,life:Math.random()}));let ne=0,H=0;const $e=K=>{ne=K.clientX,H=K.clientY};window.addEventListener("mousemove",$e);const Ue=()=>{B.fillStyle=l?"rgba(0, 0, 0, 0.05)":"rgba(240, 240, 243, 0.08)",B.fillRect(0,0,M.width,M.height),Z.forEach((K,xt)=>{const Vt=ne-K.x,Ae=H-K.y;Math.sqrt(Vt*Vt+Ae*Ae)<100&&(K.vx+=Vt*5e-5,K.vy+=Ae*5e-5),K.x+=K.vx,K.y+=K.vy,K.pulse+=.03,K.life=Math.sin(K.pulse)*.5+.5,(K.x<0||K.x>M.width)&&(K.vx*=-.8,K.x=Math.max(0,Math.min(M.width,K.x))),(K.y<0||K.y>M.height)&&(K.vy*=-.8,K.y=Math.max(0,Math.min(M.height,K.y))),K.vx*=.99,K.vy*=.99;const At=K.size*(1+K.life*2),Zr=B.createRadialGradient(K.x,K.y,0,K.x,K.y,At);Zr.addColorStop(0,K.color),Zr.addColorStop(1,"transparent"),B.fillStyle=Zr,B.beginPath(),B.arc(K.x,K.y,At,0,Math.PI*2),B.fill(),Z.slice(xt+1).forEach(or=>{const es=Math.sqrt((K.x-or.x)**2+(K.y-or.y)**2);es<120&&(B.strokeStyle=l?`rgba(0, 255, 255, ${(1-es/120)*.3})`:`rgba(34, 102, 187, ${(1-es/120)*.2})`,B.lineWidth=1,B.beginPath(),B.moveTo(K.x,K.y),B.lineTo(or.x,or.y),B.stroke())})}),requestAnimationFrame(Ue)};return Ue(),window.addEventListener("resize",F),()=>{window.removeEventListener("resize",F),window.removeEventListener("mousemove",$e)}},[l]),R.useEffect(()=>{E(!0)},[]),R.useEffect(()=>{o(),x("")},[h.email,h.password,o]),R.useEffect(()=>{s&&j&&(s.canAccess||i&&!i.canAccess)&&t("/home",{replace:!0})},[s,i,j,t]);const z=M=>{m(B=>({...B,[M.target.name]:M.target.value}))},Q=async M=>{if(M.preventDefault(),!h.email||!h.password){x("Please enter both email and password");return}k(!0),x(""),D(!0);try{await e(h.email,h.password,C)}catch(B){x(B.message||"Failed to login. Please check your credentials."),D(!1)}finally{k(!1)}},ee=async M=>{if(M.preventDefault(),!I){x("Please enter your email address");return}k(!0),x("");try{await Jw(cs,I),A(!0)}catch(B){switch(console.error("Password reset error:",B),B.code){case"auth/user-not-found":x("No account found with this email address");break;case"auth/invalid-email":x("Please enter a valid email address");break;default:x("Failed to send reset email. Please try again.")}}finally{k(!1)}},ye=M=>{m({email:{admin:"admin@wholesaler.com",manager:"manager@wholesaler.com",business_buyer:"buyer@wholesaler.com",business_seller:"seller@wholesaler.com",user:"user@wholesaler.com"}[M],password:"password123"})};return y?a.jsxs("div",{className:`min-h-screen flex items-center justify-center relative overflow-hidden transition-all duration-1000 ${l?"bg-black":"bg-gradient-to-br from-gray-50 to-blue-50"}`,children:[a.jsx("canvas",{ref:u,className:"fixed inset-0 z-0",style:{opacity:l?.3:.2,filter:"blur(1px)"}}),a.jsx("canvas",{ref:d,className:"fixed inset-0 z-1",style:{opacity:.5}}),P?a.jsxs("div",{className:`max-w-md w-full mx-4 p-8 rounded-xl shadow-lg text-center transition-all duration-700 animate-bounceIn ${l?"cyber-card":"neumorph-card"}`,children:[l&&a.jsx("div",{className:"card-glow"}),a.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:"📧"}),a.jsx("h2",{className:`text-2xl font-bold mb-4 ${l?"cyber-title text-cyan-400 cyber-glow":"neumorph-title text-blue-600"}`,children:l?"RESET SIGNAL SENT!":"Reset Email Sent!"}),a.jsx("p",{className:`mb-6 ${l?"text-gray-300":"text-gray-600"}`,children:"Check your email for password reset instructions."}),a.jsx("button",{onClick:()=>{v(!1),A(!1),_("")},className:`${l?"cyber-btn cyber-btn-primary":"neumorph-btn neumorph-btn-primary"} w-full py-3 transition-all duration-300 hover:scale-105`,children:a.jsx("span",{children:l?"RETURN TO TERMINAL":"Back to Login"})})]}):a.jsxs("div",{className:`max-w-md w-full mx-4 p-8 rounded-xl shadow-lg transition-all duration-700 animate-slideInUp ${l?"cyber-card":"neumorph-card"}`,children:[l&&a.jsx("div",{className:"card-glow"}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:`text-2xl font-bold mb-2 ${l?"cyber-title text-cyan-400 cyber-glow":"neumorph-title text-blue-600"}`,children:l?"RESET ACCESS KEY":"Reset Password"}),a.jsx("p",{className:`text-sm ${l?"text-gray-300":"text-gray-600"}`,children:l?"Enter your neural ID to receive reset instructions":"Enter your email to receive reset instructions"})]}),g&&a.jsx("div",{className:`mb-4 p-3 rounded border ${l?"bg-red-900/20 border-red-600 text-red-400":"bg-red-100 border-red-400 text-red-600"}`,children:a.jsx("p",{className:"text-sm",children:g})}),a.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${l?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:l?"NEURAL ID":"Email Address"}),a.jsx("input",{type:"email",value:I,onChange:M=>_(M.target.value),className:`w-full py-3 px-4 font-mono transition-all duration-300 focus:scale-105 ${l?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:l?"neural.id@corp.net":"your@email.com",required:!0})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>{v(!1),x(""),_("")},className:`${l?"cyber-btn cyber-btn-ghost":"neumorph-btn"} flex-1 py-3 transition-all duration-300 hover:scale-105`,children:a.jsx("span",{children:l?"CANCEL":"Cancel"})}),a.jsx("button",{type:"submit",disabled:N,className:`${l?"cyber-btn cyber-btn-primary":"neumorph-btn neumorph-btn-primary"} flex-1 py-3 transition-all duration-300 hover:scale-105 ${N?"animate-spin":""}`,children:a.jsx("span",{children:N?l?"SENDING...":"Sending...":l?"SEND RESET":"Send Reset"})})]})]})]})]}):a.jsxs("div",{className:`min-h-screen relative overflow-hidden transition-all duration-1000 ${l?"bg-black":"bg-gradient-to-br from-gray-50 to-blue-50"}`,children:[a.jsx("canvas",{ref:u,className:"fixed inset-0 z-0",style:{opacity:l?.6:.3,filter:`blur(${l?0:.5}px)`}}),a.jsx("canvas",{ref:d,className:"fixed inset-0 z-1",style:{opacity:.8}}),l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-2 opacity-20 pointer-events-none animate-pulse",children:a.jsx("div",{className:"cyberpunk-grid"})}),a.jsx("div",{className:"fixed inset-0 z-3 pointer-events-none",children:a.jsx("div",{className:"scanlines"})})]}):a.jsx("div",{className:"fixed inset-0 z-2 opacity-30 pointer-events-none",children:a.jsx("div",{className:"neumorph-grid animate-pulse"})}),a.jsxs("div",{className:`relative z-10 min-h-screen flex transition-all duration-1000 transform ${U?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}`,children:[a.jsxs("div",{className:"hidden md:flex md:w-1/2 relative p-12 flex-col justify-between",children:[a.jsx("div",{className:`absolute inset-0 backdrop-blur-sm transition-all duration-700 ${l?"bg-gradient-to-br from-cyan-900/20 to-purple-900/20":"bg-gradient-to-br from-blue-900/10 to-indigo-900/10"}`}),a.jsxs("div",{className:"relative z-10 space-y-8 animate-fadeInLeft",children:[a.jsxs(ce,{to:"/home",className:"flex items-center group cursor-pointer",children:[a.jsxs("div",{className:`${l?"cyber-logo":"neumorph-logo"} h-12 w-12 transition-all duration-300 group-hover:scale-110`,children:[l&&a.jsx("div",{className:"logo-glow"}),a.jsxs("svg",{className:"h-8 w-8 animate-spin-slow",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{d:"M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"}),a.jsx("path",{d:"M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H14a1 1 0 001-1V5a1 1 0 00-1-1H3z"})]})]}),a.jsx("h1",{className:`text-3xl font-bold ml-4 transition-all duration-300 group-hover:scale-105 ${l?"cyber-title text-cyan-400 cyber-glow":"neumorph-title text-blue-600"}`,children:"WHOLESALER"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h2",{className:`text-5xl font-bold animate-slideInUp ${l?"cyber-title":"neumorph-title"}`,children:[a.jsx("div",{className:`${l?"text-cyan-400 cyber-glow":"text-blue-600"} animate-pulse`,children:l?"NEURAL":"QUANTUM"}),a.jsx("div",{className:`${l?"text-purple-400 cyber-glow":"text-teal-600"} animate-bounce`,children:"INTERFACE"}),a.jsx("div",{className:`${l?"text-yellow-400 cyber-glow":"text-indigo-600"} animate-pulse`,children:"ACCESS"})]}),a.jsx("p",{className:`text-xl leading-relaxed animate-fadeIn ${l?"text-gray-300":"text-gray-700"}`,children:l?"Connect to the wholesale neural network through our advanced quantum platform.":"Experience next-generation wholesale management with sophisticated design."})]}),a.jsx("div",{className:"space-y-6",children:[{icon:"🛡️",title:l?"QUANTUM SECURITY":"ENTERPRISE SECURITY",delay:"100ms"},{icon:"⚡",title:l?"NEURAL PROTOCOLS":"SMART INTERFACE",delay:"200ms"},{icon:"🚀",title:l?"AI COMMERCE":"ADVANCED FEATURES",delay:"300ms"}].map((M,B)=>a.jsxs("div",{className:"flex items-center group animate-slideInLeft",style:{animationDelay:M.delay},children:[a.jsx("div",{className:"text-4xl mr-4 transition-transform duration-300 group-hover:scale-125 group-hover:rotate-12",children:M.icon}),a.jsx("h3",{className:`text-xl font-bold transition-all duration-300 group-hover:translate-x-2 ${l?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:M.title})]},B))})]})]}),a.jsxs("div",{className:"flex flex-col justify-center items-center p-6 md:p-12 w-full md:w-1/2 relative",children:[a.jsx("div",{className:`absolute inset-0 backdrop-blur-md transition-all duration-700 ${l?"bg-black/80":"bg-white/90"}`}),a.jsx("div",{className:"absolute top-6 right-6 z-20 animate-bounceIn",children:a.jsx(ga,{})}),a.jsxs("div",{className:"w-full max-w-md relative z-10 space-y-8",children:[a.jsx("div",{className:"md:hidden flex items-center justify-center animate-fadeInDown",children:a.jsxs(ce,{to:"/home",className:"flex items-center group cursor-pointer",children:[a.jsx("div",{className:`${l?"cyber-logo":"neumorph-logo"} h-10 w-10`,children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{d:"M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"})})}),a.jsx("h1",{className:`text-2xl font-bold ml-3 transition-all duration-300 group-hover:scale-105 ${l?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:"WHOLESALER"})]})}),a.jsx("div",{className:"text-center animate-slideInUp",children:a.jsxs("h2",{className:`text-4xl font-bold mb-4 ${l?"cyber-title":"neumorph-title"}`,children:[a.jsx("span",{className:l?"text-cyan-400 cyber-glow":"text-blue-600",children:"ACCESS"}),a.jsx("br",{}),a.jsx("span",{className:l?"text-purple-400 cyber-glow":"text-indigo-600",children:l?"TERMINAL":"PORTAL"})]})}),a.jsxs("div",{className:`${l?"cyber-card":"neumorph-card"} transition-all duration-500 hover:scale-105 animate-slideInRight`,children:[l&&a.jsx("div",{className:"card-glow"}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("p",{className:`font-bold text-sm ${l?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:l?"DEMO PROTOCOLS":"TEST ACCOUNTS"}),a.jsx("button",{onClick:()=>S(!w),className:`${l?"bg-cyan-900/30 border-2 border-cyan-500 text-cyan-200 hover:bg-cyan-800/40 hover:text-cyan-100":"bg-blue-100 border-2 border-blue-400 text-blue-700 hover:bg-blue-200 hover:text-blue-800"} text-xs px-3 py-1 rounded font-bold transition-all duration-300 hover:scale-110`,children:a.jsx("span",{children:w?"HIDE":"SHOW"})})]}),a.jsx("div",{className:`transition-all duration-500 overflow-hidden ${w?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:a.jsx("div",{className:"space-y-2",children:[{role:"admin",emoji:"🔴",label:"ADMIN"},{role:"manager",emoji:"🟣",label:"MANAGER"},{role:"business_buyer",emoji:"🔵",label:"BUYER"},{role:"business_seller",emoji:"🟠",label:"SELLER"},{role:"user",emoji:"🟢",label:"USER"}].map((M,B)=>a.jsx("button",{onClick:()=>ye(M.role),className:`${l?"bg-gray-800 border-2 border-cyan-600 text-cyan-200 hover:bg-gray-700 hover:border-cyan-400 hover:text-cyan-100":"bg-gray-100 border-2 border-blue-300 text-blue-700 hover:bg-gray-200 hover:border-blue-500 hover:text-blue-800"} w-full text-xs px-3 py-2 rounded font-bold transition-all duration-300 hover:scale-105 animate-slideInLeft`,style:{animationDelay:`${B*100}ms`},children:a.jsxs("span",{children:[M.emoji," ",M.label]})},M.role))})})]})]}),(g||n)&&a.jsx("div",{className:`${l?"cyber-card border-red-600":"neumorph-card border-red-400"} 
                animate-shake transition-all duration-300`,children:a.jsxs("div",{className:"p-4 flex items-center",children:[a.jsx("svg",{className:"h-6 w-6 text-red-400 mr-3 animate-spin",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("div",{children:[a.jsx("h3",{className:`font-bold text-sm ${l?"text-red-400":"text-red-600"}`,children:l?"CONNECTION ERROR":"Authentication Error"}),a.jsx("p",{className:`text-sm ${l?"text-red-300":"text-red-600"}`,children:g||n})]})]})}),a.jsxs("form",{className:"space-y-6 animate-slideInUp",onSubmit:Q,children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${l?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:l?"EMAIL PROTOCOL":"Email"}),a.jsx("input",{name:"email",type:"email",value:h.email,onChange:z,className:`w-full py-3 px-4 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${l?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:l?"neural.id@corp.net":"your@email.com",required:!0})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${l?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:l?"ACCESS KEY":"Password"}),a.jsx("input",{name:"password",type:"password",value:h.password,onChange:z,className:`w-full py-3 px-4 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${l?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:"••••••••••••••••",required:!0})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:"flex items-center cursor-pointer group",children:[a.jsx("input",{type:"checkbox",checked:C,onChange:M=>T(M.target.checked),className:`h-4 w-4 rounded transition-all duration-300 group-hover:scale-110 ${l?"text-cyan-500":"text-blue-500"}`}),a.jsx("span",{className:`ml-2 text-sm font-medium ${l?"text-cyan-200":"text-gray-700"}`,children:l?"MAINTAIN CONNECTION":"Remember me"})]}),a.jsx("button",{type:"button",onClick:()=>v(!0),className:`text-sm font-medium transition-all duration-300 hover:scale-105 ${l?"text-purple-400 hover:text-purple-300":"text-indigo-600 hover:text-indigo-800"}`,children:l?"RESET ACCESS":"Forgot password?"})]}),a.jsx("button",{type:"submit",disabled:N||r,className:`${l?"cyber-btn cyber-btn-primary":"neumorph-btn neumorph-btn-primary"} 
                  w-full py-4 text-lg font-bold transition-all duration-300 hover:scale-105 animate-pulse-slow
                  ${N||r?"animate-spin":""}`,children:N||r?a.jsx("span",{children:l?"CONNECTING...":"Signing in..."}):a.jsx("span",{children:l?"INITIALIZE CONNECTION":"Sign In"})})]}),a.jsxs("div",{className:"text-center animate-fadeInUp",children:[a.jsx("p",{className:`text-sm mb-4 font-medium ${l?"text-cyan-200":"text-gray-700"}`,children:l?"Need neural access?":"Need an account?"}),a.jsx(ce,{to:"/register",className:`${l?"cyber-btn cyber-btn-outline":"neumorph-btn neumorph-btn-outline"} transition-all duration-300 hover:scale-105`,children:a.jsx("span",{children:l?"REQUEST ACCESS":"Create Account"})})]})]})]})]}),a.jsx("style",{jsx:!0,children:`
        @keyframes fadeInLeft {
          from { opacity: 0; transform: translateX(-30px); }
          to { opacity: 1; transform: translateX(0); }
        }
        @keyframes slideInUp {
          from { opacity: 0; transform: translateY(30px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideInRight {
          from { opacity: 0; transform: translateX(30px); }
          to { opacity: 1; transform: translateX(0); }
        }
        @keyframes slideInLeft {
          from { opacity: 0; transform: translateX(-30px); }
          to { opacity: 1; transform: translateX(0); }
        }
        @keyframes fadeInDown {
          from { opacity: 0; transform: translateY(-20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes bounceIn {
          0% { transform: scale(0.3); opacity: 0; }
          50% { transform: scale(1.05); }
          70% { transform: scale(0.9); }
          100% { transform: scale(1); opacity: 1; }
        }
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
          20%, 40%, 60%, 80% { transform: translateX(2px); }
        }
        @keyframes spin-slow {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @keyframes pulse-slow {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.7; }
        }
        
        .animate-fadeInLeft { animation: fadeInLeft 0.8s ease-out; }
        .animate-slideInUp { animation: slideInUp 0.6s ease-out; }
        .animate-slideInRight { animation: slideInRight 0.7s ease-out; }
        .animate-slideInLeft { animation: slideInLeft 0.6s ease-out; }
        .animate-fadeInDown { animation: fadeInDown 0.6s ease-out; }
        .animate-bounceIn { animation: bounceIn 0.8s ease-out; }
        .animate-shake { animation: shake 0.5s ease-in-out; }
        .animate-spin-slow { animation: spin-slow 3s linear infinite; }
        .animate-pulse-slow { animation: pulse-slow 2s ease-in-out infinite; }
        .animate-fadeIn { animation: fadeIn 1s ease-out; }
        .animate-fadeInUp { animation: fadeInUp 0.6s ease-out; }
        
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes fadeInUp {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `})]})},UO=()=>{var A,z;const t=rr(),e=Mt(),{darkMode:n}=Rt(),r=R.useRef(null),s=R.useRef(null),i=((z=(A=e.state)==null?void 0:A.from)==null?void 0:z.pathname)||"/home",[o,l]=R.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",businessName:"",phoneNumber:"",accountType:"user",businessType:"buyer"}),[u,d]=R.useState(""),[h,m]=R.useState(!1),[g,x]=R.useState(!1),[N,k]=R.useState(!1),[C,T]=R.useState(!1),[w,S]=R.useState(!1),[j,D]=R.useState(!1),[U,E]=R.useState(!1);R.useEffect(()=>{const Q=r.current;if(!Q)return;const ee=Q.getContext("2d"),ye=()=>{Q.width=window.innerWidth,Q.height=window.innerHeight};ye();const M="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZアイウエオカキクケコサシスセソタチツテトナニヌネノ",B=14,F=Math.floor(Q.width/B),Z=Array(F).fill(0).map(()=>Math.random()*Q.height/B),ne=Array(F).fill(0).map(()=>.5+Math.random()*1),H=Array(F).fill(0).map(()=>Math.random()),Ue=setInterval(()=>{ee.fillStyle=n?"rgba(0, 0, 0, 0.08)":"rgba(240, 240, 243, 0.12)",ee.fillRect(0,0,Q.width,Q.height),ee.font=`${B}px 'Orbitron', monospace`;for(let K=0;K<Z.length;K++){const xt=M[Math.floor(Math.random()*M.length)];H[K]+=(Math.random()-.5)*.1,H[K]=Math.max(.3,Math.min(1,H[K]));const Vt=H[K];n?ee.fillStyle=`rgba(0, 255, 255, ${Vt})`:ee.fillStyle=`rgba(34, 102, 187, ${Vt*.6})`,ee.fillText(xt,K*B,Z[K]*B),Z[K]+=ne[K],Z[K]*B>Q.height&&Math.random()>.975&&(Z[K]=0,ne[K]=.5+Math.random()*1)}},50);return window.addEventListener("resize",ye),()=>{clearInterval(Ue),window.removeEventListener("resize",ye)}},[n]),R.useEffect(()=>{const Q=s.current;if(!Q)return;const ee=Q.getContext("2d"),ye=()=>{Q.width=window.innerWidth,Q.height=window.innerHeight};ye();const M=Array(60).fill(0).map(()=>({x:Math.random()*Q.width,y:Math.random()*Q.height,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,size:Math.random()*3+1,pulse:Math.random()*Math.PI*2,color:n?`hsl(${180+Math.random()*80}, 100%, ${50+Math.random()*30}%)`:`hsl(${200+Math.random()*60}, 70%, ${40+Math.random()*20}%)`,life:Math.random()}));let B=0,F=0;const Z=H=>{B=H.clientX,F=H.clientY};window.addEventListener("mousemove",Z);const ne=()=>{ee.fillStyle=n?"rgba(0, 0, 0, 0.05)":"rgba(240, 240, 243, 0.08)",ee.fillRect(0,0,Q.width,Q.height),M.forEach((H,$e)=>{const Ue=B-H.x,K=F-H.y;Math.sqrt(Ue*Ue+K*K)<100&&(H.vx+=Ue*5e-5,H.vy+=K*5e-5),H.x+=H.vx,H.y+=H.vy,H.pulse+=.03,H.life=Math.sin(H.pulse)*.5+.5,(H.x<0||H.x>Q.width)&&(H.vx*=-.8,H.x=Math.max(0,Math.min(Q.width,H.x))),(H.y<0||H.y>Q.height)&&(H.vy*=-.8,H.y=Math.max(0,Math.min(Q.height,H.y))),H.vx*=.99,H.vy*=.99;const Vt=H.size*(1+H.life*2),Ae=ee.createRadialGradient(H.x,H.y,0,H.x,H.y,Vt);Ae.addColorStop(0,H.color),Ae.addColorStop(1,"transparent"),ee.fillStyle=Ae,ee.beginPath(),ee.arc(H.x,H.y,Vt,0,Math.PI*2),ee.fill(),M.slice($e+1).forEach(Yt=>{const At=Math.sqrt((H.x-Yt.x)**2+(H.y-Yt.y)**2);At<120&&(ee.strokeStyle=n?`rgba(0, 255, 255, ${(1-At/120)*.3})`:`rgba(34, 102, 187, ${(1-At/120)*.2})`,ee.lineWidth=1,ee.beginPath(),ee.moveTo(H.x,H.y),ee.lineTo(Yt.x,Yt.y),ee.stroke())})}),requestAnimationFrame(ne)};return ne(),window.addEventListener("resize",ye),()=>{window.removeEventListener("resize",ye),window.removeEventListener("mousemove",Z)}},[n]),R.useEffect(()=>{E(!0)},[]);const y=Q=>{const{name:ee,value:ye}=Q.target;l(M=>({...M,[ee]:ye}))},v=()=>o.firstName.trim()?o.lastName.trim()?o.email.trim()?/\S+@\S+\.\S+/.test(o.email)?o.password.length<6?(d("Password must be at least 6 characters long"),!1):o.password!==o.confirmPassword?(d("Passwords do not match"),!1):(o.accountType==="business"||o.accountType==="manager")&&!o.businessName.trim()?(d("Business name is required for business and manager accounts"),!1):C?!0:(d("Please accept the terms and conditions"),!1):(d("Please enter a valid email address"),!1):(d("Email is required"),!1):(d("Last name is required"),!1):(d("First name is required"),!1),I=Q=>{switch(Q){case"user":return{approved:!0,status:"active",requiresApproval:!1};case"business":case"manager":return{approved:!1,status:"pending_approval",requiresApproval:!0};default:return{approved:!1,status:"pending_approval",requiresApproval:!0}}},_=async Q=>{if(Q.preventDefault(),!!v()){m(!0),d("");try{const ye=(await Zw(cs,o.email,o.password)).user;await eE(ye,{displayName:`${o.firstName} ${o.lastName}`});const M=I(o.accountType);await bf(Vo(Mr,"users",ye.uid),{uid:ye.uid,firstName:o.firstName,lastName:o.lastName,email:o.email,displayName:`${o.firstName} ${o.lastName}`,accountType:o.accountType,businessType:o.accountType==="business"?o.businessType:null,businessName:o.businessName||null,phoneNumber:o.phoneNumber||null,approved:M.approved,status:M.status,requiresApproval:M.requiresApproval,permissions:{canCreateOrders:o.accountType==="user",canManageInventory:!1,canViewAllOrders:!1,canApproveUsers:!1,canManageUsers:!1},createdAt:new Date,updatedAt:new Date,isActive:M.approved,emailVerified:ye.emailVerified,lastLogin:new Date,preferences:{notifications:!0,marketing:!1,theme:n?"dark":"light"}}),M.requiresApproval?S(!0):t(i,{replace:!0})}catch(ee){switch(console.error("Registration error:",ee),ee.code){case"auth/email-already-in-use":d("An account with this email already exists. Please sign in instead.");break;case"auth/weak-password":d("Password is too weak. Please choose a stronger password.");break;case"auth/invalid-email":d("Please enter a valid email address.");break;default:d("Failed to create account. Please try again.")}}finally{m(!1)}}},P=Q=>{l({user:{firstName:"John",lastName:"Doe",email:"user@wholesaler.com",password:"password123",confirmPassword:"password123",accountType:"user",businessName:"",phoneNumber:"+1-555-0123",businessType:"buyer"},business_buyer:{firstName:"Jane",lastName:"Smith",email:"buyer@wholesaler.com",password:"password123",confirmPassword:"password123",accountType:"business",businessType:"buyer",businessName:"Smith Retail Store",phoneNumber:"+1-555-0456"},business_seller:{firstName:"Mike",lastName:"Johnson",email:"seller@wholesaler.com",password:"password123",confirmPassword:"password123",accountType:"business",businessType:"seller",businessName:"Johnson Supply Co",phoneNumber:"+1-555-0789"},manager:{firstName:"Sarah",lastName:"Wilson",email:"manager@wholesaler.com",password:"password123",confirmPassword:"password123",accountType:"manager",businessName:"Wilson Management LLC",phoneNumber:"+1-555-0321",businessType:"buyer"}}[Q]),T(!0)};return w?a.jsx("div",{className:`min-h-screen flex items-center justify-center transition-all duration-1000 ${n?"bg-black":"bg-gradient-to-br from-gray-50 to-blue-50"}`,children:a.jsxs("div",{className:`max-w-md w-full mx-4 p-8 rounded-xl shadow-lg text-center transition-all duration-700 animate-bounceIn ${n?"cyber-card":"neumorph-card"}`,children:[n&&a.jsx("div",{className:"card-glow"}),a.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:"✅"}),a.jsx("h2",{className:`text-2xl font-bold mb-4 ${n?"cyber-title text-cyan-400 cyber-glow":"neumorph-title text-blue-600"}`,children:n?"NEURAL ACCESS GRANTED!":"Registration Successful!"}),a.jsxs("p",{className:`mb-6 ${n?"text-gray-300":"text-gray-600"}`,children:["Your ",o.accountType," account has been created and is pending admin approval."]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ce,{to:"/login",className:`${n?"cyber-btn cyber-btn-primary":"neumorph-btn neumorph-btn-primary"} block w-full py-3 transition-all duration-300 hover:scale-105`,children:a.jsx("span",{children:n?"ACCESS TERMINAL":"Go to Login"})}),a.jsx(ce,{to:"/",className:`${n?"cyber-btn cyber-btn-ghost":"neumorph-btn"} block w-full py-3 transition-all duration-300 hover:scale-105`,children:a.jsx("span",{children:n?"GUEST MODE":"Continue as Guest"})})]})]})}):a.jsxs("div",{className:`min-h-screen relative overflow-hidden transition-all duration-1000 ${n?"bg-black":"bg-gradient-to-br from-gray-50 to-blue-50"}`,children:[a.jsx("canvas",{ref:r,className:"fixed inset-0 z-0",style:{opacity:n?.6:.3,filter:`blur(${n?0:.5}px)`}}),a.jsx("canvas",{ref:s,className:"fixed inset-0 z-1",style:{opacity:.8}}),n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-2 opacity-20 pointer-events-none animate-pulse",children:a.jsx("div",{className:"cyberpunk-grid"})}),a.jsx("div",{className:"fixed inset-0 z-3 pointer-events-none",children:a.jsx("div",{className:"scanlines"})})]}):a.jsx("div",{className:"fixed inset-0 z-2 opacity-30 pointer-events-none",children:a.jsx("div",{className:"neumorph-grid animate-pulse"})}),a.jsxs("div",{className:`relative z-10 min-h-screen flex transition-all duration-1000 transform ${U?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}`,children:[a.jsxs("div",{className:"hidden md:flex md:w-1/2 relative p-12 flex-col justify-between",children:[a.jsx("div",{className:`absolute inset-0 backdrop-blur-sm transition-all duration-700 ${n?"bg-gradient-to-br from-cyan-900/20 to-purple-900/20":"bg-gradient-to-br from-blue-900/10 to-indigo-900/10"}`}),a.jsxs("div",{className:"relative z-10 space-y-8 animate-fadeInLeft",children:[a.jsxs(ce,{to:"/home",className:"flex items-center group cursor-pointer",children:[a.jsxs("div",{className:`${n?"cyber-logo":"neumorph-logo"} h-12 w-12 transition-all duration-300 group-hover:scale-110`,children:[n&&a.jsx("div",{className:"logo-glow"}),a.jsxs("svg",{className:"h-8 w-8 animate-spin-slow",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{d:"M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"}),a.jsx("path",{d:"M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H14a1 1 0 001-1V5a1 1 0 00-1-1H3z"})]})]}),a.jsx("h1",{className:`text-3xl font-bold ml-4 transition-all duration-300 group-hover:scale-105 ${n?"cyber-title text-cyan-400 cyber-glow":"neumorph-title text-blue-600"}`,children:"WHOLESALER"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h2",{className:`text-5xl font-bold animate-slideInUp ${n?"cyber-title":"neumorph-title"}`,children:[a.jsx("div",{className:`${n?"text-cyan-400 cyber-glow":"text-blue-600"} animate-pulse`,children:n?"JOIN THE":"CREATE"}),a.jsx("div",{className:`${n?"text-purple-400 cyber-glow":"text-teal-600"} animate-bounce`,children:n?"NEURAL":"YOUR"}),a.jsx("div",{className:`${n?"text-yellow-400 cyber-glow":"text-indigo-600"} animate-pulse`,children:n?"NETWORK":"ACCOUNT"})]}),a.jsx("p",{className:`text-xl leading-relaxed animate-fadeIn ${n?"text-gray-300":"text-gray-700"}`,children:n?"Request access to our advanced quantum wholesale network with role-based neural authentication.":"Join our sophisticated wholesale platform with multiple account types and secure approval process."})]}),a.jsx("div",{className:"space-y-6",children:[{icon:"🆔",title:n?"MULTI-PROTOCOL ACCESS":"MULTIPLE ACCOUNT TYPES",delay:"100ms"},{icon:"🔒",title:n?"QUANTUM VERIFICATION":"SECURE APPROVAL",delay:"200ms"},{icon:"⚡",title:n?"ROLE-BASED NEURAL AUTH":"ROLE-BASED PERMISSIONS",delay:"300ms"}].map((Q,ee)=>a.jsxs("div",{className:"flex items-center group animate-slideInLeft",style:{animationDelay:Q.delay},children:[a.jsx("div",{className:"text-4xl mr-4 transition-transform duration-300 group-hover:scale-125 group-hover:rotate-12",children:Q.icon}),a.jsx("h3",{className:`text-xl font-bold transition-all duration-300 group-hover:translate-x-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:Q.title})]},ee))})]})]}),a.jsxs("div",{className:"flex flex-col justify-start items-center p-6 md:p-12 w-full md:w-1/2 relative overflow-y-auto",children:[a.jsx("div",{className:`absolute inset-0 backdrop-blur-md transition-all duration-700 ${n?"bg-black/80":"bg-white/90"}`}),a.jsx("div",{className:"absolute top-6 right-6 z-20 animate-bounceIn",children:a.jsx(ga,{})}),a.jsxs("div",{className:"w-full max-w-md relative z-10 space-y-6 py-8",children:[a.jsx("div",{className:"md:hidden flex items-center justify-center animate-fadeInDown",children:a.jsxs(ce,{to:"/home",className:"flex items-center group cursor-pointer",children:[a.jsx("div",{className:`${n?"cyber-logo":"neumorph-logo"} h-10 w-10`,children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{d:"M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"})})}),a.jsx("h1",{className:`text-2xl font-bold ml-3 transition-all duration-300 group-hover:scale-105 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:"WHOLESALER"})]})}),a.jsx("div",{className:"text-center animate-slideInUp",children:a.jsxs("h2",{className:`text-3xl font-bold mb-4 ${n?"cyber-title":"neumorph-title"}`,children:[a.jsx("span",{className:n?"text-cyan-400 cyber-glow":"text-blue-600",children:n?"REQUEST":"CREATE"}),a.jsx("br",{}),a.jsx("span",{className:n?"text-purple-400 cyber-glow":"text-indigo-600",children:n?"NEURAL ACCESS":"ACCOUNT"})]})}),a.jsxs("div",{className:`${n?"cyber-card":"neumorph-card"} transition-all duration-500 hover:scale-105 animate-slideInRight`,children:[n&&a.jsx("div",{className:"card-glow"}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("p",{className:`font-bold text-sm ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"DEMO PROTOCOLS":"QUICK DEMO"}),a.jsx("button",{onClick:()=>D(!j),className:`${n?"bg-cyan-900/30 border-2 border-cyan-500 text-cyan-200 hover:bg-cyan-800/40 hover:text-cyan-100":"bg-blue-100 border-2 border-blue-400 text-blue-700 hover:bg-blue-200 hover:text-blue-800"} text-xs px-3 py-1 rounded font-bold transition-all duration-300 hover:scale-110`,children:a.jsx("span",{children:j?"HIDE":"SHOW"})})]}),a.jsx("div",{className:`transition-all duration-500 overflow-hidden ${j?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{type:"user",label:"USER"},{type:"business_buyer",label:"BUYER"},{type:"business_seller",label:"SELLER"},{type:"manager",label:"MANAGER"}].map((Q,ee)=>a.jsx("button",{onClick:()=>P(Q.type),className:`${n?"bg-gray-800 border-2 border-cyan-600 text-cyan-200 hover:bg-gray-700 hover:border-cyan-400 hover:text-cyan-100":"bg-gray-100 border-2 border-blue-300 text-blue-700 hover:bg-gray-200 hover:border-blue-500 hover:text-blue-800"} text-xs px-2 py-1 rounded font-bold transition-all duration-300 hover:scale-105 animate-slideInLeft`,style:{animationDelay:`${ee*100}ms`},children:a.jsx("span",{children:Q.label})},Q.type))})})]})]}),u&&a.jsx("div",{className:`${n?"cyber-card border-red-600":"neumorph-card border-red-400"} 
                animate-shake transition-all duration-300`,children:a.jsxs("div",{className:"p-4 flex items-center",children:[a.jsx("svg",{className:"h-6 w-6 text-red-400 mr-3 animate-spin",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("div",{children:[a.jsx("h3",{className:`font-bold text-sm ${n?"text-red-400":"text-red-600"}`,children:n?"REGISTRATION ERROR":"Registration Error"}),a.jsx("p",{className:`text-sm ${n?"text-red-300":"text-red-600"}`,children:u})]})]})}),a.jsxs("form",{className:"space-y-4 animate-slideInUp",onSubmit:_,children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"FIRST NAME":"First Name"}),a.jsx("input",{name:"firstName",type:"text",value:o.firstName,onChange:y,className:`w-full py-2 px-3 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${n?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:n?"JOHN":"John",required:!0})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"LAST NAME":"Last Name"}),a.jsx("input",{name:"lastName",type:"text",value:o.lastName,onChange:y,className:`w-full py-2 px-3 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${n?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:n?"DOE":"Doe",required:!0})]})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"EMAIL PROTOCOL":"Email"}),a.jsx("input",{name:"email",type:"email",value:o.email,onChange:y,className:`w-full py-2 px-3 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${n?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:n?"neural.id@corp.net":"you@example.com",required:!0})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"ACCESS LEVEL":"Account Type"}),a.jsxs("select",{name:"accountType",value:o.accountType,onChange:y,className:`w-full py-2 px-3 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${n?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg"}`,children:[a.jsx("option",{value:"user",className:n?"bg-gray-900 text-cyan-100":"bg-gray-50 text-gray-900",children:n?"STANDARD USER (INSTANT)":"Regular User (Immediate Access)"}),a.jsx("option",{value:"business",className:n?"bg-gray-900 text-cyan-100":"bg-gray-50 text-gray-900",children:n?"BUSINESS ENTITY (APPROVAL REQ)":"Business Account (Requires Approval)"}),a.jsx("option",{value:"manager",className:n?"bg-gray-900 text-cyan-100":"bg-gray-50 text-gray-900",children:n?"MANAGEMENT PROTOCOL (APPROVAL REQ)":"Manager Account (Requires Approval)"})]}),o.accountType!=="user"&&a.jsxs("p",{className:`text-xs mt-1 font-medium ${n?"text-yellow-400":"text-yellow-600"}`,children:["⚠️ ",n?"REQUIRES ADMIN NEURAL VERIFICATION":"Requires admin approval"]})]}),o.accountType==="business"&&a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"BUSINESS PROTOCOL":"Business Type"}),a.jsxs("select",{name:"businessType",value:o.businessType,onChange:y,className:`w-full py-2 px-3 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${n?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg"}`,children:[a.jsx("option",{value:"buyer",className:n?"bg-gray-900 text-cyan-100":"bg-gray-50 text-gray-900",children:n?"BUYER PROTOCOL":"Buyer (Purchase Products)"}),a.jsx("option",{value:"seller",className:n?"bg-gray-900 text-cyan-100":"bg-gray-50 text-gray-900",children:n?"SELLER PROTOCOL":"Seller (Sell Products)"})]})]}),(o.accountType==="business"||o.accountType==="manager")&&a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"ENTITY NAME":"Business Name"}),a.jsx("input",{name:"businessName",type:"text",value:o.businessName,onChange:y,className:`w-full py-2 px-3 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${n?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:n?"NEURAL CORP LTD":"Your Business Name"})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"COMM CHANNEL (OPT)":"Phone (Optional)"}),a.jsx("input",{name:"phoneNumber",type:"tel",value:o.phoneNumber,onChange:y,className:`w-full py-2 px-3 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${n?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:n?"+1-555-NEURAL":"+1 (555) 123-4567"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"ACCESS KEY":"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{name:"password",type:g?"text":"password",value:o.password,onChange:y,className:`w-full py-2 px-3 pr-10 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${n?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:"••••••••••••••••",required:!0}),a.jsx("button",{type:"button",onClick:()=>x(!g),className:`absolute right-3 top-1/2 transform -translate-y-1/2 transition-colors ${n?"text-cyan-400 hover:text-cyan-300":"text-gray-600 hover:text-gray-800"}`,children:g?"👁️":"🔒"})]})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:`block text-sm font-bold mb-2 ${n?"cyber-title text-cyan-400":"neumorph-title text-blue-600"}`,children:n?"CONFIRM KEY":"Confirm Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{name:"confirmPassword",type:N?"text":"password",value:o.confirmPassword,onChange:y,className:`w-full py-2 px-3 pr-10 font-mono transition-all duration-300 group-hover:scale-105 focus:scale-105 ${n?"bg-gray-900 border-2 border-cyan-600 text-cyan-100 focus:border-cyan-400 rounded-lg placeholder-cyan-700":"bg-gray-50 border-2 border-blue-300 text-gray-900 focus:border-blue-500 rounded-lg placeholder-gray-500"}`,placeholder:"••••••••••••••••",required:!0}),a.jsx("button",{type:"button",onClick:()=>k(!N),className:`absolute right-3 top-1/2 transform -translate-y-1/2 transition-colors ${n?"text-cyan-400 hover:text-cyan-300":"text-gray-600 hover:text-gray-800"}`,children:N?"👁️":"🔒"})]})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:C,onChange:Q=>T(Q.target.checked),className:`h-4 w-4 rounded transition-all duration-300 hover:scale-110 ${n?"text-cyan-500":"text-blue-500"}`}),a.jsxs("label",{className:`ml-2 text-sm font-medium ${n?"text-cyan-200":"text-gray-700"}`,children:["I agree to the"," ",a.jsx("span",{className:`font-bold ${n?"text-cyan-400":"text-blue-600"}`,children:n?"Neural Terms & Privacy Matrix":"Terms & Privacy Policy"})]})]}),a.jsx("button",{type:"submit",disabled:h,className:`${n?"cyber-btn cyber-btn-primary":"neumorph-btn neumorph-btn-primary"} 
                  w-full py-3 text-lg font-bold transition-all duration-300 hover:scale-105 animate-pulse-slow
                  ${h?"animate-spin":""}`,children:h?a.jsx("span",{children:n?"INITIALIZING...":"Creating Account..."}):a.jsx("span",{children:n?"REQUEST NEURAL ACCESS":"Create Account"})})]}),a.jsxs("div",{className:"text-center animate-fadeInUp",children:[a.jsx("p",{className:`text-sm mb-3 font-medium ${n?"text-cyan-200":"text-gray-700"}`,children:n?"Already have neural access?":"Already have an account?"}),a.jsx(ce,{to:"/login",className:`${n?"cyber-btn cyber-btn-outline":"neumorph-btn neumorph-btn-outline"} transition-all duration-300 hover:scale-105`,children:a.jsx("span",{children:n?"ACCESS TERMINAL":"Sign In"})})]})]})]})]}),a.jsx("style",{jsx:!0,children:`
        @keyframes fadeInLeft {
          from { opacity: 0; transform: translateX(-30px); }
          to { opacity: 1; transform: translateX(0); }
        }
        @keyframes slideInUp {
          from { opacity: 0; transform: translateY(30px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideInRight {
          from { opacity: 0; transform: translateX(30px); }
          to { opacity: 1; transform: translateX(0); }
        }
        @keyframes slideInLeft {
          from { opacity: 0; transform: translateX(-30px); }
          to { opacity: 1; transform: translateX(0); }
        }
        @keyframes fadeInDown {
          from { opacity: 0; transform: translateY(-20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes bounceIn {
          0% { transform: scale(0.3); opacity: 0; }
          50% { transform: scale(1.05); }
          70% { transform: scale(0.9); }
          100% { transform: scale(1); opacity: 1; }
        }
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
          20%, 40%, 60%, 80% { transform: translateX(2px); }
        }
        @keyframes spin-slow {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @keyframes pulse-slow {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.7; }
        }
        
        .animate-fadeInLeft { animation: fadeInLeft 0.8s ease-out; }
        .animate-slideInUp { animation: slideInUp 0.6s ease-out; }
        .animate-slideInRight { animation: slideInRight 0.7s ease-out; }
        .animate-slideInLeft { animation: slideInLeft 0.6s ease-out; }
        .animate-fadeInDown { animation: fadeInDown 0.6s ease-out; }
        .animate-bounceIn { animation: bounceIn 0.8s ease-out; }
        .animate-shake { animation: shake 0.5s ease-in-out; }
        .animate-spin-slow { animation: spin-slow 3s linear infinite; }
        .animate-pulse-slow { animation: pulse-slow 2s ease-in-out infinite; }
        .animate-fadeIn { animation: fadeIn 1s ease-out; }
        .animate-fadeInUp { animation: fadeInUp 0.6s ease-out; }
        
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes fadeInUp {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `})]})},ke=({children:t,requiredRole:e=null,allowedRoles:n=null,requiredPermission:r=null,fallbackPath:s="/login"})=>{const{user:i,loading:o,approvalStatus:l,userRole:u,hasPermission:d}=ir(),{darkMode:h}=Rt(),m=Mt();return o?a.jsx("div",{className:`flex justify-center items-center h-screen ${h?"bg-gray-900":"bg-gray-50"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500 mx-auto mb-4"}),a.jsx("p",{className:`text-lg ${h?"text-gray-300":"text-gray-600"}`,children:"Loading..."})]})}):i?!i.canAccess&&l&&!l.canAccess?a.jsx(FO,{approvalStatus:l,user:i,darkMode:h}):e&&u!==e?a.jsx(Kd,{reason:`This page requires ${e} access`,userRole:u,darkMode:h}):n&&!n.includes(u)?a.jsx(Kd,{reason:`This page is restricted to: ${n.join(", ")}`,userRole:u,darkMode:h}):r&&!d(r)?a.jsx(Kd,{reason:"You don't have the required permissions for this page",userRole:u,darkMode:h,missingPermission:r}):t:a.jsx(ni,{to:s,state:{from:m},replace:!0})},FO=({approvalStatus:t,user:e,darkMode:n})=>{const s=(()=>{switch(t.status){case"pending_approval":return{icon:"⏳",title:"Account Pending Approval",message:"Your account is currently being reviewed by our admin team.",color:"yellow",details:["Your registration was successful","Admin review typically takes 1-2 business days","You'll receive an email notification once approved","You can still browse as a guest while waiting"]};case"rejected":return{icon:"❌",title:"Account Application Rejected",message:"Unfortunately, your account application was not approved.",color:"red",details:["Your application did not meet our requirements","You can contact support for more information","You may reapply after addressing the issues","You can still browse as a guest"]};case"suspended":return{icon:"🚫",title:"Account Suspended",message:"Your account has been temporarily suspended.",color:"gray",details:["This may be due to a policy violation","Contact support to understand the reason","Your account may be reactivated after review","You can browse as a guest while suspended"]};default:return{icon:"⚠️",title:"Account Access Restricted",message:"Your account requires approval before you can access this area.",color:"blue",details:["Please wait for admin approval","Contact support if you have questions","You can browse public areas while waiting"]}}})();return a.jsx("div",{className:`min-h-screen flex items-center justify-center ${n?"bg-gray-900":"bg-gray-50"} px-4`,children:a.jsxs("div",{className:`max-w-md w-full p-8 ${n?"bg-gray-800":"bg-white"} rounded-xl shadow-lg text-center`,children:[a.jsx("div",{className:"text-6xl mb-6",children:s.icon}),a.jsx("h2",{className:`text-2xl font-bold mb-4 ${n?"text-white":"text-gray-900"}`,children:s.title}),a.jsx("p",{className:`mb-6 ${n?"text-gray-300":"text-gray-600"}`,children:s.message}),a.jsx("div",{className:`p-4 rounded-lg mb-6 ${n?"bg-gray-700":"bg-gray-50"}`,children:a.jsxs("div",{className:"text-left space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"Account Type:"}),a.jsx("span",{className:`text-sm font-medium ${n?"text-gray-200":"text-gray-800"} capitalize`,children:e.accountType})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"Email:"}),a.jsx("span",{className:`text-sm font-medium ${n?"text-gray-200":"text-gray-800"}`,children:e.email})]}),e.businessName&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"Business:"}),a.jsx("span",{className:`text-sm font-medium ${n?"text-gray-200":"text-gray-800"}`,children:e.businessName})]})]})}),a.jsxs("div",{className:`p-4 rounded-lg mb-6 ${s.color==="yellow"?n?"bg-yellow-900/20 border-yellow-800":"bg-yellow-50 border-yellow-200":s.color==="red"?n?"bg-red-900/20 border-red-800":"bg-red-50 border-red-200":s.color==="gray"?n?"bg-gray-900/20 border-gray-800":"bg-gray-50 border-gray-200":n?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-200"} border`,children:[a.jsx("h3",{className:`font-medium mb-2 ${s.color==="yellow"?n?"text-yellow-300":"text-yellow-800":s.color==="red"?n?"text-red-300":"text-red-800":s.color==="gray"?n?"text-gray-300":"text-gray-800":n?"text-blue-300":"text-blue-800"}`,children:"What you should know:"}),a.jsx("ul",{className:`text-sm text-left space-y-1 ${s.color==="yellow"?n?"text-yellow-200":"text-yellow-700":s.color==="red"?n?"text-red-200":"text-red-700":s.color==="gray"?n?"text-gray-200":"text-gray-700":n?"text-blue-200":"text-blue-700"}`,children:s.details.map((i,o)=>a.jsxs("li",{children:["• ",i]},o))})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ce,{to:"/",className:"block w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors",children:"Continue as Guest"}),t.status==="rejected"&&a.jsx(ce,{to:"/register",className:`block w-full py-3 px-4 border ${n?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} rounded-lg transition-colors`,children:"Apply Again"}),a.jsx("a",{href:"mailto:support@wholesaler.com",className:`block w-full py-3 px-4 border ${n?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} rounded-lg transition-colors`,children:"Contact Support"}),a.jsx("button",{onClick:()=>window.location.reload(),className:`w-full py-2 px-4 text-sm ${n?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"} transition-colors`,children:"🔄 Refresh Status"})]})]})})},Kd=({reason:t,userRole:e,darkMode:n,missingPermission:r})=>a.jsx("div",{className:`min-h-screen flex items-center justify-center ${n?"bg-gray-900":"bg-gray-50"} px-4`,children:a.jsxs("div",{className:`max-w-md w-full p-8 ${n?"bg-gray-800":"bg-white"} rounded-xl shadow-lg text-center`,children:[a.jsx("div",{className:"text-6xl mb-6",children:"🚫"}),a.jsx("h2",{className:`text-2xl font-bold mb-4 ${n?"text-white":"text-gray-900"}`,children:"Access Denied"}),a.jsx("p",{className:`mb-6 ${n?"text-gray-300":"text-gray-600"}`,children:t}),a.jsx("div",{className:`p-4 rounded-lg mb-6 ${n?"bg-gray-700":"bg-gray-50"}`,children:a.jsxs("div",{className:"text-left space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"Your Role:"}),a.jsx("span",{className:`text-sm font-medium ${n?"text-gray-200":"text-gray-800"} capitalize`,children:e})]}),r&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"Required:"}),a.jsx("span",{className:`text-sm font-medium ${n?"text-red-400":"text-red-600"}`,children:r})]})]})}),a.jsxs("div",{className:`p-4 rounded-lg mb-6 ${n?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-200"} border`,children:[a.jsx("h3",{className:`font-medium mb-2 ${n?"text-blue-300":"text-blue-800"}`,children:"Need Access?"}),a.jsxs("ul",{className:`text-sm text-left space-y-1 ${n?"text-blue-200":"text-blue-700"}`,children:[a.jsx("li",{children:"• Contact your administrator"}),a.jsx("li",{children:"• Request role upgrade if needed"}),a.jsx("li",{children:"• Check if you have the right account type"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ce,{to:"/",className:"block w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors",children:"Go to Dashboard"}),a.jsx(ce,{to:"/profile",className:`block w-full py-3 px-4 border ${n?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} rounded-lg transition-colors`,children:"View Profile"}),a.jsx("a",{href:"mailto:admin@wholesaler.com",className:`block w-full py-3 px-4 border ${n?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} rounded-lg transition-colors`,children:"Contact Admin"})]})]})}),Yd=({children:t,type:e="cart"})=>{const{user:n}=ir(),{darkMode:r}=Rt();if(Mt(),n&&!(()=>{switch(e){case"cart":return ki(n);case"checkout":return p1(n);case"orders":return pa(n);default:return ki(n)}})()){const i=(n==null?void 0:n.accountType)==="admin",o=(n==null?void 0:n.accountType)==="manager",l=i?"/admin":o?"/manager":"/";return a.jsx("div",{className:`min-h-screen flex items-center justify-center ${r?"bg-gray-900":"bg-gray-50"} px-4`,children:a.jsxs("div",{className:`max-w-md w-full p-8 ${r?"bg-gray-800":"bg-white"} rounded-xl shadow-lg text-center`,children:[a.jsx("div",{className:"text-6xl mb-6",children:"🛡️"}),a.jsx("h2",{className:`text-2xl font-bold mb-4 ${r?"text-white":"text-gray-900"}`,children:"Access Restricted"}),a.jsx("p",{className:`mb-6 ${r?"text-gray-300":"text-gray-600"}`,children:i?"As an administrator, you manage the platform rather than shop. Please use your admin panel for system management.":o?"As a manager, you oversee operations rather than shop. Please use your manager panel for platform oversight.":"You do not have permission to access this shopping feature."}),a.jsxs("div",{className:`p-4 rounded-lg mb-6 ${r?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-200"} border`,children:[a.jsx("h3",{className:`font-medium mb-2 ${r?"text-blue-300":"text-blue-800"}`,children:"Your Platform Access:"}),a.jsxs("ul",{className:`text-sm text-left space-y-1 ${r?"text-blue-200":"text-blue-700"}`,children:[i&&a.jsxs(a.Fragment,{children:[a.jsx("li",{children:"✅ User management & approvals"}),a.jsx("li",{children:"✅ System administration"}),a.jsx("li",{children:"✅ Inventory oversight"}),a.jsx("li",{children:"✅ Order management (view/edit)"}),a.jsx("li",{children:"❌ Personal shopping & cart"})]}),o&&a.jsxs(a.Fragment,{children:[a.jsx("li",{children:"✅ Team management"}),a.jsx("li",{children:"✅ Operations oversight"}),a.jsx("li",{children:"✅ Analytics & reports"}),a.jsx("li",{children:"✅ Order management (view/edit)"}),a.jsx("li",{children:"❌ Personal shopping & cart"})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ni,{to:l,replace:!0}),a.jsxs("button",{onClick:()=>window.location.href=l,className:"block w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors",children:["Go to ",i?"Admin":o?"Manager":"Your"," Dashboard"]}),a.jsx("button",{onClick:()=>window.history.back(),className:`block w-full py-3 px-4 border ${r?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} rounded-lg transition-colors`,children:"Go Back"})]}),a.jsx("div",{className:`mt-6 p-3 rounded-lg ${r?"bg-gray-700":"bg-gray-50"} text-xs`,children:a.jsxs("p",{className:`${r?"text-gray-400":"text-gray-600"}`,children:["💡 ",a.jsx("strong",{children:"Need to test shopping features?"}),a.jsx("br",{}),"Use a regular user account or business account for testing cart and checkout functionality."]})})]})})}return t},zO=({onScan:t,onError:e=null,showPreview:n=!0,className:r="",scannerConfig:s={}})=>{const[i,o]=R.useState(!1),[l,u]=R.useState(null),[d,h]=R.useState(null),[m,g]=R.useState([]),[x,N]=R.useState(null),[k,C]=R.useState("camera"),[T,w]=R.useState({qrcode:!1,html5qrcode:!1,zxing:!1}),[S,j]=R.useState(!0),{darkMode:D}=Rt();R.useRef(null);const U=R.useRef(null),E=R.useRef(null),y={fps:10,qrbox:{width:250,height:250},aspectRatio:1,disableFlip:!1,...s};R.useEffect(()=>{v()},[]);const v=async()=>{j(!0);const F={qrcode:!1,html5qrcode:!1,zxing:!1};try{await ae(()=>import("./browser-BXdiCFWD.js").then(Z=>Z.b),[]),F.qrcode=!0}catch{console.log("QRCode library not available")}try{const Z=await ae(()=>import("./index-BdzrZHSF.js"),[]);Z.Html5QrcodeScanner&&Z.Html5Qrcode&&(F.html5qrcode=!0,window.Html5QrcodeScanner=Z.Html5QrcodeScanner,window.Html5Qrcode=Z.Html5Qrcode)}catch{console.log("Html5-qrcode library not available")}try{const Z=await ae(()=>import("./index-D3Mz4UNV.js"),[]);Z.BrowserQRCodeReader&&(F.zxing=!0,window.BrowserQRCodeReader=Z.BrowserQRCodeReader)}catch{console.log("ZXing library not available")}w(F),F.html5qrcode?await I():C("file"),j(!1)},I=async()=>{try{if(window.Html5Qrcode){const F=await window.Html5Qrcode.getCameras();g(F),F.length>0?N(F[0].id):(h("No cameras found. Please use file upload method."),C("file"))}}catch(F){console.error("Error initializing cameras:",F),h("Failed to initialize camera. Please use file upload method."),C("file")}},_=async()=>{if(!x&&k==="camera"){h("Please select a camera first");return}o(!0),h(null),u(null);try{k==="camera"&&T.html5qrcode&&await P()}catch(F){console.error("Error starting scanner:",F),h("Failed to start scanning: "+F.message),o(!1)}},P=async()=>{try{const F=new window.Html5QrcodeScanner("qr-reader",y,!1);F.render(z,Q),U.current=F}catch(F){throw new Error("Failed to initialize camera scanner: "+F.message)}},A=async()=>{try{U.current&&(await U.current.clear(),U.current=null)}catch(F){console.error("Error stopping scanner:",F)}o(!1)},z=(F,Z)=>{u(F),h(null);let ne;try{ne=JSON.parse(F)}catch{ne=F}t&&t(ne,Z),A()},Q=F=>{["Camera not found","Permission denied","Camera is already in use"].some(H=>F.toLowerCase().includes(H.toLowerCase()))&&e&&e(F)},ee=async F=>{const Z=F.target.files[0];if(Z){h(null),u(null);try{if(T.zxing){const H=await new window.BrowserQRCodeReader().decodeFromInputVideoDevice(void 0,"qr-reader-file");H&&z(H.text,H)}else if(T.html5qrcode){const H=await new window.Html5Qrcode("qr-reader-file").scanFile(Z,!0);z(H,null)}else await ye(Z)}catch(ne){console.error("Error scanning file:",ne),h("Failed to scan QR code from file. Please try a different image or install the required libraries.")}F.target.value=""}},ye=async F=>{h("File scanning requires QR libraries to be installed. Please install html5-qrcode and @zxing/library packages.")},B=(()=>{const F=Object.values(T).filter(Boolean).length,Z=Object.keys(T).length;return{available:F,total:Z,percentage:Math.round(F/Z*100)}})();return S?a.jsx("div",{className:`${r} max-w-2xl mx-auto`,children:a.jsx("div",{className:`${D?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-xl shadow-lg border p-8`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500 mx-auto mb-4"}),a.jsx("p",{className:`${D?"text-gray-300":"text-gray-600"}`,children:"Loading QR Scanner..."})]})})}):a.jsx("div",{className:`${r} max-w-2xl mx-auto`,children:a.jsxs("div",{className:`${D?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-xl shadow-lg border overflow-hidden`,children:[a.jsxs("div",{className:`px-6 py-4 border-b ${D?"border-gray-700 bg-gray-700":"border-gray-200 bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:`text-lg font-bold ${D?"text-white":"text-gray-900"}`,children:"📷 QR Code Scanner"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:`px-2 py-1 rounded-full text-xs ${B.percentage===100?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":B.percentage>50?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:[B.available,"/",B.total," Libraries"]}),a.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-600 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>!i&&C("camera"),disabled:i||!T.html5qrcode,className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${k==="camera"?"bg-white dark:bg-gray-500 text-gray-900 dark:text-white shadow":"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-100"} ${i||!T.html5qrcode?"opacity-50 cursor-not-allowed":""}`,children:"📹 Camera"}),a.jsx("button",{onClick:()=>!i&&C("file"),disabled:i,className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${k==="file"?"bg-white dark:bg-gray-500 text-gray-900 dark:text-white shadow":"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-100"} ${i?"opacity-50 cursor-not-allowed":""}`,children:"📁 File"})]})]})]}),k==="camera"&&m.length>1&&T.html5qrcode&&a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:`block text-sm font-medium ${D?"text-gray-300":"text-gray-700"} mb-1`,children:"Select Camera:"}),a.jsx("select",{value:x||"",onChange:F=>N(F.target.value),disabled:i,className:`w-full px-3 py-1 text-sm rounded-md ${D?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300"} border focus:ring-indigo-500 focus:border-indigo-500`,children:m.map(F=>a.jsx("option",{value:F.id,children:F.label||`Camera ${F.id}`},F.id))})]})]}),a.jsxs("div",{className:"p-6",children:[B.percentage<100&&a.jsx("div",{className:`mb-4 p-3 rounded-lg ${D?"bg-yellow-900/20 border-yellow-800":"bg-yellow-50 border-yellow-200"} border`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"text-2xl mr-3",children:"⚠️"}),a.jsxs("div",{children:[a.jsx("h4",{className:`font-medium ${D?"text-yellow-400":"text-yellow-800"} mb-1`,children:"Limited QR Functionality"}),a.jsx("p",{className:`text-sm ${D?"text-yellow-300":"text-yellow-700"} mb-2`,children:"Some QR libraries are missing. Install them for full functionality:"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{className:`flex items-center ${T.qrcode?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[T.qrcode?"✅":"❌"," qrcode"]}),a.jsxs("div",{className:`flex items-center ${T.html5qrcode?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[T.html5qrcode?"✅":"❌"," html5-qrcode"]}),a.jsxs("div",{className:`flex items-center ${T.zxing?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[T.zxing?"✅":"❌"," @zxing/library"]})]})]})]})}),d&&a.jsx("div",{className:`mb-4 p-3 rounded-lg ${D?"bg-red-900/20 border-red-800":"bg-red-50 border-red-200"} border`,children:a.jsxs("p",{className:`text-sm ${D?"text-red-400":"text-red-700"}`,children:["❌ ",d]})}),l&&a.jsxs("div",{className:`mb-4 p-3 rounded-lg ${D?"bg-green-900/20 border-green-800":"bg-green-50 border-green-200"} border`,children:[a.jsx("p",{className:`text-sm font-medium ${D?"text-green-400":"text-green-700"} mb-2`,children:"✅ QR Code Scanned Successfully!"}),a.jsx("div",{className:`p-2 rounded ${D?"bg-gray-700":"bg-white"}`,children:a.jsx("pre",{className:`text-xs ${D?"text-gray-300":"text-gray-600"} break-all whitespace-pre-wrap max-h-32 overflow-y-auto`,children:typeof l=="object"?JSON.stringify(l,null,2):l})})]}),k==="camera"?a.jsx("div",{className:"text-center",children:T.html5qrcode?a.jsxs(a.Fragment,{children:[a.jsx("div",{id:"qr-reader",className:"mx-auto mb-4"}),a.jsx("div",{className:"flex justify-center space-x-3",children:i?a.jsx("button",{onClick:A,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:"⏹️ Stop Scanning"}):a.jsx("button",{onClick:_,disabled:!x,className:`px-4 py-2 rounded-lg font-medium text-white transition-colors ${x?"bg-green-600 hover:bg-green-700":"bg-gray-400 cursor-not-allowed"}`,children:"📹 Start Scanning"})})]}):a.jsxs("div",{className:`p-8 rounded-lg ${D?"bg-gray-700":"bg-gray-100"}`,children:[a.jsx("div",{className:"text-4xl mb-4",children:"📱"}),a.jsx("h3",{className:`text-lg font-medium ${D?"text-white":"text-gray-900"} mb-2`,children:"Camera Scanning Unavailable"}),a.jsx("p",{className:`text-sm ${D?"text-gray-400":"text-gray-600"} mb-4`,children:"Install html5-qrcode library to enable camera scanning"}),a.jsx("code",{className:`text-xs ${D?"bg-gray-800 text-gray-300":"bg-white text-gray-800"} p-2 rounded block`,children:"npm install html5-qrcode"})]})}):a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 ${D?"border-gray-600 hover:border-gray-500":"border-gray-300 hover:border-gray-400"} transition-colors`,children:[a.jsx("input",{type:"file",accept:"image/*",onChange:ee,ref:E,className:"hidden"}),a.jsx("div",{className:"text-4xl mb-4",children:"📁"}),a.jsx("p",{className:`text-lg font-medium ${D?"text-white":"text-gray-900"} mb-2`,children:"Upload QR Code Image"}),a.jsx("p",{className:`text-sm ${D?"text-gray-400":"text-gray-500"} mb-4`,children:"Select an image file containing a QR code"}),a.jsx("button",{onClick:()=>{var F;return(F=E.current)==null?void 0:F.click()},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors",children:"📷 Choose File"})]}),a.jsx("div",{id:"qr-reader-file",className:"hidden"})]}),n&&a.jsxs("div",{className:`mt-6 p-4 rounded-lg ${D?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-200"} border`,children:[a.jsx("h4",{className:`font-medium ${D?"text-blue-300":"text-blue-800"} mb-2`,children:"📖 Instructions"}),a.jsx("ul",{className:`text-sm space-y-1 ${D?"text-blue-200":"text-blue-700"}`,children:k==="camera"?a.jsxs(a.Fragment,{children:[a.jsx("li",{children:"• Allow camera access when prompted"}),a.jsx("li",{children:"• Point your camera at the QR code"}),a.jsx("li",{children:"• Keep the QR code within the scanning area"}),a.jsx("li",{children:"• Ensure good lighting for best results"})]}):a.jsxs(a.Fragment,{children:[a.jsx("li",{children:"• Upload a clear image of the QR code"}),a.jsx("li",{children:"• Supported formats: JPG, PNG, GIF"}),a.jsx("li",{children:"• Ensure the QR code is not blurry"}),a.jsx("li",{children:"• The entire QR code should be visible"})]})})]}),B.percentage<100&&a.jsxs("div",{className:`mt-4 p-4 rounded-lg ${D?"bg-gray-700":"bg-gray-100"}`,children:[a.jsx("h4",{className:`font-medium ${D?"text-gray-300":"text-gray-700"} mb-2`,children:"🔧 Install Missing Libraries"}),a.jsx("p",{className:`text-sm ${D?"text-gray-400":"text-gray-600"} mb-2`,children:"Run this command to install all QR libraries:"}),a.jsx("code",{className:`text-xs ${D?"bg-gray-800 text-gray-300":"bg-white text-gray-800"} p-2 rounded block font-mono`,children:"npm install qrcode html5-qrcode @zxing/library"})]})]})]})})},$v=({data:t,size:e=200,className:n="",showDownload:r=!0})=>{const[s,i]=R.useState(""),[o,l]=R.useState(!1),{darkMode:u}=Rt();R.useEffect(()=>{d()},[t,e]);const d=async()=>{if(t){l(!0);try{const m=encodeURIComponent(typeof t=="object"?JSON.stringify(t):t),g=`https://api.qrserver.com/v1/create-qr-code/?size=${e}x${e}&data=${m}`;i(g)}catch(m){console.error("Error generating QR code:",m)}finally{l(!1)}}},h=async()=>{if(s)try{const g=await(await fetch(s)).blob(),x=window.URL.createObjectURL(g),N=document.createElement("a");N.download=`qrcode-${Date.now()}.png`,N.href=x,N.click(),window.URL.revokeObjectURL(x)}catch(m){console.error("Error downloading QR code:",m)}};return o?a.jsx("div",{className:`flex items-center justify-center ${n}`,style:{width:e,height:e},children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-500"})}):a.jsx("div",{className:`text-center ${n}`,children:s&&a.jsxs(a.Fragment,{children:[a.jsx("img",{src:s,alt:"QR Code",className:`mx-auto border-2 ${u?"border-gray-600":"border-gray-200"} rounded-lg`,style:{width:e,height:e},onError:()=>console.error("Failed to load QR code image")}),r&&a.jsxs("div",{className:"mt-4 flex justify-center space-x-2",children:[a.jsx("button",{onClick:h,className:"px-3 py-1 text-sm rounded-md bg-indigo-600 hover:bg-indigo-700 text-white transition-colors",children:"📥 Download"}),a.jsx("button",{onClick:()=>{navigator.clipboard&&(navigator.clipboard.writeText(s),alert("QR code URL copied to clipboard!"))},className:"px-3 py-1 text-sm rounded-md bg-gray-600 hover:bg-gray-700 text-white transition-colors",children:"📋 Copy URL"})]})]})})},BO=t=>{const[e,n]=R.useState(!1);if(R.useEffect(()=>{(async()=>{try{await ae(()=>import("./browser-BXdiCFWD.js").then(i=>i.b),[])&&n(!0)}catch{console.log("QRCode library not available, using fallback"),n(!1)}})()},[]),e)try{const{QRCodeGenerator:r}=require("./QRCodeDisplay");return a.jsx(r,{...t})}catch{return a.jsx($v,{...t})}return a.jsx($v,{...t})},g1=(t,e)=>{const n=window.location.origin,s={timestamp:new Date().toISOString(),source:"wholesaler-app",version:"1.0"};switch(e){case"product":return{...s,type:"product",id:t.id,name:t.name,sku:t.sku,price:t.price,stock:t.stock,category:t.category,url:`${n}/products/${t.id}`};case"order":return{...s,type:"order",id:t.id,customer:t.customerName,total:t.total,status:t.status,itemCount:t.itemCount||0,url:`${n}/orders/${t.id}`};case"user":return{...s,type:"user",id:t.id,email:t.email,name:t.displayName,role:t.role||t.accountType,url:`${n}/admin/users/${t.id}`};case"inventory":return{...s,type:"inventory",productId:t.id,name:t.name,stock:t.stock,location:t.location||"warehouse",lastUpdated:t.updatedAt,url:`${n}/inventory/${t.id}`};default:return{...s,type:"generic",data:t}}},Mp=t=>{try{const e=JSON.parse(t);return e.source==="wholesaler-app"&&e.type&&e.id?{isValid:!0,isOurFormat:!0,data:e,type:e.type,id:e.id,url:e.url}:{isValid:!0,isOurFormat:!1,data:e,type:"unknown",rawData:t}}catch{return{isValid:!0,isOurFormat:!1,data:t,type:"text",rawData:t}}},nc=(t,e)=>{const n=Mp(t);if(n.isOurFormat&&n.url){if(window.confirm(`QR code detected for ${n.type}: ${n.data.name||n.data.customer||n.data.email||n.id}. 
      
Navigate to this item?`)){const s=new URL(n.url);return e(s.pathname),!0}}else if(n.type==="text"&&n.data.startsWith("http")&&window.confirm(`External URL detected: ${n.data}
      
Open this link?`))return window.open(n.data,"_blank"),!0;return!1},y1=async(t,e)=>{try{const r=await(await fetch(t)).blob(),s=window.URL.createObjectURL(r),i=document.createElement("a");return i.download=e||`qr-code-${Date.now()}.png`,i.href=s,i.click(),window.URL.revokeObjectURL(s),!0}catch(n){return console.error("Download failed:",n),!1}},Xd=({data:t,type:e,item:n,size:r=200,showActions:s=!0,className:i=""})=>{const{darkMode:o}=Rt(),l=rr(),[u,d]=R.useState(""),h=typeof t=="string"?t:JSON.stringify(t),m=Mp(h),g=()=>{nc(h,l)},x=async()=>{if(u){const k=`qr-${e}-${(n==null?void 0:n.id)||"code"}-${Date.now()}.png`;await y1(u,k)}},N=async()=>{if(navigator.share&&m.isOurFormat)try{await navigator.share({title:`${e} QR Code`,text:`QR code for ${m.data.name||m.data.customer||m.data.email}`,url:m.data.url})}catch{navigator.clipboard&&m.data.url&&(await navigator.clipboard.writeText(m.data.url),alert("URL copied to clipboard!"))}else navigator.clipboard&&(await navigator.clipboard.writeText(h),alert("QR data copied to clipboard!"))};return a.jsxs("div",{className:`${i} text-center`,children:[a.jsx(BO,{data:h,size:r,showDownload:!1,onGenerated:d}),s&&a.jsxs("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:[a.jsx("button",{onClick:x,className:"px-3 py-1 text-sm rounded-md bg-indigo-600 hover:bg-indigo-700 text-white transition-colors",children:"📥 Download"}),a.jsx("button",{onClick:N,className:"px-3 py-1 text-sm rounded-md bg-green-600 hover:bg-green-700 text-white transition-colors",children:"🔗 Share"}),m.isOurFormat&&a.jsx("button",{onClick:g,className:"px-3 py-1 text-sm rounded-md bg-purple-600 hover:bg-purple-700 text-white transition-colors",children:"🔗 Open"})]}),a.jsx("div",{className:`mt-3 p-2 rounded text-xs ${o?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:a.jsxs("details",{children:[a.jsx("summary",{className:"cursor-pointer",children:m.isOurFormat?`${m.type}: ${m.data.name||m.data.customer||m.data.email||m.id}`:"QR Data"}),a.jsx("pre",{className:"mt-2 text-left break-all whitespace-pre-wrap max-h-20 overflow-y-auto",children:h.length>200?h.substring(0,200)+"...":h})]})})]})},v1=()=>{const[t,e]=R.useState({qrcode:!1,html5qrcode:!1,zxing:!1,loading:!0});R.useEffect(()=>{n()},[]);const n=async()=>{const l={qrcode:!1,html5qrcode:!1,zxing:!1,loading:!1};try{await ae(()=>import("./browser-BXdiCFWD.js").then(u=>u.b),[]),l.qrcode=!0}catch{console.log("QRCode library not available")}try{(await ae(()=>import("./index-BdzrZHSF.js"),[])).Html5QrcodeScanner&&(l.html5qrcode=!0)}catch{console.log("Html5-qrcode library not available")}try{(await ae(()=>import("./index-D3Mz4UNV.js"),[])).BrowserQRCodeReader&&(l.zxing=!0)}catch{console.log("ZXing library not available")}e(l)},r=()=>{const l=Object.entries(t).filter(([d,h])=>d!=="loading"&&h).length,u=Object.keys(t).length-1;return{available:l,total:u,percentage:Math.round(l/u*100),allAvailable:l===u,someAvailable:l>0,noneAvailable:l===0}},s=()=>t.html5qrcode,i=()=>t.qrcode,o=()=>t.zxing||t.html5qrcode;return{libraries:t,status:r(),canUseCamera:s,canGenerateQR:i,canScanFiles:o,refresh:n}},Jd=({selectedItems:t,itemType:e,onClearSelection:n,className:r=""})=>{const{darkMode:s}=Rt(),{canGenerateQR:i}=v1(),[o,l]=R.useState(!1),[u,d]=R.useState(0),h=async()=>{if(t.length){l(!0),d(0);try{for(let m=0;m<t.length;m++){const g=t[m],x=g1(g,e),N=JSON.stringify(x),C=`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(N)}`,T=`qr-${e}-${g.id}-${Date.now()}.png`;await y1(C,T),d(Math.round((m+1)/t.length*100)),await new Promise(w=>setTimeout(w,500))}alert(`Successfully generated ${t.length} QR codes!`),n()}catch(m){console.error("Bulk QR generation failed:",m),alert("Some QR codes failed to generate. Please try again.")}finally{l(!1),d(0)}}};return t.length?a.jsxs("div",{className:`${r} p-4 rounded-lg ${s?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-200"} border`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:`font-medium ${s?"text-blue-300":"text-blue-800"}`,children:"Bulk QR Generation"}),a.jsxs("p",{className:`text-sm ${s?"text-blue-200":"text-blue-700"}`,children:[t.length," ",e," selected"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[o&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`w-20 h-2 rounded-full ${s?"bg-gray-700":"bg-gray-200"}`,children:a.jsx("div",{className:"h-full bg-blue-600 rounded-full transition-all duration-300",style:{width:`${u}%`}})}),a.jsxs("span",{className:`text-sm ${s?"text-blue-300":"text-blue-700"}`,children:[u,"%"]})]}),a.jsx("button",{onClick:h,disabled:o||!i(),className:`px-4 py-2 rounded-lg font-medium text-white transition-colors ${o||!i()?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:o?"📱 Generating...":"📱 Generate QR Codes"}),a.jsx("button",{onClick:n,disabled:o,className:`px-3 py-2 rounded-lg font-medium transition-colors ${o?"opacity-50 cursor-not-allowed":s?"bg-gray-700 hover:bg-gray-600 text-gray-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:"Clear"})]})]}),!i()&&a.jsx("div",{className:`mt-2 text-xs ${s?"text-yellow-400":"text-yellow-700"}`,children:"⚠️ Install 'qrcode' library for better QR generation"})]}):null},qO=()=>{const{darkMode:t}=Rt(),{user:e}=ir(),n=rr(),r=v1(),[s,i]=R.useState({products:[],orders:[],users:[]}),[o,l]=R.useState(!0),[u,d]=R.useState(null),[h,m]=R.useState("scanner"),[g,x]=R.useState([]),[N,k]=R.useState([]),[C,T]=R.useState(!1),[w,S]=R.useState({generated:parseInt(localStorage.getItem("qr-generated")||"0"),scanned:parseInt(localStorage.getItem("qr-scanned")||"0"),today:parseInt(localStorage.getItem("qr-today")||"0")});R.useEffect(()=>{U(),j()},[]);const j=()=>{const _=localStorage.getItem("qr-last-date"),P=new Date().toDateString();_!==P&&(localStorage.setItem("qr-today","0"),localStorage.setItem("qr-last-date",P),S(A=>({...A,today:0})))},D=_=>{S(P=>{const A={...P,[_]:P[_]+1,today:_==="generated"||_==="scanned"?P.today+1:P.today};return localStorage.setItem(`qr-${_}`,A[_].toString()),(_==="generated"||_==="scanned")&&localStorage.setItem("qr-today",A.today.toString()),A})},U=async()=>{try{l(!0),d(null);const _={products:[],orders:[],users:[]};try{const P=ec(Mr,"products"),A=Il(P,qd("createdAt","desc"),Nl(50)),z=await Hd(A);_.products=z.docs.map(Q=>({id:Q.id,...Q.data()}))}catch(P){console.error("Error fetching products:",P)}try{const P=ec(Mr,"orders");let A;if((e==null?void 0:e.accountType)==="admin"||(e==null?void 0:e.accountType)==="manager"?A=Il(P,qd("createdAt","desc"),Nl(50)):e&&(A=Il(P,qd("createdAt","desc"),Nl(20))),A){const z=await Hd(A);_.orders=z.docs.map(Q=>{const ee=Q.data();return{id:Q.id,customerName:ee.customerName||"Unknown Customer",total:ee.total||0,status:ee.status||"pending",createdAt:ee.createdAt,...ee}})}}catch(P){console.error("Error fetching orders:",P)}try{if((e==null?void 0:e.accountType)==="admin"||(e==null?void 0:e.accountType)==="manager"){const P=ec(Mr,"users"),A=Il(P,Nl(30)),z=await Hd(A);_.users=z.docs.map(Q=>({id:Q.id,...Q.data()}))}}catch(P){console.error("Error fetching users:",P)}i(_)}catch(_){console.error("Error fetching QR data:",_),d("Failed to load data for QR generation")}finally{l(!1)}},E=_=>{const P={id:Date.now(),timestamp:new Date,rawData:_,parsed:Mp(typeof _=="string"?_:JSON.stringify(_))};k(A=>[P,...A.slice(0,9)]),D("scanned"),P.parsed.isOurFormat&&window.confirm(`QR code detected for ${P.parsed.type}: ${P.parsed.data.name||P.parsed.data.customer||P.parsed.data.email||P.parsed.id}. 
        
Navigate to this item?`)&&nc(P.rawData,n)},y=(_,P)=>{const A=g1(_,P);return D("generated"),A},v=()=>{k([])};if(o)return a.jsx("div",{className:`min-h-screen flex items-center justify-center ${t?"bg-gray-900":"bg-gray-50"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500 mx-auto mb-4"}),a.jsx("p",{className:`text-lg ${t?"text-gray-300":"text-gray-600"}`,children:"Loading QR Tools..."})]})});if(u)return a.jsx("div",{className:`min-h-screen flex items-center justify-center ${t?"bg-gray-900":"bg-gray-50"} px-4`,children:a.jsxs("div",{className:`max-w-md w-full p-8 ${t?"bg-gray-800":"bg-white"} rounded-xl shadow-lg text-center`,children:[a.jsx("div",{className:"text-6xl mb-6",children:"⚠️"}),a.jsx("h2",{className:`text-2xl font-bold mb-4 ${t?"text-white":"text-gray-900"}`,children:"QR Tools Error"}),a.jsx("p",{className:`mb-6 ${t?"text-gray-300":"text-gray-600"}`,children:u}),a.jsx("button",{onClick:U,className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors",children:"Try Again"})]})});const I=[{id:"scanner",name:"Scanner",icon:"📷",description:"Scan QR codes"},{id:"generator",name:"Generator",icon:"📱",description:"Generate QR codes"},{id:"history",name:"History",icon:"📋",description:"Scan history"},{id:"bulk",name:"Bulk Tools",icon:"⚡",description:"Bulk operations"}];return a.jsx("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-gray-50"} py-6 px-4`,children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"} mb-2`,children:"📱 QR Code Management Suite"}),a.jsx("p",{className:`${t?"text-gray-400":"text-gray-600"}`,children:"Complete QR code solution for products, orders, and users"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[a.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow border p-4`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-2xl mr-3",children:r.status.allAvailable?"✅":r.status.someAvailable?"⚠️":"❌"}),a.jsxs("div",{children:[a.jsx("p",{className:`text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"QR Libraries"}),a.jsxs("p",{className:`text-lg font-bold ${t?"text-white":"text-gray-900"}`,children:[r.status.available,"/",r.status.total]})]})]})}),a.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow border p-4`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-2xl mr-3",children:"📱"}),a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Generated"}),a.jsx("p",{className:`text-lg font-bold ${t?"text-white":"text-gray-900"}`,children:w.generated})]})]})}),a.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow border p-4`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-2xl mr-3",children:"📷"}),a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Scanned"}),a.jsx("p",{className:`text-lg font-bold ${t?"text-white":"text-gray-900"}`,children:w.scanned})]})]})}),a.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow border p-4`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-2xl mr-3",children:"🕒"}),a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Today"}),a.jsx("p",{className:`text-lg font-bold ${t?"text-white":"text-gray-900"}`,children:w.today})]})]})}),a.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow border p-4`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-2xl mr-3",children:"📊"}),a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Total Items"}),a.jsx("p",{className:`text-lg font-bold ${t?"text-white":"text-gray-900"}`,children:s.products.length+s.orders.length+s.users.length})]})]})})]}),!r.status.allAvailable&&a.jsx("div",{className:`mb-6 p-4 rounded-lg ${t?"bg-yellow-900/20 border-yellow-800":"bg-yellow-50 border-yellow-200"} border`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"text-2xl mr-3",children:"📦"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:`font-medium ${t?"text-yellow-400":"text-yellow-800"} mb-2`,children:"Enhance QR Functionality"}),a.jsxs("p",{className:`text-sm ${t?"text-yellow-300":"text-yellow-700"} mb-3`,children:["Install QR libraries for full functionality. Current status: ",r.status.available,"/",r.status.total," libraries available."]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("code",{className:`text-xs ${t?"bg-gray-800 text-gray-300":"bg-white text-gray-800"} p-2 rounded font-mono`,children:"npm install qrcode html5-qrcode @zxing/library"}),a.jsx("button",{onClick:r.refresh,className:"text-sm px-3 py-1 rounded bg-yellow-600 hover:bg-yellow-700 text-white",children:"Refresh"})]})]})]})}),a.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-xl shadow-lg border overflow-hidden mb-6`,children:[a.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:I.map(_=>a.jsxs("button",{onClick:()=>m(_.id),className:`flex-1 px-6 py-4 text-center font-medium transition-colors ${h===_.id?"bg-indigo-600 text-white":t?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[a.jsx("div",{className:"text-2xl mb-1",children:_.icon}),a.jsx("div",{className:"text-sm font-medium",children:_.name}),a.jsx("div",{className:"text-xs opacity-75",children:_.description})]},_.id))}),a.jsxs("div",{className:"p-6",children:[h==="scanner"&&a.jsxs("div",{children:[a.jsx(zO,{onScan:E,showPreview:!0,className:"mb-6"}),N.length>0&&a.jsxs("div",{className:`mt-6 p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:["Recent Scans (",N.length,")"]}),a.jsx("button",{onClick:v,className:`text-sm ${t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:"Clear History"})]}),a.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:N.map(_=>a.jsx("div",{className:`p-3 rounded ${t?"bg-gray-800":"bg-white"} border ${t?"border-gray-600":"border-gray-200"}`,children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:`text-sm font-medium ${t?"text-white":"text-gray-900"}`,children:_.parsed.isOurFormat?`${_.parsed.type}: ${_.parsed.data.name||_.parsed.data.customer||_.parsed.data.email||_.parsed.id}`:"External QR Code"}),a.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:_.timestamp.toLocaleString()})]}),_.parsed.isOurFormat&&_.parsed.url&&a.jsx("button",{onClick:()=>nc(_.rawData,n),className:"text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300 text-sm",children:"Open →"})]})},_.id))})]})]}),h==="generator"&&a.jsx("div",{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[a.jsxs("div",{className:`p-6 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[a.jsxs("h3",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"} mb-4`,children:["📦 Products (",s.products.length,")"]}),a.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:[s.products.slice(0,10).map(_=>a.jsx("div",{className:`p-3 rounded ${t?"bg-gray-800":"bg-white"} border ${t?"border-gray-600":"border-gray-200"}`,children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:`text-sm font-medium ${t?"text-white":"text-gray-900"}`,children:_.name}),a.jsxs("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:["$",_.price," • Stock: ",_.stock]})]}),a.jsx(Xd,{data:y(_,"product"),type:"product",item:_,size:60,showActions:!1})]})},_.id)),s.products.length>10&&a.jsxs("div",{className:`text-center text-sm ${t?"text-gray-400":"text-gray-500"}`,children:["+",s.products.length-10," more products"]})]})]}),a.jsxs("div",{className:`p-6 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[a.jsxs("h3",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"} mb-4`,children:["📋 Orders (",s.orders.length,")"]}),a.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:[s.orders.slice(0,10).map(_=>a.jsx("div",{className:`p-3 rounded ${t?"bg-gray-800":"bg-white"} border ${t?"border-gray-600":"border-gray-200"}`,children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("div",{className:`text-sm font-medium ${t?"text-white":"text-gray-900"}`,children:["#",_.id.slice(0,8)]}),a.jsxs("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:[_.customerName," • $",_.total]})]}),a.jsx(Xd,{data:y(_,"order"),type:"order",item:_,size:60,showActions:!1})]})},_.id)),s.orders.length>10&&a.jsxs("div",{className:`text-center text-sm ${t?"text-gray-400":"text-gray-500"}`,children:["+",s.orders.length-10," more orders"]})]})]}),a.jsxs("div",{className:`p-6 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[a.jsxs("h3",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"} mb-4`,children:["👥 Users (",s.users.length,")"]}),s.users.length>0?a.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:[s.users.slice(0,10).map(_=>a.jsx("div",{className:`p-3 rounded ${t?"bg-gray-800":"bg-white"} border ${t?"border-gray-600":"border-gray-200"}`,children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:`text-sm font-medium ${t?"text-white":"text-gray-900"}`,children:_.displayName||_.email}),a.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:_.accountType||"user"})]}),a.jsx(Xd,{data:y(_,"user"),type:"user",item:_,size:60,showActions:!1})]})},_.id)),s.users.length>10&&a.jsxs("div",{className:`text-center text-sm ${t?"text-gray-400":"text-gray-500"}`,children:["+",s.users.length-10," more users"]})]}):a.jsx("div",{className:`text-center text-sm ${t?"text-gray-400":"text-gray-500"}`,children:(e==null?void 0:e.accountType)==="admin"||(e==null?void 0:e.accountType)==="manager"?"No users found":"Admin access required"})]})]})}),h==="history"&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Scan History"}),N.length>0&&a.jsx("button",{onClick:v,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Clear All"})]}),N.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(_=>a.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"} border ${t?"border-gray-600":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:_.parsed.isOurFormat?`${_.parsed.type}: ${_.parsed.data.name||_.parsed.data.customer||_.parsed.data.email||_.parsed.id}`:_.parsed.type==="text"?"Text QR":"External QR"}),a.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:_.timestamp.toLocaleString()})]}),_.parsed.isOurFormat&&a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t?"bg-green-900/30 text-green-400":"bg-green-100 text-green-800"}`,children:"Internal"})]}),a.jsx("div",{className:`p-2 rounded text-xs ${t?"bg-gray-800":"bg-white"} mb-3`,children:a.jsx("pre",{className:"break-all whitespace-pre-wrap max-h-20 overflow-y-auto",children:typeof _.rawData=="object"?JSON.stringify(_.rawData,null,2).substring(0,200)+(JSON.stringify(_.rawData).length>200?"...":""):_.rawData.substring(0,200)+(_.rawData.length>200?"...":"")})}),_.parsed.isOurFormat&&_.parsed.url&&a.jsx("button",{onClick:()=>nc(_.rawData,n),className:"w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700 transition-colors",children:"Open Item"})]},_.id))}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-4xl mb-4",children:"📋"}),a.jsx("h3",{className:`text-lg font-medium ${t?"text-gray-300":"text-gray-900"} mb-2`,children:"No Scan History"}),a.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"} mb-4`,children:"Start scanning QR codes to see your history here"}),a.jsx("button",{onClick:()=>m("scanner"),className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors",children:"Go to Scanner"})]})]}),h==="bulk"&&a.jsxs("div",{children:[a.jsx("h3",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"} mb-6`,children:"Bulk QR Operations"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"} mb-4`,children:"📦 Products Bulk Generation"}),a.jsx(Jd,{selectedItems:s.products,itemType:"product",onClearSelection:()=>{}})]}),a.jsxs("div",{children:[a.jsx("h4",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"} mb-4`,children:"📋 Orders Bulk Generation"}),a.jsx(Jd,{selectedItems:s.orders,itemType:"order",onClearSelection:()=>{}})]}),s.users.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"} mb-4`,children:"👥 Users Bulk Generation"}),a.jsx(Jd,{selectedItems:s.users,itemType:"user",onClearSelection:()=>{}})]})]})]})]})]}),a.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow border p-6`,children:[a.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"} mb-4`,children:"📖 QR Code Help & Features"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:`font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"📷 Scanner Features"}),a.jsxs("ul",{className:`text-sm space-y-1 ${t?"text-gray-400":"text-gray-600"}`,children:[a.jsx("li",{children:"• Camera & file scanning"}),a.jsx("li",{children:"• Auto-navigation"}),a.jsx("li",{children:"• History tracking"}),a.jsx("li",{children:"• Multiple formats supported"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:`font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"📱 Generator Features"}),a.jsxs("ul",{className:`text-sm space-y-1 ${t?"text-gray-400":"text-gray-600"}`,children:[a.jsx("li",{children:"• Product QR codes"}),a.jsx("li",{children:"• Order tracking"}),a.jsx("li",{children:"• User profiles"}),a.jsx("li",{children:"• Bulk generation"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:`font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"⚡ Bulk Operations"}),a.jsxs("ul",{className:`text-sm space-y-1 ${t?"text-gray-400":"text-gray-600"}`,children:[a.jsx("li",{children:"• Generate multiple QR codes"}),a.jsx("li",{children:"• Download as images"}),a.jsx("li",{children:"• Progress tracking"}),a.jsx("li",{children:"• Batch processing"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:`font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"🔧 Requirements"}),a.jsxs("ul",{className:`text-sm space-y-1 ${t?"text-gray-400":"text-gray-600"}`,children:[a.jsx("li",{children:"• qrcode library"}),a.jsx("li",{children:"• html5-qrcode library"}),a.jsx("li",{children:"• @zxing/library"}),a.jsx("li",{children:"• Camera permissions"})]})]})]})]})]})})},HO=()=>{const{darkMode:t}=Rt(),{user:e}=ir(),[n,r]=R.useState(!1),[s,i]=R.useState(0),[o,l]=R.useState(""),[u,d]=R.useState(!1),h=[{name:"iPhone 16 Pro Max",description:"Latest flagship iPhone with A18 Pro chip, ProRAW photography, and titanium design. Features 6.9-inch Super Retina XDR display.",price:1199.99,originalPrice:1399.99,costPrice:850,stock:25,category:"Electronics",sku:"APL-IP16-PM-256",imageUrl:"https://cdn.dummyjson.com/products/images/smartphones/iPhone%2013%20mini/1.png",supplier:"Apple Inc.",tags:["smartphone","premium","flagship"]},{name:"Samsung Galaxy S24 Ultra",description:"Premium Android smartphone with S Pen, 200MP camera, and AI-powered features. 6.8-inch Dynamic AMOLED display.",price:1299.99,originalPrice:1599.99,costPrice:900,stock:18,category:"Electronics",sku:"SAM-GS24-ULT-512",imageUrl:"https://cdn.dummyjson.com/products/images/smartphones/Samsung%20Galaxy%20S10/1.png",supplier:"Samsung Electronics",tags:["android","premium","s-pen"]},{name:"MacBook Pro 16-inch M4 Pro",description:"Professional laptop with M4 Pro chip, Liquid Retina XDR display, and all-day battery life. Perfect for creative professionals.",price:2499.99,originalPrice:2999.99,costPrice:1800,stock:12,category:"Electronics",sku:"APL-MBP16-M4P-512",imageUrl:"https://cdn.dummyjson.com/products/images/laptops/MacBook%20Pro/1.png",supplier:"Apple Inc.",tags:["laptop","professional","m4-pro"]},{name:"Sony WH-1000XM5 Headphones",description:"Industry-leading noise canceling wireless headphones with 30-hour battery life and premium comfort.",price:399.99,originalPrice:499.99,costPrice:280,stock:45,category:"Electronics",sku:"SNY-WH1000XM5-BLK",imageUrl:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&h=500&fit=crop",supplier:"Sony Corporation",tags:["headphones","wireless","noise-canceling"]},{name:"PlayStation 5 Pro",description:"Next-generation gaming console with enhanced performance, ray tracing, and 8K gaming capabilities.",price:699.99,originalPrice:799.99,costPrice:480,stock:8,category:"Electronics",sku:"SNY-PS5-PRO-1TB",imageUrl:"https://images.unsplash.com/photo-1606144042614-b2417e99c4e3?w=500&h=500&fit=crop",supplier:"Sony Interactive Entertainment",tags:["gaming","console","next-gen"]},{name:"Canon EOS R5 Mark II",description:"Professional mirrorless camera with 45MP full-frame sensor, 8K video recording, and advanced autofocus system.",price:4299.99,originalPrice:4899.99,costPrice:3200,stock:6,category:"Electronics",sku:"CAN-R5M2-BODY",imageUrl:"https://images.unsplash.com/photo-1502920917128-1aa500764cbd?w=500&h=500&fit=crop",supplier:"Canon Inc.",tags:["camera","professional","mirrorless"]},{name:"Herman Miller Aeron Chair",description:"Ergonomic office chair with PostureFit SL support, breathable mesh design, and 12-year warranty.",price:1395,originalPrice:1695,costPrice:900,stock:15,category:"Furniture",sku:"HM-AERON-SZ-B",imageUrl:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=500&h=500&fit=crop",supplier:"Herman Miller",tags:["chair","ergonomic","office"]},{name:"Dyson V15 Detect Vacuum",description:"Cordless vacuum with laser detection technology, LCD screen, and up to 60 minutes runtime.",price:749.99,originalPrice:899.99,costPrice:525,stock:22,category:"Home & Garden",sku:"DYS-V15-DETECT-YEL",imageUrl:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=500&h=500&fit=crop",supplier:"Dyson Ltd.",tags:["vacuum","cordless","laser-detection"]},{name:"KitchenAid Stand Mixer Pro",description:"Professional-grade stand mixer with 6-quart capacity, 10 speeds, and dishwasher-safe bowl.",price:429.99,originalPrice:549.99,costPrice:300,stock:28,category:"Kitchen",sku:"KA-MIXER-PRO-RED",imageUrl:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=500&h=500&fit=crop",supplier:"KitchenAid",tags:["mixer","kitchen","professional"]},{name:"Nike Air Jordan 1 Retro High",description:"Classic basketball sneaker with premium leather construction and iconic colorway. Timeless style meets comfort.",price:170,originalPrice:220,costPrice:85,stock:50,category:"Clothing",sku:"NKE-AJ1-HIGH-BRD",imageUrl:"https://images.unsplash.com/photo-1549298916-b41d501d3772?w=500&h=500&fit=crop",supplier:"Nike Inc.",tags:["sneakers","basketball","retro"]},{name:"Rolex Submariner",description:"Luxury diving watch with automatic movement, 300m water resistance, and ceramic bezel. Swiss-made precision.",price:8950,originalPrice:9950,costPrice:6500,stock:3,category:"Clothing",sku:"RLX-SUB-BLK-41MM",imageUrl:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&h=500&fit=crop",supplier:"Rolex SA",tags:["watch","luxury","diving"]},{name:"Tesla Model Y Performance Wheels",description:"21-inch Überturbine wheels designed for Tesla Model Y Performance. Lightweight forged aluminum construction.",price:4500,originalPrice:5200,costPrice:3150,stock:8,category:"Automotive",sku:"TSL-MY-WHEELS-21",imageUrl:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=500&h=500&fit=crop",supplier:"Tesla Inc.",tags:["wheels","tesla","performance"]},{name:"Bose QuietComfort Ultra",description:"Premium noise-canceling earbuds with spatial audio, all-day comfort, and advanced noise cancellation.",price:299,originalPrice:379,costPrice:180,stock:35,category:"Electronics",sku:"BSE-QC-ULTRA-WHT",imageUrl:"https://images.unsplash.com/photo-1590658268037-6bf12165a8df?w=500&h=500&fit=crop",supplier:"Bose Corporation",tags:["earbuds","noise-canceling","premium"]},{name:"Microsoft Surface Pro 9",description:"Versatile 2-in-1 laptop with 13-inch PixelSense display, Intel 12th Gen processor, and all-day battery.",price:1299.99,originalPrice:1599.99,costPrice:900,stock:20,category:"Electronics",sku:"MSF-SP9-I7-512",imageUrl:"https://cdn.dummyjson.com/products/images/laptops/Microsoft%20Surface%20Laptop%204/1.png",supplier:"Microsoft Corporation",tags:["laptop","2-in-1","surface"]},{name:"Patagonia Better Sweater Jacket",description:"Classic fleece jacket made from recycled polyester. Warm, comfortable, and environmentally conscious.",price:139,originalPrice:179,costPrice:83.4,stock:40,category:"Clothing",sku:"PTG-BS-JKT-NAV-L",imageUrl:"https://images.unsplash.com/photo-1544966503-7cc5ac882d5b?w=500&h=500&fit=crop",supplier:"Patagonia Inc.",tags:["jacket","fleece","sustainable"]}],m=async()=>{if(!e){l("Please log in to seed products");return}r(!0),i(0),l("Starting product seeding..."),d(!1);try{const x=h.length;for(let N=0;N<x;N++){const k=h[N],C={name:k.name,description:k.description,price:k.price,originalPrice:k.originalPrice,costPrice:k.costPrice,stock:k.stock,stockQuantity:k.stock,category:k.category,imageUrl:k.imageUrl,sku:k.sku,createdBy:e.uid,ownedBy:e.uid,createdByEmail:e.email,businessId:e.uid,businessName:e.businessName||e.displayName||"Demo Store",createdAt:kv(),updatedAt:kv(),isApproved:!0,status:"active",bulkPricing:{10:+(k.price*.9).toFixed(2),50:+(k.price*.85).toFixed(2),100:+(k.price*.8).toFixed(2)},reorderPoint:Math.max(5,Math.floor(k.stock*.1)),supplier:k.supplier,tags:k.tags||[k.category.toLowerCase(),k.name.toLowerCase().split(" ")[0]]};await d4(ec(Mr,"products"),C);const T=(N+1)/x*100;i(T),l(`Added ${k.name} (${N+1}/${x})`),await new Promise(w=>setTimeout(w,200))}d(!0),l(`✅ Successfully seeded ${x} premium products!`)}catch(x){console.error("Error seeding products:",x),l(`❌ Error: ${x.message}`)}finally{r(!1)}},g=()=>{const x=JSON.stringify(h,null,2),N=new Blob([x],{type:"application/json"}),k=URL.createObjectURL(N),C=document.createElement("a");C.href=k,C.download="premium-products.json",C.click(),URL.revokeObjectURL(k)};return e?a.jsxs("div",{className:`container mx-auto px-4 py-8 max-w-2xl ${t?"text-gray-200":"text-gray-800"}`,children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Product Database Seeder"}),a.jsxs("p",{className:`mt-1 text-sm ${t?"text-gray-400":"text-gray-500"}`,children:["Populate your database with ",h.length," premium products with real images and data"]})]}),a.jsx("div",{className:`mb-6 p-4 rounded-lg border ${t?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-200"}`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("svg",{className:`h-5 w-5 ${t?"text-blue-400":"text-blue-600"} mt-0.5 mr-3`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("div",{children:[a.jsx("h3",{className:`text-sm font-medium ${t?"text-blue-300":"text-blue-800"} mb-1`,children:"What will be added:"}),a.jsxs("ul",{className:`text-sm ${t?"text-blue-200":"text-blue-700"} space-y-1`,children:[a.jsxs("li",{children:["• ",h.length," premium products with real images"]}),a.jsx("li",{children:"• Categories: Electronics, Furniture, Kitchen, Clothing, Automotive"}),a.jsx("li",{children:"• Automatic bulk pricing tiers (10%, 15%, 20% discounts)"}),a.jsx("li",{children:"• Ownership tracking (all products owned by you)"}),a.jsx("li",{children:"• Stock levels, SKUs, and supplier information"})]})]})]})}),n&&a.jsxs("div",{className:`mb-6 p-4 rounded-lg ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border`,children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-indigo-500 mr-3"}),a.jsx("span",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:"Seeding Products..."})]}),a.jsx("div",{className:`w-full bg-gray-200 rounded-full h-2 mb-2 ${t?"bg-gray-700":"bg-gray-200"}`,children:a.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${s}%`}})}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{className:t?"text-gray-400":"text-gray-500",children:[s.toFixed(0),"% Complete"]}),a.jsx("span",{className:t?"text-gray-400":"text-gray-500",children:o})]})]}),o&&!n&&a.jsx("div",{className:`mb-6 p-4 rounded-lg border ${u?t?"bg-green-900/20 border-green-800 text-green-400":"bg-green-50 border-green-200 text-green-800":t?"bg-red-900/20 border-red-800 text-red-400":"bg-red-50 border-red-200 text-red-800"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),o]})}),a.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-xl shadow-lg border p-6`,children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("button",{onClick:m,disabled:n,className:"w-full px-6 py-3 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:n?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Seeding Products..."]}):a.jsx(a.Fragment,{children:"🌱 Seed Premium Products"})}),a.jsx("button",{onClick:g,className:`w-full px-6 py-3 border rounded-lg font-medium transition-colors ${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"📦 Export Product Data (JSON)"})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:`text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-3`,children:"Preview of products to be added:"}),a.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[h.slice(0,5).map((x,N)=>a.jsxs("div",{className:`flex items-center space-x-3 p-2 rounded ${t?"bg-gray-700/50":"bg-gray-50"}`,children:[a.jsx("div",{className:`w-8 h-8 rounded ${t?"bg-gray-600":"bg-gray-200"} flex items-center justify-center text-xs`,children:"📦"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`text-sm font-medium ${t?"text-white":"text-gray-900"} truncate`,children:x.name}),a.jsxs("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:[x.category," • $",x.price]})]})]},N)),h.length>5&&a.jsxs("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"} text-center py-2`,children:["... and ",h.length-5," more products"]})]})]})]}),a.jsx("div",{className:`mt-6 p-4 rounded-lg border ${t?"bg-yellow-900/20 border-yellow-800":"bg-yellow-50 border-yellow-200"}`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("svg",{className:`h-5 w-5 ${t?"text-yellow-400":"text-yellow-600"} mt-0.5 mr-2`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"})}),a.jsxs("div",{children:[a.jsx("h4",{className:`text-sm font-medium ${t?"text-yellow-300":"text-yellow-800"} mb-1`,children:"🚨 Development Use Only"}),a.jsx("p",{className:`text-sm ${t?"text-yellow-200":"text-yellow-700"}`,children:"This seeder should only be used in development. Remove this component before production deployment."})]})]})})]}):a.jsx("div",{className:`container mx-auto px-4 py-8 ${t?"text-gray-200":"text-gray-800"}`,children:a.jsxs("div",{className:`max-w-md mx-auto text-center p-8 ${t?"bg-gray-800":"bg-white"} rounded-xl shadow-lg`,children:[a.jsx("h2",{className:`text-2xl font-bold mb-4 ${t?"text-white":"text-gray-900"}`,children:"Login Required"}),a.jsx("p",{className:`mb-4 ${t?"text-gray-300":"text-gray-600"}`,children:"Please log in to seed products into the database."})]})})},WO=R.lazy(()=>ae(()=>import("./UserDashboard-BmDoaweF.js"),[])),GO=R.lazy(()=>ae(()=>import("./ManagerDashboard-AIQli8c1.js"),[])),Uv=R.lazy(()=>ae(()=>import("./AdminDashboard-CCEe1jzP.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),Fv=R.lazy(()=>ae(()=>import("./BusinessDashboard-DSe2TlRy.js"),[])),QO=R.lazy(()=>ae(()=>import("./GuestDashboard-CkdAbkt3.js"),[])),KO=R.lazy(()=>ae(()=>import("./Home-B-0eXC7L.js"),[])),Al=R.lazy(()=>ae(()=>import("./Inventory-CkVBBGuP.js"),__vite__mapDeps([16,17,18,19]))),zv=R.lazy(()=>ae(()=>import("./AddProduct-Dyb2_cki.js"),__vite__mapDeps([20,17,19]))),YO=R.lazy(()=>ae(()=>import("./ProductDetail-CZzYcZF0.js"),__vite__mapDeps([21,18,19]))),XO=R.lazy(()=>ae(()=>import("./ProductDetails-BiTm5x0c.js"),__vite__mapDeps([22,2,23,15,3,24,10,8,13]))),Zd=R.lazy(()=>ae(()=>import("./ProductCatalog-BPxgAYba.js"),[]));R.lazy(()=>ae(()=>Promise.resolve().then(()=>TD),void 0));const JO=R.lazy(()=>ae(()=>import("./CreateOrder-BRJZjTZK.js"),__vite__mapDeps([25,26]))),ZO=R.lazy(()=>ae(()=>import("./OrderDetails-BfMgE1fl.js"),__vite__mapDeps([27,26,28]))),eD=R.lazy(()=>ae(()=>import("./InvoicePage-C0Rh_CJ-.js"),__vite__mapDeps([29,26,28]))),tD=R.lazy(()=>ae(()=>import("./Cart-BfETqEbw.js"),__vite__mapDeps([30,3,2,5,31,32,33,10,24]))),nD=R.lazy(()=>ae(()=>import("./Checkout-DKHKjh6m.js"),__vite__mapDeps([34,26,5,2,35,24,33,32,10]))),eh=R.lazy(()=>ae(()=>import("./FeedbackPage-BYpHxImY.js"),__vite__mapDeps([36,11,2,37,15]))),rD=R.lazy(()=>ae(()=>import("./SupportCenter-DuRORjqj.js"),__vite__mapDeps([38,39]))),sD=R.lazy(()=>ae(()=>import("./OrderProcessing-Dxu_XDvU.js"),__vite__mapDeps([40,39]))),iD=R.lazy(()=>ae(()=>import("./AboutUs-BUZph0bI.js"),__vite__mapDeps([41,39]))),oD=R.lazy(()=>ae(()=>import("./Documentation-BTBDQHOD.js"),[])),aD=R.lazy(()=>ae(()=>import("./PrivacyPolicy-BAi3J7O5.js"),__vite__mapDeps([42,39]))),lD=R.lazy(()=>ae(()=>import("./HelpCenter-E8nIjwVN.js"),__vite__mapDeps([43,39]))),cD=R.lazy(()=>ae(()=>import("./ContactSupport-BoYa5l-t.js"),__vite__mapDeps([44,39]))),uD=R.lazy(()=>ae(()=>import("./MyProfile-CydNg44J.js"),__vite__mapDeps([45,19]))),dD=R.lazy(()=>ae(()=>import("./UserSettings-CK7Ch1tR.js"),[])),kl=R.lazy(()=>ae(()=>import("./UserApprovalDashboard-f7KMDZ45.js"),[])),hD=R.lazy(()=>ae(()=>import("./AdminPanel-Co3wwvHu.js"),[])),fD=R.lazy(()=>ae(()=>import("./UserPanel-D3sVkHPu.js"),[])),mD=R.lazy(()=>ae(()=>import("./AdminSettings-B2zWt08h.js"),[])),pD=R.lazy(()=>ae(()=>import("./AdminAnalytics-DdlgJJGn.js"),[])),gD=R.lazy(()=>ae(()=>import("./AdminSecurity-BM49vCc0.js"),[])),yD=R.lazy(()=>ae(()=>import("./AdminReports-DJCibDez.js"),__vite__mapDeps([46,1,2,3,8,4,6,14]))),vD=R.lazy(()=>ae(()=>import("./AdminFeedback-B6v0XOmM.js"),__vite__mapDeps([47,8,2,14,11,9,37,15,7,6,48,35,49,32,31]))),xD=R.lazy(()=>ae(()=>import("./AdminSupportTickets-BRmb1et8.js"),__vite__mapDeps([50,8,2,14,7,6,9,37,49,12,48,35,32,23]))),_D=R.lazy(()=>ae(()=>import("./DealManagement-BNwV8Qbn.js"),[])),th=R.lazy(()=>ae(()=>import("./UserSpecificOrders-CLapvxlq.js"),__vite__mapDeps([51,8,2,14,5,9,4,48,13,23,31,35]))),wD=({onComplete:t})=>{const[e,n]=R.useState(0),[r,s]=R.useState(""),[i,o]=R.useState(0),l=["INITIALIZING WHOLESALER SYSTEM...","LOADING COMPONENTS...","CONNECTING TO SERVERS...","SYSTEM READY"],u=()=>{t()};return R.useEffect(()=>{if(i<l.length){const d=l[i],h="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";let m=0;const g=setInterval(()=>{s(d.split("").map((x,N)=>N<m?d[N]:h[Math.floor(Math.random()*h.length)]).join("")),m>=d.length&&clearInterval(g),m+=1/3},30);return()=>clearInterval(g)}},[i]),R.useEffect(()=>{const d=setInterval(()=>{n(h=>{const m=h+2;if(m>=100)return clearInterval(d),setTimeout(t,500),100;const g=Math.floor(m/25);return g!==i&&g<l.length&&o(g),m})},80);return()=>clearInterval(d)},[i,t]),a.jsxs("div",{className:"fixed inset-0 bg-black flex items-center justify-center z-50 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-20",children:a.jsx("div",{className:"grid-pattern"})}),a.jsx("button",{onClick:u,className:"absolute top-6 right-6 text-gray-400 hover:text-cyan-400 transition-colors duration-300 z-20 group",children:a.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-600 hover:border-cyan-400 rounded-lg backdrop-blur-sm",children:[a.jsx("span",{className:"text-sm font-mono",children:"SKIP"}),a.jsx("svg",{className:"w-4 h-4 transform group-hover:translate-x-1 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})}),a.jsxs("div",{className:"text-center space-y-8 relative z-10 max-w-2xl px-8",children:[a.jsxs("div",{className:"mb-12",children:[a.jsx("div",{className:"text-6xl md:text-8xl font-bold bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 bg-clip-text text-transparent mb-4 animate-pulse",children:"WHOLESALER"}),a.jsx("div",{className:"text-sm text-gray-400 font-mono",children:"LOADING PLATFORM..."})]}),a.jsx("div",{className:"h-12 flex items-center justify-center",children:a.jsxs("div",{className:"text-cyan-400 font-mono text-lg",children:[r,a.jsx("span",{className:"animate-pulse",children:"_"})]})}),a.jsxs("div",{className:"w-full max-w-md mx-auto",children:[a.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-3",children:[a.jsx("span",{className:"font-mono",children:"LOADING"}),a.jsxs("span",{className:"font-mono",children:[e.toFixed(0),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-800 h-2 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 transition-all duration-300 rounded-full",style:{width:`${e}%`}})})]}),a.jsxs("div",{className:"flex justify-center space-x-6 text-xs",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-gray-400 font-mono",children:"SECURE"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-gray-400 font-mono",children:"ONLINE"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-gray-400 font-mono",children:"READY"})]})]})]}),a.jsx("style",{jsx:!0,children:`
        .grid-pattern {
          background-image: 
            linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
          background-size: 20px 20px;
          width: 100%;
          height: 100%;
          animation: gridMove 10s linear infinite;
        }

        @keyframes gridMove {
          0% { transform: translate(0, 0); }
          100% { transform: translate(20px, 20px); }
        }
      `})]})},ED=()=>a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]});function bD(){const[t,e]=R.useState(!0),n=()=>{e(!1)};return t?a.jsx(wD,{onComplete:n}):a.jsx(RO,{children:a.jsx(AO,{children:a.jsx(kO,{children:a.jsx(HS,{children:a.jsx(R.Suspense,{fallback:a.jsx(ED,{}),children:a.jsxs(yl,{children:[a.jsx(Y,{path:"/seed-products",element:a.jsx(ke,{allowedRoles:["admin"],children:a.jsx(fe,{children:a.jsx(HO,{})})})}),a.jsx(Y,{path:"/login",element:a.jsx($O,{})}),a.jsx(Y,{path:"/register",element:a.jsx(UO,{})}),a.jsx(Y,{path:"/",element:a.jsx(fe,{children:a.jsx(KO,{})})}),a.jsx(Y,{path:"/guest-dashboard",element:a.jsx(fe,{children:a.jsx(QO,{})})}),a.jsx(Y,{path:"/qr-tools",element:a.jsx(ke,{children:a.jsx(fe,{children:a.jsx(qO,{})})})}),a.jsx(Y,{path:"/catalog",element:a.jsx(fe,{children:a.jsx(Zd,{})})}),a.jsx(Y,{path:"/products",element:a.jsx(fe,{children:a.jsx(Zd,{})})}),a.jsx(Y,{path:"/products/:id",element:a.jsx(fe,{children:a.jsx(XO,{})})}),a.jsx(Y,{path:"/browse",element:a.jsx(fe,{children:a.jsx(Zd,{})})}),a.jsx(Y,{path:"/profile",element:a.jsx(ke,{children:a.jsx(fe,{children:a.jsx(uD,{})})})}),a.jsx(Y,{path:"/settings",element:a.jsx(ke,{children:a.jsx(fe,{children:a.jsx(dD,{})})})}),a.jsx(Y,{path:"/help-center",element:a.jsx(fe,{children:a.jsx(lD,{})})}),a.jsx(Y,{path:"/contact-support",element:a.jsx(fe,{children:a.jsx(cD,{})})}),a.jsx(Y,{path:"/cart",element:a.jsx(Yd,{type:"cart",children:a.jsx(fe,{children:a.jsx(tD,{})})})}),a.jsx(Y,{path:"/checkout",element:a.jsx(Yd,{type:"checkout",children:a.jsx(fe,{children:a.jsx(nD,{})})})}),a.jsx(Y,{path:"/feedback",element:a.jsx(ke,{children:a.jsx(fe,{children:a.jsx(eh,{})})})}),a.jsx(Y,{path:"/admin-dashboard",element:a.jsx(ke,{requiredRole:"admin",children:a.jsx(fe,{children:a.jsx(Uv,{})})})}),a.jsx(Y,{path:"/business-dashboard",element:a.jsx(ke,{requiredRole:"business",children:a.jsx(fe,{children:a.jsx(Fv,{})})})}),a.jsx(Y,{path:"/manager-dashboard",element:a.jsx(ke,{requiredRole:"manager",children:a.jsx(fe,{children:a.jsx(GO,{})})})}),a.jsx(Y,{path:"/user-dashboard",element:a.jsx(ke,{requiredRole:"user",children:a.jsx(fe,{children:a.jsx(WO,{})})})}),a.jsx(Y,{path:"/admin/*",element:a.jsx(ke,{requiredRole:"admin",children:a.jsx(fe,{children:a.jsxs(yl,{children:[a.jsx(Y,{index:!0,element:a.jsx(Uv,{})}),a.jsx(Y,{path:"panel",element:a.jsx(hD,{})}),a.jsx(Y,{path:"users",element:a.jsx(fD,{})}),a.jsx(Y,{path:"approvals",element:a.jsx(kl,{})}),a.jsx(Y,{path:"pending-approvals",element:a.jsx(kl,{})}),a.jsx(Y,{path:"settings",element:a.jsx(mD,{})}),a.jsx(Y,{path:"analytics",element:a.jsx(pD,{})}),a.jsx(Y,{path:"security",element:a.jsx(gD,{})}),a.jsx(Y,{path:"reports",element:a.jsx(yD,{})}),a.jsx(Y,{path:"deals",element:a.jsx(_D,{})}),a.jsx(Y,{path:"feedback",element:a.jsx(vD,{})}),a.jsx(Y,{path:"support",element:a.jsx(xD,{})}),a.jsx(Y,{path:"*",element:a.jsx(ni,{to:"/admin",replace:!0})})]})})})}),a.jsx(Y,{path:"/user-management",element:a.jsx(ke,{allowedRoles:["admin","manager"],requiredPermission:"canApproveUsers",children:a.jsx(fe,{children:a.jsx(kl,{})})})}),a.jsx(Y,{path:"/inventory",element:a.jsx(ke,{children:a.jsx(fe,{children:a.jsx(Al,{})})})}),a.jsx(Y,{path:"/inventory/:id",element:a.jsx(ke,{children:a.jsx(fe,{children:a.jsx(YO,{})})})}),a.jsx(Y,{path:"/add-product",element:a.jsx(ke,{children:a.jsx(fe,{children:a.jsx(zv,{})})})}),a.jsx(Y,{path:"/orders",element:a.jsx(ke,{children:a.jsx(fe,{children:a.jsx(th,{})})})}),a.jsx(Y,{path:"/about-us",element:a.jsx(fe,{children:a.jsx(iD,{})})}),a.jsx(Y,{path:"/documentation",element:a.jsx(fe,{children:a.jsx(oD,{})})}),a.jsx(Y,{path:"/privacy-policy",element:a.jsx(fe,{children:a.jsx(aD,{})})}),a.jsx(Y,{path:"/support-center",element:a.jsx(fe,{children:a.jsx(rD,{})})}),a.jsx(Y,{path:"/order-processing",element:a.jsx(fe,{children:a.jsx(sD,{})})}),a.jsx(Y,{path:"/orders/:id",element:a.jsx(ke,{children:a.jsx(fe,{children:a.jsx(ZO,{})})})}),a.jsx(Y,{path:"/generate-invoice/:id",element:a.jsx(ke,{children:a.jsx(fe,{children:a.jsx(eD,{})})})}),a.jsx(Y,{path:"/create-order",element:a.jsx(Yd,{type:"orders",children:a.jsx(ke,{children:a.jsx(fe,{children:a.jsx(JO,{})})})})}),a.jsx(Y,{path:"/manager/*",element:a.jsx(ke,{allowedRoles:["admin","manager"],children:a.jsx(fe,{children:a.jsxs(yl,{children:[a.jsx(Y,{index:!0,element:a.jsxs("div",{className:"p-8",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Manager Panel"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Comprehensive management tools and analytics for operations oversight."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsx(ce,{to:"/manager/users",className:"block p-6 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:"👥"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"User Management"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage users and approvals"})]})]})}),a.jsx(ce,{to:"/manager/inventory",className:"block p-6 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:"📦"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Inventory Control"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage products and stock"})]})]})}),a.jsx(ce,{to:"/add-product",className:"block p-6 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:"➕"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add Product"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"List new products"})]})]})}),a.jsx(ce,{to:"/manager/orders",className:"block p-6 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:"📋"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Order Management"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"View and process all orders"})]})]})}),a.jsx(ce,{to:"/manager/analytics",className:"block p-6 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:"📊"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Analytics"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Performance metrics"})]})]})}),a.jsx(ce,{to:"/manager/reports",className:"block p-6 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:"📈"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Reports"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Generate detailed reports"})]})]})}),a.jsx(ce,{to:"/manager/settings",className:"block p-6 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:"⚙"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Settings"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"System configuration"})]})]})}),a.jsx(ce,{to:"/manager/feedback",className:"block p-6 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:"💬"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Feedback Management"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Review customer feedback"})]})]})})]})]})}),a.jsx(Y,{path:"users",element:a.jsx(kl,{})}),a.jsx(Y,{path:"inventory",element:a.jsx(Al,{})}),a.jsx(Y,{path:"orders",element:a.jsx(th,{})}),a.jsx(Y,{path:"feedback",element:a.jsx(eh,{})}),a.jsx(Y,{path:"analytics",element:a.jsxs("div",{className:"p-8",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Manager Analytics"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Comprehensive analytics and performance metrics."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Team Performance"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Monitor team productivity and efficiency"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"System Health"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Platform performance metrics"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Revenue Trends"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Financial performance analysis"})]})]})]})}),a.jsx(Y,{path:"reports",element:a.jsxs("div",{className:"p-8",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Manager Reports"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Generate and download detailed reports."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Monthly Summary Report"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Comprehensive monthly business overview"}),a.jsx("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Generate Report"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Inventory Report"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Stock levels and inventory analysis"}),a.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Generate Report"})]})]})]})}),a.jsx(Y,{path:"settings",element:a.jsxs("div",{className:"p-8",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Manager Settings"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"System configuration and preferences."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"System Configuration"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure system-wide settings"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"User Permissions"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage user roles and permissions"})]})]})]})}),a.jsx(Y,{path:"*",element:a.jsx(ni,{to:"/manager",replace:!0})})]})})})}),a.jsx(Y,{path:"/business/*",element:a.jsx(ke,{requiredRole:"business",children:a.jsx(fe,{children:a.jsxs(yl,{children:[a.jsx(Y,{index:!0,element:a.jsx(Fv,{})}),a.jsx(Y,{path:"products",element:a.jsx(ke,{children:a.jsx(Al,{})})}),a.jsx(Y,{path:"add-product",element:a.jsx(ke,{children:a.jsx(zv,{})})}),a.jsx(Y,{path:"inventory",element:a.jsx(ke,{children:a.jsx(Al,{})})}),a.jsx(Y,{path:"orders",element:a.jsx(th,{})}),a.jsx(Y,{path:"feedback",element:a.jsx(eh,{})}),a.jsx(Y,{path:"analytics",element:a.jsxs("div",{className:"p-8",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Business Analytics"}),a.jsx("p",{children:"Detailed analytics and performance metrics would go here."}),a.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Sales Overview"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Monthly sales performance"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Customer Insights"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Customer behavior analysis"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Product Performance"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Top selling products"})]})]})]})}),a.jsx(Y,{path:"settings",element:a.jsxs("div",{className:"p-8",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Business Settings"}),a.jsx("p",{children:"Business account settings and preferences would go here."}),a.jsxs("div",{className:"mt-6 space-y-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Account Information"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Update your business details"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Payment Settings"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage payment methods and billing"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Notifications"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure notification preferences"})]})]})]})}),a.jsx(Y,{path:"help",element:a.jsxs("div",{className:"p-8",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Help & Support"}),a.jsx("p",{children:"Business support resources and documentation."}),a.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"📚 Getting Started Guide"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Learn how to use the platform effectively"}),a.jsx("button",{className:"text-indigo-600 hover:text-indigo-800 font-medium",children:"Read Guide →"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"💬 Contact Support"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Get help from our support team"}),a.jsx("button",{className:"text-indigo-600 hover:text-indigo-800 font-medium",children:"Contact Us →"})]})]})]})}),a.jsx(Y,{path:"*",element:a.jsx(ni,{to:"/business",replace:!0})})]})})})}),a.jsx(Y,{path:"*",element:a.jsx(ni,{to:"/",replace:!0})})]})})})})})})}nh.createRoot(document.getElementById("root")).render(a.jsx(uT.StrictMode,{children:a.jsx(bD,{})}));const TD=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{uT as $,f1 as A,DO as B,OO as C,jO as D,h1 as E,PO as F,Lp as G,CO as H,FD as I,UD as J,ND as K,ce as L,Av as M,d1 as N,Mt as O,Ut as P,OD as Q,eE as R,If as S,ga as T,SD as U,VD as V,$D as W,LD as X,MD as Y,bf as Z,PD as _,ir as a,Qe as a0,kD as a1,jD as a2,Q1 as a3,ID as a4,u4 as b,ec as c,Mr as d,Vo as e,DD as f,Hd as g,rr as h,cs as i,a as j,qd as k,Nl as l,d4 as m,CD as n,$2 as o,zD as p,Il as q,R as r,kv as s,LO as t,Rt as u,p1 as v,AD as w,ki as x,pa as y,m1 as z};
