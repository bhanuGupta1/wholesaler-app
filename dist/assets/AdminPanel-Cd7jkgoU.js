import{u as T,a as C,j as e,L as $,d as g}from"./index-DvFbKyhG.js";import{r as x}from"./vendor-DJ1oPbzn.js";import{g as m,c as u,q as L,b as P,l as U}from"./firebase-DMhjYMbV.js";const R=({tool:t,darkMode:l})=>e.jsxs($,{to:t.href,className:`block p-6 rounded-lg border transition-all duration-200 hover:shadow-lg ${l?"bg-gray-800 border-gray-700 hover:bg-gray-700 hover:border-gray-600":"bg-white border-gray-200 hover:bg-gray-50 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:`text-3xl mr-4 p-2 rounded ${l?"bg-gray-700":"bg-gray-100"}`,children:t.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`text-lg font-semibold ${l?"text-white":"text-gray-900"}`,children:t.title}),t.metrics&&e.jsx("div",{className:"flex space-x-4 mt-1",children:t.metrics.map((a,o)=>e.jsxs("span",{className:`text-sm ${l?"text-gray-400":"text-gray-600"}`,children:[a.label,": ",e.jsx("span",{className:"font-medium",children:a.value})]},o))})]})]}),e.jsx("p",{className:`text-sm ${l?"text-gray-400":"text-gray-600"} mb-4`,children:t.description}),e.jsxs("div",{className:`text-sm font-medium ${l?"text-blue-400":"text-blue-600"} flex items-center`,children:["Access Module",e.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),O=({darkMode:t})=>{const[l,a]=x.useState([]),[o,y]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const i=await m(L(u(g,"users"),P("updatedAt","desc"),U(10))),p=[];i.docs.forEach(h=>{var d,j;const r=h.data();if((((d=r.updatedAt)==null?void 0:d.toDate())||((j=r.createdAt)==null?void 0:j.toDate()))&&(r.createdAt&&p.push({type:"user",message:`New user registered: ${r.email}`,time:r.createdAt.toDate(),severity:"info"}),r.status&&r.updatedAt)){let N=`User ${r.status}: ${r.email}`,b="info";r.status==="suspended"?b="warning":r.status==="rejected"?b="error":r.status==="active"&&r.approved&&(N=`User approved: ${r.email}`,b="success"),p.push({type:"user",message:N,time:r.updatedAt.toDate(),severity:b})}}),p.sort((h,r)=>r.time-h.time),a(p.slice(0,8))}catch(i){console.error("Error fetching activities:",i)}finally{y(!1)}})()},[]);const v=s=>({user:"ðŸ‘¤",order:"ðŸ“¦",system:"âš™ï¸",security:"ðŸ”’"})[s]||"ðŸ“¡",n=s=>{const i={success:t?"text-green-400":"text-green-600",warning:t?"text-yellow-400":"text-yellow-600",error:t?"text-red-400":"text-red-600",info:t?"text-blue-400":"text-blue-600"};return i[s]||i.info},f=s=>s.toLocaleString();return o?e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx("div",{className:`text-center ${t?"text-gray-400":"text-gray-600"}`,children:"Loading activities..."})}):e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:l.length>0?l.map((s,i)=>e.jsx("div",{className:`p-3 rounded border ${t?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-lg",children:v(s.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm ${t?"text-gray-200":"text-gray-900"}`,children:s.message}),e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"} mt-1`,children:f(s.time)})]}),e.jsx("div",{className:`text-xs font-medium ${n(s.severity)}`,children:s.severity.toUpperCase()})]})},i)):e.jsxs("div",{className:`text-center py-8 ${t?"text-gray-400":"text-gray-600"}`,children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ“‹"}),e.jsx("div",{children:"No recent activities found"})]})})},E=({darkMode:t,onRefresh:l})=>{const[a,o]=x.useState(!1),y=async n=>{o(!0);try{switch(n){case"refresh":await l();break;case"backup":console.log("Backup initiated...");break;case"cleanup":console.log("Cleanup initiated...");break;default:console.log(`Action: ${n}`)}}catch(f){console.error("Error performing action:",f)}finally{o(!1)}},v=[{id:"refresh",label:"Refresh Data",icon:"ðŸ”„",description:"Reload all dashboard data"},{id:"backup",label:"System Backup",icon:"ðŸ’¾",description:"Create system backup"},{id:"cleanup",label:"Clean Test Data",icon:"ðŸ§¹",description:"Remove test accounts"}];return e.jsxs("div",{className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${t?"text-white":"text-gray-900"}`,children:"Quick Actions"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:v.map(n=>e.jsx("button",{onClick:()=>y(n.id),disabled:a,className:`p-3 rounded border text-left transition-all ${a?t?"bg-gray-700 border-gray-600 cursor-not-allowed opacity-50":"bg-gray-100 border-gray-200 cursor-not-allowed opacity-50":t?"bg-gray-700 border-gray-600 hover:bg-gray-600":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-xl",children:n.icon}),e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${t?"text-white":"text-gray-900"}`,children:n.label}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:n.description})]})]})},n.id))})]})},F=()=>{const{darkMode:t}=T(),{user:l}=C(),[a,o]=x.useState({totalUsers:0,pendingApprovals:0,businessAccounts:0,totalProducts:0,totalOrders:0,activeUsers:0,totalDeals:0,activeDials:0,feedbackCount:0,supportTickets:0}),[y,v]=x.useState(!0),n=async()=>{try{const[s,i,p,h,r,A]=await Promise.all([m(u(g,"users")),m(u(g,"products")),m(u(g,"orders")),m(u(g,"deals")).catch(()=>({size:0})),m(u(g,"feedback")).catch(()=>({size:0})),m(u(g,"support_tickets")).catch(()=>({size:0}))]),d=s.docs.map(c=>({id:c.id,...c.data()})),j=d.length,N=d.filter(c=>c.status==="pending_approval"||c.status==="pending").length,b=d.filter(c=>c.accountType==="business").length,S=d.filter(c=>c.status==="active"&&c.approved).length,w=h.docs?h.docs.map(c=>({id:c.id,...c.data()})):[],k=w.length,D=w.filter(c=>c.status==="active").length;o({totalUsers:j,pendingApprovals:N,businessAccounts:b,totalProducts:i.size,totalOrders:p.size,activeUsers:S,totalDeals:k,activeDeals:D,feedbackCount:r.size,supportTickets:A.size})}catch(s){console.error("Error fetching stats:",s)}finally{v(!1)}};x.useEffect(()=>{n()},[]);const f=[{title:"Dashboard",description:"Overview & Analytics dashboard with key metrics",href:"/admin/dashboard",icon:"ðŸ“Š",metrics:[{label:"Status",value:"Live"},{label:"Data",value:"Real-time"}]},{title:"User Management",description:"Manage user accounts, approvals, and permissions",href:"/admin/users",icon:"ðŸ‘¥",metrics:[{label:"Total",value:a.totalUsers},{label:"Active",value:a.activeUsers}]},{title:"Pending Approvals",description:"Review and process pending user applications",href:"/admin/approvals",icon:"â³",metrics:[{label:"Pending",value:a.pendingApprovals},{label:"Business",value:a.businessAccounts}]},{title:"Deal Management",description:"Manage deals & offers across the platform",href:"/admin/deals",icon:"ðŸ’¼",metrics:[{label:"Total",value:a.totalDeals},{label:"Active",value:a.activeDeals}]},{title:"Analytics",description:"View system analytics and performance metrics",href:"/admin/analytics",icon:"ðŸ“ˆ",metrics:[{label:"Reports",value:"Live"},{label:"Data",value:"Current"}]},{title:"Reports",description:"Generate detailed reports and export data",href:"/admin/reports",icon:"ðŸ“‹",metrics:[{label:"Generated",value:"Daily"},{label:"Format",value:"PDF/CSV"}]},{title:"Security Center",description:"Monitor security and manage access controls",href:"/admin/security",icon:"ðŸ”’",metrics:[{label:"Threats",value:"0"},{label:"Status",value:"Secure"}]},{title:"System Settings",description:"Configure system-wide settings and preferences",href:"/admin/settings",icon:"âš™ï¸",metrics:[{label:"Config",value:"OK"},{label:"Status",value:"Active"}]},{title:"User Feedback",description:"User feedback & support management system",href:"/admin/feedback",icon:"ðŸ’¬",metrics:[{label:"Total",value:a.feedbackCount},{label:"Pending",value:"Review"}]},{title:"Support Tickets",description:"Manage user support requests and tickets",href:"/admin/support",icon:"ðŸŽ§",metrics:[{label:"Open",value:a.supportTickets},{label:"Response",value:"24h"}]},{title:"Inventory Management",description:"Manage products and inventory across the platform",href:"/inventory",icon:"ðŸ“¦",metrics:[{label:"Products",value:a.totalProducts},{label:"Orders",value:a.totalOrders}]},{title:"Home Portal",description:"Return to main application homepage",href:"/",icon:"ðŸ ",metrics:[{label:"Status",value:"Online"},{label:"Users",value:a.activeUsers}]}];return y?e.jsx("div",{className:`min-h-screen flex items-center justify-center ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-blue-500 border-r-transparent"}),e.jsx("p",{className:`mt-4 ${t?"text-gray-400":"text-gray-600"}`,children:"Loading Legacy Panel..."})]})}):e.jsx("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:`container mx-auto px-4 py-8 max-w-7xl ${t?"text-gray-200":"text-gray-800"}`,children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Legacy Admin Panel"}),e.jsxs("p",{className:`mt-1 text-sm ${t?"text-gray-400":"text-gray-500"}`,children:["Classic administrative interface for ",(l==null?void 0:l.displayName)||"Administrator"]})]}),e.jsx($,{to:"/admin",className:`px-4 py-2 rounded-lg text-sm transition-all border ${t?"bg-gray-800 hover:bg-gray-700 text-blue-400 border-blue-500/50":"bg-white hover:bg-gray-50 text-blue-600 border-blue-500/50"}`,children:"â† Back to Modern Admin"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[{title:"Total Users",value:a.totalUsers,icon:"ðŸ‘¤",color:"blue"},{title:"Pending Approvals",value:a.pendingApprovals,icon:"â³",color:"yellow"},{title:"Business Accounts",value:a.businessAccounts,icon:"ðŸ¢",color:"green"},{title:"Support Tickets",value:a.supportTickets,icon:"ðŸŽ§",color:"purple"}].map((s,i)=>e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow border p-6`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-3xl mr-4",children:s.icon}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"} uppercase tracking-wide`,children:s.title}),e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:s.value})]})]})},i))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("h2",{className:`text-xl font-semibold mb-6 ${t?"text-white":"text-gray-900"}`,children:"Administrative Tools"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:f.map((s,i)=>e.jsx(R,{tool:s,darkMode:t},i))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(E,{darkMode:t,onRefresh:n}),e.jsxs("div",{className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-white":"text-gray-900"}`,children:"Recent Activity"}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})]}),e.jsx(O,{darkMode:t})]}),e.jsxs("div",{className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${t?"text-white":"text-gray-900"}`,children:"System Status"}),e.jsx("div",{className:"space-y-3",children:[{label:"Database",status:"Operational",color:"green"},{label:"Authentication",status:"Active",color:"green"},{label:"File Storage",status:"Available",color:"green"},{label:"Security",status:"Protected",color:"green"}].map((s,i)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-sm ${t?"text-gray-300":"text-gray-700"}`,children:s.label}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${s.color==="green"?t?"bg-green-900/30 text-green-400":"bg-green-100 text-green-800":t?"bg-red-900/30 text-red-400":"bg-red-100 text-red-800"}`,children:s.status})]},i))})]})]})]})]})})};export{F as default};
