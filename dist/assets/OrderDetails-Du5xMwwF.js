import{K as f,r as n,j as e,L as i}from"./index-C076F-ZT.js";import{g as j}from"./orderService-DFv2FfRm.js";import{f as l}from"./format-CBpsKyOP.js";const b=()=>{const{id:a}=f(),[t,m]=n.useState(null),[d,h]=n.useState([]),[u,c]=n.useState(!0),[o,x]=n.useState(null);if(n.useEffect(()=>{a&&(async()=>{try{c(!0),x(null);const r=await j(a);console.log("Fetched order:",r),m(r),h(r.items||[])}catch(r){console.error("Error fetching order details:",r),x(r.message)}finally{c(!1)}})()},[a]),u)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})});if(o)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4 text-red-800",children:"Error Loading Order"}),e.jsx("p",{className:"text-red-600 mb-4",children:o}),e.jsx(i,{to:"/orders",className:"text-indigo-600 hover:text-indigo-900",children:"← Back to Orders"})]})});if(!t)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Order not found"}),e.jsx(i,{to:"/orders",className:"text-indigo-600 hover:text-indigo-900",children:"← Back to Orders"})]})});const p=s=>{if(!s)return"-";try{return s.toDate&&typeof s.toDate=="function"?l(s.toDate(),"dd MMM yyyy, hh:mm a"):s instanceof Date?l(s,"dd MMM yyyy, hh:mm a"):typeof s=="string"?l(new Date(s),"dd MMM yyyy, hh:mm a"):"-"}catch(r){return console.error("Error formatting date:",r),"-"}};return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:t.orderId||`Order #${a.substring(0,5)}`}),e.jsx(i,{to:"/orders",className:"text-indigo-600 hover:text-indigo-900",children:"← Back to Orders"})]})}),e.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"Order Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Status:"}),e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.status==="completed"?"bg-green-100 text-green-800":t.status==="processing"?"bg-blue-100 text-blue-800":t.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:t.status||"pending"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Date:"}),e.jsx("span",{children:p(t.dateCreated||t.createdAt)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Total:"}),e.jsxs("span",{className:"font-medium",children:["$",(t.totalAmount||t.total||0).toFixed(2)]})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"Customer Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Name:"}),e.jsx("span",{children:t.customerName||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Email:"}),e.jsx("span",{children:t.customerEmail||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Phone:"}),e.jsx("span",{children:t.customerPhone||"-"})]})]})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"Order Items"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length>0?d.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.productName||"Unknown Product"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-500",children:["$",(s.price||0).toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500",children:s.quantity||0})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:["$",((s.price||0)*(s.quantity||0)).toFixed(2)]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No items found for this order"})})})]})}),d.length>0&&e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-medium",children:"Total Amount:"}),e.jsxs("span",{className:"text-lg font-bold",children:["$",(t.totalAmount||t.total||0).toFixed(2)]})]})})})]}),e.jsx("div",{className:"p-6 border-t border-gray-200",children:e.jsx("div",{className:"flex justify-end",children:e.jsx(i,{to:`/generate-invoice/${a}`,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",target:"_blank",children:"Generate Invoice"})})})]})})};export{b as default};
