import{u as V,B as q,e as z,A as D,r as n,c as I,d as U,g as Q,j as e,L as y}from"./index-CFL3WSdy.js";const O=()=>{const{darkMode:t}=V(),{addToCart:u,cart:d}=q(),{user:r}=z();D();const[i,c]=n.useState([]),[b,p]=n.useState(!0),[w,T]=n.useState(null),[x,N]=n.useState(""),[m,$]=n.useState("all"),[h,B]=n.useState("name"),[f,P]=n.useState("asc"),[j,C]=n.useState("grid"),[k,F]=n.useState(!1);n.useEffect(()=>{S()},[]);const S=async()=>{try{p(!0);const s=I(U,"products"),o=(await Q(s)).docs.map(l=>({id:l.id,...l.data()}));c(o),p(!1)}catch(s){console.error("Error fetching products:",s),T("Failed to load products"),p(!1)}},E=n.useMemo(()=>[...new Set(i.map(a=>a.category).filter(Boolean))].sort(),[i]),v=n.useMemo(()=>{let s=i.filter(a=>{const o=a.name.toLowerCase().includes(x.toLowerCase())||(a.description||"").toLowerCase().includes(x.toLowerCase()),l=m==="all"||a.category===m,g=a.stock>0;return o&&l&&g});return s.sort((a,o)=>{let l=a[h],g=o[h];return h==="price"||h==="stock"?(l=Number(l)||0,g=Number(g)||0):(l=String(l||"").toLowerCase(),g=String(g||"").toLowerCase()),l<g?f==="asc"?-1:1:l>g?f==="asc"?1:-1:0}),s},[i,x,m,h,f]),L=(s,a=1)=>{if(a>s.stock){alert(`Only ${s.stock} items available in stock`);return}u(s,a);const o=document.createElement("div");o.className="fixed top-4 right-4 z-50 px-4 py-2 rounded-lg text-white bg-green-500 transform transition-transform duration-300",o.textContent=`Added ${s.name} to cart!`,document.body.appendChild(o),setTimeout(()=>{o.style.transform="translateX(100%)",setTimeout(()=>document.body.removeChild(o),300)},2e3)},A=s=>{const a=d.find(o=>o.id===s);return a?a.quantity:0};return b?e.jsx("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})})})}):w?e.jsx("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:`p-4 rounded-lg border-l-4 ${t?"bg-red-900/30 border-red-800 text-red-400":"bg-red-50 border-red-400 text-red-700"}`,children:[e.jsx("p",{children:w}),e.jsx("button",{onClick:S,className:"mt-2 text-sm underline hover:no-underline",children:"Try again"})]})})}):e.jsx("div",{className:`min-h-screen ${t?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"} mb-2`,children:"Product Catalog"}),e.jsx("p",{className:`${t?"text-gray-300":"text-gray-600"}`,children:"Discover our wide range of wholesale products"})]}),e.jsx("div",{className:"mt-4 lg:mt-0",children:e.jsxs(y,{to:"/cart",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m2.6 8L6 5H3m4 8a2 2 0 100 4 2 2 0 000-4zm10 0a2 2 0 100 4 2 2 0 000-4z"})}),"Cart ",d.length>0&&e.jsx("span",{className:`ml-1 px-2 py-1 text-xs rounded-full ${t?"bg-indigo-800 text-indigo-200":"bg-indigo-800 text-white"}`,children:d.reduce((s,a)=>s+a.quantity,0)})]})})]}),e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-md p-6 mb-6 border`,children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Search products...",value:x,onChange:s=>N(s.target.value),className:`block w-full pl-10 pr-3 py-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${t?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300"}`})]}),e.jsx("div",{className:"lg:hidden mb-4",children:e.jsxs("button",{onClick:()=>F(!k),className:`w-full flex items-center justify-center px-4 py-2 border rounded-lg ${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filters & Sorting"]})}),e.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 ${k?"block":"hidden lg:grid"}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Category"}),e.jsxs("select",{value:m,onChange:s=>$(s.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[e.jsx("option",{value:"all",children:"All Categories"}),E.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Sort By"}),e.jsxs("select",{value:h,onChange:s=>B(s.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"price",children:"Price"}),e.jsx("option",{value:"category",children:"Category"}),e.jsx("option",{value:"stock",children:"Stock"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Order"}),e.jsxs("select",{value:f,onChange:s=>P(s.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`,children:[e.jsx("option",{value:"asc",children:"Ascending"}),e.jsx("option",{value:"desc",children:"Descending"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"View"}),e.jsxs("div",{className:"flex rounded-lg border border-gray-300 dark:border-gray-600",children:[e.jsx("button",{onClick:()=>C("grid"),className:`flex-1 px-3 py-2 text-sm font-medium rounded-l-lg ${j==="grid"?"bg-indigo-600 text-white":t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Grid"}),e.jsx("button",{onClick:()=>C("list"),className:`flex-1 px-3 py-2 text-sm font-medium rounded-r-lg ${j==="list"?"bg-indigo-600 text-white":t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"List"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:[v.length," product",v.length!==1?"s":""," found"]})})]})]}),v.length===0?e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl shadow-md p-12 text-center`,children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“¦"}),e.jsx("h3",{className:`text-xl font-medium ${t?"text-gray-200":"text-gray-900"} mb-2`,children:"No products found"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:x||m!=="all"?"Try adjusting your search or filters":"No products available at the moment"}),(x||m!=="all")&&e.jsx("button",{onClick:()=>{N(""),$("all")},className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Clear Filters"})]}):e.jsx("div",{className:j==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:v.map(s=>j==="grid"?e.jsx(W,{product:s,onAddToCart:L,cartQuantity:A(s.id),darkMode:t},s.id):e.jsx(H,{product:s,onAddToCart:L,cartQuantity:A(s.id),darkMode:t},s.id))})]})})},W=({product:t,onAddToCart:u,cartQuantity:d,darkMode:r})=>{const[i,c]=n.useState(1);return e.jsxs("div",{className:`${r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-xl shadow-md hover:shadow-lg transition-shadow overflow-hidden group`,children:[e.jsx(y,{to:`/products/${t.id}`,className:"block",children:e.jsxs("div",{className:"aspect-w-1 aspect-h-1 w-full h-48 bg-gray-100 dark:bg-gray-700 relative overflow-hidden",children:[t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("span",{className:"text-4xl",children:"ðŸ“¦"})}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${t.stock<=5?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":t.stock<=20?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"}`,children:[t.stock," left"]})})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx(y,{to:`/products/${t.id}`,children:e.jsx("h3",{className:`font-semibold ${r?"text-white hover:text-indigo-400":"text-gray-900 hover:text-indigo-600"} mb-1 transition-colors line-clamp-2`,children:t.name})}),t.category&&e.jsx("p",{className:`text-xs ${r?"text-gray-400":"text-gray-500"} mb-2`,children:t.category}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:`text-lg font-bold ${r?"text-white":"text-gray-900"}`,children:["$",Number(t.price).toFixed(2)]}),d>0&&e.jsxs("span",{className:`text-sm px-2 py-1 rounded-full ${r?"bg-indigo-900/30 text-indigo-400":"bg-indigo-100 text-indigo-800"}`,children:[d," in cart"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>c(Math.max(1,i-1)),className:`w-8 h-8 rounded-full ${r?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} flex items-center justify-center text-sm transition-colors`,children:"âˆ’"}),e.jsx("input",{type:"number",min:"1",max:t.stock,value:i,onChange:b=>c(Math.max(1,Math.min(t.stock,parseInt(b.target.value)||1))),className:`flex-1 text-center py-1 px-2 border rounded-lg ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),e.jsx("button",{onClick:()=>c(Math.min(t.stock,i+1)),className:`w-8 h-8 rounded-full ${r?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} flex items-center justify-center text-sm transition-colors`,children:"+"})]}),e.jsx("button",{onClick:()=>u(t,i),className:"w-full py-2 px-4 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",children:"Add to Cart"})]})]})]})},H=({product:t,onAddToCart:u,cartQuantity:d,darkMode:r})=>{const[i,c]=n.useState(1);return e.jsx("div",{className:`${r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow`,children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx(y,{to:`/products/${t.id}`,className:"flex-shrink-0",children:e.jsx("div",{className:"w-20 h-20 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden",children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("span",{className:"text-2xl",children:"ðŸ“¦"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(y,{to:`/products/${t.id}`,children:e.jsx("h3",{className:`font-semibold ${r?"text-white hover:text-indigo-400":"text-gray-900 hover:text-indigo-600"} mb-1 transition-colors`,children:t.name})}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[t.category&&e.jsx("span",{className:`px-2 py-1 rounded text-xs ${r?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:t.category}),e.jsxs("span",{className:`${r?"text-gray-400":"text-gray-500"}`,children:["Stock: ",t.stock]}),d>0&&e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs ${r?"bg-indigo-900/30 text-indigo-400":"bg-indigo-100 text-indigo-800"}`,children:[d," in cart"]})]}),t.description&&e.jsx("p",{className:`mt-2 text-sm ${r?"text-gray-400":"text-gray-600"} line-clamp-2`,children:t.description})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:`text-xl font-bold ${r?"text-white":"text-gray-900"}`,children:["$",Number(t.price).toFixed(2)]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>c(Math.max(1,i-1)),className:`w-8 h-8 rounded-full ${r?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} flex items-center justify-center text-sm transition-colors`,children:"âˆ’"}),e.jsx("input",{type:"number",min:"1",max:t.stock,value:i,onChange:b=>c(Math.max(1,Math.min(t.stock,parseInt(b.target.value)||1))),className:`w-16 text-center py-1 px-2 border rounded-lg ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),e.jsx("button",{onClick:()=>c(Math.min(t.stock,i+1)),className:`w-8 h-8 rounded-full ${r?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} flex items-center justify-center text-sm transition-colors`,children:"+"})]}),e.jsx("button",{onClick:()=>u(t,i),className:"py-2 px-4 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",children:"Add to Cart"})]})]})})};export{O as default};
