import{u as ce,a as ge,j as e,L as xe,d as k}from"./index-Dy66ZVuQ.js";import{r as g}from"./vendor-DJ1oPbzn.js";import{q as me,c as ue,b as pe,g as he,d as F,u as G,s as E}from"./firebase-DMhjYMbV.js";import{R as Q}from"./refresh-cw-CL3pwOUP.js";import{D as ye}from"./download-D2uC-ZLv.js";import{c as W}from"./createLucideIcon-AIsR3Rz6.js";import{T as be,A as Y}from"./triangle-alert-DI7IENlh.js";import{C as je}from"./clock-CoMY2Qow.js";import{C as ve}from"./circle-check-big-DU5H-gtP.js";import{F as fe,C as Z,R as U}from"./reply-VMG9CCLl.js";import{H as Ne}from"./headphones-DjHPBVjL.js";import{m as C}from"./proxy-CFQF2uhZ.js";import{S as we}from"./search-CpZmDFC4.js";import{U as J}from"./user-ColF89V6.js";import{T as K}from"./tag-CR0fMey3.js";import{E as $e}from"./eye-1LxUiV9r.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Ae=W("message-square",Ce);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],B=W("ticket",Se),ze=()=>{var H;const{darkMode:s}=ce(),{user:y}=ge(),[x,A]=g.useState([]),[S,_]=g.useState(!0),[n,R]=g.useState(null),[X,b]=g.useState(!1),[v,I]=g.useState(""),[T,f]=g.useState(!1),[c,N]=g.useState({status:"all",category:"all",priority:"all",dateRange:"30d"}),[m,ee]=g.useState(""),[p,te]=g.useState("createdAt"),[D,se]=g.useState("desc"),O=async()=>{try{_(!0);const t=me(ue(k,"supportTickets"),pe("createdAt","desc")),i=(await he(t)).docs.map(a=>{var l,o;return{id:a.id,...a.data(),createdAt:(l=a.data().createdAt)!=null&&l.toDate?a.data().createdAt.toDate():new Date(a.data().createdAt),updatedAt:(o=a.data().updatedAt)!=null&&o.toDate?a.data().updatedAt.toDate():new Date(a.data().updatedAt)}});A(i)}catch(t){console.error("Error fetching support tickets:",t)}finally{_(!1)}};g.useEffect(()=>{O()},[]);const w=g.useMemo(()=>{let t=x.filter(r=>{var j,M,$,V,z;const i=m.trim()===""||((j=r.subject)==null?void 0:j.toLowerCase().includes(m.toLowerCase()))||((M=r.message)==null?void 0:M.toLowerCase().includes(m.toLowerCase()))||(($=r.userName)==null?void 0:$.toLowerCase().includes(m.toLowerCase()))||((V=r.userEmail)==null?void 0:V.toLowerCase().includes(m.toLowerCase()))||((z=r.ticketId)==null?void 0:z.toLowerCase().includes(m.toLowerCase())),a=c.status==="all"||r.status===c.status,l=c.category==="all"||r.category===c.category,o=c.priority==="all"||r.priority===c.priority,u=new Date,P=r.createdAt;let d=!0;if(c.dateRange!=="all"){const ie=parseInt(c.dateRange.replace("d","")),de=new Date(u.getTime()-ie*24*60*60*1e3);d=P>=de}return i&&a&&l&&o&&d});return t.sort((r,i)=>{let a=r[p],l=i[p];return(p==="createdAt"||p==="updatedAt")&&(a=a instanceof Date?a:new Date(a),l=l instanceof Date?l:new Date(l)),D==="asc"?a>l?1:-1:a<l?1:-1}),t},[x,m,c,p,D]),h=g.useMemo(()=>{const t=x.length,r=x.filter(d=>d.status==="open").length,i=x.filter(d=>d.status==="in_progress").length,a=x.filter(d=>d.status==="resolved").length,l=x.filter(d=>d.status==="closed").length,o=x.filter(d=>d.priority==="high").length,u=x.filter(d=>d.responses&&d.responses.length>0),P=u.length>0?u.reduce((d,j)=>{const $=(j.responses[0].createdAt-j.createdAt)/(1e3*60*60);return d+$},0)/u.length:0;return{total:t,open:r,inProgress:i,resolved:a,closed:l,highPriority:o,avgResponseTime:P.toFixed(1)}},[x]),re=async(t,r)=>{try{f(!0);const i=F(k,"supportTickets",t);await G(i,{status:r,updatedAt:E(),lastUpdatedBy:y.email}),A(a=>a.map(l=>l.id===t?{...l,status:r,updatedAt:new Date,lastUpdatedBy:y.email}:l))}catch(i){console.error("Error updating ticket status:",i)}finally{f(!1)}},ae=async()=>{if(!(!n||!v.trim()))try{f(!0);const t=F(k,"supportTickets",n.id),r={message:v,respondedBy:y.email,respondedAt:E(),type:"admin_response"},a=[...n.responses||[],r];await G(t,{responses:a,status:"in_progress",updatedAt:E(),lastUpdatedBy:y.email}),A(l=>l.map(o=>o.id===n.id?{...o,responses:a,status:"in_progress",updatedAt:new Date,lastUpdatedBy:y.email}:o)),b(!1),I(""),R(null)}catch(t){console.error("Error adding ticket response:",t)}finally{f(!1)}},le=()=>{const r=[["Ticket ID","Date","User","Email","Subject","Category","Priority","Status","Message","Responses"].join(","),...w.map(o=>{var u;return[o.ticketId||o.id,((u=o.createdAt)==null?void 0:u.toLocaleDateString())||"N/A",`"${o.userName||"Unknown"}"`,o.userEmail||"N/A",`"${o.subject||""}"`,o.category||"general",o.priority||"medium",o.status||"open",`"${(o.message||"").replace(/"/g,'""')}"`,`"${(o.responses||[]).length} responses"`].join(",")})].join(`
`),i=new Blob([r],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),l=URL.createObjectURL(i);a.setAttribute("href",l),a.setAttribute("download",`support-tickets-${new Date().toISOString().split("T")[0]}.csv`),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},L=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",q=t=>{switch(t){case"open":return s?"text-red-400 bg-red-900/20":"text-red-600 bg-red-100";case"in_progress":return s?"text-yellow-400 bg-yellow-900/20":"text-yellow-600 bg-yellow-100";case"resolved":return s?"text-green-400 bg-green-900/20":"text-green-600 bg-green-100";case"closed":return s?"text-gray-400 bg-gray-900/20":"text-gray-600 bg-gray-100";default:return s?"text-gray-400 bg-gray-900/20":"text-gray-600 bg-gray-100"}},oe=t=>{switch(t){case"high":return s?"text-red-400":"text-red-600";case"medium":return s?"text-yellow-400":"text-yellow-600";case"low":return s?"text-green-400":"text-green-600";default:return s?"text-gray-400":"text-gray-600"}},ne=t=>{switch(t){case"high":return"🚨";case"medium":return"⚠️";case"low":return"🔵";default:return"⚪"}};return S?e.jsx("div",{className:`min-h-screen ${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:`text-center ${s?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Q,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("div",{children:"Loading support tickets..."})]})})})}):e.jsx("div",{className:`min-h-screen ${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${s?"text-white":"text-gray-900"}`,children:"Support Tickets Management"}),e.jsx("p",{className:`mt-1 text-sm ${s?"text-gray-400":"text-gray-500"}`,children:"Manage and respond to user support requests and tickets"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:le,className:`px-4 py-2 rounded-lg text-sm transition-all border ${s?"bg-gray-800 hover:bg-gray-700 text-gray-300 border-gray-600":"bg-white hover:bg-gray-50 text-gray-700 border-gray-300"}`,children:[e.jsx(ye,{className:"h-4 w-4 mr-2 inline"}),"Export CSV"]}),e.jsxs("button",{onClick:O,disabled:S,className:"px-4 py-2 rounded-lg text-sm transition-all bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(Q,{className:`h-4 w-4 mr-2 inline ${S?"animate-spin":""}`}),"Refresh"]}),e.jsx(xe,{to:"/admin",className:`px-4 py-2 rounded-lg text-sm transition-all border ${s?"bg-gray-800 hover:bg-gray-700 text-blue-400 border-blue-500/50":"bg-white hover:bg-gray-50 text-blue-600 border-blue-500/50"}`,children:"← Back to Admin"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6 mb-8",children:[{title:"Total Tickets",value:h.total,icon:B,color:"blue"},{title:"Open",value:h.open,icon:be,color:"red"},{title:"In Progress",value:h.inProgress,icon:je,color:"yellow"},{title:"Resolved",value:h.resolved,icon:ve,color:"green"},{title:"High Priority",value:h.highPriority,icon:fe,color:"orange"},{title:"Avg Response",value:`${h.avgResponseTime}h`,icon:Ne,color:"purple"}].map((t,r)=>e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.1},className:`p-6 rounded-lg border ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-3 rounded-lg ${t.color==="blue"?"bg-blue-100 text-blue-600":t.color==="red"?"bg-red-100 text-red-600":t.color==="yellow"?"bg-yellow-100 text-yellow-600":t.color==="green"?"bg-green-100 text-green-600":t.color==="orange"?"bg-orange-100 text-orange-600":"bg-purple-100 text-purple-600"}`,children:e.jsx(t.icon,{className:"h-6 w-6"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-500"}`,children:t.title}),e.jsx("p",{className:`text-2xl font-bold ${s?"text-white":"text-gray-900"}`,children:t.value})]})]})},r))}),e.jsxs("div",{className:`p-6 rounded-lg border ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} mb-6`,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 ${s?"text-gray-400":"text-gray-500"}`}),e.jsx("input",{type:"text",placeholder:"Search tickets...",value:m,onChange:t=>ee(t.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg border ${s?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`})]})}),e.jsxs("select",{value:c.status,onChange:t=>N(r=>({...r,status:t.target.value})),className:`px-3 py-2 rounded-lg border ${s?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"closed",children:"Closed"})]}),e.jsxs("select",{value:c.category,onChange:t=>N(r=>({...r,category:t.target.value})),className:`px-3 py-2 rounded-lg border ${s?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"account",children:"Account"}),e.jsx("option",{value:"orders",children:"Orders"}),e.jsx("option",{value:"inventory",children:"Inventory"}),e.jsx("option",{value:"technical",children:"Technical"})]}),e.jsxs("select",{value:c.priority,onChange:t=>N(r=>({...r,priority:t.target.value})),className:`px-3 py-2 rounded-lg border ${s?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"all",children:"All Priority"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]}),e.jsxs("select",{value:c.dateRange,onChange:t=>N(r=>({...r,dateRange:t.target.value})),className:`px-3 py-2 rounded-lg border ${s?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"7d",children:"Last 7 Days"}),e.jsx("option",{value:"30d",children:"Last 30 Days"}),e.jsx("option",{value:"90d",children:"Last 90 Days"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:`text-sm ${s?"text-gray-300":"text-gray-700"}`,children:"Sort by:"}),e.jsxs("select",{value:p,onChange:t=>te(t.target.value),className:`px-3 py-1 rounded border ${s?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"createdAt",children:"Date Created"}),e.jsx("option",{value:"updatedAt",children:"Last Updated"}),e.jsx("option",{value:"priority",children:"Priority"}),e.jsx("option",{value:"status",children:"Status"})]}),e.jsx("button",{onClick:()=>se(t=>t==="asc"?"desc":"asc"),className:`px-2 py-1 rounded ${s?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-700"}`,children:D==="asc"?"↑":"↓"})]})}),e.jsxs("div",{className:`text-sm ${s?"text-gray-400":"text-gray-500"}`,children:["Showing ",w.length," of ",x.length," tickets"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Y,{children:w.map((t,r)=>{var i,a;return e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:r*.05},className:`p-6 rounded-lg border ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} hover:shadow-lg transition-shadow`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:`h-4 w-4 ${s?"text-gray-400":"text-gray-500"}`}),e.jsx("span",{className:`font-mono text-sm ${s?"text-blue-400":"text-blue-600"}`,children:t.ticketId||t.id.substring(0,8)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:`h-4 w-4 ${s?"text-gray-400":"text-gray-500"}`}),e.jsx("span",{className:`font-medium ${s?"text-white":"text-gray-900"}`,children:t.userName||"Unknown User"}),e.jsxs("span",{className:`text-sm ${s?"text-gray-400":"text-gray-500"}`,children:["(",t.userEmail,")"]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${q(t.status)}`,children:((i=t.status)==null?void 0:i.replace("_"," "))||"open"}),e.jsxs("span",{className:`text-sm font-medium ${oe(t.priority)}`,children:[e.jsx("span",{className:"mr-1",children:ne(t.priority)}),t.priority||"medium"," priority"]}),e.jsxs("span",{className:`text-xs ${s?"text-gray-500":"text-gray-400"}`,children:[e.jsx(Z,{className:"h-3 w-3 inline mr-1"}),L(t.createdAt)]})]}),e.jsx("h3",{className:`text-lg font-semibold mb-2 ${s?"text-white":"text-gray-900"}`,children:t.subject}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(K,{className:`h-4 w-4 ${s?"text-gray-400":"text-gray-500"}`}),e.jsx("span",{className:`text-sm ${s?"text-gray-400":"text-gray-500"}`,children:t.category||"general"}),t.responses&&t.responses.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:`h-4 w-4 ml-4 ${s?"text-blue-400":"text-blue-500"}`}),e.jsxs("span",{className:`text-sm ${s?"text-blue-400":"text-blue-500"}`,children:[t.responses.length," response",t.responses.length!==1?"s":""]})]})]}),e.jsx("p",{className:`text-sm mb-4 ${s?"text-gray-300":"text-gray-700"}`,children:((a=t.message)==null?void 0:a.length)>200?`${t.message.substring(0,200)}...`:t.message}),t.responses&&t.responses.length>0&&e.jsxs("div",{className:`p-4 rounded-lg border-l-4 ${s?"bg-blue-900/20 border-blue-400":"bg-blue-50 border-blue-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(U,{className:`h-4 w-4 ${s?"text-blue-400":"text-blue-600"}`}),e.jsxs("span",{className:`text-sm font-medium ${s?"text-blue-400":"text-blue-600"}`,children:["Latest Response by ",t.responses[t.responses.length-1].respondedBy]})]}),e.jsx("p",{className:`text-sm ${s?"text-blue-200":"text-blue-700"}`,children:t.responses[t.responses.length-1].message})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsxs("button",{onClick:()=>{R(t),b(!0)},className:"px-3 py-1 rounded text-xs font-medium transition-colors bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(U,{className:"h-3 w-3 mr-1 inline"}),"Respond"]}),e.jsxs("select",{value:t.status||"open",onChange:l=>re(t.id,l.target.value),disabled:T,className:`px-2 py-1 rounded text-xs border ${s?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"closed",children:"Closed"})]}),e.jsx("button",{onClick:()=>R(t),className:`px-2 py-1 rounded text-xs transition-colors ${s?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:e.jsx($e,{className:"h-3 w-3"})})]})]})},t.id)})}),w.length===0&&e.jsxs("div",{className:`text-center py-12 ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg border`,children:[e.jsx(B,{className:`mx-auto h-12 w-12 mb-4 ${s?"text-gray-600":"text-gray-400"}`}),e.jsx("h3",{className:`text-lg font-medium mb-2 ${s?"text-white":"text-gray-900"}`,children:"No tickets found"}),e.jsx("p",{className:`${s?"text-gray-400":"text-gray-500"}`,children:m||Object.values(c).some(t=>t!=="all")?"Try adjusting your search or filters":"No support tickets have been submitted yet"})]})]}),e.jsx(Y,{children:X&&n&&e.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>b(!1),children:e.jsxs(C.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:t=>t.stopPropagation(),className:`w-full max-w-4xl rounded-lg border ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} p-6 max-h-[80vh] overflow-y-auto`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:`text-xl font-semibold ${s?"text-white":"text-gray-900"}`,children:["Respond to Ticket: ",n.ticketId||n.id.substring(0,8)]}),e.jsx("button",{onClick:()=>b(!1),className:`p-2 rounded-lg transition-colors ${s?"hover:bg-gray-700 text-gray-400":"hover:bg-gray-100 text-gray-500"}`,children:"✕"})]}),e.jsxs("div",{className:`p-4 rounded-lg mb-6 ${s?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(J,{className:`h-4 w-4 ${s?"text-gray-400":"text-gray-500"}`}),e.jsxs("span",{className:`font-medium ${s?"text-white":"text-gray-900"}`,children:[n.userName," (",n.userEmail,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Z,{className:`h-4 w-4 ${s?"text-gray-400":"text-gray-500"}`}),e.jsx("span",{className:`text-sm ${s?"text-gray-300":"text-gray-700"}`,children:L(n.createdAt)})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(K,{className:`h-4 w-4 ${s?"text-gray-400":"text-gray-500"}`}),e.jsxs("span",{className:`text-sm ${s?"text-gray-300":"text-gray-700"}`,children:[n.category," - ",n.priority," priority"]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${q(n.status)}`,children:((H=n.status)==null?void 0:H.replace("_"," "))||"open"})]})]}),e.jsx("h4",{className:`font-medium mb-2 ${s?"text-white":"text-gray-900"}`,children:n.subject}),e.jsx("p",{className:`text-sm ${s?"text-gray-300":"text-gray-700"}`,children:n.message})]}),n.responses&&n.responses.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:`font-medium mb-4 ${s?"text-white":"text-gray-900"}`,children:["Previous Responses (",n.responses.length,")"]}),e.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:n.responses.map((t,r)=>{var i;return e.jsxs("div",{className:`p-4 rounded-lg border-l-4 ${s?"bg-blue-900/20 border-blue-400":"bg-blue-50 border-blue-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(U,{className:`h-4 w-4 ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`text-sm font-medium ${s?"text-blue-400":"text-blue-600"}`,children:t.respondedBy}),e.jsx("span",{className:`text-xs ${s?"text-blue-300":"text-blue-500"}`,children:L((i=t.respondedAt)!=null&&i.toDate?t.respondedAt.toDate():t.respondedAt)})]}),e.jsx("p",{className:`text-sm ${s?"text-blue-200":"text-blue-700"}`,children:t.message})]},r)})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-300":"text-gray-700"}`,children:"Your Response"}),e.jsx("textarea",{value:v,onChange:t=>I(t.target.value),rows:6,placeholder:"Type your response to the user...",className:`w-full px-3 py-2 rounded-lg border ${s?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"} focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none`})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{onClick:()=>b(!1),className:`px-4 py-2 rounded-lg transition-colors ${s?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:"Cancel"}),e.jsx("button",{onClick:ae,disabled:!v.trim()||T,className:"px-4 py-2 rounded-lg transition-colors disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white",children:T?"Sending...":"Send Response"})]})]})})})]})})};export{ze as default};
