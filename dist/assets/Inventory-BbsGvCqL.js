import{u as j,r as n,j as e,L as d,c as N,d as o,g as b,f as k,b as g,k as v}from"./index-CFL3WSdy.js";const $=()=>{const{darkMode:s}=j(),[i,c]=n.useState([]),[u,l]=n.useState(!0),[x,f]=n.useState(null);n.useEffect(()=>{(async()=>{try{l(!0);const r=N(o,"products"),y=(await b(r)).docs.map(h=>({id:h.id,...h.data()}));c(y),l(!1)}catch(r){console.error("Error fetching products:",r),f("Failed to load products"),l(!1)}})()},[]);const p=async t=>{if(window.confirm("Delete this product?"))try{await v(g(o,"products",t)),c(i.filter(r=>r.id!==t))}catch{alert("Failed to delete product")}},m=async(t,r)=>{try{await k(g(o,"products",t),{stock:r}),c(i.map(a=>a.id===t?{...a,stock:r}:a))}catch{alert("Failed to update stock")}};return u?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):x?e.jsx("div",{className:"p-8",children:e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:x})}):e.jsxs("div",{className:`container mx-auto px-4 py-8 ${s?"text-white":"text-gray-900"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Inventory"}),e.jsx(d,{to:"/catalog",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",children:"Browse Catalog"})]}),i.length===0?e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg shadow p-8 text-center`,children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No products found"}),e.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Add some products to get started."})]}):e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg shadow overflow-hidden`,children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:s?"bg-gray-700":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:`divide-y ${s?"divide-gray-700":"divide-gray-200"}`,children:i.map(t=>e.jsxs("tr",{className:s?"hover:bg-gray-700":"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{to:`/products/${t.id}`,className:"flex-shrink-0 mr-4",children:e.jsx("div",{className:"h-10 w-10 bg-gray-200 rounded-md flex items-center justify-center hover:scale-105 transition-transform",children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.name,className:"h-10 w-10 rounded-md object-cover"}):e.jsx("span",{className:"text-gray-400",children:"ðŸ“¦"})})}),e.jsxs("div",{children:[e.jsx(d,{to:`/products/${t.id}`,className:"text-sm font-medium hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:t.name}),e.jsxs("div",{className:`text-sm ${s?"text-gray-400":"text-gray-500"}`,children:["SKU: ",t.sku||"N/A"]})]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:t.category||"Uncategorized"}),e.jsxs("td",{className:"px-6 py-4 text-sm",children:["$",Number(t.price||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t.stock<=5?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":t.stock<=20?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"}`,children:t.stock||0}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>m(t.id,Math.max(0,(t.stock||0)-1)),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 text-sm font-medium",children:"-"}),e.jsx("button",{onClick:()=>m(t.id,(t.stock||0)+1),className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-sm font-medium",children:"+"})]})]})}),e.jsx("td",{className:"px-6 py-4 text-right text-sm",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(d,{to:`/products/${t.id}`,className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 font-medium",children:"View"}),e.jsx("span",{className:`${s?"text-gray-600":"text-gray-300"}`,children:"|"}),e.jsx(d,{to:`/inventory/${t.id}`,className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Edit"}),e.jsx("span",{className:`${s?"text-gray-600":"text-gray-300"}`,children:"|"}),e.jsx("button",{onClick:()=>p(t.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 font-medium",children:"Delete"})]})})]},t.id))})]})})]})};export{$ as default};
