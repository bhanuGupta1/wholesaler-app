import{u as U,r as v,f as z,b as P,d as S,h as R,j as e,L as $,c as A,g as L}from"./index-CFL3WSdy.js";const B=({data:s,title:t,description:j,color:m,darkMode:c,type:y="bar"})=>{if(!s||s.length===0)return e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`text-sm font-medium ${c?"text-gray-300":"text-gray-700"} mb-1`,children:t}),e.jsx("p",{className:`text-xs ${c?"text-gray-400":"text-gray-500"} mb-3`,children:"No data available"})]});const n=Math.max(...s.map(g=>g.value)),f=s.reduce((g,d)=>g+d.value,0);return e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`text-sm font-medium ${c?"text-gray-300":"text-gray-700"} mb-1`,children:t}),j&&e.jsx("p",{className:`text-xs ${c?"text-gray-400":"text-gray-500"} mb-3`,children:j}),y==="pie"?e.jsx("div",{className:"space-y-2",children:s.map((g,d)=>{const h=(g.value/f*100).toFixed(1);return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full bg-${m}-${500+d*100} mr-2`}),e.jsx("span",{className:`text-xs ${c?"text-gray-400":"text-gray-500"}`,children:g.name})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:`ml-2 text-xs font-medium ${c?"text-gray-300":"text-gray-700"}`,children:[g.value," (",h,"%)"]})})]},d)})}):e.jsx("div",{className:"space-y-2",children:s.map((g,d)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`text-xs w-16 ${c?"text-gray-400":"text-gray-500"}`,children:g.name}),e.jsx("div",{className:"flex-1 ml-2",children:e.jsx("div",{className:`h-4 rounded-full bg-${m}-${c?"900/30":"100"} overflow-hidden`,children:e.jsx("div",{className:`h-4 rounded-full bg-${m}-${c?"500":"600"} transition-all duration-500`,style:{width:`${g.value/n*100}%`}})})}),e.jsx("span",{className:`ml-2 text-xs font-medium ${c?"text-gray-300":"text-gray-700"}`,children:typeof g.value=="number"&&g.value>1e3?`$${(g.value/1e3).toFixed(1)}k`:g.value})]},d))})]})},_=({products:s,darkMode:t,onBulkRestock:j})=>{const[m,c]=v.useState(new Set),[y,n]=v.useState(50),[f,g]=v.useState(!1),d=s.filter(o=>o.stock<=10),h=s.filter(o=>o.stock<=3),b=o=>{const a=new Set(m);a.has(o)?a.delete(o):a.add(o),c(a)},u=()=>{m.size===d.length?c(new Set):c(new Set(d.map(o=>o.id)))},p=async()=>{if(m.size!==0){g(!0);try{await j(Array.from(m),y),c(new Set)}finally{g(!1)}}};return d.length===0?e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-lg overflow-hidden border`,children:[e.jsx("div",{className:`px-6 py-4 border-b ${t?"border-gray-700":"border-gray-100"}`,children:e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-800"}`,children:"Stock Alerts"})}),e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"✅"}),e.jsx("p",{className:`${t?"text-gray-300":"text-gray-600"}`,children:"All products are well stocked!"})]})]}):e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-lg overflow-hidden border`,children:[e.jsxs("div",{className:`px-6 py-4 border-b ${t?"border-gray-700":"border-gray-100"} flex justify-between items-center`,children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-800"}`,children:"Stock Alerts"}),e.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:[h.length," critical • ",d.length," total low stock"]})]}),m.size>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",value:y,onChange:o=>n(parseInt(o.target.value)||0),className:`w-20 px-2 py-1 text-sm rounded ${t?"bg-gray-700 border-gray-600 text-gray-200":"bg-white border-gray-300"} border`,min:"1",placeholder:"50"}),e.jsx("button",{onClick:p,disabled:f,className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 disabled:opacity-50",children:f?"Restocking...":`Restock ${m.size}`})]})]}),e.jsx("div",{className:`px-6 py-3 border-b ${t?"border-gray-700 bg-gray-700":"border-gray-100 bg-gray-50"}`,children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:m.size===d.length&&d.length>0,onChange:u,className:"mr-2"}),e.jsx("span",{className:`text-sm ${t?"text-gray-300":"text-gray-700"}`,children:"Select all low stock items"})]})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:d.map(o=>e.jsx("div",{className:`p-4 border-b ${t?"border-gray-700":"border-gray-100"} hover:bg-gray-50 dark:hover:bg-gray-700`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:m.has(o.id),onChange:()=>b(o.id),className:"mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:o.name}),e.jsxs("div",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:[o.category," • $",o.price]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${o.stock<=3?t?"bg-red-900/30 text-red-400":"bg-red-100 text-red-800":t?"bg-yellow-900/30 text-yellow-400":"bg-yellow-100 text-yellow-800"}`,children:[o.stock," left"]}),e.jsx($,{to:`/inventory/${o.id}`,className:`text-sm ${t?"text-indigo-400 hover:text-indigo-300":"text-indigo-600 hover:text-indigo-800"} font-medium`,children:"Edit"})]})]})},o.id))}),e.jsx("div",{className:`px-6 py-3 border-t ${t?"border-gray-700 bg-gray-700":"border-gray-100 bg-gray-50"}`,children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>c(new Set(h.map(o=>o.id))),className:"text-sm bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",children:["Select Critical (",h.length,")"]}),e.jsx("button",{onClick:()=>{const o=d.map(a=>({product:a.name,currentStock:a.stock,suggestedOrder:Math.max(50,a.stock*5)}));console.log("Purchase order suggestions:",o)},className:"text-sm bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700",children:"Generate Orders"})]})})]})},G=({orders:s,darkMode:t,onUpdateOrderStatus:j,onBulkUpdate:m})=>{const[c,y]=v.useState("pending"),[n,f]=v.useState(new Set),[g,d]=v.useState(null),[h,b]=v.useState(!1),u=v.useMemo(()=>c==="all"?s:s.filter(r=>r.status===c),[s,c]),p={pending:s.filter(r=>r.status==="pending").length,processing:s.filter(r=>r.status==="processing").length,completed:s.filter(r=>r.status==="completed").length,cancelled:s.filter(r=>r.status==="cancelled").length},o=r=>{const l=new Set(n);l.has(r)?l.delete(r):l.add(r),f(l)},a=()=>{n.size===u.length?f(new Set):f(new Set(u.map(r=>r.id)))},x=async r=>{if(n.size!==0){b(!0);try{await m(Array.from(n),r),f(new Set)}finally{b(!1)}}},i=async(r,l)=>{if(g!==r){d(r);try{await j(r,l)}catch(O){console.error("Failed to update order status:",O)}finally{d(null)}}};return e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-lg overflow-hidden border`,children:[e.jsxs("div",{className:`px-6 py-4 border-b ${t?"border-gray-700":"border-gray-100"} flex justify-between items-center`,children:[e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-800"}`,children:"Order Processing"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[n.size>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-sm ${t?"text-gray-300":"text-gray-600"}`,children:[n.size," selected"]}),e.jsx("button",{onClick:()=>x("processing"),disabled:h,className:"bg-blue-600 text-white px-2 py-1 rounded text-xs hover:bg-blue-700 disabled:opacity-50",children:"Process"}),e.jsx("button",{onClick:()=>x("completed"),disabled:h,className:"bg-green-600 text-white px-2 py-1 rounded text-xs hover:bg-green-700 disabled:opacity-50",children:"Complete"}),e.jsx("button",{onClick:()=>x("cancelled"),disabled:h,className:"bg-red-600 text-white px-2 py-1 rounded text-xs hover:bg-red-700 disabled:opacity-50",children:"Cancel"})]}),e.jsxs("select",{value:c,onChange:r=>y(r.target.value),className:`px-3 py-1 rounded-md text-sm ${t?"bg-gray-700 border-gray-600 text-gray-200":"bg-white border-gray-300"} border focus:ring-indigo-500 focus:border-indigo-500`,children:[e.jsxs("option",{value:"pending",children:["Pending (",p.pending,")"]}),e.jsxs("option",{value:"processing",children:["Processing (",p.processing,")"]}),e.jsxs("option",{value:"completed",children:["Completed (",p.completed,")"]}),e.jsxs("option",{value:"cancelled",children:["Cancelled (",p.cancelled,")"]}),e.jsxs("option",{value:"all",children:["All Orders (",s.length,")"]})]})]})]}),e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-yellow-400":"text-yellow-600"}`,children:p.pending}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Pending"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-blue-400":"text-blue-600"}`,children:p.processing}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Processing"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-green-400":"text-green-600"}`,children:p.completed}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Completed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-red-400":"text-red-600"}`,children:p.cancelled}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Cancelled"})]})]})}),u.length>0&&e.jsx("div",{className:`px-6 py-3 border-b ${t?"border-gray-700 bg-gray-700":"border-gray-100 bg-gray-50"}`,children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n.size===u.length&&u.length>0,onChange:a,className:"mr-2"}),e.jsxs("span",{className:`text-sm ${t?"text-gray-300":"text-gray-700"}`,children:["Select all ",c," orders"]})]})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:u.length>0?e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:u.slice(0,15).map(r=>e.jsx("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n.has(r.id),onChange:()=>o(r.id),className:"mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:["Order #",r.id.slice(0,8)]}),e.jsxs("div",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:[r.customerName," • $",r.total.toFixed(2)]}),e.jsx("div",{className:`text-xs ${t?"text-gray-500":"text-gray-400"}`,children:r.createdAt.toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:r.status,onChange:l=>i(r.id,l.target.value),disabled:g===r.id,className:`text-xs rounded-md ${t?"bg-gray-700 border-gray-600 text-gray-200":"bg-white border-gray-300"} border focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50`,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),g===r.id&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-indigo-500"}),e.jsx($,{to:`/orders/${r.id}`,className:`text-sm ${t?"text-indigo-400 hover:text-indigo-300":"text-indigo-600 hover:text-indigo-800"} font-medium`,children:"View"})]})]})},r.id))}):e.jsx("div",{className:"p-6 text-center",children:e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"No orders found for the selected status."})})}),e.jsx("div",{className:`border-t ${t?"border-gray-700 bg-gray-700":"border-gray-100 bg-gray-50"} px-6 py-3`,children:e.jsxs($,{to:"/orders",className:`text-sm font-medium ${t?"text-indigo-400 hover:text-indigo-300":"text-indigo-600 hover:text-indigo-800"} flex items-center justify-center`,children:["View All Orders",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ml-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})},H=({stats:s,darkMode:t})=>{var g,d;const j=()=>{const h=[],b=new Date;for(let u=6;u>=0;u--){const p=new Date(b);p.setDate(p.getDate()-u);const o=s.allOrders.filter(x=>new Date(x.createdAt).toDateString()===p.toDateString()),a=o.reduce((x,i)=>x+i.total,0);h.push({name:p.toLocaleDateString("en-US",{weekday:"short"}),value:Math.round(a),orders:o.length})}return h},m=()=>{if(!s.allProducts||s.allProducts.length===0)return[{name:"No Data",value:0}];const h={};return s.allProducts.forEach(b=>{const u=b.category||"Other",p=(b.price||0)*Math.max(0,100-(b.stock||0));h[u]=(h[u]||0)+p}),Object.entries(h).map(([b,u])=>({name:b,value:Math.round(u)})).sort((b,u)=>u.value-b.value).slice(0,5)},c=j(),y=m(),n=Math.round(s.revenue/30),f=s.totalOrders>0?Math.round((s.totalOrders-s.pendingOrders)/s.totalOrders*100):0;return e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-lg overflow-hidden border`,children:[e.jsxs("div",{className:`px-6 py-4 border-b ${t?"border-gray-700":"border-gray-100"}`,children:[e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-800"}`,children:"Performance Analytics"}),e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Real-time data from your business"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("div",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Daily Avg Revenue"}),e.jsxs("div",{className:`text-2xl font-bold ${t?"text-green-400":"text-green-600"}`,children:["$",n]}),e.jsx("div",{className:`text-xs ${t?"text-gray-500":"text-gray-400"} mt-1`,children:"Based on last 30 days"})]}),e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("div",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Order Completion"}),e.jsxs("div",{className:`text-2xl font-bold ${t?"text-blue-400":"text-blue-600"}`,children:[f,"%"]}),e.jsxs("div",{className:`text-xs ${t?"text-gray-500":"text-gray-400"} mt-1`,children:[s.totalOrders-s.pendingOrders," of ",s.totalOrders," orders"]})]})]}),e.jsx(B,{title:"7-Day Sales Trend",description:`Total revenue: $${c.reduce((h,b)=>h+b.value,0)}`,data:c,color:"indigo",darkMode:t}),e.jsx(B,{title:"Revenue by Category",description:"Estimated revenue based on product sales",data:y,color:"green",darkMode:t,type:"pie"}),e.jsxs("div",{className:`mt-4 p-3 rounded-lg ${t?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-100"} border`,children:[e.jsx("div",{className:`text-sm font-medium ${t?"text-blue-300":"text-blue-800"} mb-1`,children:"📊 Business Insights"}),e.jsxs("div",{className:`text-xs ${t?"text-blue-200":"text-blue-700"} space-y-1`,children:[e.jsxs("div",{children:["• Best performing day: ",(g=c.reduce((h,b)=>b.value>h.value?b:h,c[0]))==null?void 0:g.name]}),e.jsxs("div",{children:["• Top category: ",((d=y[0])==null?void 0:d.name)||"N/A"]}),e.jsxs("div",{children:["• Avg order value: $",s.totalOrders>0?Math.round(s.revenue/s.totalOrders):0]})]})]})]})]})},V=({products:s,darkMode:t})=>{const[j,m]=v.useState("all"),c=v.useMemo(()=>{switch(j){case"low_stock":return s.filter(n=>n.stock<=10);case"out_of_stock":return s.filter(n=>n.stock===0);case"in_stock":return s.filter(n=>n.stock>10);default:return s}},[s,j]),y={total:s.length,lowStock:s.filter(n=>n.stock<=10&&n.stock>0).length,outOfStock:s.filter(n=>n.stock===0).length,inStock:s.filter(n=>n.stock>10).length};return e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-lg overflow-hidden border`,children:[e.jsxs("div",{className:`px-6 py-4 border-b ${t?"border-gray-700":"border-gray-100"} flex justify-between items-center`,children:[e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-800"}`,children:"Inventory Overview"}),e.jsxs("select",{value:j,onChange:n=>m(n.target.value),className:`px-3 py-1 rounded-md text-sm ${t?"bg-gray-700 border-gray-600 text-gray-200":"bg-white border-gray-300"} border focus:ring-indigo-500 focus:border-indigo-500`,children:[e.jsxs("option",{value:"all",children:["All Products (",y.total,")"]}),e.jsxs("option",{value:"in_stock",children:["In Stock (",y.inStock,")"]}),e.jsxs("option",{value:"low_stock",children:["Low Stock (",y.lowStock,")"]}),e.jsxs("option",{value:"out_of_stock",children:["Out of Stock (",y.outOfStock,")"]})]})]}),e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-blue-400":"text-blue-600"}`,children:y.total}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-green-400":"text-green-600"}`,children:y.inStock}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"In Stock"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-yellow-400":"text-yellow-600"}`,children:y.lowStock}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Low Stock"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-red-400":"text-red-600"}`,children:y.outOfStock}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Out of Stock"})]})]})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:c.length>0?e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:c.slice(0,10).map(n=>e.jsx("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:n.name}),e.jsxs("div",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:[n.category," • $",n.price]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.stock>10?t?"bg-green-900/30 text-green-400":"bg-green-100 text-green-800":n.stock>0?t?"bg-yellow-900/30 text-yellow-400":"bg-yellow-100 text-yellow-800":t?"bg-red-900/30 text-red-400":"bg-red-100 text-red-800"}`,children:[n.stock," units"]}),e.jsx($,{to:`/inventory/${n.id}`,className:`text-sm ${t?"text-indigo-400 hover:text-indigo-300":"text-indigo-600 hover:text-indigo-800"} font-medium`,children:"Edit"})]})]})},n.id))}):e.jsx("div",{className:"p-6 text-center",children:e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"No products found for the selected filter."})})}),e.jsx("div",{className:`border-t ${t?"border-gray-700 bg-gray-700":"border-gray-100 bg-gray-50"} px-6 py-3`,children:e.jsxs($,{to:"/inventory",className:`text-sm font-medium ${t?"text-indigo-400 hover:text-indigo-300":"text-indigo-600 hover:text-indigo-800"} flex items-center justify-center`,children:["Manage Full Inventory",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ml-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})},J=()=>{const{darkMode:s}=U(),[t,j]=v.useState({totalProducts:0,totalOrders:0,lowStockProducts:0,allOrders:[],allProducts:[],todayOrders:0,revenue:0,pendingOrders:0}),[m,c]=v.useState(!0),[y,n]=v.useState(null),[f,g]=v.useState(null),d=(a,x="success")=>{g({message:a,type:x}),setTimeout(()=>g(null),3e3)},h=async()=>{try{c(!0);const a=A(S,"products"),i=(await L(a)).docs.map(N=>({id:N.id,...N.data()})),r=i.filter(N=>N.stock<=10).length,l=A(S,"orders"),k=(await L(l)).docs.map(N=>{var C;const w=N.data();return{id:N.id,customerName:w.customerName||"Unknown Customer",total:w.total||0,status:w.status||"pending",createdAt:((C=w.createdAt)==null?void 0:C.toDate())||new Date}}),D=new Date;D.setHours(0,0,0,0);const E=k.filter(N=>{const w=new Date(N.createdAt);return w.setHours(0,0,0,0),w.getTime()===D.getTime()}).length,F=k.reduce((N,w)=>N+w.total,0),T=k.filter(N=>N.status==="pending").length;j({totalProducts:i.length,totalOrders:k.length,lowStockProducts:r,allOrders:k,allProducts:i,todayOrders:E,revenue:F,pendingOrders:T}),c(!1)}catch(a){console.error("Error fetching manager data:",a),n("Failed to load manager data"),c(!1)}};v.useEffect(()=>{h()},[]);const b=v.useCallback(async(a,x)=>{try{await z(P(S,"orders",a),{status:x,updatedAt:new Date}),j(i=>{var r;return{...i,allOrders:i.allOrders.map(l=>l.id===a?{...l,status:x}:l),pendingOrders:x==="pending"?i.pendingOrders+1:((r=i.allOrders.find(l=>l.id===a))==null?void 0:r.status)==="pending"?i.pendingOrders-1:i.pendingOrders}}),d(`Order ${a.slice(0,8)} updated to ${x}`,"success")}catch(i){throw console.error("Error updating order status:",i),d("Failed to update order status","error"),i}},[]),u=v.useCallback(async(a,x)=>{try{const i=R(S);a.forEach(r=>{const l=P(S,"orders",r);i.update(l,{status:x,updatedAt:new Date})}),await i.commit(),j(r=>({...r,allOrders:r.allOrders.map(l=>a.includes(l.id)?{...l,status:x}:l),pendingOrders:r.allOrders.filter(l=>a.includes(l.id)?x==="pending":l.status==="pending").length})),d(`${a.length} orders updated to ${x}`,"success")}catch(i){throw console.error("Error bulk updating orders:",i),d("Failed to bulk update orders","error"),i}},[]),p=v.useCallback(async(a,x)=>{try{const i=R(S);a.forEach(r=>{const l=P(S,"products",r);i.update(l,{stock:x,lastRestocked:new Date})}),await i.commit(),j(r=>({...r,allProducts:r.allProducts.map(l=>a.includes(l.id)?{...l,stock:x}:l),lowStockProducts:r.allProducts.filter(l=>a.includes(l.id)?x<=10:l.stock<=10).length})),d(`${a.length} products restocked with ${x} units each`,"success")}catch(i){throw console.error("Error bulk restocking:",i),d("Failed to bulk restock products","error"),i}},[]),o=()=>{try{const a={generatedAt:new Date().toISOString(),summary:{totalRevenue:t.revenue,totalOrders:t.totalOrders,pendingOrders:t.pendingOrders,completedOrders:t.allOrders.filter(l=>l.status==="completed").length,todayOrders:t.todayOrders,lowStockItems:t.lowStockProducts},orderBreakdown:{pending:t.allOrders.filter(l=>l.status==="pending").length,processing:t.allOrders.filter(l=>l.status==="processing").length,completed:t.allOrders.filter(l=>l.status==="completed").length,cancelled:t.allOrders.filter(l=>l.status==="cancelled").length},inventoryStatus:{totalProducts:t.totalProducts,inStock:t.allProducts.filter(l=>l.stock>10).length,lowStock:t.allProducts.filter(l=>l.stock<=10&&l.stock>0).length,outOfStock:t.allProducts.filter(l=>l.stock===0).length},salesTrends:{last7DaysRevenue:t.allOrders.filter(l=>(new Date-l.createdAt)/864e5<=7).reduce((l,O)=>l+O.total,0)}},x=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),i=URL.createObjectURL(x),r=document.createElement("a");r.href=i,r.download=`manager-report-${new Date().toISOString().split("T")[0]}.json`,r.click(),URL.revokeObjectURL(i),d("Report downloaded successfully","success")}catch{d("Failed to generate report","error")}};return m?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):y?e.jsx("div",{className:`container mx-auto px-4 py-8 ${s?"text-white":"text-gray-800"}`,children:e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-red-500",children:y})})}):e.jsxs("div",{className:`container mx-auto px-4 py-8 max-w-7xl ${s?"text-gray-200":"text-gray-800"}`,children:[f&&e.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${f.type==="success"?s?"bg-green-900 border-green-700 text-green-100":"bg-green-100 border-green-400 text-green-800":s?"bg-red-900 border-red-700 text-red-100":"bg-red-100 border-red-400 text-red-800"} border`,children:f.message}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${s?"text-white":"text-gray-900"}`,children:"Manager Dashboard"}),e.jsx("p",{className:`mt-1 text-sm ${s?"text-gray-400":"text-gray-500"}`,children:"Real-time operations management with bulk actions and smart alerts"})]}),e.jsx("button",{onClick:h,disabled:m,className:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50 transition-colors",children:m?"Refreshing...":"Refresh Data"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[{title:"Total Revenue",value:`$${t.revenue.toFixed(2)}`,icon:"💰",color:"green"},{title:"Today's Orders",value:t.todayOrders,icon:"📋",color:"blue"},{title:"Pending Orders",value:t.pendingOrders,icon:"⏳",color:"yellow"},{title:"Low Stock Items",value:t.lowStockProducts,icon:"📦",color:"red"}].map((a,x)=>e.jsx("div",{className:`${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-md border p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-500"} uppercase tracking-wide`,children:a.title}),e.jsx("p",{className:`text-2xl font-bold ${s?"text-white":"text-gray-900"} mt-1`,children:a.value})]}),e.jsx("div",{className:`text-3xl p-3 rounded-full bg-${a.color}-${s?"900/30":"100"}`,children:a.icon})]})},x))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(V,{products:t.allProducts,darkMode:s}),e.jsx(G,{orders:t.allOrders,darkMode:s,onUpdateOrderStatus:b,onBulkUpdate:u})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(_,{products:t.allProducts,darkMode:s,onBulkRestock:p}),e.jsx(H,{stats:t,darkMode:s}),e.jsxs("div",{className:`${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl shadow-lg overflow-hidden border`,children:[e.jsx("div",{className:`px-6 py-4 border-b ${s?"border-gray-700":"border-gray-100"}`,children:e.jsx("h2",{className:`text-xl font-bold ${s?"text-white":"text-gray-800"}`,children:"Quick Actions"})}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsx($,{to:"/inventory",className:"block w-full bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors text-center",children:"Manage Inventory"}),e.jsx($,{to:"/orders",className:"block w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors text-center",children:"Process Orders"}),e.jsx($,{to:"/create-order",className:"block w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-center",children:"New Order"}),e.jsx("button",{onClick:o,className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors",children:"Generate Report"}),e.jsx("button",{onClick:()=>d("Team meeting scheduled for tomorrow at 2 PM","success"),className:"w-full bg-orange-600 text-white py-2 px-4 rounded-lg hover:bg-orange-700 transition-colors",children:"Schedule Team Meeting"})]})]})]})]})]})};export{J as default};
